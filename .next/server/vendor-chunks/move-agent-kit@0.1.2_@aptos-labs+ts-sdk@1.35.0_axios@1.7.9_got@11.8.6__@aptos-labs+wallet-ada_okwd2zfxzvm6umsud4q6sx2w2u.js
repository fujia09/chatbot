"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/move-agent-kit@0.1.2_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_okwd2zfxzvm6umsud4q6sx2w2u";
exports.ids = ["vendor-chunks/move-agent-kit@0.1.2_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_okwd2zfxzvm6umsud4q6sx2w2u"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/move-agent-kit@0.1.2_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_okwd2zfxzvm6umsud4q6sx2w2u/node_modules/move-agent-kit/dist/index.mjs":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/move-agent-kit@0.1.2_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_okwd2zfxzvm6umsud4q6sx2w2u/node_modules/move-agent-kit/dist/index.mjs ***!
  \************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentRuntime: () => (/* binding */ AgentRuntime),\n/* harmony export */   AmnisStakeTool: () => (/* binding */ AmnisStakeTool),\n/* harmony export */   AmnisWithdrawStakeTool: () => (/* binding */ AmnisWithdrawStakeTool),\n/* harmony export */   AptosAccountAddressTool: () => (/* binding */ AptosAccountAddressTool),\n/* harmony export */   AptosBalanceTool: () => (/* binding */ AptosBalanceTool),\n/* harmony export */   AptosBurnTokenTool: () => (/* binding */ AptosBurnTokenTool),\n/* harmony export */   AptosCreateTokenTool: () => (/* binding */ AptosCreateTokenTool),\n/* harmony export */   AptosGetTokenDetailTool: () => (/* binding */ AptosGetTokenDetailTool),\n/* harmony export */   AptosGetTokenPriceTool: () => (/* binding */ AptosGetTokenPriceTool),\n/* harmony export */   AptosMintTokenTool: () => (/* binding */ AptosMintTokenTool),\n/* harmony export */   AptosTransactionTool: () => (/* binding */ AptosTransactionTool),\n/* harmony export */   AptosTransferTokenTool: () => (/* binding */ AptosTransferTokenTool),\n/* harmony export */   AriesBorrowTool: () => (/* binding */ AriesBorrowTool),\n/* harmony export */   AriesCreateProfileTool: () => (/* binding */ AriesCreateProfileTool),\n/* harmony export */   AriesLendTool: () => (/* binding */ AriesLendTool),\n/* harmony export */   AriesRepayTool: () => (/* binding */ AriesRepayTool),\n/* harmony export */   AriesWithdrawTool: () => (/* binding */ AriesWithdrawTool),\n/* harmony export */   BaseSigner: () => (/* binding */ BaseSigner),\n/* harmony export */   EchelonBorrowTokenTool: () => (/* binding */ EchelonBorrowTokenTool),\n/* harmony export */   EchelonLendTokenTool: () => (/* binding */ EchelonLendTokenTool),\n/* harmony export */   EchelonRepayTokenTool: () => (/* binding */ EchelonRepayTokenTool),\n/* harmony export */   EchelonWithdrawTokenTool: () => (/* binding */ EchelonWithdrawTokenTool),\n/* harmony export */   EchoStakeTokenTool: () => (/* binding */ EchoStakeTokenTool),\n/* harmony export */   EchoUnstakeTokenTool: () => (/* binding */ EchoUnstakeTokenTool),\n/* harmony export */   JouleBorrowTokenTool: () => (/* binding */ JouleBorrowTokenTool),\n/* harmony export */   JouleGetPoolDetails: () => (/* binding */ JouleGetPoolDetails),\n/* harmony export */   JouleGetUserAllPositions: () => (/* binding */ JouleGetUserAllPositions),\n/* harmony export */   JouleGetUserPosition: () => (/* binding */ JouleGetUserPosition),\n/* harmony export */   JouleLendTokenTool: () => (/* binding */ JouleLendTokenTool),\n/* harmony export */   JouleRepayTokenTool: () => (/* binding */ JouleRepayTokenTool),\n/* harmony export */   JouleWithdrawTokenTool: () => (/* binding */ JouleWithdrawTokenTool),\n/* harmony export */   LiquidSwapAddLiquidityTool: () => (/* binding */ LiquidSwapAddLiquidityTool),\n/* harmony export */   LiquidSwapCreatePoolTool: () => (/* binding */ LiquidSwapCreatePoolTool),\n/* harmony export */   LiquidSwapRemoveLiquidityTool: () => (/* binding */ LiquidSwapRemoveLiquidityTool),\n/* harmony export */   LiquidSwapSwapTool: () => (/* binding */ LiquidSwapSwapTool),\n/* harmony export */   LocalSigner: () => (/* binding */ LocalSigner),\n/* harmony export */   OpenAICreateImageTool: () => (/* binding */ OpenAICreateImageTool),\n/* harmony export */   PanoraSwapTool: () => (/* binding */ PanoraSwapTool),\n/* harmony export */   ThalaAddLiquidityTool: () => (/* binding */ ThalaAddLiquidityTool),\n/* harmony export */   ThalaMintMODTool: () => (/* binding */ ThalaMintMODTool),\n/* harmony export */   ThalaRedeemMODTool: () => (/* binding */ ThalaRedeemMODTool),\n/* harmony export */   ThalaRemoveLiquidityTool: () => (/* binding */ ThalaRemoveLiquidityTool),\n/* harmony export */   ThalaStakeTokenTool: () => (/* binding */ ThalaStakeTokenTool),\n/* harmony export */   ThalaUnstakeTokenTool: () => (/* binding */ ThalaUnstakeTokenTool),\n/* harmony export */   WalletSigner: () => (/* binding */ WalletSigner),\n/* harmony export */   createAptosTools: () => (/* binding */ createAptosTools),\n/* harmony export */   parseJson: () => (/* binding */ parseJson)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(rsc)/./node_modules/.pnpm/@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6/node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _pythnetwork_pyth_aptos_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pythnetwork/pyth-aptos-js */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+pyth-aptos-js@1.4.2_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/pyth-aptos-js/lib/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/.pnpm/axios@1.7.9/node_modules/axios/lib/axios.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2/node_modules/openai/index.mjs\");\n/* harmony import */ var langchain_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! langchain/tools */ \"(rsc)/./node_modules/.pnpm/langchain@0.3.19_@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_b_n5hmvd5wk3eoywbtxti7xivvxu/node_modules/langchain/tools.js\");\n// src/signers/base-signer.ts\nvar BaseSigner = class {\n  constructor(account, aptos) {\n    this.account = account;\n    this.aptos = aptos;\n  }\n  getAddress() {\n    return this.account.accountAddress;\n  }\n};\n\n// src/signers/local-signer.ts\n\nvar LocalSigner = class extends BaseSigner {\n  constructor(account, network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET) {\n    const config = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AptosConfig({ network });\n    const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Aptos(config);\n    super(account, aptos);\n  }\n  async signTransaction(transaction) {\n    const senderAuthenticator = this.aptos.transaction.sign({\n      signer: this.account,\n      transaction\n    });\n    return {\n      senderAuthenticator\n    };\n  }\n  async sendTransaction(transaction) {\n    const signedTx = await this.signTransaction(transaction);\n    const submittedTx = await this.aptos.transaction.submit.simple({\n      transaction,\n      senderAuthenticator: signedTx.senderAuthenticator\n    });\n    const result = await this.aptos.waitForTransaction({\n      transactionHash: submittedTx.hash\n    });\n    return result.hash;\n  }\n  async signMessage(message) {\n    const signedMessage = this.account.signWithAuthenticator(message);\n    return signedMessage.toString();\n  }\n};\n\n// src/signers/wallet-signer.ts\n\nvar WalletSigner = class extends BaseSigner {\n  constructor(account, wallet, network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET) {\n    const config = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AptosConfig({ network });\n    const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Aptos(config);\n    super(account, aptos);\n    this.wallet = wallet;\n  }\n  getAddress() {\n    const walletAddress = this.wallet?.account?.address;\n    return walletAddress ? _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.fromString(walletAddress) : this.account.accountAddress;\n  }\n  async signTransaction(transaction) {\n    const senderAuthenticator = await this.wallet.signTransaction(transaction);\n    return {\n      senderAuthenticator\n    };\n  }\n  async sendTransaction(transaction) {\n    const txHash = await this.wallet.signAndSubmitTransaction(transaction);\n    return txHash.hash;\n  }\n  async signMessage(message) {\n    return this.wallet.signMessage(message);\n  }\n};\n\n// src/agent.ts\n\n\n// src/constants/price-feed.ts\nvar priceFeed = [\n  \"0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a\",\n  \"0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b\",\n  \"0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b\",\n  \"0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5\",\n  \"0x9d4294bbcd1174d6f2003ec365831e64cc31d9f6f15a2b85399db8d5000960f6\",\n  \"0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5\",\n  \"0xc9d8b075a5c69303365ae23633d4e085199bf5c520a3b90fed1322a0342ffc33\",\n  \"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43\"\n];\n\n// src/tools/amnis/stake-token.ts\nasync function stakeTokens(agent, to, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::router::deposit_and_stake_entry\",\n        functionArguments: [amount, to.toString()]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token staking failed\");\n      throw new Error(\"Token staking failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token staking failed: ${error.message}`);\n  }\n}\n\n// src/tools/amnis/withdraw-stake.ts\nasync function unstakeTokens(agent, to, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::router::unstake_entry\",\n        functionArguments: [amount, to.toString()]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token unstaking failed\");\n      throw new Error(\"Token unstaking failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token unstaking failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/balance.ts\n\nasync function getBalance(agent, mint) {\n  try {\n    if (mint) {\n      let balance2;\n      if (mint.split(\"::\").length !== 3) {\n        const balances = await agent.aptos.getCurrentFungibleAssetBalances({\n          options: {\n            where: {\n              owner_address: {\n                _eq: agent.account.getAddress().toStringLong()\n              },\n              asset_type: { _eq: mint }\n            }\n          }\n        });\n        balance2 = balances[0].amount ?? 0;\n      } else {\n        balance2 = await agent.aptos.getAccountCoinAmount({\n          accountAddress: agent.account.getAddress(),\n          coinType: mint\n        });\n      }\n      return balance2;\n    }\n    const balance = await agent.aptos.getAccountAPTAmount({\n      accountAddress: agent.account.getAddress()\n    });\n    const convertedBalance = (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromOnChainToHumanReadable)(balance, 8);\n    return convertedBalance;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/burn-nft.ts\nasync function burnNFT(agent, mint) {\n  return \"\";\n}\n\n// src/tools/aptos/burn-token.ts\nasync function burnToken(agent, amount, mint) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::burn_fa\",\n        functionArguments: [mint, amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token burn failed\");\n      throw new Error(\"Token burn failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token burn failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/transfer-nft.ts\nasync function transferNFT(agent, to, mint) {\n  return \"\";\n}\n\n// src/tools/aptos/transfer-token.ts\nasync function transferTokens(agent, to, amount, mint) {\n  const COIN_STANDARD_DATA = {\n    function: \"0x1::coin::transfer\",\n    typeArguments: [mint],\n    functionArguments: [to.toString(), amount]\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x1::primary_fungible_store::transfer\",\n    typeArguments: [\"0x1::fungible_asset::Metadata\"],\n    functionArguments: [mint, to.toString(), amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: mint.split(\"::\").length === 3 ? COIN_STANDARD_DATA : FUNGIBLE_ASSET_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token transfer failed\");\n      throw new Error(\"Token transfer failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/mint-token.ts\nasync function mintToken(agent, to, mint, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::mint_to_address\",\n        functionArguments: [to.toString(), mint, amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token mint failed\");\n      throw new Error(\"Token mint failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token mint failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/create-token.ts\nasync function createToken(agent, name, symbol, iconURI, projectURI) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::create_fa_simple\",\n        functionArguments: [name, symbol, iconURI, projectURI]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token creation failed\");\n      throw new Error(\"Token creation failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      // @ts-ignore\n      token: signedTransaction.events[0].data.fa_obj.inner\n    };\n  } catch (error) {\n    throw new Error(`Token creation failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-transaction.ts\nasync function getTransaction(agent, hash) {\n  try {\n    const transaction = await agent.aptos.getTransactionByHash({\n      transactionHash: hash\n    });\n    return transaction;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-token-details.ts\n\nasync function getTokenDetails(tokenAddress) {\n  try {\n    const res = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(\n      \"https://raw.githubusercontent.com/PanoraExchange/Aptos-Tokens/refs/heads/main/token-list.json\"\n    );\n    const tokenData = await res.data;\n    if (!tokenAddress || tokenAddress === \"\") return tokenData[0];\n    const token = tokenData.find(\n      (tokenAddr) => (tokenAddr.tokenAddress || tokenAddr.faAddress).toLowerCase() === tokenAddress.toLowerCase()\n    );\n    if (!token && tokenAddress.includes(\"fa_to_coin_wrapper::WrappedUSDT\")) {\n      return tokenData.find(\n        (e) => e.faAddress === \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\"\n      );\n    }\n    if (!token) throw new Error(\"Cannot find token\");\n    return token;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-token-price.ts\nasync function getTokenPrice(query) {\n  try {\n    const assetDataResponse = await fetch(`https://hermes.pyth.network/v2/price_feeds?query=${query}&asset_type=crypto`);\n    const assetData = await assetDataResponse.json();\n    const formattedData = assetData.map((data) => {\n      return {\n        id: data.id,\n        displayName: data.attributes.display_symbol,\n        symbol: data.attributes.symbol\n      };\n    });\n    const assetIdArray = formattedData.map((data) => data.id);\n    if (assetIdArray.length === 0) {\n      throw new Error(\"No assets found for the given query\");\n    }\n    const assetPriceDataResponse = await fetch(\n      `https://hermes.pyth.network/v2/updates/price/latest?ids[]=${assetIdArray.join(\"&ids[]=\")}`\n    );\n    const assetPriceData = await assetPriceDataResponse.json();\n    const priceFeed2 = formattedData.map((data) => {\n      const priceData = assetPriceData.parsed.find((price) => price.id === data.id);\n      return {\n        ...data,\n        price: (Number(priceData.price.price) / 10 ** Math.abs(priceData.price.expo)).toLocaleString() || Number(priceData.price.price).toLocaleString()\n      };\n    });\n    return priceFeed2;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/lend.ts\nasync function lendToken(agent, amount, mint, positionId, newPosition, fungibleAsset) {\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, newPosition];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::lend\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::lend_fa\",\n    functionArguments: [positionId, mint.toString(), newPosition, amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token mint failed\");\n      throw new Error(\"Token mint failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      // @ts-ignore\n      positionId: signedTransaction.events[0].data.position_id\n    };\n  } catch (error) {\n    throw new Error(`Token mint failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/borrow.ts\nasync function borrowToken(agent, amount, mint, positionId, fungibleAsset) {\n  const pyth_update_data = await agent.getPythData();\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, pyth_update_data];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::borrow\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::borrow_fa\",\n    functionArguments: [positionId, mint.toString(), amount, pyth_update_data]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token borrow failed\");\n      throw new Error(\"Token borrow failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/repay.ts\nasync function repayToken(agent, amount, mint, positionId, fungibleAsset) {\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::repay\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::repay_fa\",\n    functionArguments: [positionId, mint.toString(), amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token repay failed\");\n      throw new Error(\"Token repay failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/withdraw.ts\nasync function withdrawToken(agent, amount, mint, positionId, fungibleAsset) {\n  const pyth_update_data = await agent.getPythData();\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, pyth_update_data];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::withdraw\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::withdraw_fa\",\n    functionArguments: [positionId, mint.toString(), amount, pyth_update_data]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token withdraw failed\");\n      throw new Error(\"Token withdraw failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/pool-detail.ts\nasync function getPoolDetails(agent, mint) {\n  try {\n    const allPoolDetailsResponse = await fetch(\"https://price-api.joule.finance/api/market\");\n    const allPoolDetails = await allPoolDetailsResponse.json();\n    const poolDetail = allPoolDetails.data.find((pool) => pool.asset.type.includes(mint));\n    if (!poolDetail) {\n      throw new Error(\"Pool not found\");\n    }\n    return {\n      assetName: poolDetail.asset.assetName,\n      tokenAddress: mint,\n      ltv: poolDetail.ltv,\n      decimals: poolDetail.asset.decimals,\n      marketSize: Number(poolDetail.marketSize) / poolDetail.asset.decimals,\n      totalBorrowed: Number(poolDetail.totalBorrowed) / poolDetail.asset.decimals,\n      depositApy: poolDetail.depositApy,\n      extraDepositApy: poolDetail.extraAPY.depositAPY,\n      borrowApy: poolDetail.borrowApy,\n      price: poolDetail.priceInfo.price\n    };\n  } catch (error) {\n    throw new Error(`Failed to get pool details: ${error.message}`);\n  }\n}\n\n// src/tools/joule/user-position.ts\nasync function getUserPosition(agent, userAddress, positionId) {\n  try {\n    const transaction = await agent.aptos.view({\n      payload: {\n        function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::user_position_details\",\n        functionArguments: [userAddress.toString(), positionId]\n      }\n    });\n    if (!transaction) {\n      throw new Error(\"Failed to fetch user position\");\n    }\n    return transaction;\n  } catch (error) {\n    throw new Error(`Failed to get user position: ${error.message}`);\n  }\n}\n\n// src/utils/clean-joule-all-positions-list.ts\nvar removeLastInterestRateIndex = (obj) => {\n  if (!obj || typeof obj !== \"object\") {\n    return obj;\n  }\n  if (Array.isArray(obj)) {\n    return obj.map((item) => removeLastInterestRateIndex(item));\n  }\n  return Object.entries(obj).reduce((acc, [key, value]) => {\n    if (key === \"last_interest_rate_index\") {\n      return acc;\n    }\n    acc[key] = removeLastInterestRateIndex(value);\n    return acc;\n  }, {});\n};\n\n// src/tools/joule/user-all-positions.ts\nasync function getUserAllPositions(agent, userAddress) {\n  try {\n    const transaction = await agent.aptos.view({\n      payload: {\n        function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::user_positions_map\",\n        functionArguments: [userAddress.toString()]\n      }\n    });\n    if (!transaction) {\n      throw new Error(\"Failed to fetch user all positions\");\n    }\n    const cleanedTransaction = removeLastInterestRateIndex(transaction);\n    return cleanedTransaction;\n  } catch (error) {\n    throw new Error(`Failed to get user all positions: ${error.message}`);\n  }\n}\n\n// src/tools/aries/create-profile.ts\nasync function createAriesProfile(agent) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::register_user\",\n        functionArguments: [\"Main account\"]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Create profile failed\");\n      throw new Error(\"Create profile failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Create profile failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/lend.ts\nasync function lendAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::deposit\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, false]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Lend failed\");\n      throw new Error(\"Lend failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Lend failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/borrow.ts\nasync function borrowAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::withdraw\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, true]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Borrow failed\");\n      throw new Error(\"Borrow failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/withdraw.ts\nasync function withdrawAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::withdraw\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, false]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Withdraw failed\");\n      throw new Error(\"Withdraw failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/repay.ts\nasync function repayAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::deposit\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, true]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Repay failed\");\n      throw new Error(\"Repay failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/lend.ts\nasync function lendTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::supply\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::supply_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Lend failed\");\n      throw new Error(\"Lend failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Lend failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/withdraw.ts\nasync function withdrawTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::withdraw\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::withdraw_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Withdraw failed\");\n      throw new Error(\"Withdraw failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/repay.ts\nasync function repayTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::repay\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::repay_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Repay failed\");\n      throw new Error(\"Repay failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/borrow.ts\nasync function borrowTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n  const COIN_STANDARD_DATA = {\n    function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::borrow\",\n    typeArguments: [mintType.toString()],\n    functionArguments: FUNCTIONAL_ARGS_DATA\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::borrow_fa\",\n    functionArguments: FUNCTIONAL_ARGS_DATA\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Borrow failed\");\n      throw new Error(\"Borrow failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/echo/stake.ts\nasync function stakeTokenWithEcho(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xa0281660ff6ca6c1b68b55fcb9b213c2276f90ad007ad27fd003cf2f3478e96e::lsdmanage::stake\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Stake token in Echo failed\");\n      throw new Error(\"Stake token in Echo failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Stake token in Echo failed: ${error.message}`);\n  }\n}\n\n// src/tools/echo/unstake.ts\nasync function unstakeTokenWithEcho(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xa0281660ff6ca6c1b68b55fcb9b213c2276f90ad007ad27fd003cf2f3478e96e::lsdmanage::unstake\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Unstake token in Echo failed\");\n      throw new Error(\"Unstake token in Echo failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Unstake token in Echo failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/swap.ts\nasync function swap(agent, mintX, mintY, swapAmount, minCoinOut = 0) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::scripts_v2::swap\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"\n        ],\n        functionArguments: [swapAmount, minCoinOut]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Swap failed\");\n      throw new Error(\"Swap failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Swap failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/create-pool.ts\nasync function createPool(agent, mintX, mintY) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::scripts_v2::register_pool\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"\n        ],\n        functionArguments: []\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Create pool failed\");\n      throw new Error(\"Create pool failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Create pool failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/add-liquidity.ts\nasync function addLiquidity(agent, mintX, mintY, mintXAmount, mintYAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9dd974aea0f927ead664b9e1c295e4215bd441a9fb4e53e5ea0bf22f356c8a2b::router::add_liquidity_v05\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated\"\n        ],\n        functionArguments: [\n          mintXAmount,\n          0,\n          //coin_x_min,\n          mintYAmount,\n          0\n          // coin_y_min\n        ]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Add liquidity failed\");\n      throw new Error(\"Add liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    console.error(error, \"Add liquidity failed\");\n    throw new Error(`Add liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/remove-liquidity.ts\nasync function removeLiquidity(agent, mintX, mintY, lpAmount, minMintX = 0, minMintY = 0) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9dd974aea0f927ead664b9e1c295e4215bd441a9fb4e53e5ea0bf22f356c8a2b::router::remove_liquidity_v05\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated\"\n        ],\n        functionArguments: [lpAmount, minMintX, minMintY]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Remove liquidity failed\");\n      throw new Error(\"Remove liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Remove liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/panora/swap.ts\n\nasync function swapWithPanora(agent, fromToken, toToken, swapAmount, toWalletAddress) {\n  try {\n    const panoraParameters = {\n      fromTokenAddress: fromToken,\n      toTokenAddress: toToken,\n      fromTokenAmount: swapAmount.toString(),\n      toWalletAddress: toWalletAddress ? toWalletAddress : agent.account.getAddress().toString()\n    };\n    const url = `https://api.panora.exchange/swap?${new URLSearchParams(panoraParameters).toString()}`;\n    const panoraApiKey = agent.config.PANORA_API_KEY;\n    if (!panoraApiKey) {\n      throw new Error(\"No PANORA_API_KEY in config\");\n    }\n    const res = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(\n      url,\n      {},\n      {\n        headers: {\n          \"x-api-key\": panoraApiKey\n        }\n      }\n    );\n    const response = await res.data;\n    if (response.quotes.length <= 0) {\n      throw new Error(\"no quotes available from panora\");\n    }\n    const transactionData = response.quotes[0].txData;\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: transactionData.function,\n        typeArguments: transactionData.type_arguments,\n        functionArguments: transactionData.arguments\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Swap failed\");\n      throw new Error(\"Swap tx failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Swap failed: ${error.message}`);\n  }\n}\n\n// src/tools/openai/create-image.ts\n\nasync function createImage(agent, prompt, size = \"1024x1024\", n = 1) {\n  try {\n    const apiKey = agent.config.OPENAI_API_KEY;\n    if (!apiKey) {\n      throw new Error(\"No OPENAI_API_KEY in config\");\n    }\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ apiKey });\n    const response = await openai.images.generate({\n      prompt,\n      n,\n      size\n    });\n    return {\n      images: response.data.map((img) => img.url)\n    };\n  } catch (error) {\n    throw new Error(`Image generation failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/stake.ts\nasync function stakeTokenWithThala(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::scripts::stake_APT_and_thAPT\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Stake APT failed\");\n      throw new Error(\"Stake APT failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Stake APT failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/unstake.ts\nasync function unstakeAPTWithThala(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::scripts::unstake_thAPT\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Unstake token failed\");\n      throw new Error(\"Unstake token failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Unstake token failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/mint-mod.ts\nasync function mintMODWithThala(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::psm_scripts::mint\",\n        typeArguments: [mintType],\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Mint MOD failed\");\n      throw new Error(\"Mint MOD failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Mint MOD failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/redeem-mod.ts\nasync function redeemMODWithThala(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::psm_scripts::redeem\",\n        typeArguments: [mintType],\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Redeem MOD failed\");\n      throw new Error(\"Redeem MOD failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Redeem MOD failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/add-liquidity.ts\nasync function addLiquidityWithThala(agent, mintTypeX, mintTypeY, mintXAmount, mintYAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool_scripts::add_liquidity\",\n        typeArguments: [\n          mintTypeX,\n          mintTypeY,\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\"\n        ],\n        functionArguments: [mintXAmount, mintYAmount, 0, 0, 0, 0, 0, 0]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Add liquidity failed\");\n      throw new Error(\"Add liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Add liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/remove-liquidity.ts\nasync function removeLiquidityWithThala(agent, mintTypeX, mintTypeY, lpAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool_scripts::remove_liquidity\",\n        typeArguments: [\n          mintTypeX,\n          mintTypeY,\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\"\n        ],\n        functionArguments: [lpAmount, 0, 0, 0, 0]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Remove liquidity failed\");\n      throw new Error(\"Remove liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Remove liquidity failed: ${error.message}`);\n  }\n}\n\n// src/utils/get-pool-address-by-token-name.ts\nvar tokensList = [\n  {\n    name: \"USDt\",\n    poolAddress: \"0xac00e90cdadec06d81e0d5ce7a3e93d63d563e982dea0ca15bad2b067f42d2be\",\n    decimals: 6,\n    tokenAddress: \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\"\n  },\n  {\n    name: \"zUSDT\",\n    poolAddress: \"0x447b3b516546f28e8c4f6825a6287b09161659e7c500c599c29c28a8492844b8\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\"\n  },\n  {\n    name: \"zUSDC\",\n    poolAddress: \"0xa9c51ca3bcd93978d0c4aada7c4cf47c0791caced3cdc4e15f2c8e0797d1f93c\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\"\n  },\n  {\n    name: \"APT\",\n    poolAddress: \"0x761a97787fa8b3ae0cef91ebc2d96e56cc539df5bc88dadabee98ae00363a831\",\n    decimals: 8,\n    tokenAddress: \"0x1::aptos_coin::AptosCoin\"\n  },\n  {\n    name: \"sthAPT\",\n    poolAddress: \"0xed6bf9fe7e3f42c6831ffac91824a545c4b8bfcb40a59b3f4ccfe203cafb7f42\",\n    decimals: 8,\n    tokenAddress: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::staking::StakedThalaAPT\"\n  },\n  {\n    name: \"MOD\",\n    poolAddress: \"0xef2ae89796725d0eb363326ecb7df159feb949f6d1f400f76deeeebccbac00f1\",\n    decimals: 8,\n    tokenAddress: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::mod_coin::MOD\"\n  },\n  {\n    name: \"THL\",\n    poolAddress: \"0x127ea5b4c450be695e488da1c3bc013e2e93d8cf00270ef90385189844bc9755\",\n    decimals: 8,\n    tokenAddress: \"0x7fd500c11216f0fe3095d0c4b8aa4d64a4e2e04f83758462f2b127255643615::thl_coin::THL\"\n  },\n  {\n    name: \"wUSDC\",\n    poolAddress: \"0xa76ebfb432982c864783fdb33cdf5a9edb18ac1b950deb8037f5cf8c984da3d2\",\n    decimals: 6,\n    tokenAddress: \"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\"\n  },\n  {\n    name: \"zWETH\",\n    poolAddress: \"0x548cf587bd918a0005b3372a1d23e64b18ace3c61962f087a21eac52cf228504\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::WETH\"\n  },\n  {\n    name: \"wWETH\",\n    poolAddress: \"0x114ee519ffa1e8697784bd1a350822cb37601a1476289051b8295165597a4538\",\n    decimals: 6,\n    tokenAddress: \"0xcc8a89c8dce9693d354449f1f73e60e14e347417854f029db5bc8e7454008abb::coin::T\"\n  },\n  {\n    name: \"CAKE\",\n    poolAddress: \"0x41b039e5518b1a3786ee798d895e0ddf3141fbbc20009284323fa51ea279c819\",\n    decimals: 8,\n    tokenAddress: \"0x159df6b7689437016108a019fd5bef736bac692b6d4a1f10c941f6fbb9a74ca6::oft::CakeOFT\"\n  },\n  {\n    name: \"stAPT\",\n    poolAddress: \"0xc3c9cc885a52004e0490f6a8291b3bc5854f0e42d931fb124736bd189c9f0f45\",\n    decimals: 8,\n    tokenAddress: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::stapt_token::StakedApt\"\n  },\n  {\n    name: \"aBTC\",\n    poolAddress: \"0xacb7262b33a147b47b950a3a26d7699e1a58bcaa475ef636cb0fea53fa0eb872\",\n    decimals: 10,\n    tokenAddress: \"0x4e1854f6d332c9525e258fb6e66f84b6af8aba687bbcb832a24768c4e175feec::abtc::ABTC\"\n  },\n  {\n    name: \"STONE\",\n    poolAddress: \"0x075c39f18c7bc00ac0f81a0f9ab7e319e23790d7d8c3df968d84a23699584bd9\",\n    decimals: 8,\n    tokenAddress: \"0x543c5660aa4d496687e2068c11765f04607c4f4b639a83233a9333604fb8ce59::stakestone_ether::StakeStoneEther\"\n  },\n  {\n    name: \"truAPT\",\n    poolAddress: \"0x7bd5be03df0fb3841fed337b8e7a353818b917cce6db28b807b691002a122d73\",\n    decimals: 8,\n    tokenAddress: \"0xaef6a8c3182e076db72d64324617114cacf9a52f28325edc10b483f7f05da0e7\"\n  },\n  {\n    name: \"sBTC\",\n    poolAddress: \"0x754114c656e26498a8c0b20fa24af663fed5e4b24acb471c103daea0f7006b40\",\n    decimals: 8,\n    tokenAddress: \"0x5dee1d4b13fae338a1e1780f9ad2709a010e824388efd169171a26e3ea9029bb::stakestone_bitcoin::StakeStoneBitcoin\"\n  }\n];\nvar getTokenByTokenName = (name) => {\n  const token = tokensList.find(\n    (token2) => token2.name.toLowerCase() === name.toLowerCase() || token2.name.toLowerCase().includes(name.toLowerCase())\n  );\n  return token;\n};\nvar getTokenByTokenAddress = (address) => {\n  const token = tokensList.find((token2) => token2.tokenAddress.toLowerCase() === address.toLowerCase());\n  return token;\n};\n\n// src/agent.ts\nvar AgentRuntime = class {\n  account;\n  aptos;\n  config;\n  constructor(account, aptos, config) {\n    this.account = account;\n    this.aptos = aptos;\n    this.config = config ? config : {};\n  }\n  async getPythData() {\n    const connection = new _pythnetwork_pyth_aptos_js__WEBPACK_IMPORTED_MODULE_1__.AptosPriceServiceConnection(\"https://hermes.pyth.network\");\n    return await connection.getPriceFeedsUpdateData(priceFeed);\n  }\n  getBalance(mint) {\n    return getBalance(this, mint);\n  }\n  getTokenDetails(token) {\n    return getTokenDetails(token);\n  }\n  getTokenByTokenName(name) {\n    return getTokenByTokenName(name);\n  }\n  getTokenPrice(query) {\n    return getTokenPrice(query);\n  }\n  transferTokens(to, amount, mint) {\n    return transferTokens(this, to, amount, mint);\n  }\n  getTransaction(hash) {\n    return getTransaction(this, hash);\n  }\n  burnToken(amount, mint) {\n    return burnToken(this, amount, mint);\n  }\n  createToken(name, symbol, iconURI, projectURI) {\n    return createToken(this, name, symbol, iconURI, projectURI);\n  }\n  mintToken(to, mint, amount) {\n    return mintToken(this, to, mint, amount);\n  }\n  stakeTokensWithAmnis(to, amount) {\n    return stakeTokens(this, to, amount);\n  }\n  withdrawStakeFromAmnis(to, amount) {\n    return unstakeTokens(this, to, amount);\n  }\n  transferNFT(to, mint) {\n    return transferNFT(this, to, mint);\n  }\n  burnNFT(mint) {\n    return burnNFT(this, mint);\n  }\n  lendToken(amount, mint, positionId, newPosition, fungibleAsset) {\n    return lendToken(this, amount, mint, positionId, newPosition, fungibleAsset);\n  }\n  borrowToken(amount, mint, positionId, fungibleAsset) {\n    return borrowToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  withdrawToken(amount, mint, positionId, fungibleAsset) {\n    return withdrawToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  repayToken(amount, mint, positionId, fungibleAsset) {\n    return repayToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  getUserPosition(userAddress, positionId) {\n    return getUserPosition(this, userAddress, positionId);\n  }\n  getUserAllPositions(userAddress) {\n    return getUserAllPositions(this, userAddress);\n  }\n  getPoolDetails(mint) {\n    return getPoolDetails(this, mint);\n  }\n  addLiquidity(mintX, mintY, mintXAmount, mintYAmount) {\n    return addLiquidity(this, mintX, mintY, mintXAmount, mintYAmount);\n  }\n  removeLiquidity(mintX, mintY, lpAmount, minMintX = 0, minMintY = 0) {\n    return removeLiquidity(this, mintX, mintY, lpAmount, minMintX, minMintY);\n  }\n  swap(mintX, mintY, swapAmount, minCoinOut) {\n    return swap(this, mintX, mintY, swapAmount, minCoinOut);\n  }\n  createPool(mintX, mintY) {\n    return createPool(this, mintX, mintY);\n  }\n  // Aries\n  createAriesProfile() {\n    return createAriesProfile(this);\n  }\n  lendAriesToken(mintType, amount) {\n    return lendAriesToken(this, mintType, amount);\n  }\n  borrowAriesToken(mintType, amount) {\n    return borrowAriesToken(this, mintType, amount);\n  }\n  withdrawAriesToken(mintType, amount) {\n    return withdrawAriesToken(this, mintType, amount);\n  }\n  repayAriesToken(mintType, amount) {\n    return repayAriesToken(this, mintType, amount);\n  }\n  // Thala\n  stakeTokensWithThala(amount) {\n    return stakeTokenWithThala(this, amount);\n  }\n  unstakeTokensWithThala(amount) {\n    return unstakeAPTWithThala(this, amount);\n  }\n  mintMODWithThala(mintType, amount) {\n    return mintMODWithThala(this, mintType, amount);\n  }\n  redeemMODWithThala(mintType, amount) {\n    return redeemMODWithThala(this, mintType, amount);\n  }\n  addLiquidityWithThala(mintX, mintY, mintXAmount, mintYAmount) {\n    return addLiquidityWithThala(this, mintX, mintY, mintXAmount, mintYAmount);\n  }\n  removeLiquidityWithThala(mintX, mintY, lpAmount) {\n    return removeLiquidityWithThala(this, mintX, mintY, lpAmount);\n  }\n  // panora\n  swapWithPanora(fromToken, toToken, swapAmount, toWalletAddress) {\n    return swapWithPanora(this, fromToken, toToken, swapAmount, toWalletAddress);\n  }\n  // openai\n  createImageWithOpenAI(prompt, size, n) {\n    return createImage(this, prompt, size, n);\n  }\n  // Echo\n  stakeTokenWithEcho(amount) {\n    return stakeTokenWithEcho(this, amount);\n  }\n  unstakeTokenWithEcho(amount) {\n    return unstakeTokenWithEcho(this, amount);\n  }\n  // Echelon\n  lendTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return lendTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  withdrawTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return withdrawTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  repayTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return repayTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  borrowTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return borrowTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n};\n\n// src/langchain/account/address.ts\n\nvar AptosAccountAddressTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_get_wallet_address\";\n  description = \"Get the wallet address of the agent\";\n  async _call(_input) {\n    return this.agent.account.getAddress().toString();\n  }\n};\n\n// src/langchain/amnis/stake.ts\n\n\nvar AmnisStakeTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"amnis_stake\";\n  description = `this tool can be used to stake APT (Aptos) to amnis validator and receive its liquid staking token stAPT (staked APT)\n\n\tkeep recipient blank if user themselves wants to receive stAPT and not send to anybody else\n\n  Inputs ( input is a JSON string ) (required):\n  amount: number, eg 1 or 0.01 (required)\n  recipient: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.recipient) || this.agent.account.getAddress();\n      const stakeTransactionHash = await this.agent.stakeTokensWithAmnis(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"stAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/amnis/withdraw-stake.ts\n\n\nvar AmnisWithdrawStakeTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"amnis_withdraw_stake\";\n  description = `this tool can be used to withdraw staked APT (Aptos) from amnis validator and receive back APT\n\n\tkeep recipient blank if user themselves wants to receive APT and not send to anybody else\n\n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  recipient: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.recipient) || this.agent.account.getAddress();\n      const withdrawStakeTransactionHash = await this.agent.withdrawStakeFromAmnis(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawStakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/balance.ts\n\nvar AptosBalanceTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_balance\";\n  description = `Get the balance of a Aptos account.\n\n  If you want to get the balance of your wallet, you don't need to provide the mint.\n  If no mint is provided, the balance will be in APT.\n  if you want to get balance of a fungible asset, you need to provide the asset address as mint\n\n  Inputs ( input is a JSON string ):\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"\n  0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mint = parsedInput.mint || void 0;\n      const mintDetails = this.agent.getTokenDetails(mint);\n      const balance = await this.agent.getBalance(mint);\n      return JSON.stringify({\n        status: \"success\",\n        balance,\n        token: {\n          name: mintDetails.name || \"APT\",\n          decimals: mintDetails.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-token-details.ts\n\nvar AptosGetTokenDetailTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_token_details\";\n  description = `Get the detail of any aptos tokens\n\n  details also include decimals which you can use to make onchain values readable to a human user\n\n  Inputs ( input is a JSON string ):\n  token: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mint = parsedInput.token || \"\";\n      const tokenData = await this.agent.getTokenDetails(mint);\n      return JSON.stringify({\n        status: \"success\",\n        tokenData\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/transfer-token.ts\n\n\nvar AptosTransferTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_transfer_token\";\n  description = `this tool can be used to transfer APT, any token or fungible asset to a recipient\n\n  if you want to transfer APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to transfer token other than APT, you need to provide the mint of that specific token\n  if you want to transfer fungible asset, add fungible asset address as mint\n\n  keep to blank if user themselves wants to receive the token and not send to anybody else\n\n  Inputs ( input is a JSON string ):\n  to: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" \n  or \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.to) || this.agent.account.getAddress();\n      const transferTokenTransactionHash = await this.agent.transferTokens(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 6),\n        parsedInput.mint\n      );\n      return JSON.stringify({\n        status: \"success\",\n        transferTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/burn-token.ts\n\n\nvar AptosBurnTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_burn_token\";\n  description = `this tool can be used to burn a fungible asset\n\n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required) \n  mint: string, \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const burnTransactionHash = await this.agent.burnToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint\n      );\n      return JSON.stringify({\n        status: \"success\",\n        burnTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/mint-token.ts\n\n\nvar AptosMintTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_mint_token\";\n  description = `this tool can be used to create fungible asset to a recipient\n\nif the recipient wants to receive the token and not send to anybody else, keep to blank\n\n  Inputs ( input is a JSON string ):\n  to: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.to) || this.agent.account.getAddress();\n      const mintTokenTransactionHash = await this.agent.mintToken(recipient, parsedInput.mint, parsedInput.amount);\n      return JSON.stringify({\n        status: \"success\",\n        mintTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/create-token.ts\n\nvar AptosCreateTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_create_token\";\n  description = `this tool can be used to create fungible asset to a recipient\n\n  Inputs ( input is a JSON string ):\n  name: string, eg \"USDT\" (required)\n  symbol: string, eg \"USDT\" (required)\n  iconURI: string, eg \"https://example.com/icon.png\" (required)\n  projectURI: string, eg \"https://example.com/project\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const createTokenTransactionHash = await this.agent.createToken(\n        parsedInput.name,\n        parsedInput.symbol,\n        parsedInput.iconURI,\n        parsedInput.projectURI\n      );\n      return JSON.stringify({\n        status: \"success\",\n        createTokenTransactionHash,\n        token: {\n          name: parsedInput.name,\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-transaction.ts\n\nvar AptosTransactionTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_get_transaction\";\n  description = `Fetches a transaction from aptos blockchain\n\n  Inputs ( input is a JSON string ):\n  transactionHash: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const aptosTransaction = await this.agent.getTransaction(parsedInput.transactionHash);\n      return JSON.stringify({\n        status: \"success\",\n        aptosTransaction\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-token-price.ts\n\nvar AptosGetTokenPriceTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_token_price\";\n  description = `Get the live price of any aptos tokens in USD.\n\tdo not do any decimals conversion here, the price is already in USD\n\n  details also include decimals which you can use to make onchain values readable to a human user\n\n  Inputs ( input is a JSON string - this is IMPORTANT):\n  token: string, eg usdt, btc etc.`;\n  async _call(input) {\n    console.log(\"input\", input);\n    try {\n      const parsedInput = parseJson(input);\n      const token = parsedInput.token || input || \"usdt\";\n      const tokenData = await this.agent.getTokenPrice(token);\n      return JSON.stringify({\n        status: \"success\",\n        tokenData\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/create-profile.ts\n\nvar AriesCreateProfileTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_create_profile\";\n  description = `this tool can be used to create a profile in Aries\n    `;\n  async _call() {\n    try {\n      const createProfileTransactionHash = await this.agent.createAriesProfile();\n      return JSON.stringify({\n        status: \"success\",\n        createProfileTransactionHash\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/lend-token.ts\n\n\n\n// src/utils/parse-json.ts\nvar parseJson = (input) => {\n  try {\n    const forbiddenWords = [\"null\", \"undefined\", \"{}\"];\n    if (input in forbiddenWords) throw new Error();\n    const parsedInput = JSON.parse(input);\n    return parsedInput;\n  } catch (e) {\n    return {};\n  }\n};\n\n// src/langchain/aries/lend-token.ts\nvar AriesLendTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_lend\";\n  description = `this tool can be used to lend tokens in Aries\n\n    if you want to lend APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const lendTokenTransactionHash = await this.agent.lendAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/withdraw-token.ts\n\n\nvar AriesWithdrawTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_withdraw\";\n  description = `this tool can be used to withdraw tokens from Aries\n\n    if you want to withdraw APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const withdrawTokenTransactionHash = await this.agent.withdrawAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/borrow-token.ts\n\n\nvar AriesBorrowTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_borrow\";\n  description = `this tool can be used to borrow tokens from Aries\n\n    if you want to borrow APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const borrowTokenTransactionHash = await this.agent.borrowAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/repay-token.ts\n\n\nvar AriesRepayTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_repay\";\n  description = `this tool can be used to repay tokens in Aries\n\n    if you want to repay APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const repayTokenTransactionHash = await this.agent.repayAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/lend-token.ts\n\n\nvar JouleLendTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_lend_token\";\n  description = `this tool can be used to lend APT, tokens or fungible asset to a position\n\n  if you want to lend APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to lend token other than APT, you need to provide the mint of that specific token\n  if you want to lend fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n\n  if positionId is not provided, the positionId will be 1234 and newPosition should be true\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  newPosition: boolean, (required)  \n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const lendTokenTransactionHash = await this.agent.lendToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        parsedInput.newPosition,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/borrow-token.ts\n\n\nvar JouleBorrowTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_borrow_token\";\n  description = `this tool can be used to borrow APT, tokens or fungible asset from a position\n\n  if you want to borrow APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to borrow token other than APT, you need to provide the mint of that specific token\n  if you want to borrow fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const borrowTokenTransactionHash = await this.agent.borrowToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/withdraw-token.ts\n\n\nvar JouleWithdrawTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_withdraw_token\";\n  description = `this tool can be used to withdraw APT, tokens or fungible asset from a position\n\n  if you want to withdraw APT, add \"0x1::aptos_coin::AptosCoin\" as mint\n  if you want to withdraw token other than APT, you need to provide the mint of that specific token\n  if you want to withdraw fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const withdrawTokenTransactionHash = await this.agent.withdrawToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/repay-token.ts\n\n\nvar JouleRepayTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_repay_token\";\n  description = `this tool can be used to repay APT, tokens or fungible asset from a position\n\n  if you want to repay APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to repay token other than APT, you need to provide the mint of that specific token\n  if you want to repay fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  fungibleAssetAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const repayTokenTransactionHash = await this.agent.repayToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        parsedInput.fungibleAssetAddress\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-pool-details.ts\n\nvar JouleGetPoolDetails = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_pool_details\";\n  description = `the tool can be used to get a token / fungible asset pool details\n\n  Inputs ( input is a JSON string ):\n     mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\n  Example: '{\"mint\": \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\"}'\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const pool = await this.agent.getPoolDetails(parsedInput.mint);\n      return JSON.stringify({\n        status: \"success\",\n        pool\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-user-position.ts\n\n\nvar JouleGetUserPosition = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_user_position\";\n  description = `the tool can be used to get details about a user's position\n\n\tkeep userAddress blank if user wants to get their own position or didn't provide any other user's address\n\n\task user to provide positionId from the list of positions they have if they want to get details about a specific position.\n\tdo not fill random positionId if the user didn't provide any positionId\n\n  Inputs ( input is a JSON string ):\n     userAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n     positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const userAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.userAddress) || this.agent.account.getAddress();\n      const jouleUserPosition = await this.agent.getUserPosition(userAddress, parsedInput.positionId);\n      return JSON.stringify({\n        status: \"success\",\n        jouleUserPosition\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-user-all-positions.ts\n\n\nvar JouleGetUserAllPositions = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_user_all_positions\";\n  description = `the tool can be used to get details about a user's all positions\n\n\tkeep userAddress blank if user wants to get their own position or didn't provide any other user's address\n\n  Inputs ( input is a JSON string ):\n     userAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const userAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.userAddress) || this.agent.account.getAddress();\n      const jouleUserAllPositions = await this.agent.getUserAllPositions(userAddress);\n      return JSON.stringify({\n        status: \"success\",\n        jouleUserAllPositions,\n        tokens: tokensList.map((token) => {\n          return {\n            name: token.name,\n            decimals: token.decimals,\n            tokenAddress: token.tokenAddress\n          };\n        })\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/swap.ts\n\n\nvar LiquidSwapSwapTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_swap\";\n  description = `this tool can be used to swap tokens in liquidswap\n\n    if you want to swap APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\tif one of the token is USDT, use \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\"\n\t\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n\tcant swap any fungible tokens. only coin standard swap allowed. if user trying to swap fungible token, ask it to swap via panora.\n\n\tcoin standard format : string::string::string\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    swapAmount: number, eg 1 or 0.01 (required)\n    minCoinOut: number, eg 1 or 0.01 (optional)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const swapTransactionHash = await this.agent.swap(\n        mintX,\n        mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.swapAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minCoinOut, mintXDetail.decimals) || 0\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/create-pool.ts\n\n\n// src/utils/parse-fungible-asset-to-wrapped-asset.ts\nvar parseFungibleAssetAddressToWrappedAssetAddress = (assetAddress) => {\n  if (assetAddress === \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\") {\n    return \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::fa_to_coin_wrapper::WrappedUSDT\";\n  }\n  return assetAddress;\n};\n\n// src/langchain/liquidswap/create-pool.ts\nvar LiquidSwapCreatePoolTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_create_pool\";\n  description = `this tool can be used to create a new pool in liquidswap\n\n    if you want to create a pool with APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const createPoolTransactionHash = await this.agent.createPool(\n        parseFungibleAssetAddressToWrappedAssetAddress(mintX),\n        parseFungibleAssetAddressToWrappedAssetAddress(mintY)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        createPoolTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/add-liquidity.ts\n\n\nvar LiquidSwapAddLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_add_liquidity\";\n  description = `this tool can be used to add liquidity in liquidswap\n\n    if you want to add APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintXAmount: number, eg 1 or 0.01 (required)\n    mintYAmount: number, eg 1 or 0.01 (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const wrappedMintX = parseFungibleAssetAddressToWrappedAssetAddress(mintX);\n      const wrappedMintY = parseFungibleAssetAddressToWrappedAssetAddress(mintY);\n      const mintXDetail = await this.agent.getTokenDetails(wrappedMintX);\n      const mintYDetail = await this.agent.getTokenDetails(wrappedMintY);\n      const swapTransactionHash = await this.agent.addLiquidity(\n        wrappedMintX,\n        wrappedMintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintXAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintYAmount, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/remove-liquidity.ts\n\n\nvar LiquidSwapRemoveLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_remove_liquidity\";\n  description = `this tool can be used to remove liquidity from liquidswap\n\n    if you want to remove APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n\tminMintX and minMintY are minimum amount of tokens to receive, default is 0\n\n\tdeposit liquidity in one of the pools to get LP tokens if you don't have LP tokens\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    lpAmount: number, eg 1 or 0.01 (required)\n    minMintX: number, eg 1 or 0.01 (optional)\n    minMintY: number, eg 1 or 0.01 (optional)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const removeLiquidityTransactionHash = await this.agent.removeLiquidity(\n        parseFungibleAssetAddressToWrappedAssetAddress(mintX),\n        parseFungibleAssetAddressToWrappedAssetAddress(mintY),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.lpAmount, 6),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minMintX || 0, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minMintY || 0, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        removeLiquidityTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/lend-token.ts\n\n\nvar EchelonLendTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_lend_token\";\n  description = `this tool can be used to lend APT, tokens or fungible asset to a position\n\n    if you want to lend APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      console.log(\"mintDetail\", mintDetail);\n      const lendTokenTransactionHash = await this.agent.lendTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/withdraw-token.ts\n\n\nvar EchelonWithdrawTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_withdraw_token\";\n  description = `this tool can be used to withdraw APT, tokens or fungible asset from a position\n\n    if you want to withdraw APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      console.log(\"mintDetail\", mintDetail);\n      const withdrawTokenTransactionHash = await this.agent.withdrawTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/repay-token.ts\n\n\nvar EchelonRepayTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_repay_token\";\n  description = `this tool can be used to repay APT, tokens or fungible asset from a position\n\n    if you want to repay APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      const repayTokenTransactionHash = await this.agent.repayTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/borrow-token.ts\n\n\nvar EchelonBorrowTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_borrow_token\";\n  description = `this tool can be used to borrow APT, tokens or fungible asset from a position\n\n  if you want to borrow APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n  if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n  ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n  or whatever name the user has provided, you can use the token name to get the address of the token \n\n\n  Inputs ( input is a JSON string ) (IMPORTANT):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      const borrowTokenTransactionHash = await this.agent.borrowTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echo/stake.ts\n\n\nvar EchoStakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echo_stake_token\";\n  description = `this tool can be used to stake token in Echo\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const stakeTransactionHash = await this.agent.stakeTokenWithEcho(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"eAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echo/unstake.ts\n\n\nvar EchoUnstakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echo_unstake_token\";\n  description = `this tool can be used to unstake token in Echo\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const unstakeTransactionHash = await this.agent.unstakeTokenWithEcho(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        unstakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/openai/create-image.ts\n\nvar OpenAICreateImageTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"openai_create_image\";\n  description = `\n    Generate an image using OpenAI's DALL-E\n\n    Inputs ( input is a JSON string ):\n    prompt: string, Text description of the image to generate (required)\n    size: string, Image size ('256x256', '512x512', or '1024x1024') (default: '1024x1024')\n    n: number, Number of images to generate (default: 1)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const response = await this.agent.createImageWithOpenAI(parsedInput.prompt, parsedInput.size, parsedInput.n);\n      return JSON.stringify({\n        status: \"success\",\n        response\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/panora/swap.ts\n\nvar PanoraSwapTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"panora_aggregator_swap\";\n  description = `this tool can be used to swap tokens in panora - liquidity aggregator on aptos\n\n\tif you want to swap APT and one of the token, fromToken will be \"0x1::aptos_coin::AptosCoin\"\n\n\tInputs ( input is a JSON string ):\n\tfromToken: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\ttoToken: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\tswapAmount: number, eg 1 or 0.01 (required)\n\ttoWalletAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n\t`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.fromToken);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.toToken);\n      const swapTransactionHash = await this.agent.swapWithPanora(\n        parsedInput.fromToken,\n        parsedInput.toToken,\n        parsedInput.swapAmount,\n        parsedInput.toWalletAddress\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/stake.ts\n\n\nvar ThalaStakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_stake_token\";\n  description = `this tool can be used to stake thAPT in Thala\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const stakeTransactionHash = await this.agent.stakeTokensWithThala(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"thAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/unstake.ts\n\n\nvar ThalaUnstakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_unstake_token\";\n  description = `this tool can be used to unstake thAPT in Thala\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const unstakeTransactionHash = await this.agent.unstakeTokensWithThala(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        unstakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/mint-mod.ts\n\n\nvar ThalaMintMODTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_mint_mod\";\n  description = `this tool can be used to mint move dollar (MOD) in Thala\n\n    Only supported coin types: lzUSDC, whUSDC, or USDt\n\n\tif the user coin is not in the list , default to lzUSDC\n\n\tmintType for lzUSDC - 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\n\tmintType for wUSDC - 0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\n\tmintType for USDt - 0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\n\n    Inputs ( input is a JSON string ):\n    mintType: eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintMODTransactionHash = await this.agent.mintMODWithThala(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        mintMODTransactionHash,\n        token: {\n          name: \"MOD\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/redeem-mod.ts\n\n\nvar ThalaRedeemMODTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_redeem_mod\";\n  description = `this tool can be used to redeem move dollar (MOD) in Thala\n\n  Only supported coin types: lzUSDC, whUSDC, or USDt\n\n\tif the user coin is not in the list , default to lzUSDC\n\n\tmintType for lzUSDC - 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\n\tmintType for wUSDC - 0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\n\tmintType for USDt - 0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\n\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const tokenDetails = await this.agent.getTokenDetails(parsedInput.mintType);\n      const redeemMODTransactionHash = await this.agent.redeemMODWithThala(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        redeemMODTransactionHash,\n        token: {\n          name: tokenDetails.name,\n          decimals: tokenDetails.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/add-liquidity.ts\n\n\nvar ThalaAddLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_add_liquidity\";\n  description = `this tool can be used to add liquidity to a Thala pool\n\n    If you want to add APT, use \"0x1::aptos_coin::AptosCoin\" as the coin type\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintXAmount: number, eg 1 or 0.01 (required)\n    mintYAmount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.mintX);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.mintY);\n      const addLiquidityTransactionHash = await this.agent.addLiquidityWithThala(\n        parsedInput.mintX,\n        parsedInput.mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintXAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintYAmount, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        addLiquidityTransactionHash,\n        tokens: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/remove-liquidity.ts\n\n\nvar ThalaRemoveLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_remove_liquidity\";\n  description = `this tool can be used to remove liquidity from a Thala pool\n\n    If one of your coins is APT, use \"0x1::aptos_coin::AptosCoin\" as the coin type\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    lpAmount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.mintX);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.mintY);\n      const removeLiquidityTransactionHash = await this.agent.removeLiquidityWithThala(\n        parsedInput.mintX,\n        parsedInput.mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.lpAmount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        removeLiquidityTransactionHash,\n        tokens: [\n          {\n            mintX: mintXDetail.name,\n            decimals: 6\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: 6\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/index.ts\nvar createAptosTools = (agent, config = {}) => {\n  const tools = [\n    // Aptos tools\n    new AptosBalanceTool(agent),\n    new AptosAccountAddressTool(agent),\n    new AptosTransferTokenTool(agent),\n    // new AptosBurnNFTTool(agent),\n    new AptosBurnTokenTool(agent),\n    // new AptosTransferNFTTool(agent),\n    new AptosTransactionTool(agent),\n    new AptosGetTokenDetailTool(agent),\n    new AptosMintTokenTool(agent),\n    new AptosCreateTokenTool(agent),\n    new AptosGetTokenPriceTool(agent),\n    // Amnis tools\n    new AmnisStakeTool(agent),\n    new AmnisWithdrawStakeTool(agent),\n    // Joule tools\n    new JouleLendTokenTool(agent),\n    new JouleWithdrawTokenTool(agent),\n    new JouleBorrowTokenTool(agent),\n    new JouleRepayTokenTool(agent),\n    new JouleGetPoolDetails(agent),\n    new JouleGetUserPosition(agent),\n    new JouleGetUserAllPositions(agent),\n    // LiquidSwap tools\n    new LiquidSwapCreatePoolTool(agent),\n    new LiquidSwapAddLiquidityTool(agent),\n    new LiquidSwapRemoveLiquidityTool(agent),\n    new LiquidSwapSwapTool(agent),\n    // Aries tools\n    new AriesCreateProfileTool(agent),\n    new AriesWithdrawTool(agent),\n    new AriesBorrowTool(agent),\n    new AriesLendTool(agent),\n    new AriesRepayTool(agent),\n    // Thala tools\n    new ThalaAddLiquidityTool(agent),\n    new ThalaRemoveLiquidityTool(agent),\n    new ThalaMintMODTool(agent),\n    new ThalaRedeemMODTool(agent),\n    new ThalaUnstakeTokenTool(agent),\n    new ThalaStakeTokenTool(agent),\n    // Panora tools\n    new PanoraSwapTool(agent),\n    // OpenAI tools\n    new OpenAICreateImageTool(agent),\n    // Echo tools\n    new EchoStakeTokenTool(agent),\n    new EchoUnstakeTokenTool(agent),\n    // Echelon tools\n    new EchelonLendTokenTool(agent),\n    new EchelonWithdrawTokenTool(agent),\n    new EchelonRepayTokenTool(agent),\n    new EchelonBorrowTokenTool(agent)\n  ];\n  return config.filter ? tools.filter((tool) => config?.filter?.includes(tool.name)) : tools;\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbW92ZS1hZ2VudC1raXRAMC4xLjJfQGFwdG9zLWxhYnMrdHMtc2RrQDEuMzUuMF9heGlvc0AxLjcuOV9nb3RAMTEuOC42X19AYXB0b3MtbGFicyt3YWxsZXQtYWRhX29rd2QyemZ4enZtNnVtc3VkNHE2c3gydzJ1L25vZGVfbW9kdWxlcy9tb3ZlLWFnZW50LWtpdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUU7QUFDakU7QUFDQSxpQ0FBaUMsdURBQU87QUFDeEMsdUJBQXVCLDJEQUFXLEdBQUcsU0FBUztBQUM5QyxzQkFBc0IscURBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VIO0FBQ3ZIO0FBQ0EseUNBQXlDLHVEQUFRO0FBQ2pELHVCQUF1QiwyREFBWSxHQUFHLFNBQVM7QUFDL0Msc0JBQXNCLHFEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOERBQWM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lFOztBQUV6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtREFBbUQsY0FBYztBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0RBQW9ELGNBQWM7QUFDbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHlEQUF5RCxjQUFjO0FBQ3ZFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0NBQW9DLGNBQWM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQ0FBc0MsY0FBYztBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdDQUF3QyxjQUFjO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQ0FBb0MsY0FBYztBQUNsRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdDQUF3QyxjQUFjO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQ0FBc0MsY0FBYztBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtREFBbUQsY0FBYztBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixxREFBcUQsY0FBYztBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0NBQW9DLGNBQWM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGdEQUFnRCxjQUFjO0FBQzlEO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxpREFBaUQ7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQU07QUFDNUI7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG9DQUFvQyxjQUFjO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhDQUFNLEdBQUcsUUFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZ0RBQWdELGNBQWM7QUFDOUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3Q0FBd0MsY0FBYztBQUN0RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixnREFBZ0QsY0FBYztBQUM5RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUZBQTJCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaURFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9tb3ZlLWFnZW50LWtpdEAwLjEuMl9AYXB0b3MtbGFicyt0cy1zZGtAMS4zNS4wX2F4aW9zQDEuNy45X2dvdEAxMS44LjZfX0BhcHRvcy1sYWJzK3dhbGxldC1hZGFfb2t3ZDJ6Znh6dm02dW1zdWQ0cTZzeDJ3MnUvbm9kZV9tb2R1bGVzL21vdmUtYWdlbnQta2l0L2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9zaWduZXJzL2Jhc2Utc2lnbmVyLnRzXG52YXIgQmFzZVNpZ25lciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoYWNjb3VudCwgYXB0b3MpIHtcbiAgICB0aGlzLmFjY291bnQgPSBhY2NvdW50O1xuICAgIHRoaXMuYXB0b3MgPSBhcHRvcztcbiAgfVxuICBnZXRBZGRyZXNzKCkge1xuICAgIHJldHVybiB0aGlzLmFjY291bnQuYWNjb3VudEFkZHJlc3M7XG4gIH1cbn07XG5cbi8vIHNyYy9zaWduZXJzL2xvY2FsLXNpZ25lci50c1xuaW1wb3J0IHsgQXB0b3MsIEFwdG9zQ29uZmlnLCBOZXR3b3JrIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIExvY2FsU2lnbmVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlU2lnbmVyIHtcbiAgY29uc3RydWN0b3IoYWNjb3VudCwgbmV0d29yayA9IE5ldHdvcmsuREVWTkVUKSB7XG4gICAgY29uc3QgY29uZmlnID0gbmV3IEFwdG9zQ29uZmlnKHsgbmV0d29yayB9KTtcbiAgICBjb25zdCBhcHRvcyA9IG5ldyBBcHRvcyhjb25maWcpO1xuICAgIHN1cGVyKGFjY291bnQsIGFwdG9zKTtcbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcbiAgICBjb25zdCBzZW5kZXJBdXRoZW50aWNhdG9yID0gdGhpcy5hcHRvcy50cmFuc2FjdGlvbi5zaWduKHtcbiAgICAgIHNpZ25lcjogdGhpcy5hY2NvdW50LFxuICAgICAgdHJhbnNhY3Rpb25cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc2VuZGVyQXV0aGVudGljYXRvclxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XG4gICAgY29uc3Qgc2lnbmVkVHggPSBhd2FpdCB0aGlzLnNpZ25UcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc3VibWl0dGVkVHggPSBhd2FpdCB0aGlzLmFwdG9zLnRyYW5zYWN0aW9uLnN1Ym1pdC5zaW1wbGUoe1xuICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICBzZW5kZXJBdXRoZW50aWNhdG9yOiBzaWduZWRUeC5zZW5kZXJBdXRoZW50aWNhdG9yXG4gICAgfSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBzdWJtaXR0ZWRUeC5oYXNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdC5oYXNoO1xuICB9XG4gIGFzeW5jIHNpZ25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBzaWduZWRNZXNzYWdlID0gdGhpcy5hY2NvdW50LnNpZ25XaXRoQXV0aGVudGljYXRvcihtZXNzYWdlKTtcbiAgICByZXR1cm4gc2lnbmVkTWVzc2FnZS50b1N0cmluZygpO1xuICB9XG59O1xuXG4vLyBzcmMvc2lnbmVycy93YWxsZXQtc2lnbmVyLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcywgQXB0b3MgYXMgQXB0b3MyLCBBcHRvc0NvbmZpZyBhcyBBcHRvc0NvbmZpZzIsIE5ldHdvcmsgYXMgTmV0d29yazIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG52YXIgV2FsbGV0U2lnbmVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlU2lnbmVyIHtcbiAgY29uc3RydWN0b3IoYWNjb3VudCwgd2FsbGV0LCBuZXR3b3JrID0gTmV0d29yazIuREVWTkVUKSB7XG4gICAgY29uc3QgY29uZmlnID0gbmV3IEFwdG9zQ29uZmlnMih7IG5ldHdvcmsgfSk7XG4gICAgY29uc3QgYXB0b3MgPSBuZXcgQXB0b3MyKGNvbmZpZyk7XG4gICAgc3VwZXIoYWNjb3VudCwgYXB0b3MpO1xuICAgIHRoaXMud2FsbGV0ID0gd2FsbGV0O1xuICB9XG4gIGdldEFkZHJlc3MoKSB7XG4gICAgY29uc3Qgd2FsbGV0QWRkcmVzcyA9IHRoaXMud2FsbGV0Py5hY2NvdW50Py5hZGRyZXNzO1xuICAgIHJldHVybiB3YWxsZXRBZGRyZXNzID8gQWNjb3VudEFkZHJlc3MuZnJvbVN0cmluZyh3YWxsZXRBZGRyZXNzKSA6IHRoaXMuYWNjb3VudC5hY2NvdW50QWRkcmVzcztcbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcbiAgICBjb25zdCBzZW5kZXJBdXRoZW50aWNhdG9yID0gYXdhaXQgdGhpcy53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2VuZGVyQXV0aGVudGljYXRvclxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XG4gICAgY29uc3QgdHhIYXNoID0gYXdhaXQgdGhpcy53YWxsZXQuc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICByZXR1cm4gdHhIYXNoLmhhc2g7XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLndhbGxldC5zaWduTWVzc2FnZShtZXNzYWdlKTtcbiAgfVxufTtcblxuLy8gc3JjL2FnZW50LnRzXG5pbXBvcnQgeyBBcHRvc1ByaWNlU2VydmljZUNvbm5lY3Rpb24gfSBmcm9tIFwiQHB5dGhuZXR3b3JrL3B5dGgtYXB0b3MtanNcIjtcblxuLy8gc3JjL2NvbnN0YW50cy9wcmljZS1mZWVkLnRzXG52YXIgcHJpY2VGZWVkID0gW1xuICBcIjB4ZWFhMDIwYzYxY2M0Nzk3MTI4MTM0NjFjZTE1Mzg5NGE5NmE2YzAwYjIxZWQwY2ZjMjc5OGQxZjlhOWU5Yzk0YVwiLFxuICBcIjB4MmI4OWI5ZGM4ZmRmOWYzNDcwOWE1YjEwNmI0NzJmMGYzOWJiNmNhOWNlMDRiMGZkN2YyZTk3MTY4OGUyZTUzYlwiLFxuICBcIjB4MmI4OWI5ZGM4ZmRmOWYzNDcwOWE1YjEwNmI0NzJmMGYzOWJiNmNhOWNlMDRiMGZkN2YyZTk3MTY4OGUyZTUzYlwiLFxuICBcIjB4MDNhZTRkYjI5ZWQ0YWUzM2QzMjM1Njg4OTVhYTAwMzM3ZTY1OGUzNDhiMzc1MDlmNTM3MmFlNTFmMGFmMDBkNVwiLFxuICBcIjB4OWQ0Mjk0YmJjZDExNzRkNmYyMDAzZWMzNjU4MzFlNjRjYzMxZDlmNmYxNWEyYjg1Mzk5ZGI4ZDUwMDA5NjBmNlwiLFxuICBcIjB4MDNhZTRkYjI5ZWQ0YWUzM2QzMjM1Njg4OTVhYTAwMzM3ZTY1OGUzNDhiMzc1MDlmNTM3MmFlNTFmMGFmMDBkNVwiLFxuICBcIjB4YzlkOGIwNzVhNWM2OTMwMzM2NWFlMjM2MzNkNGUwODUxOTliZjVjNTIwYTNiOTBmZWQxMzIyYTAzNDJmZmMzM1wiLFxuICBcIjB4ZTYyZGY2YzhiNGE4NWZlMWE2N2RiNDRkYzEyZGU1ZGIzMzBmN2FjNjZiNzJkYzY1OGFmZWRmMGY0YTQxNWI0M1wiXG5dO1xuXG4vLyBzcmMvdG9vbHMvYW1uaXMvc3Rha2UtdG9rZW4udHNcbmFzeW5jIGZ1bmN0aW9uIHN0YWtlVG9rZW5zKGFnZW50LCB0bywgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHgxMTFhZTNlNWJjODE2YTVlNjNjMmRhOTdkMGFhMzg4NjUxOWUwY2Q1ZTRiMDQ2NjU5ZmEzNTc5NmJkMTE1NDJhOjpyb3V0ZXI6OmRlcG9zaXRfYW5kX3N0YWtlX2VudHJ5XCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50LCB0by50b1N0cmluZygpXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiBzdGFraW5nIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIHN0YWtpbmcgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHN0YWtpbmcgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FtbmlzL3dpdGhkcmF3LXN0YWtlLnRzXG5hc3luYyBmdW5jdGlvbiB1bnN0YWtlVG9rZW5zKGFnZW50LCB0bywgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHgxMTFhZTNlNWJjODE2YTVlNjNjMmRhOTdkMGFhMzg4NjUxOWUwY2Q1ZTRiMDQ2NjU5ZmEzNTc5NmJkMTE1NDJhOjpyb3V0ZXI6OnVuc3Rha2VfZW50cnlcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFthbW91bnQsIHRvLnRvU3RyaW5nKCldXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIHVuc3Rha2luZyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiB1bnN0YWtpbmcgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHVuc3Rha2luZyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvYmFsYW5jZS50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21PbkNoYWluVG9IdW1hblJlYWRhYmxlIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QmFsYW5jZShhZ2VudCwgbWludCkge1xuICB0cnkge1xuICAgIGlmIChtaW50KSB7XG4gICAgICBsZXQgYmFsYW5jZTI7XG4gICAgICBpZiAobWludC5zcGxpdChcIjo6XCIpLmxlbmd0aCAhPT0gMykge1xuICAgICAgICBjb25zdCBiYWxhbmNlcyA9IGF3YWl0IGFnZW50LmFwdG9zLmdldEN1cnJlbnRGdW5naWJsZUFzc2V0QmFsYW5jZXMoe1xuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgIG93bmVyX2FkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICBfZXE6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLnRvU3RyaW5nTG9uZygpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGFzc2V0X3R5cGU6IHsgX2VxOiBtaW50IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBiYWxhbmNlMiA9IGJhbGFuY2VzWzBdLmFtb3VudCA/PyAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFsYW5jZTIgPSBhd2FpdCBhZ2VudC5hcHRvcy5nZXRBY2NvdW50Q29pbkFtb3VudCh7XG4gICAgICAgICAgYWNjb3VudEFkZHJlc3M6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgICAgIGNvaW5UeXBlOiBtaW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhbGFuY2UyO1xuICAgIH1cbiAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgYWdlbnQuYXB0b3MuZ2V0QWNjb3VudEFQVEFtb3VudCh7XG4gICAgICBhY2NvdW50QWRkcmVzczogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKClcbiAgICB9KTtcbiAgICBjb25zdCBjb252ZXJ0ZWRCYWxhbmNlID0gY29udmVydEFtb3VudEZyb21PbkNoYWluVG9IdW1hblJlYWRhYmxlKGJhbGFuY2UsIDgpO1xuICAgIHJldHVybiBjb252ZXJ0ZWRCYWxhbmNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gdHJhbnNmZXIgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL2J1cm4tbmZ0LnRzXG5hc3luYyBmdW5jdGlvbiBidXJuTkZUKGFnZW50LCBtaW50KSB7XG4gIHJldHVybiBcIlwiO1xufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvYnVybi10b2tlbi50c1xuYXN5bmMgZnVuY3Rpb24gYnVyblRva2VuKGFnZW50LCBhbW91bnQsIG1pbnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDY3Yzg1NjRhZWUzNzk5ZTlhYzY2OTU1M2ZkZWYzYTM4MjhkNDYyNmYyNDc4NmI2YTU2NDIxNTJmYTA5NDY5ZGQ6OmxhdW5jaHBhZDo6YnVybl9mYVwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW21pbnQsIGFtb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVG9rZW4gYnVybiBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBidXJuIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiBidXJuIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy90cmFuc2Zlci1uZnQudHNcbmFzeW5jIGZ1bmN0aW9uIHRyYW5zZmVyTkZUKGFnZW50LCB0bywgbWludCkge1xuICByZXR1cm4gXCJcIjtcbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL3RyYW5zZmVyLXRva2VuLnRzXG5hc3luYyBmdW5jdGlvbiB0cmFuc2ZlclRva2VucyhhZ2VudCwgdG8sIGFtb3VudCwgbWludCkge1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgxOjpjb2luOjp0cmFuc2ZlclwiLFxuICAgIHR5cGVBcmd1bWVudHM6IFttaW50XSxcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogW3RvLnRvU3RyaW5nKCksIGFtb3VudF1cbiAgfTtcbiAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweDE6OnByaW1hcnlfZnVuZ2libGVfc3RvcmU6OnRyYW5zZmVyXCIsXG4gICAgdHlwZUFyZ3VtZW50czogW1wiMHgxOjpmdW5naWJsZV9hc3NldDo6TWV0YWRhdGFcIl0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IFttaW50LCB0by50b1N0cmluZygpLCBhbW91bnRdXG4gIH07XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IG1pbnQuc3BsaXQoXCI6OlwiKS5sZW5ndGggPT09IDMgPyBDT0lOX1NUQU5EQVJEX0RBVEEgOiBGVU5HSUJMRV9BU1NFVF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIHRyYW5zZmVyIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIHRyYW5zZmVyIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB0cmFuc2ZlciBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvbWludC10b2tlbi50c1xuYXN5bmMgZnVuY3Rpb24gbWludFRva2VuKGFnZW50LCB0bywgbWludCwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg2N2M4NTY0YWVlMzc5OWU5YWM2Njk1NTNmZGVmM2EzODI4ZDQ2MjZmMjQ3ODZiNmE1NjQyMTUyZmEwOTQ2OWRkOjpsYXVuY2hwYWQ6Om1pbnRfdG9fYWRkcmVzc1wiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW3RvLnRvU3RyaW5nKCksIG1pbnQsIGFtb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVG9rZW4gbWludCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBtaW50IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiBtaW50IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy9jcmVhdGUtdG9rZW4udHNcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKGFnZW50LCBuYW1lLCBzeW1ib2wsIGljb25VUkksIHByb2plY3RVUkkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDY3Yzg1NjRhZWUzNzk5ZTlhYzY2OTU1M2ZkZWYzYTM4MjhkNDYyNmYyNDc4NmI2YTU2NDIxNTJmYTA5NDY5ZGQ6OmxhdW5jaHBhZDo6Y3JlYXRlX2ZhX3NpbXBsZVwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW25hbWUsIHN5bWJvbCwgaWNvblVSSSwgcHJvamVjdFVSSV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVG9rZW4gY3JlYXRpb24gZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gY3JlYXRpb24gZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaGFzaDogc2lnbmVkVHJhbnNhY3Rpb24uaGFzaCxcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRva2VuOiBzaWduZWRUcmFuc2FjdGlvbi5ldmVudHNbMF0uZGF0YS5mYV9vYmouaW5uZXJcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gY3JlYXRpb24gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL2dldC10cmFuc2FjdGlvbi50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb24oYWdlbnQsIGhhc2gpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLmdldFRyYW5zYWN0aW9uQnlIYXNoKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogaGFzaFxuICAgIH0pO1xuICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHRyYW5zZmVyIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy9nZXQtdG9rZW4tZGV0YWlscy50c1xuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0VG9rZW5EZXRhaWxzKHRva2VuQWRkcmVzcykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgIFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1Bhbm9yYUV4Y2hhbmdlL0FwdG9zLVRva2Vucy9yZWZzL2hlYWRzL21haW4vdG9rZW4tbGlzdC5qc29uXCJcbiAgICApO1xuICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHJlcy5kYXRhO1xuICAgIGlmICghdG9rZW5BZGRyZXNzIHx8IHRva2VuQWRkcmVzcyA9PT0gXCJcIikgcmV0dXJuIHRva2VuRGF0YVswXTtcbiAgICBjb25zdCB0b2tlbiA9IHRva2VuRGF0YS5maW5kKFxuICAgICAgKHRva2VuQWRkcikgPT4gKHRva2VuQWRkci50b2tlbkFkZHJlc3MgfHwgdG9rZW5BZGRyLmZhQWRkcmVzcykudG9Mb3dlckNhc2UoKSA9PT0gdG9rZW5BZGRyZXNzLnRvTG93ZXJDYXNlKClcbiAgICApO1xuICAgIGlmICghdG9rZW4gJiYgdG9rZW5BZGRyZXNzLmluY2x1ZGVzKFwiZmFfdG9fY29pbl93cmFwcGVyOjpXcmFwcGVkVVNEVFwiKSkge1xuICAgICAgcmV0dXJuIHRva2VuRGF0YS5maW5kKFxuICAgICAgICAoZSkgPT4gZS5mYUFkZHJlc3MgPT09IFwiMHgzNTdiMGI3NGJjODMzZTk1YTExNWFkMjI2MDQ4NTRkNmIwZmNhMTUxY2VjZDk0MTExNzcwZTVkNmZmYzlkYzJiXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghdG9rZW4pIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIHRva2VuXCIpO1xuICAgIHJldHVybiB0b2tlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHRyYW5zZmVyIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy9nZXQtdG9rZW4tcHJpY2UudHNcbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuUHJpY2UocXVlcnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhc3NldERhdGFSZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2hlcm1lcy5weXRoLm5ldHdvcmsvdjIvcHJpY2VfZmVlZHM/cXVlcnk9JHtxdWVyeX0mYXNzZXRfdHlwZT1jcnlwdG9gKTtcbiAgICBjb25zdCBhc3NldERhdGEgPSBhd2FpdCBhc3NldERhdGFSZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IGFzc2V0RGF0YS5tYXAoKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICBkaXNwbGF5TmFtZTogZGF0YS5hdHRyaWJ1dGVzLmRpc3BsYXlfc3ltYm9sLFxuICAgICAgICBzeW1ib2w6IGRhdGEuYXR0cmlidXRlcy5zeW1ib2xcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgYXNzZXRJZEFycmF5ID0gZm9ybWF0dGVkRGF0YS5tYXAoKGRhdGEpID0+IGRhdGEuaWQpO1xuICAgIGlmIChhc3NldElkQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3NldHMgZm91bmQgZm9yIHRoZSBnaXZlbiBxdWVyeVwiKTtcbiAgICB9XG4gICAgY29uc3QgYXNzZXRQcmljZURhdGFSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vaGVybWVzLnB5dGgubmV0d29yay92Mi91cGRhdGVzL3ByaWNlL2xhdGVzdD9pZHNbXT0ke2Fzc2V0SWRBcnJheS5qb2luKFwiJmlkc1tdPVwiKX1gXG4gICAgKTtcbiAgICBjb25zdCBhc3NldFByaWNlRGF0YSA9IGF3YWl0IGFzc2V0UHJpY2VEYXRhUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IHByaWNlRmVlZDIgPSBmb3JtYXR0ZWREYXRhLm1hcCgoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgcHJpY2VEYXRhID0gYXNzZXRQcmljZURhdGEucGFyc2VkLmZpbmQoKHByaWNlKSA9PiBwcmljZS5pZCA9PT0gZGF0YS5pZCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBwcmljZTogKE51bWJlcihwcmljZURhdGEucHJpY2UucHJpY2UpIC8gMTAgKiogTWF0aC5hYnMocHJpY2VEYXRhLnByaWNlLmV4cG8pKS50b0xvY2FsZVN0cmluZygpIHx8IE51bWJlcihwcmljZURhdGEucHJpY2UucHJpY2UpLnRvTG9jYWxlU3RyaW5nKClcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHByaWNlRmVlZDI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB0cmFuc2ZlciBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvbGVuZC50c1xuYXN5bmMgZnVuY3Rpb24gbGVuZFRva2VuKGFnZW50LCBhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIG5ld1Bvc2l0aW9uLCBmdW5naWJsZUFzc2V0KSB7XG4gIGNvbnN0IERFRkFVTFRfRlVOQ1RJT05BTF9BUkdTID0gW3Bvc2l0aW9uSWQsIGFtb3VudCwgbmV3UG9zaXRpb25dO1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpsZW5kXCIsXG4gICAgdHlwZUFyZ3VtZW50czogW21pbnQudG9TdHJpbmcoKV0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IERFRkFVTFRfRlVOQ1RJT05BTF9BUkdTXG4gIH07XG4gIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpsZW5kX2ZhXCIsXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtwb3NpdGlvbklkLCBtaW50LnRvU3RyaW5nKCksIG5ld1Bvc2l0aW9uLCBhbW91bnRdXG4gIH07XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIG1pbnQgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gbWludCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBoYXNoOiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoLFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgcG9zaXRpb25JZDogc2lnbmVkVHJhbnNhY3Rpb24uZXZlbnRzWzBdLmRhdGEucG9zaXRpb25faWRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gbWludCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvYm9ycm93LnRzXG5hc3luYyBmdW5jdGlvbiBib3Jyb3dUb2tlbihhZ2VudCwgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KSB7XG4gIGNvbnN0IHB5dGhfdXBkYXRlX2RhdGEgPSBhd2FpdCBhZ2VudC5nZXRQeXRoRGF0YSgpO1xuICBjb25zdCBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHUyA9IFtwb3NpdGlvbklkLCBhbW91bnQsIHB5dGhfdXBkYXRlX2RhdGFdO1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpib3Jyb3dcIixcbiAgICB0eXBlQXJndW1lbnRzOiBbbWludC50b1N0cmluZygpXSxcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogREVGQVVMVF9GVU5DVElPTkFMX0FSR1NcbiAgfTtcbiAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweDJmZTU3NmZhYTg0MTM0N2E5YjFiMzJjODY5Njg1ZGViNzVhMTVlM2Y2MmRmZTM3Y2JkNmQ1MmNjNDAzYTE2ZjY6OnBvb2w6OmJvcnJvd19mYVwiLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbcG9zaXRpb25JZCwgbWludC50b1N0cmluZygpLCBhbW91bnQsIHB5dGhfdXBkYXRlX2RhdGFdXG4gIH07XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIGJvcnJvdyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBib3Jyb3cgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaGFzaDogc2lnbmVkVHJhbnNhY3Rpb24uaGFzaCxcbiAgICAgIHBvc2l0aW9uSWRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gYm9ycm93IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9qb3VsZS9yZXBheS50c1xuYXN5bmMgZnVuY3Rpb24gcmVwYXlUb2tlbihhZ2VudCwgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KSB7XG4gIGNvbnN0IERFRkFVTFRfRlVOQ1RJT05BTF9BUkdTID0gW3Bvc2l0aW9uSWQsIGFtb3VudF07XG4gIGNvbnN0IENPSU5fU1RBTkRBUkRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweDJmZTU3NmZhYTg0MTM0N2E5YjFiMzJjODY5Njg1ZGViNzVhMTVlM2Y2MmRmZTM3Y2JkNmQ1MmNjNDAzYTE2ZjY6OnBvb2w6OnJlcGF5XCIsXG4gICAgdHlwZUFyZ3VtZW50czogW21pbnQudG9TdHJpbmcoKV0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IERFRkFVTFRfRlVOQ1RJT05BTF9BUkdTXG4gIH07XG4gIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpyZXBheV9mYVwiLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbcG9zaXRpb25JZCwgbWludC50b1N0cmluZygpLCBhbW91bnRdXG4gIH07XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIHJlcGF5IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIHJlcGF5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc2g6IHNpZ25lZFRyYW5zYWN0aW9uLmhhc2gsXG4gICAgICBwb3NpdGlvbklkXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHJlcGF5IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9qb3VsZS93aXRoZHJhdy50c1xuYXN5bmMgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbihhZ2VudCwgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KSB7XG4gIGNvbnN0IHB5dGhfdXBkYXRlX2RhdGEgPSBhd2FpdCBhZ2VudC5nZXRQeXRoRGF0YSgpO1xuICBjb25zdCBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHUyA9IFtwb3NpdGlvbklkLCBhbW91bnQsIHB5dGhfdXBkYXRlX2RhdGFdO1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjp3aXRoZHJhd1wiLFxuICAgIHR5cGVBcmd1bWVudHM6IFttaW50LnRvU3RyaW5nKCldLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHU1xuICB9O1xuICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6d2l0aGRyYXdfZmFcIixcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogW3Bvc2l0aW9uSWQsIG1pbnQudG9TdHJpbmcoKSwgYW1vdW50LCBweXRoX3VwZGF0ZV9kYXRhXVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBmdW5naWJsZUFzc2V0ID8gRlVOR0lCTEVfQVNTRVRfREFUQSA6IENPSU5fU1RBTkRBUkRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiB3aXRoZHJhdyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiB3aXRoZHJhdyBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBoYXNoOiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoLFxuICAgICAgcG9zaXRpb25JZFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB3aXRoZHJhdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvcG9vbC1kZXRhaWwudHNcbmFzeW5jIGZ1bmN0aW9uIGdldFBvb2xEZXRhaWxzKGFnZW50LCBtaW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWxsUG9vbERldGFpbHNSZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9wcmljZS1hcGkuam91bGUuZmluYW5jZS9hcGkvbWFya2V0XCIpO1xuICAgIGNvbnN0IGFsbFBvb2xEZXRhaWxzID0gYXdhaXQgYWxsUG9vbERldGFpbHNSZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgcG9vbERldGFpbCA9IGFsbFBvb2xEZXRhaWxzLmRhdGEuZmluZCgocG9vbCkgPT4gcG9vbC5hc3NldC50eXBlLmluY2x1ZGVzKG1pbnQpKTtcbiAgICBpZiAoIXBvb2xEZXRhaWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBvb2wgbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYXNzZXROYW1lOiBwb29sRGV0YWlsLmFzc2V0LmFzc2V0TmFtZSxcbiAgICAgIHRva2VuQWRkcmVzczogbWludCxcbiAgICAgIGx0djogcG9vbERldGFpbC5sdHYsXG4gICAgICBkZWNpbWFsczogcG9vbERldGFpbC5hc3NldC5kZWNpbWFscyxcbiAgICAgIG1hcmtldFNpemU6IE51bWJlcihwb29sRGV0YWlsLm1hcmtldFNpemUpIC8gcG9vbERldGFpbC5hc3NldC5kZWNpbWFscyxcbiAgICAgIHRvdGFsQm9ycm93ZWQ6IE51bWJlcihwb29sRGV0YWlsLnRvdGFsQm9ycm93ZWQpIC8gcG9vbERldGFpbC5hc3NldC5kZWNpbWFscyxcbiAgICAgIGRlcG9zaXRBcHk6IHBvb2xEZXRhaWwuZGVwb3NpdEFweSxcbiAgICAgIGV4dHJhRGVwb3NpdEFweTogcG9vbERldGFpbC5leHRyYUFQWS5kZXBvc2l0QVBZLFxuICAgICAgYm9ycm93QXB5OiBwb29sRGV0YWlsLmJvcnJvd0FweSxcbiAgICAgIHByaWNlOiBwb29sRGV0YWlsLnByaWNlSW5mby5wcmljZVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHBvb2wgZGV0YWlsczogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9qb3VsZS91c2VyLXBvc2l0aW9uLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyUG9zaXRpb24oYWdlbnQsIHVzZXJBZGRyZXNzLCBwb3NpdGlvbklkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy52aWV3KHtcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjp1c2VyX3Bvc2l0aW9uX2RldGFpbHNcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFt1c2VyQWRkcmVzcy50b1N0cmluZygpLCBwb3NpdGlvbklkXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghdHJhbnNhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIHBvc2l0aW9uXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHVzZXIgcG9zaXRpb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdXRpbHMvY2xlYW4tam91bGUtYWxsLXBvc2l0aW9ucy1saXN0LnRzXG52YXIgcmVtb3ZlTGFzdEludGVyZXN0UmF0ZUluZGV4ID0gKG9iaikgPT4ge1xuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iai5tYXAoKGl0ZW0pID0+IHJlbW92ZUxhc3RJbnRlcmVzdFJhdGVJbmRleChpdGVtKSk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iaikucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChrZXkgPT09IFwibGFzdF9pbnRlcmVzdF9yYXRlX2luZGV4XCIpIHtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuICAgIGFjY1trZXldID0gcmVtb3ZlTGFzdEludGVyZXN0UmF0ZUluZGV4KHZhbHVlKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59O1xuXG4vLyBzcmMvdG9vbHMvam91bGUvdXNlci1hbGwtcG9zaXRpb25zLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyQWxsUG9zaXRpb25zKGFnZW50LCB1c2VyQWRkcmVzcykge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mudmlldyh7XG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6dXNlcl9wb3NpdGlvbnNfbWFwXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbdXNlckFkZHJlc3MudG9TdHJpbmcoKV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXRyYW5zYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBhbGwgcG9zaXRpb25zXCIpO1xuICAgIH1cbiAgICBjb25zdCBjbGVhbmVkVHJhbnNhY3Rpb24gPSByZW1vdmVMYXN0SW50ZXJlc3RSYXRlSW5kZXgodHJhbnNhY3Rpb24pO1xuICAgIHJldHVybiBjbGVhbmVkVHJhbnNhY3Rpb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHVzZXIgYWxsIHBvc2l0aW9uczogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcmllcy9jcmVhdGUtcHJvZmlsZS50c1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXJpZXNQcm9maWxlKGFnZW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg5NzcwZmE5YzcyNWNiZDk3ZWI1MGIyYmU1Zjc0MTZlZmRmZDFmMTU1NGJlYjA3NTBkNGRhZTRjNjRlODYwZGEzOjpjb250cm9sbGVyOjpyZWdpc3Rlcl91c2VyXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbXCJNYWluIGFjY291bnRcIl1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiQ3JlYXRlIHByb2ZpbGUgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3JlYXRlIHByb2ZpbGUgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENyZWF0ZSBwcm9maWxlIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcmllcy9sZW5kLnRzXG5hc3luYyBmdW5jdGlvbiBsZW5kQXJpZXNUb2tlbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6Y29udHJvbGxlcjo6ZGVwb3NpdFwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1wiTWFpbiBhY2NvdW50XCIsIGFtb3VudCwgZmFsc2VdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkxlbmQgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGVuZCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTGVuZCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXJpZXMvYm9ycm93LnRzXG5hc3luYyBmdW5jdGlvbiBib3Jyb3dBcmllc1Rva2VuKGFnZW50LCBtaW50VHlwZSwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg5NzcwZmE5YzcyNWNiZDk3ZWI1MGIyYmU1Zjc0MTZlZmRmZDFmMTU1NGJlYjA3NTBkNGRhZTRjNjRlODYwZGEzOjpjb250cm9sbGVyOjp3aXRoZHJhd1wiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1wiTWFpbiBhY2NvdW50XCIsIGFtb3VudCwgdHJ1ZV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiQm9ycm93IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvcnJvdyBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQm9ycm93IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcmllcy93aXRoZHJhdy50c1xuYXN5bmMgZnVuY3Rpb24gd2l0aGRyYXdBcmllc1Rva2VuKGFnZW50LCBtaW50VHlwZSwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg5NzcwZmE5YzcyNWNiZDk3ZWI1MGIyYmU1Zjc0MTZlZmRmZDFmMTU1NGJlYjA3NTBkNGRhZTRjNjRlODYwZGEzOjpjb250cm9sbGVyOjp3aXRoZHJhd1wiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1wiTWFpbiBhY2NvdW50XCIsIGFtb3VudCwgZmFsc2VdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIldpdGhkcmF3IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldpdGhkcmF3IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBXaXRoZHJhdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXJpZXMvcmVwYXkudHNcbmFzeW5jIGZ1bmN0aW9uIHJlcGF5QXJpZXNUb2tlbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6Y29udHJvbGxlcjo6ZGVwb3NpdFwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1wiTWFpbiBhY2NvdW50XCIsIGFtb3VudCwgdHJ1ZV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiUmVwYXkgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVwYXkgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlcGF5IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hlbG9uL2xlbmQudHNcbmFzeW5jIGZ1bmN0aW9uIGxlbmRUb2tlbldpdGhFY2hlbG9uKGFnZW50LCBtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCkge1xuICB0cnkge1xuICAgIGNvbnN0IEZVTkNUSU9OQUxfQVJHU19EQVRBID0gW3Bvb2xBZGRyZXNzLCBhbW91bnRdO1xuICAgIGNvbnN0IENPSU5fU1RBTkRBUkRfREFUQSA9IHtcbiAgICAgIGZ1bmN0aW9uOiBcIjB4YzZiYzY1OWYxNjQ5NTUzYzFhM2ZhMDVkOTcyNzQzM2RjMDM4NDNiYWFjMjk0NzNjODE3ZDA2ZDM5ZTc2MjFiYTo6c2NyaXB0czo6c3VwcGx5XCIsXG4gICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGUudG9TdHJpbmcoKV0sXG4gICAgICBmdW5jdGlvbkFyZ3VtZW50czogRlVOQ1RJT05BTF9BUkdTX0RBVEFcbiAgICB9O1xuICAgIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgICBmdW5jdGlvbjogXCIweGM2YmM2NTlmMTY0OTU1M2MxYTNmYTA1ZDk3Mjc0MzNkYzAzODQzYmFhYzI5NDczYzgxN2QwNmQzOWU3NjIxYmE6OnNjcmlwdHM6OnN1cHBseV9mYVwiLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YTogZnVuZ2libGVBc3NldCA/IEZVTkdJQkxFX0FTU0VUX0RBVEEgOiBDT0lOX1NUQU5EQVJEX0RBVEFcbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiTGVuZCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMZW5kIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBMZW5kIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hlbG9uL3dpdGhkcmF3LnRzXG5hc3luYyBmdW5jdGlvbiB3aXRoZHJhd1Rva2VuV2l0aEVjaGVsb24oYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgRlVOQ1RJT05BTF9BUkdTX0RBVEEgPSBbcG9vbEFkZHJlc3MsIGFtb3VudF07XG4gICAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjp3aXRoZHJhd1wiLFxuICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlLnRvU3RyaW5nKCldLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjp3aXRoZHJhd19mYVwiLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YTogZnVuZ2libGVBc3NldCA/IEZVTkdJQkxFX0FTU0VUX0RBVEEgOiBDT0lOX1NUQU5EQVJEX0RBVEFcbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiV2l0aGRyYXcgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2l0aGRyYXcgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFdpdGhkcmF3IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hlbG9uL3JlcGF5LnRzXG5hc3luYyBmdW5jdGlvbiByZXBheVRva2VuV2l0aEVjaGVsb24oYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgRlVOQ1RJT05BTF9BUkdTX0RBVEEgPSBbcG9vbEFkZHJlc3MsIGFtb3VudF07XG4gICAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjpyZXBheVwiLFxuICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlLnRvU3RyaW5nKCldLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjpyZXBheV9mYVwiLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YTogZnVuZ2libGVBc3NldCA/IEZVTkdJQkxFX0FTU0VUX0RBVEEgOiBDT0lOX1NUQU5EQVJEX0RBVEFcbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiUmVwYXkgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVwYXkgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlcGF5IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hlbG9uL2JvcnJvdy50c1xuYXN5bmMgZnVuY3Rpb24gYm9ycm93VG9rZW5XaXRoRWNoZWxvbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgY29uc3QgRlVOQ1RJT05BTF9BUkdTX0RBVEEgPSBbcG9vbEFkZHJlc3MsIGFtb3VudF07XG4gIGNvbnN0IENPSU5fU1RBTkRBUkRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweGM2YmM2NTlmMTY0OTU1M2MxYTNmYTA1ZDk3Mjc0MzNkYzAzODQzYmFhYzI5NDczYzgxN2QwNmQzOWU3NjIxYmE6OnNjcmlwdHM6OmJvcnJvd1wiLFxuICAgIHR5cGVBcmd1bWVudHM6IFttaW50VHlwZS50b1N0cmluZygpXSxcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogRlVOQ1RJT05BTF9BUkdTX0RBVEFcbiAgfTtcbiAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweGM2YmM2NTlmMTY0OTU1M2MxYTNmYTA1ZDk3Mjc0MzNkYzAzODQzYmFhYzI5NDczYzgxN2QwNmQzOWU3NjIxYmE6OnNjcmlwdHM6OmJvcnJvd19mYVwiLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBmdW5naWJsZUFzc2V0ID8gRlVOR0lCTEVfQVNTRVRfREFUQSA6IENPSU5fU1RBTkRBUkRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJCb3Jyb3cgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQm9ycm93IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBCb3Jyb3cgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2VjaG8vc3Rha2UudHNcbmFzeW5jIGZ1bmN0aW9uIHN0YWtlVG9rZW5XaXRoRWNobyhhZ2VudCwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHhhMDI4MTY2MGZmNmNhNmMxYjY4YjU1ZmNiOWIyMTNjMjI3NmY5MGFkMDA3YWQyN2ZkMDAzY2YyZjM0NzhlOTZlOjpsc2RtYW5hZ2U6OnN0YWtlXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50XVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJTdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YWtlIHRva2VuIGluIEVjaG8gZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFN0YWtlIHRva2VuIGluIEVjaG8gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2VjaG8vdW5zdGFrZS50c1xuYXN5bmMgZnVuY3Rpb24gdW5zdGFrZVRva2VuV2l0aEVjaG8oYWdlbnQsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4YTAyODE2NjBmZjZjYTZjMWI2OGI1NWZjYjliMjEzYzIyNzZmOTBhZDAwN2FkMjdmZDAwM2NmMmYzNDc4ZTk2ZTo6bHNkbWFuYWdlOjp1bnN0YWtlXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50XVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJVbnN0YWtlIHRva2VuIGluIEVjaG8gZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnN0YWtlIHRva2VuIGluIEVjaG8gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2xpcXVpZHN3YXAvc3dhcC50c1xuYXN5bmMgZnVuY3Rpb24gc3dhcChhZ2VudCwgbWludFgsIG1pbnRZLCBzd2FwQW1vdW50LCBtaW5Db2luT3V0ID0gMCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MTkwZDQ0MjY2MjQxNzQ0MjY0Yjk2NGEzN2I4ZjA5ODYzMTY3YTEyZDNlNzBjZGEzOTM3NmNmYjRlMzU2MWUxMjo6c2NyaXB0c192Mjo6c3dhcFwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFgsXG4gICAgICAgICAgbWludFksXG4gICAgICAgICAgXCIweDE5MGQ0NDI2NjI0MTc0NDI2NGI5NjRhMzdiOGYwOTg2MzE2N2ExMmQzZTcwY2RhMzkzNzZjZmI0ZTM1NjFlMTI6OmN1cnZlczo6VW5jb3JyZWxhdGVkXCJcbiAgICAgICAgXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtzd2FwQW1vdW50LCBtaW5Db2luT3V0XVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJTd2FwIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN3YXAgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFN3YXAgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2xpcXVpZHN3YXAvY3JlYXRlLXBvb2wudHNcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBvb2woYWdlbnQsIG1pbnRYLCBtaW50WSkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MTkwZDQ0MjY2MjQxNzQ0MjY0Yjk2NGEzN2I4ZjA5ODYzMTY3YTEyZDNlNzBjZGEzOTM3NmNmYjRlMzU2MWUxMjo6c2NyaXB0c192Mjo6cmVnaXN0ZXJfcG9vbFwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFgsXG4gICAgICAgICAgbWludFksXG4gICAgICAgICAgXCIweDE5MGQ0NDI2NjI0MTc0NDI2NGI5NjRhMzdiOGYwOTg2MzE2N2ExMmQzZTcwY2RhMzkzNzZjZmI0ZTM1NjFlMTI6OmN1cnZlczo6VW5jb3JyZWxhdGVkXCJcbiAgICAgICAgXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkNyZWF0ZSBwb29sIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNyZWF0ZSBwb29sIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDcmVhdGUgcG9vbCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvbGlxdWlkc3dhcC9hZGQtbGlxdWlkaXR5LnRzXG5hc3luYyBmdW5jdGlvbiBhZGRMaXF1aWRpdHkoYWdlbnQsIG1pbnRYLCBtaW50WSwgbWludFhBbW91bnQsIG1pbnRZQW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg5ZGQ5NzRhZWEwZjkyN2VhZDY2NGI5ZTFjMjk1ZTQyMTViZDQ0MWE5ZmI0ZTUzZTVlYTBiZjIyZjM1NmM4YTJiOjpyb3V0ZXI6OmFkZF9saXF1aWRpdHlfdjA1XCIsXG4gICAgICAgIHR5cGVBcmd1bWVudHM6IFtcbiAgICAgICAgICBtaW50WCxcbiAgICAgICAgICBtaW50WSxcbiAgICAgICAgICBcIjB4MTYzZGYzNGZjY2JmMDAzY2UyMTlkM2YxZDllNzBkMTQwYjYwNjIyY2I5ZGQ0NzU5OWMyNWZiMmY3OTdiYTZlOjpjdXJ2ZXM6OlVuY29ycmVsYXRlZFwiXG4gICAgICAgIF0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFhBbW91bnQsXG4gICAgICAgICAgMCxcbiAgICAgICAgICAvL2NvaW5feF9taW4sXG4gICAgICAgICAgbWludFlBbW91bnQsXG4gICAgICAgICAgMFxuICAgICAgICAgIC8vIGNvaW5feV9taW5cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJBZGQgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkZCBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yLCBcIkFkZCBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgIHRocm93IG5ldyBFcnJvcihgQWRkIGxpcXVpZGl0eSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvbGlxdWlkc3dhcC9yZW1vdmUtbGlxdWlkaXR5LnRzXG5hc3luYyBmdW5jdGlvbiByZW1vdmVMaXF1aWRpdHkoYWdlbnQsIG1pbnRYLCBtaW50WSwgbHBBbW91bnQsIG1pbk1pbnRYID0gMCwgbWluTWludFkgPSAwKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg5ZGQ5NzRhZWEwZjkyN2VhZDY2NGI5ZTFjMjk1ZTQyMTViZDQ0MWE5ZmI0ZTUzZTVlYTBiZjIyZjM1NmM4YTJiOjpyb3V0ZXI6OnJlbW92ZV9saXF1aWRpdHlfdjA1XCIsXG4gICAgICAgIHR5cGVBcmd1bWVudHM6IFtcbiAgICAgICAgICBtaW50WCxcbiAgICAgICAgICBtaW50WSxcbiAgICAgICAgICBcIjB4MTYzZGYzNGZjY2JmMDAzY2UyMTlkM2YxZDllNzBkMTQwYjYwNjIyY2I5ZGQ0NzU5OWMyNWZiMmY3OTdiYTZlOjpjdXJ2ZXM6OlVuY29ycmVsYXRlZFwiXG4gICAgICAgIF0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbbHBBbW91bnQsIG1pbk1pbnRYLCBtaW5NaW50WV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiUmVtb3ZlIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZW1vdmUgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZW1vdmUgbGlxdWlkaXR5IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9wYW5vcmEvc3dhcC50c1xuaW1wb3J0IGF4aW9zMiBmcm9tIFwiYXhpb3NcIjtcbmFzeW5jIGZ1bmN0aW9uIHN3YXBXaXRoUGFub3JhKGFnZW50LCBmcm9tVG9rZW4sIHRvVG9rZW4sIHN3YXBBbW91bnQsIHRvV2FsbGV0QWRkcmVzcykge1xuICB0cnkge1xuICAgIGNvbnN0IHBhbm9yYVBhcmFtZXRlcnMgPSB7XG4gICAgICBmcm9tVG9rZW5BZGRyZXNzOiBmcm9tVG9rZW4sXG4gICAgICB0b1Rva2VuQWRkcmVzczogdG9Ub2tlbixcbiAgICAgIGZyb21Ub2tlbkFtb3VudDogc3dhcEFtb3VudC50b1N0cmluZygpLFxuICAgICAgdG9XYWxsZXRBZGRyZXNzOiB0b1dhbGxldEFkZHJlc3MgPyB0b1dhbGxldEFkZHJlc3MgOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKS50b1N0cmluZygpXG4gICAgfTtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkucGFub3JhLmV4Y2hhbmdlL3N3YXA/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHBhbm9yYVBhcmFtZXRlcnMpLnRvU3RyaW5nKCl9YDtcbiAgICBjb25zdCBwYW5vcmFBcGlLZXkgPSBhZ2VudC5jb25maWcuUEFOT1JBX0FQSV9LRVk7XG4gICAgaWYgKCFwYW5vcmFBcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIFBBTk9SQV9BUElfS0VZIGluIGNvbmZpZ1wiKTtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MyLnBvc3QoXG4gICAgICB1cmwsXG4gICAgICB7fSxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwieC1hcGkta2V5XCI6IHBhbm9yYUFwaUtleVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcy5kYXRhO1xuICAgIGlmIChyZXNwb25zZS5xdW90ZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vIHF1b3RlcyBhdmFpbGFibGUgZnJvbSBwYW5vcmFcIik7XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zYWN0aW9uRGF0YSA9IHJlc3BvbnNlLnF1b3Rlc1swXS50eERhdGE7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IHRyYW5zYWN0aW9uRGF0YS5mdW5jdGlvbixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogdHJhbnNhY3Rpb25EYXRhLnR5cGVfYXJndW1lbnRzLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogdHJhbnNhY3Rpb25EYXRhLmFyZ3VtZW50c1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJTd2FwIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN3YXAgdHggZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFN3YXAgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL29wZW5haS9jcmVhdGUtaW1hZ2UudHNcbmltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSW1hZ2UoYWdlbnQsIHByb21wdCwgc2l6ZSA9IFwiMTAyNHgxMDI0XCIsIG4gPSAxKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXBpS2V5ID0gYWdlbnQuY29uZmlnLk9QRU5BSV9BUElfS0VZO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBPUEVOQUlfQVBJX0tFWSBpbiBjb25maWdcIik7XG4gICAgfVxuICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoeyBhcGlLZXkgfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuaW1hZ2VzLmdlbmVyYXRlKHtcbiAgICAgIHByb21wdCxcbiAgICAgIG4sXG4gICAgICBzaXplXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlczogcmVzcG9uc2UuZGF0YS5tYXAoKGltZykgPT4gaW1nLnVybClcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW1hZ2UgZ2VuZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvdGhhbGEvc3Rha2UudHNcbmFzeW5jIGZ1bmN0aW9uIHN0YWtlVG9rZW5XaXRoVGhhbGEoYWdlbnQsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4ZmFmNGU2MzNhZTllYjMxMzY2YzljYTI0MjE0MjMxNzYwOTI2NTc2YzdiNjI1MzEzYjM2ODhiNWU5MDA3MzFmNjo6c2NyaXB0czo6c3Rha2VfQVBUX2FuZF90aEFQVFwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiU3Rha2UgQVBUIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YWtlIEFQVCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgU3Rha2UgQVBUIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy90aGFsYS91bnN0YWtlLnRzXG5hc3luYyBmdW5jdGlvbiB1bnN0YWtlQVBUV2l0aFRoYWxhKGFnZW50LCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweGZhZjRlNjMzYWU5ZWIzMTM2NmM5Y2EyNDIxNDIzMTc2MDkyNjU3NmM3YjYyNTMxM2IzNjg4YjVlOTAwNzMxZjY6OnNjcmlwdHM6OnVuc3Rha2VfdGhBUFRcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFthbW91bnRdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlVuc3Rha2UgdG9rZW4gZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdGFrZSB0b2tlbiBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5zdGFrZSB0b2tlbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvdGhhbGEvbWludC1tb2QudHNcbmFzeW5jIGZ1bmN0aW9uIG1pbnRNT0RXaXRoVGhhbGEoYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDZmOTg2ZDE0NmU0YTkwYjgyOGQ4YzEyYzE0YjZmNGUwMDNmZGZmMTFhOGVlY2NlY2ViNjM3NDQzNjNlYWFjMDE6OnBzbV9zY3JpcHRzOjptaW50XCIsXG4gICAgICAgIHR5cGVBcmd1bWVudHM6IFttaW50VHlwZV0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50XVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJNaW50IE1PRCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaW50IE1PRCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWludCBNT0QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL3RoYWxhL3JlZGVlbS1tb2QudHNcbmFzeW5jIGZ1bmN0aW9uIHJlZGVlbU1PRFdpdGhUaGFsYShhZ2VudCwgbWludFR5cGUsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4NmY5ODZkMTQ2ZTRhOTBiODI4ZDhjMTJjMTRiNmY0ZTAwM2ZkZmYxMWE4ZWVjY2VjZWI2Mzc0NDM2M2VhYWMwMTo6cHNtX3NjcmlwdHM6OnJlZGVlbVwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiUmVkZWVtIE1PRCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWRlZW0gTU9EIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZWRlZW0gTU9EIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy90aGFsYS9hZGQtbGlxdWlkaXR5LnRzXG5hc3luYyBmdW5jdGlvbiBhZGRMaXF1aWRpdHlXaXRoVGhhbGEoYWdlbnQsIG1pbnRUeXBlWCwgbWludFR5cGVZLCBtaW50WEFtb3VudCwgbWludFlBbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OndlaWdodGVkX3Bvb2xfc2NyaXB0czo6YWRkX2xpcXVpZGl0eVwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFR5cGVYLFxuICAgICAgICAgIG1pbnRUeXBlWSxcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6YmFzZV9wb29sOjpOdWxsXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjp3ZWlnaHRlZF9wb29sOjpXZWlnaHRfNTBcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6d2VpZ2h0ZWRfcG9vbDo6V2VpZ2h0XzUwXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjpiYXNlX3Bvb2w6Ok51bGxcIlxuICAgICAgICBdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW21pbnRYQW1vdW50LCBtaW50WUFtb3VudCwgMCwgMCwgMCwgMCwgMCwgMF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiQWRkIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZGQgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBZGQgbGlxdWlkaXR5IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy90aGFsYS9yZW1vdmUtbGlxdWlkaXR5LnRzXG5hc3luYyBmdW5jdGlvbiByZW1vdmVMaXF1aWRpdHlXaXRoVGhhbGEoYWdlbnQsIG1pbnRUeXBlWCwgbWludFR5cGVZLCBscEFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6d2VpZ2h0ZWRfcG9vbF9zY3JpcHRzOjpyZW1vdmVfbGlxdWlkaXR5XCIsXG4gICAgICAgIHR5cGVBcmd1bWVudHM6IFtcbiAgICAgICAgICBtaW50VHlwZVgsXG4gICAgICAgICAgbWludFR5cGVZLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjpiYXNlX3Bvb2w6Ok51bGxcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6YmFzZV9wb29sOjpOdWxsXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OndlaWdodGVkX3Bvb2w6OldlaWdodF81MFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjp3ZWlnaHRlZF9wb29sOjpXZWlnaHRfNTBcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6YmFzZV9wb29sOjpOdWxsXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiXG4gICAgICAgIF0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbbHBBbW91bnQsIDAsIDAsIDAsIDBdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlJlbW92ZSBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVtb3ZlIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVtb3ZlIGxpcXVpZGl0eSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdXRpbHMvZ2V0LXBvb2wtYWRkcmVzcy1ieS10b2tlbi1uYW1lLnRzXG52YXIgdG9rZW5zTGlzdCA9IFtcbiAge1xuICAgIG5hbWU6IFwiVVNEdFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4YWMwMGU5MGNkYWRlYzA2ZDgxZTBkNWNlN2EzZTkzZDYzZDU2M2U5ODJkZWEwY2ExNWJhZDJiMDY3ZjQyZDJiZVwiLFxuICAgIGRlY2ltYWxzOiA2LFxuICAgIHRva2VuQWRkcmVzczogXCIweDM1N2IwYjc0YmM4MzNlOTVhMTE1YWQyMjYwNDg1NGQ2YjBmY2ExNTFjZWNkOTQxMTE3NzBlNWQ2ZmZjOWRjMmJcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ6VVNEVFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4NDQ3YjNiNTE2NTQ2ZjI4ZThjNGY2ODI1YTYyODdiMDkxNjE2NTllN2M1MDBjNTk5YzI5YzI4YTg0OTI4NDRiOFwiLFxuICAgIGRlY2ltYWxzOiA2LFxuICAgIHRva2VuQWRkcmVzczogXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwielVTRENcIixcbiAgICBwb29sQWRkcmVzczogXCIweGE5YzUxY2EzYmNkOTM5NzhkMGM0YWFkYTdjNGNmNDdjMDc5MWNhY2VkM2NkYzRlMTVmMmM4ZTA3OTdkMWY5M2NcIixcbiAgICBkZWNpbWFsczogNixcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEQ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFQVFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4NzYxYTk3Nzg3ZmE4YjNhZTBjZWY5MWViYzJkOTZlNTZjYzUzOWRmNWJjODhkYWRhYmVlOThhZTAwMzYzYTgzMVwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInN0aEFQVFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4ZWQ2YmY5ZmU3ZTNmNDJjNjgzMWZmYWM5MTgyNGE1NDVjNGI4YmZjYjQwYTU5YjNmNGNjZmUyMDNjYWZiN2Y0MlwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweGZhZjRlNjMzYWU5ZWIzMTM2NmM5Y2EyNDIxNDIzMTc2MDkyNjU3NmM3YjYyNTMxM2IzNjg4YjVlOTAwNzMxZjY6OnN0YWtpbmc6OlN0YWtlZFRoYWxhQVBUXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTU9EXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHhlZjJhZTg5Nzk2NzI1ZDBlYjM2MzMyNmVjYjdkZjE1OWZlYjk0OWY2ZDFmNDAwZjc2ZGVlZWViY2NiYWMwMGYxXCIsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4NmY5ODZkMTQ2ZTRhOTBiODI4ZDhjMTJjMTRiNmY0ZTAwM2ZkZmYxMWE4ZWVjY2VjZWI2Mzc0NDM2M2VhYWMwMTo6bW9kX2NvaW46Ok1PRFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRITFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4MTI3ZWE1YjRjNDUwYmU2OTVlNDg4ZGExYzNiYzAxM2UyZTkzZDhjZjAwMjcwZWY5MDM4NTE4OTg0NGJjOTc1NVwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweDdmZDUwMGMxMTIxNmYwZmUzMDk1ZDBjNGI4YWE0ZDY0YTRlMmUwNGY4Mzc1ODQ2MmYyYjEyNzI1NTY0MzYxNTo6dGhsX2NvaW46OlRITFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIndVU0RDXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHhhNzZlYmZiNDMyOTgyYzg2NDc4M2ZkYjMzY2RmNWE5ZWRiMThhYzFiOTUwZGViODAzN2Y1Y2Y4Yzk4NGRhM2QyXCIsXG4gICAgZGVjaW1hbHM6IDYsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4NWUxNTZmMTIwN2QwZWJmYTE5YTllZWZmMDBkNjJhMjgyMjc4ZmI4NzE5ZjRmYWIzYTU4NmEwYTJjMGZmZmJlYTo6Y29pbjo6VFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInpXRVRIXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHg1NDhjZjU4N2JkOTE4YTAwMDViMzM3MmExZDIzZTY0YjE4YWNlM2M2MTk2MmYwODdhMjFlYWM1MmNmMjI4NTA0XCIsXG4gICAgZGVjaW1hbHM6IDYsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OldFVEhcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ3V0VUSFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4MTE0ZWU1MTlmZmExZTg2OTc3ODRiZDFhMzUwODIyY2IzNzYwMWExNDc2Mjg5MDUxYjgyOTUxNjU1OTdhNDUzOFwiLFxuICAgIGRlY2ltYWxzOiA2LFxuICAgIHRva2VuQWRkcmVzczogXCIweGNjOGE4OWM4ZGNlOTY5M2QzNTQ0NDlmMWY3M2U2MGUxNGUzNDc0MTc4NTRmMDI5ZGI1YmM4ZTc0NTQwMDhhYmI6OmNvaW46OlRcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDQUtFXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHg0MWIwMzllNTUxOGIxYTM3ODZlZTc5OGQ4OTVlMGRkZjMxNDFmYmJjMjAwMDkyODQzMjNmYTUxZWEyNzljODE5XCIsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4MTU5ZGY2Yjc2ODk0MzcwMTYxMDhhMDE5ZmQ1YmVmNzM2YmFjNjkyYjZkNGExZjEwYzk0MWY2ZmJiOWE3NGNhNjo6b2Z0OjpDYWtlT0ZUXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwic3RBUFRcIixcbiAgICBwb29sQWRkcmVzczogXCIweGMzYzljYzg4NWE1MjAwNGUwNDkwZjZhODI5MWIzYmM1ODU0ZjBlNDJkOTMxZmIxMjQ3MzZiZDE4OWM5ZjBmNDVcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHgxMTFhZTNlNWJjODE2YTVlNjNjMmRhOTdkMGFhMzg4NjUxOWUwY2Q1ZTRiMDQ2NjU5ZmEzNTc5NmJkMTE1NDJhOjpzdGFwdF90b2tlbjo6U3Rha2VkQXB0XCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiYUJUQ1wiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4YWNiNzI2MmIzM2ExNDdiNDdiOTUwYTNhMjZkNzY5OWUxYTU4YmNhYTQ3NWVmNjM2Y2IwZmVhNTNmYTBlYjg3MlwiLFxuICAgIGRlY2ltYWxzOiAxMCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHg0ZTE4NTRmNmQzMzJjOTUyNWUyNThmYjZlNjZmODRiNmFmOGFiYTY4N2JiY2I4MzJhMjQ3NjhjNGUxNzVmZWVjOjphYnRjOjpBQlRDXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU1RPTkVcIixcbiAgICBwb29sQWRkcmVzczogXCIweDA3NWMzOWYxOGM3YmMwMGFjMGY4MWEwZjlhYjdlMzE5ZTIzNzkwZDdkOGMzZGY5NjhkODRhMjM2OTk1ODRiZDlcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHg1NDNjNTY2MGFhNGQ0OTY2ODdlMjA2OGMxMTc2NWYwNDYwN2M0ZjRiNjM5YTgzMjMzYTkzMzM2MDRmYjhjZTU5OjpzdGFrZXN0b25lX2V0aGVyOjpTdGFrZVN0b25lRXRoZXJcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ0cnVBUFRcIixcbiAgICBwb29sQWRkcmVzczogXCIweDdiZDViZTAzZGYwZmIzODQxZmVkMzM3YjhlN2EzNTM4MThiOTE3Y2NlNmRiMjhiODA3YjY5MTAwMmExMjJkNzNcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHhhZWY2YThjMzE4MmUwNzZkYjcyZDY0MzI0NjE3MTE0Y2FjZjlhNTJmMjgzMjVlZGMxMGI0ODNmN2YwNWRhMGU3XCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwic0JUQ1wiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4NzU0MTE0YzY1NmUyNjQ5OGE4YzBiMjBmYTI0YWY2NjNmZWQ1ZTRiMjRhY2I0NzFjMTAzZGFlYTBmNzAwNmI0MFwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweDVkZWUxZDRiMTNmYWUzMzhhMWUxNzgwZjlhZDI3MDlhMDEwZTgyNDM4OGVmZDE2OTE3MWEyNmUzZWE5MDI5YmI6OnN0YWtlc3RvbmVfYml0Y29pbjo6U3Rha2VTdG9uZUJpdGNvaW5cIlxuICB9XG5dO1xudmFyIGdldFRva2VuQnlUb2tlbk5hbWUgPSAobmFtZSkgPT4ge1xuICBjb25zdCB0b2tlbiA9IHRva2Vuc0xpc3QuZmluZChcbiAgICAodG9rZW4yKSA9PiB0b2tlbjIubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHwgdG9rZW4yLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lLnRvTG93ZXJDYXNlKCkpXG4gICk7XG4gIHJldHVybiB0b2tlbjtcbn07XG52YXIgZ2V0VG9rZW5CeVRva2VuQWRkcmVzcyA9IChhZGRyZXNzKSA9PiB7XG4gIGNvbnN0IHRva2VuID0gdG9rZW5zTGlzdC5maW5kKCh0b2tlbjIpID0+IHRva2VuMi50b2tlbkFkZHJlc3MudG9Mb3dlckNhc2UoKSA9PT0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpKTtcbiAgcmV0dXJuIHRva2VuO1xufTtcblxuLy8gc3JjL2FnZW50LnRzXG52YXIgQWdlbnRSdW50aW1lID0gY2xhc3Mge1xuICBhY2NvdW50O1xuICBhcHRvcztcbiAgY29uZmlnO1xuICBjb25zdHJ1Y3RvcihhY2NvdW50LCBhcHRvcywgY29uZmlnKSB7XG4gICAgdGhpcy5hY2NvdW50ID0gYWNjb3VudDtcbiAgICB0aGlzLmFwdG9zID0gYXB0b3M7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgPyBjb25maWcgOiB7fTtcbiAgfVxuICBhc3luYyBnZXRQeXRoRGF0YSgpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gbmV3IEFwdG9zUHJpY2VTZXJ2aWNlQ29ubmVjdGlvbihcImh0dHBzOi8vaGVybWVzLnB5dGgubmV0d29ya1wiKTtcbiAgICByZXR1cm4gYXdhaXQgY29ubmVjdGlvbi5nZXRQcmljZUZlZWRzVXBkYXRlRGF0YShwcmljZUZlZWQpO1xuICB9XG4gIGdldEJhbGFuY2UobWludCkge1xuICAgIHJldHVybiBnZXRCYWxhbmNlKHRoaXMsIG1pbnQpO1xuICB9XG4gIGdldFRva2VuRGV0YWlscyh0b2tlbikge1xuICAgIHJldHVybiBnZXRUb2tlbkRldGFpbHModG9rZW4pO1xuICB9XG4gIGdldFRva2VuQnlUb2tlbk5hbWUobmFtZSkge1xuICAgIHJldHVybiBnZXRUb2tlbkJ5VG9rZW5OYW1lKG5hbWUpO1xuICB9XG4gIGdldFRva2VuUHJpY2UocXVlcnkpIHtcbiAgICByZXR1cm4gZ2V0VG9rZW5QcmljZShxdWVyeSk7XG4gIH1cbiAgdHJhbnNmZXJUb2tlbnModG8sIGFtb3VudCwgbWludCkge1xuICAgIHJldHVybiB0cmFuc2ZlclRva2Vucyh0aGlzLCB0bywgYW1vdW50LCBtaW50KTtcbiAgfVxuICBnZXRUcmFuc2FjdGlvbihoYXNoKSB7XG4gICAgcmV0dXJuIGdldFRyYW5zYWN0aW9uKHRoaXMsIGhhc2gpO1xuICB9XG4gIGJ1cm5Ub2tlbihhbW91bnQsIG1pbnQpIHtcbiAgICByZXR1cm4gYnVyblRva2VuKHRoaXMsIGFtb3VudCwgbWludCk7XG4gIH1cbiAgY3JlYXRlVG9rZW4obmFtZSwgc3ltYm9sLCBpY29uVVJJLCBwcm9qZWN0VVJJKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVRva2VuKHRoaXMsIG5hbWUsIHN5bWJvbCwgaWNvblVSSSwgcHJvamVjdFVSSSk7XG4gIH1cbiAgbWludFRva2VuKHRvLCBtaW50LCBhbW91bnQpIHtcbiAgICByZXR1cm4gbWludFRva2VuKHRoaXMsIHRvLCBtaW50LCBhbW91bnQpO1xuICB9XG4gIHN0YWtlVG9rZW5zV2l0aEFtbmlzKHRvLCBhbW91bnQpIHtcbiAgICByZXR1cm4gc3Rha2VUb2tlbnModGhpcywgdG8sIGFtb3VudCk7XG4gIH1cbiAgd2l0aGRyYXdTdGFrZUZyb21BbW5pcyh0bywgYW1vdW50KSB7XG4gICAgcmV0dXJuIHVuc3Rha2VUb2tlbnModGhpcywgdG8sIGFtb3VudCk7XG4gIH1cbiAgdHJhbnNmZXJORlQodG8sIG1pbnQpIHtcbiAgICByZXR1cm4gdHJhbnNmZXJORlQodGhpcywgdG8sIG1pbnQpO1xuICB9XG4gIGJ1cm5ORlQobWludCkge1xuICAgIHJldHVybiBidXJuTkZUKHRoaXMsIG1pbnQpO1xuICB9XG4gIGxlbmRUb2tlbihhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIG5ld1Bvc2l0aW9uLCBmdW5naWJsZUFzc2V0KSB7XG4gICAgcmV0dXJuIGxlbmRUb2tlbih0aGlzLCBhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIG5ld1Bvc2l0aW9uLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICBib3Jyb3dUb2tlbihhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gYm9ycm93VG9rZW4odGhpcywgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICB3aXRoZHJhd1Rva2VuKGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCkge1xuICAgIHJldHVybiB3aXRoZHJhd1Rva2VuKHRoaXMsIGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCk7XG4gIH1cbiAgcmVwYXlUb2tlbihhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gcmVwYXlUb2tlbih0aGlzLCBhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG4gIGdldFVzZXJQb3NpdGlvbih1c2VyQWRkcmVzcywgcG9zaXRpb25JZCkge1xuICAgIHJldHVybiBnZXRVc2VyUG9zaXRpb24odGhpcywgdXNlckFkZHJlc3MsIHBvc2l0aW9uSWQpO1xuICB9XG4gIGdldFVzZXJBbGxQb3NpdGlvbnModXNlckFkZHJlc3MpIHtcbiAgICByZXR1cm4gZ2V0VXNlckFsbFBvc2l0aW9ucyh0aGlzLCB1c2VyQWRkcmVzcyk7XG4gIH1cbiAgZ2V0UG9vbERldGFpbHMobWludCkge1xuICAgIHJldHVybiBnZXRQb29sRGV0YWlscyh0aGlzLCBtaW50KTtcbiAgfVxuICBhZGRMaXF1aWRpdHkobWludFgsIG1pbnRZLCBtaW50WEFtb3VudCwgbWludFlBbW91bnQpIHtcbiAgICByZXR1cm4gYWRkTGlxdWlkaXR5KHRoaXMsIG1pbnRYLCBtaW50WSwgbWludFhBbW91bnQsIG1pbnRZQW1vdW50KTtcbiAgfVxuICByZW1vdmVMaXF1aWRpdHkobWludFgsIG1pbnRZLCBscEFtb3VudCwgbWluTWludFggPSAwLCBtaW5NaW50WSA9IDApIHtcbiAgICByZXR1cm4gcmVtb3ZlTGlxdWlkaXR5KHRoaXMsIG1pbnRYLCBtaW50WSwgbHBBbW91bnQsIG1pbk1pbnRYLCBtaW5NaW50WSk7XG4gIH1cbiAgc3dhcChtaW50WCwgbWludFksIHN3YXBBbW91bnQsIG1pbkNvaW5PdXQpIHtcbiAgICByZXR1cm4gc3dhcCh0aGlzLCBtaW50WCwgbWludFksIHN3YXBBbW91bnQsIG1pbkNvaW5PdXQpO1xuICB9XG4gIGNyZWF0ZVBvb2wobWludFgsIG1pbnRZKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVBvb2wodGhpcywgbWludFgsIG1pbnRZKTtcbiAgfVxuICAvLyBBcmllc1xuICBjcmVhdGVBcmllc1Byb2ZpbGUoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUFyaWVzUHJvZmlsZSh0aGlzKTtcbiAgfVxuICBsZW5kQXJpZXNUb2tlbihtaW50VHlwZSwgYW1vdW50KSB7XG4gICAgcmV0dXJuIGxlbmRBcmllc1Rva2VuKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQpO1xuICB9XG4gIGJvcnJvd0FyaWVzVG9rZW4obWludFR5cGUsIGFtb3VudCkge1xuICAgIHJldHVybiBib3Jyb3dBcmllc1Rva2VuKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQpO1xuICB9XG4gIHdpdGhkcmF3QXJpZXNUb2tlbihtaW50VHlwZSwgYW1vdW50KSB7XG4gICAgcmV0dXJuIHdpdGhkcmF3QXJpZXNUb2tlbih0aGlzLCBtaW50VHlwZSwgYW1vdW50KTtcbiAgfVxuICByZXBheUFyaWVzVG9rZW4obWludFR5cGUsIGFtb3VudCkge1xuICAgIHJldHVybiByZXBheUFyaWVzVG9rZW4odGhpcywgbWludFR5cGUsIGFtb3VudCk7XG4gIH1cbiAgLy8gVGhhbGFcbiAgc3Rha2VUb2tlbnNXaXRoVGhhbGEoYW1vdW50KSB7XG4gICAgcmV0dXJuIHN0YWtlVG9rZW5XaXRoVGhhbGEodGhpcywgYW1vdW50KTtcbiAgfVxuICB1bnN0YWtlVG9rZW5zV2l0aFRoYWxhKGFtb3VudCkge1xuICAgIHJldHVybiB1bnN0YWtlQVBUV2l0aFRoYWxhKHRoaXMsIGFtb3VudCk7XG4gIH1cbiAgbWludE1PRFdpdGhUaGFsYShtaW50VHlwZSwgYW1vdW50KSB7XG4gICAgcmV0dXJuIG1pbnRNT0RXaXRoVGhhbGEodGhpcywgbWludFR5cGUsIGFtb3VudCk7XG4gIH1cbiAgcmVkZWVtTU9EV2l0aFRoYWxhKG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgICByZXR1cm4gcmVkZWVtTU9EV2l0aFRoYWxhKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQpO1xuICB9XG4gIGFkZExpcXVpZGl0eVdpdGhUaGFsYShtaW50WCwgbWludFksIG1pbnRYQW1vdW50LCBtaW50WUFtb3VudCkge1xuICAgIHJldHVybiBhZGRMaXF1aWRpdHlXaXRoVGhhbGEodGhpcywgbWludFgsIG1pbnRZLCBtaW50WEFtb3VudCwgbWludFlBbW91bnQpO1xuICB9XG4gIHJlbW92ZUxpcXVpZGl0eVdpdGhUaGFsYShtaW50WCwgbWludFksIGxwQW1vdW50KSB7XG4gICAgcmV0dXJuIHJlbW92ZUxpcXVpZGl0eVdpdGhUaGFsYSh0aGlzLCBtaW50WCwgbWludFksIGxwQW1vdW50KTtcbiAgfVxuICAvLyBwYW5vcmFcbiAgc3dhcFdpdGhQYW5vcmEoZnJvbVRva2VuLCB0b1Rva2VuLCBzd2FwQW1vdW50LCB0b1dhbGxldEFkZHJlc3MpIHtcbiAgICByZXR1cm4gc3dhcFdpdGhQYW5vcmEodGhpcywgZnJvbVRva2VuLCB0b1Rva2VuLCBzd2FwQW1vdW50LCB0b1dhbGxldEFkZHJlc3MpO1xuICB9XG4gIC8vIG9wZW5haVxuICBjcmVhdGVJbWFnZVdpdGhPcGVuQUkocHJvbXB0LCBzaXplLCBuKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUltYWdlKHRoaXMsIHByb21wdCwgc2l6ZSwgbik7XG4gIH1cbiAgLy8gRWNob1xuICBzdGFrZVRva2VuV2l0aEVjaG8oYW1vdW50KSB7XG4gICAgcmV0dXJuIHN0YWtlVG9rZW5XaXRoRWNobyh0aGlzLCBhbW91bnQpO1xuICB9XG4gIHVuc3Rha2VUb2tlbldpdGhFY2hvKGFtb3VudCkge1xuICAgIHJldHVybiB1bnN0YWtlVG9rZW5XaXRoRWNobyh0aGlzLCBhbW91bnQpO1xuICB9XG4gIC8vIEVjaGVsb25cbiAgbGVuZFRva2VuV2l0aEVjaGVsb24obWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gbGVuZFRva2VuV2l0aEVjaGVsb24odGhpcywgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG4gIHdpdGhkcmF3VG9rZW5XaXRoRWNoZWxvbihtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCkge1xuICAgIHJldHVybiB3aXRoZHJhd1Rva2VuV2l0aEVjaGVsb24odGhpcywgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG4gIHJlcGF5VG9rZW5XaXRoRWNoZWxvbihtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCkge1xuICAgIHJldHVybiByZXBheVRva2VuV2l0aEVjaGVsb24odGhpcywgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG4gIGJvcnJvd1Rva2VuV2l0aEVjaGVsb24obWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gYm9ycm93VG9rZW5XaXRoRWNoZWxvbih0aGlzLCBtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCk7XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYWNjb3VudC9hZGRyZXNzLnRzXG5pbXBvcnQgeyBUb29sIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFwdG9zQWNjb3VudEFkZHJlc3NUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc19nZXRfd2FsbGV0X2FkZHJlc3NcIjtcbiAgZGVzY3JpcHRpb24gPSBcIkdldCB0aGUgd2FsbGV0IGFkZHJlc3Mgb2YgdGhlIGFnZW50XCI7XG4gIGFzeW5jIF9jYWxsKF9pbnB1dCkge1xuICAgIHJldHVybiB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLnRvU3RyaW5nKCk7XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYW1uaXMvc3Rha2UudHNcbmltcG9ydCB7IEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzMiwgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBbW5pc1N0YWtlVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDIge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFtbmlzX3N0YWtlXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBzdGFrZSBBUFQgKEFwdG9zKSB0byBhbW5pcyB2YWxpZGF0b3IgYW5kIHJlY2VpdmUgaXRzIGxpcXVpZCBzdGFraW5nIHRva2VuIHN0QVBUIChzdGFrZWQgQVBUKVxuXG5cdGtlZXAgcmVjaXBpZW50IGJsYW5rIGlmIHVzZXIgdGhlbXNlbHZlcyB3YW50cyB0byByZWNlaXZlIHN0QVBUIGFuZCBub3Qgc2VuZCB0byBhbnlib2R5IGVsc2VcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKHJlcXVpcmVkKTpcbiAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIHJlY2lwaWVudDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChvcHRpb25hbClgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCByZWNpcGllbnQgPSBBY2NvdW50QWRkcmVzczIuZnJvbShwYXJzZWRJbnB1dC5yZWNpcGllbnQpIHx8IHRoaXMuYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCk7XG4gICAgICBjb25zdCBzdGFrZVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuc3Rha2VUb2tlbnNXaXRoQW1uaXMoXG4gICAgICAgIHJlY2lwaWVudCxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBzdGFrZVRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBcInN0QVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYW1uaXMvd2l0aGRyYXctc3Rha2UudHNcbmltcG9ydCB7IEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzMywgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFtbmlzV2l0aGRyYXdTdGFrZVRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhbW5pc193aXRoZHJhd19zdGFrZVwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gd2l0aGRyYXcgc3Rha2VkIEFQVCAoQXB0b3MpIGZyb20gYW1uaXMgdmFsaWRhdG9yIGFuZCByZWNlaXZlIGJhY2sgQVBUXG5cblx0a2VlcCByZWNpcGllbnQgYmxhbmsgaWYgdXNlciB0aGVtc2VsdmVzIHdhbnRzIHRvIHJlY2VpdmUgQVBUIGFuZCBub3Qgc2VuZCB0byBhbnlib2R5IGVsc2VcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICByZWNpcGllbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgcmVjaXBpZW50ID0gQWNjb3VudEFkZHJlc3MzLmZyb20ocGFyc2VkSW5wdXQucmVjaXBpZW50KSB8fCB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpO1xuICAgICAgY29uc3Qgd2l0aGRyYXdTdGFrZVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQud2l0aGRyYXdTdGFrZUZyb21BbW5pcyhcbiAgICAgICAgcmVjaXBpZW50LFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB3aXRoZHJhd1N0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXB0b3MvYmFsYW5jZS50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNCB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc0JhbGFuY2VUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sNCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfYmFsYW5jZVwiO1xuICBkZXNjcmlwdGlvbiA9IGBHZXQgdGhlIGJhbGFuY2Ugb2YgYSBBcHRvcyBhY2NvdW50LlxuXG4gIElmIHlvdSB3YW50IHRvIGdldCB0aGUgYmFsYW5jZSBvZiB5b3VyIHdhbGxldCwgeW91IGRvbid0IG5lZWQgdG8gcHJvdmlkZSB0aGUgbWludC5cbiAgSWYgbm8gbWludCBpcyBwcm92aWRlZCwgdGhlIGJhbGFuY2Ugd2lsbCBiZSBpbiBBUFQuXG4gIGlmIHlvdSB3YW50IHRvIGdldCBiYWxhbmNlIG9mIGEgZnVuZ2libGUgYXNzZXQsIHlvdSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFzc2V0IGFkZHJlc3MgYXMgbWludFxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcIlxuICAweDM1N2IwYjc0YmM4MzNlOTVhMTE1YWQyMjYwNDg1NGQ2YjBmY2ExNTFjZWNkOTQxMTE3NzBlNWQ2ZmZjOWRjMmJcIiAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludCA9IHBhcnNlZElucHV0Lm1pbnQgfHwgdm9pZCAwO1xuICAgICAgY29uc3QgbWludERldGFpbHMgPSB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50KTtcbiAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLmFnZW50LmdldEJhbGFuY2UobWludCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBiYWxhbmNlLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWxzLm5hbWUgfHwgXCJBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbHMuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcHRvcy9nZXQtdG9rZW4tZGV0YWlscy50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc0dldFRva2VuRGV0YWlsVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDUge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFwdG9zX3Rva2VuX2RldGFpbHNcIjtcbiAgZGVzY3JpcHRpb24gPSBgR2V0IHRoZSBkZXRhaWwgb2YgYW55IGFwdG9zIHRva2Vuc1xuXG4gIGRldGFpbHMgYWxzbyBpbmNsdWRlIGRlY2ltYWxzIHdoaWNoIHlvdSBjYW4gdXNlIHRvIG1ha2Ugb25jaGFpbiB2YWx1ZXMgcmVhZGFibGUgdG8gYSBodW1hbiB1c2VyXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICB0b2tlbjogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludCA9IHBhcnNlZElucHV0LnRva2VuIHx8IFwiXCI7XG4gICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50KTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHRva2VuRGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXB0b3MvdHJhbnNmZXItdG9rZW4udHNcbmltcG9ydCB7IEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNCwgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjMgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2w2IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFwdG9zVHJhbnNmZXJUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2w2IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc190cmFuc2Zlcl90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gdHJhbnNmZXIgQVBULCBhbnkgdG9rZW4gb3IgZnVuZ2libGUgYXNzZXQgdG8gYSByZWNpcGllbnRcblxuICBpZiB5b3Ugd2FudCB0byB0cmFuc2ZlciBBUFQsIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcbiAgaWYgeW91IHdhbnQgdG8gdHJhbnNmZXIgdG9rZW4gb3RoZXIgdGhhbiBBUFQsIHlvdSBuZWVkIHRvIHByb3ZpZGUgdGhlIG1pbnQgb2YgdGhhdCBzcGVjaWZpYyB0b2tlblxuICBpZiB5b3Ugd2FudCB0byB0cmFuc2ZlciBmdW5naWJsZSBhc3NldCwgYWRkIGZ1bmdpYmxlIGFzc2V0IGFkZHJlc3MgYXMgbWludFxuXG4gIGtlZXAgdG8gYmxhbmsgaWYgdXNlciB0aGVtc2VsdmVzIHdhbnRzIHRvIHJlY2VpdmUgdGhlIHRva2VuIGFuZCBub3Qgc2VuZCB0byBhbnlib2R5IGVsc2VcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIHRvOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKVxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBcbiAgb3IgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3QgcmVjaXBpZW50ID0gQWNjb3VudEFkZHJlc3M0LmZyb20ocGFyc2VkSW5wdXQudG8pIHx8IHRoaXMuYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCk7XG4gICAgICBjb25zdCB0cmFuc2ZlclRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC50cmFuc2ZlclRva2VucyhcbiAgICAgICAgcmVjaXBpZW50LFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4zKHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA2KSxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHRyYW5zZmVyVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL2J1cm4tdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW40IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc0J1cm5Ub2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2w3IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc19idXJuX3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBidXJuIGEgZnVuZ2libGUgYXNzZXRcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKSBcbiAgbWludDogc3RyaW5nLCBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChyZXF1aXJlZClgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCBidXJuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5idXJuVG9rZW4oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjQocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50XG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYnVyblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXB0b3MvbWludC10b2tlbi50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M1IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sOCB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc01pbnRUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2w4IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc19taW50X3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgZnVuZ2libGUgYXNzZXQgdG8gYSByZWNpcGllbnRcblxuaWYgdGhlIHJlY2lwaWVudCB3YW50cyB0byByZWNlaXZlIHRoZSB0b2tlbiBhbmQgbm90IHNlbmQgdG8gYW55Ym9keSBlbHNlLCBrZWVwIHRvIGJsYW5rXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICB0bzogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChyZXF1aXJlZClcbiAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IEFjY291bnRBZGRyZXNzNS5mcm9tKHBhcnNlZElucHV0LnRvKSB8fCB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpO1xuICAgICAgY29uc3QgbWludFRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5taW50VG9rZW4ocmVjaXBpZW50LCBwYXJzZWRJbnB1dC5taW50LCBwYXJzZWRJbnB1dC5hbW91bnQpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgbWludFRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSB8fCBcIkFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL2NyZWF0ZS10b2tlbi50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sOSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc0NyZWF0ZVRva2VuVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDkge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFwdG9zX2NyZWF0ZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGZ1bmdpYmxlIGFzc2V0IHRvIGEgcmVjaXBpZW50XG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBuYW1lOiBzdHJpbmcsIGVnIFwiVVNEVFwiIChyZXF1aXJlZClcbiAgc3ltYm9sOiBzdHJpbmcsIGVnIFwiVVNEVFwiIChyZXF1aXJlZClcbiAgaWNvblVSSTogc3RyaW5nLCBlZyBcImh0dHBzOi8vZXhhbXBsZS5jb20vaWNvbi5wbmdcIiAocmVxdWlyZWQpXG4gIHByb2plY3RVUkk6IHN0cmluZywgZWcgXCJodHRwczovL2V4YW1wbGUuY29tL3Byb2plY3RcIiAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IGNyZWF0ZVRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5jcmVhdGVUb2tlbihcbiAgICAgICAgcGFyc2VkSW5wdXQubmFtZSxcbiAgICAgICAgcGFyc2VkSW5wdXQuc3ltYm9sLFxuICAgICAgICBwYXJzZWRJbnB1dC5pY29uVVJJLFxuICAgICAgICBwYXJzZWRJbnB1dC5wcm9qZWN0VVJJXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgY3JlYXRlVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogcGFyc2VkSW5wdXQubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcHRvcy9nZXQtdHJhbnNhY3Rpb24udHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDEwIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFwdG9zVHJhbnNhY3Rpb25Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTAge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFwdG9zX2dldF90cmFuc2FjdGlvblwiO1xuICBkZXNjcmlwdGlvbiA9IGBGZXRjaGVzIGEgdHJhbnNhY3Rpb24gZnJvbSBhcHRvcyBibG9ja2NoYWluXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICB0cmFuc2FjdGlvbkhhc2g6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgYXB0b3NUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VHJhbnNhY3Rpb24ocGFyc2VkSW5wdXQudHJhbnNhY3Rpb25IYXNoKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGFwdG9zVHJhbnNhY3Rpb25cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL2dldC10b2tlbi1wcmljZS50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTEgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NHZXRUb2tlblByaWNlVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDExIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc190b2tlbl9wcmljZVwiO1xuICBkZXNjcmlwdGlvbiA9IGBHZXQgdGhlIGxpdmUgcHJpY2Ugb2YgYW55IGFwdG9zIHRva2VucyBpbiBVU0QuXG5cdGRvIG5vdCBkbyBhbnkgZGVjaW1hbHMgY29udmVyc2lvbiBoZXJlLCB0aGUgcHJpY2UgaXMgYWxyZWFkeSBpbiBVU0RcblxuICBkZXRhaWxzIGFsc28gaW5jbHVkZSBkZWNpbWFscyB3aGljaCB5b3UgY2FuIHVzZSB0byBtYWtlIG9uY2hhaW4gdmFsdWVzIHJlYWRhYmxlIHRvIGEgaHVtYW4gdXNlclxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgLSB0aGlzIGlzIElNUE9SVEFOVCk6XG4gIHRva2VuOiBzdHJpbmcsIGVnIHVzZHQsIGJ0YyBldGMuYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICBjb25zb2xlLmxvZyhcImlucHV0XCIsIGlucHV0KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdG9rZW4gPSBwYXJzZWRJbnB1dC50b2tlbiB8fCBpbnB1dCB8fCBcInVzZHRcIjtcbiAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5QcmljZSh0b2tlbik7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB0b2tlbkRhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL2NyZWF0ZS1wcm9maWxlLnRzXG5pbXBvcnQgeyBUb29sIGFzIFRvb2wxMiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcmllc0NyZWF0ZVByb2ZpbGVUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTIge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFyaWVzX2NyZWF0ZV9wcm9maWxlXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYSBwcm9maWxlIGluIEFyaWVzXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNyZWF0ZVByb2ZpbGVUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmNyZWF0ZUFyaWVzUHJvZmlsZSgpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgY3JlYXRlUHJvZmlsZVRyYW5zYWN0aW9uSGFzaFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXJpZXMvbGVuZC10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjUgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wxMyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcblxuLy8gc3JjL3V0aWxzL3BhcnNlLWpzb24udHNcbnZhciBwYXJzZUpzb24gPSAoaW5wdXQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmb3JiaWRkZW5Xb3JkcyA9IFtcIm51bGxcIiwgXCJ1bmRlZmluZWRcIiwgXCJ7fVwiXTtcbiAgICBpZiAoaW5wdXQgaW4gZm9yYmlkZGVuV29yZHMpIHRocm93IG5ldyBFcnJvcigpO1xuICAgIGNvbnN0IHBhcnNlZElucHV0ID0gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgcmV0dXJuIHBhcnNlZElucHV0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL2xlbmQtdG9rZW4udHNcbnZhciBBcmllc0xlbmRUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTMge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFyaWVzX2xlbmRcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIGxlbmQgdG9rZW5zIGluIEFyaWVzXG5cbiAgICBpZiB5b3Ugd2FudCB0byBsZW5kIEFQVCwgbWludFR5cGUgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICBtaW50VHlwZTogc3RyaW5nLCBlZyBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgKHJlcXVpcmVkKVxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IGxlbmRUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQubGVuZEFyaWVzVG9rZW4oXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnRUeXBlLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW41KHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGxlbmRUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXJpZXMvd2l0aGRyYXctdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW42IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTQgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXJpZXNXaXRoZHJhd1Rvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxNCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXJpZXNfd2l0aGRyYXdcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHdpdGhkcmF3IHRva2VucyBmcm9tIEFyaWVzXG5cbiAgICBpZiB5b3Ugd2FudCB0byB3aXRoZHJhdyBBUFQsIG1pbnRUeXBlIHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFR5cGU6IHN0cmluZywgZWcgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIChyZXF1aXJlZClcbiAgICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC53aXRoZHJhd0FyaWVzVG9rZW4oXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnRUeXBlLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW42KHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHdpdGhkcmF3VG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXJpZXMvYm9ycm93LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNyB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE1IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFyaWVzQm9ycm93VG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDE1IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcmllc19ib3Jyb3dcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIGJvcnJvdyB0b2tlbnMgZnJvbSBBcmllc1xuXG4gICAgaWYgeW91IHdhbnQgdG8gYm9ycm93IEFQVCwgbWludFR5cGUgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICBtaW50VHlwZTogc3RyaW5nLCBlZyBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgKHJlcXVpcmVkKVxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IGJvcnJvd1Rva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5ib3Jyb3dBcmllc1Rva2VuKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNyhwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBib3Jyb3dUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXJpZXMvcmVwYXktdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW44IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTYgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXJpZXNSZXBheVRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxNiB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXJpZXNfcmVwYXlcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlcGF5IHRva2VucyBpbiBBcmllc1xuXG4gICAgaWYgeW91IHdhbnQgdG8gcmVwYXkgQVBULCBtaW50VHlwZSB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIG1pbnRUeXBlOiBzdHJpbmcsIGVnIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiAocmVxdWlyZWQpXG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3QgcmVwYXlUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQucmVwYXlBcmllc1Rva2VuKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluOChwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZXBheVRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFsc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9sZW5kLXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluOSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE3IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEpvdWxlTGVuZFRva2VuVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDE3IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJqb3VsZV9sZW5kX3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBsZW5kIEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IHRvIGEgcG9zaXRpb25cblxuICBpZiB5b3Ugd2FudCB0byBsZW5kIEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICBpZiB5b3Ugd2FudCB0byBsZW5kIHRva2VuIG90aGVyIHRoYW4gQVBULCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBtaW50IG9mIHRoYXQgc3BlY2lmaWMgdG9rZW5cbiAgaWYgeW91IHdhbnQgdG8gbGVuZCBmdW5naWJsZSBhc3NldCwgYWRkIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyBtaW50IGFuZCBwcm92aWRlIGZ1bmdpYmxlIGFzc2V0IGFkZHJlc3NcblxuICBpZiBwb3NpdGlvbklkIGlzIG5vdCBwcm92aWRlZCwgdGhlIHBvc2l0aW9uSWQgd2lsbCBiZSAxMjM0IGFuZCBuZXdQb3NpdGlvbiBzaG91bGQgYmUgdHJ1ZVxuICBcbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gIHBvc2l0aW9uSWQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIG5ld1Bvc2l0aW9uOiBib29sZWFuLCAocmVxdWlyZWQpICBcbiAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3QgZnVuZ2libGVBc3NldCA9IG1pbnREZXRhaWwuZmFBZGRyZXNzLnRvTG93ZXJDYXNlKCkgPT09IHBhcnNlZElucHV0Lm1pbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGxlbmRUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQubGVuZFRva2VuKFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW45KHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KSxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludCxcbiAgICAgICAgcGFyc2VkSW5wdXQucG9zaXRpb25JZCxcbiAgICAgICAgcGFyc2VkSW5wdXQubmV3UG9zaXRpb24sXG4gICAgICAgIGZ1bmdpYmxlQXNzZXRcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2pvdWxlL2JvcnJvdy10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjEwIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTggfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVCb3Jyb3dUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxOCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfYm9ycm93X3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBib3Jyb3cgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gYm9ycm93IEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICBpZiB5b3Ugd2FudCB0byBib3Jyb3cgdG9rZW4gb3RoZXIgdGhhbiBBUFQsIHlvdSBuZWVkIHRvIHByb3ZpZGUgdGhlIG1pbnQgb2YgdGhhdCBzcGVjaWZpYyB0b2tlblxuICBpZiB5b3Ugd2FudCB0byBib3Jyb3cgZnVuZ2libGUgYXNzZXQsIGFkZCBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgYXMgbWludCBhbmQgcHJvdmlkZSBmdW5naWJsZSBhc3NldCBhZGRyZXNzXG4gIFxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgcG9zaXRpb25JZDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChyZXF1aXJlZClcbiAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3QgZnVuZ2libGVBc3NldCA9IG1pbnREZXRhaWwuZmFBZGRyZXNzLnRvTG93ZXJDYXNlKCkgPT09IHBhcnNlZElucHV0Lm1pbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGJvcnJvd1Rva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5ib3Jyb3dUb2tlbihcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTAocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50LFxuICAgICAgICBwYXJzZWRJbnB1dC5wb3NpdGlvbklkLFxuICAgICAgICBmdW5naWJsZUFzc2V0XG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS93aXRoZHJhdy10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjExIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTkgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVXaXRoZHJhd1Rva2VuVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDE5IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJqb3VsZV93aXRoZHJhd190b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gd2l0aGRyYXcgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gd2l0aGRyYXcgQVBULCBhZGQgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIGFzIG1pbnRcbiAgaWYgeW91IHdhbnQgdG8gd2l0aGRyYXcgdG9rZW4gb3RoZXIgdGhhbiBBUFQsIHlvdSBuZWVkIHRvIHByb3ZpZGUgdGhlIG1pbnQgb2YgdGhhdCBzcGVjaWZpYyB0b2tlblxuICBpZiB5b3Ugd2FudCB0byB3aXRoZHJhdyBmdW5naWJsZSBhc3NldCwgYWRkIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyBtaW50IGFuZCBwcm92aWRlIGZ1bmdpYmxlIGFzc2V0IGFkZHJlc3NcbiAgXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcblxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gIHBvc2l0aW9uSWQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IGZ1bmdpYmxlQXNzZXQgPSBtaW50RGV0YWlsLmZhQWRkcmVzcy50b0xvd2VyQ2FzZSgpID09PSBwYXJzZWRJbnB1dC5taW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC53aXRoZHJhd1Rva2VuKFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMShwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnQsXG4gICAgICAgIHBhcnNlZElucHV0LnBvc2l0aW9uSWQsXG4gICAgICAgIGZ1bmdpYmxlQXNzZXRcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFsc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9yZXBheS10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjEyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjAgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVSZXBheVRva2VuVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDIwIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJqb3VsZV9yZXBheV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gcmVwYXkgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gcmVwYXkgQVBULCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG4gIGlmIHlvdSB3YW50IHRvIHJlcGF5IHRva2VuIG90aGVyIHRoYW4gQVBULCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBtaW50IG9mIHRoYXQgc3BlY2lmaWMgdG9rZW5cbiAgaWYgeW91IHdhbnQgdG8gcmVwYXkgZnVuZ2libGUgYXNzZXQsIGFkZCBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgYXMgbWludCBhbmQgcHJvdmlkZSBmdW5naWJsZSBhc3NldCBhZGRyZXNzXG4gIFxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgcG9zaXRpb25JZDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChyZXF1aXJlZClcbiAgZnVuZ2libGVBc3NldEFkZHJlc3M6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAob3B0aW9uYWwpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IHJlcGF5VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnJlcGF5VG9rZW4oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjEyKHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KSxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludCxcbiAgICAgICAgcGFyc2VkSW5wdXQucG9zaXRpb25JZCxcbiAgICAgICAgcGFyc2VkSW5wdXQuZnVuZ2libGVBc3NldEFkZHJlc3NcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZXBheVRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFsc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9nZXQtcG9vbC1kZXRhaWxzLnRzXG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyMSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBKb3VsZUdldFBvb2xEZXRhaWxzID0gY2xhc3MgZXh0ZW5kcyBUb29sMjEge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImpvdWxlX2dldF9wb29sX2RldGFpbHNcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhlIHRvb2wgY2FuIGJlIHVzZWQgdG8gZ2V0IGEgdG9rZW4gLyBmdW5naWJsZSBhc3NldCBwb29sIGRldGFpbHNcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuXG4gIEV4YW1wbGU6ICd7XCJtaW50XCI6IFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwifSdcbiAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgcG9vbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0UG9vbERldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBwb29sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9nZXQtdXNlci1wb3NpdGlvbi50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M2IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjIgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVHZXRVc2VyUG9zaXRpb24gPSBjbGFzcyBleHRlbmRzIFRvb2wyMiB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfZ2V0X3VzZXJfcG9zaXRpb25cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhlIHRvb2wgY2FuIGJlIHVzZWQgdG8gZ2V0IGRldGFpbHMgYWJvdXQgYSB1c2VyJ3MgcG9zaXRpb25cblxuXHRrZWVwIHVzZXJBZGRyZXNzIGJsYW5rIGlmIHVzZXIgd2FudHMgdG8gZ2V0IHRoZWlyIG93biBwb3NpdGlvbiBvciBkaWRuJ3QgcHJvdmlkZSBhbnkgb3RoZXIgdXNlcidzIGFkZHJlc3NcblxuXHRhc2sgdXNlciB0byBwcm92aWRlIHBvc2l0aW9uSWQgZnJvbSB0aGUgbGlzdCBvZiBwb3NpdGlvbnMgdGhleSBoYXZlIGlmIHRoZXkgd2FudCB0byBnZXQgZGV0YWlscyBhYm91dCBhIHNwZWNpZmljIHBvc2l0aW9uLlxuXHRkbyBub3QgZmlsbCByYW5kb20gcG9zaXRpb25JZCBpZiB0aGUgdXNlciBkaWRuJ3QgcHJvdmlkZSBhbnkgcG9zaXRpb25JZFxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICAgdXNlckFkZHJlc3M6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAob3B0aW9uYWwpXG4gICAgIHBvc2l0aW9uSWQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHVzZXJBZGRyZXNzID0gQWNjb3VudEFkZHJlc3M2LmZyb20ocGFyc2VkSW5wdXQudXNlckFkZHJlc3MpIHx8IHRoaXMuYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCk7XG4gICAgICBjb25zdCBqb3VsZVVzZXJQb3NpdGlvbiA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VXNlclBvc2l0aW9uKHVzZXJBZGRyZXNzLCBwYXJzZWRJbnB1dC5wb3NpdGlvbklkKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGpvdWxlVXNlclBvc2l0aW9uXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9nZXQtdXNlci1hbGwtcG9zaXRpb25zLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczcgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyMyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBKb3VsZUdldFVzZXJBbGxQb3NpdGlvbnMgPSBjbGFzcyBleHRlbmRzIFRvb2wyMyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfZ2V0X3VzZXJfYWxsX3Bvc2l0aW9uc1wiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGUgdG9vbCBjYW4gYmUgdXNlZCB0byBnZXQgZGV0YWlscyBhYm91dCBhIHVzZXIncyBhbGwgcG9zaXRpb25zXG5cblx0a2VlcCB1c2VyQWRkcmVzcyBibGFuayBpZiB1c2VyIHdhbnRzIHRvIGdldCB0aGVpciBvd24gcG9zaXRpb24gb3IgZGlkbid0IHByb3ZpZGUgYW55IG90aGVyIHVzZXIncyBhZGRyZXNzXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgICB1c2VyQWRkcmVzczogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChvcHRpb25hbClcbiAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdXNlckFkZHJlc3MgPSBBY2NvdW50QWRkcmVzczcuZnJvbShwYXJzZWRJbnB1dC51c2VyQWRkcmVzcykgfHwgdGhpcy5hZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKTtcbiAgICAgIGNvbnN0IGpvdWxlVXNlckFsbFBvc2l0aW9ucyA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VXNlckFsbFBvc2l0aW9ucyh1c2VyQWRkcmVzcyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBqb3VsZVVzZXJBbGxQb3NpdGlvbnMsXG4gICAgICAgIHRva2VuczogdG9rZW5zTGlzdC5tYXAoKHRva2VuKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRva2VuLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogdG9rZW4uZGVjaW1hbHMsXG4gICAgICAgICAgICB0b2tlbkFkZHJlc3M6IHRva2VuLnRva2VuQWRkcmVzc1xuICAgICAgICAgIH07XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9saXF1aWRzd2FwL3N3YXAudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMyB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDI0IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIExpcXVpZFN3YXBTd2FwVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDI0IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJsaXF1aWRzd2FwX3N3YXBcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHN3YXAgdG9rZW5zIGluIGxpcXVpZHN3YXBcblxuICAgIGlmIHlvdSB3YW50IHRvIHN3YXAgQVBUIGFuZCBvbmUgb2YgdGhlIHRva2VuLCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cdGlmIG9uZSBvZiB0aGUgdG9rZW4gaXMgVVNEVCwgdXNlIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiXG5cdFxuXHRpZiB1c2VyIGFkZGVkIG1pbnRYIG9yIG1pbnRZIGFzIGFzc2V0IG5hbWUsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0aGUgYWRkcmVzcyBvZiB0aGUgYXNzZXQsIHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdG9rZW4gbmFtZXM6XG5cdFsndXNkdCcsICd6dXNkdCcsICd6dXNkYycsICdhcHQnLCAnc3RoYXB0JywgJ21vZCcsICd0aGwnLCAnd3VzZGMnICwgJ3p3ZXRoJywgJ3d3ZXRoJywgJ2Nha2UnLCAnc3RhcHQnLCAnYWJ0YycsICdzdG9uZScgLCAndHJ1YXB0JywgJ3NidGMnXVxuXHRvciB3aGF0ZXZlciBuYW1lIHRoZSB1c2VyIGhhcyBwcm92aWRlZCwgeW91IGNhbiB1c2UgdGhlIHRva2VuIG5hbWUgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBcblxuXHRjYW50IHN3YXAgYW55IGZ1bmdpYmxlIHRva2Vucy4gb25seSBjb2luIHN0YW5kYXJkIHN3YXAgYWxsb3dlZC4gaWYgdXNlciB0cnlpbmcgdG8gc3dhcCBmdW5naWJsZSB0b2tlbiwgYXNrIGl0IHRvIHN3YXAgdmlhIHBhbm9yYS5cblxuXHRjb2luIHN0YW5kYXJkIGZvcm1hdCA6IHN0cmluZzo6c3RyaW5nOjpzdHJpbmdcblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICBtaW50WDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBtaW50WTogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBzd2FwQW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgbWluQ29pbk91dDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKG9wdGlvbmFsKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGxldCBtaW50WCA9IHBhcnNlZElucHV0Lm1pbnRYO1xuICAgICAgY29uc3QgdG9rZW5YID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WCk7XG4gICAgICBpZiAodG9rZW5YKSB7XG4gICAgICAgIG1pbnRYID0gdG9rZW5YLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGxldCBtaW50WSA9IHBhcnNlZElucHV0Lm1pbnRZO1xuICAgICAgY29uc3QgdG9rZW5ZID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WSk7XG4gICAgICBpZiAodG9rZW5ZKSB7XG4gICAgICAgIG1pbnRZID0gdG9rZW5ZLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pbnRYRGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMobWludFgpO1xuICAgICAgY29uc3QgbWludFlEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WSk7XG4gICAgICBjb25zdCBzd2FwVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5zd2FwKFxuICAgICAgICBtaW50WCxcbiAgICAgICAgbWludFksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjEzKHBhcnNlZElucHV0LnN3YXBBbW91bnQsIG1pbnRYRGV0YWlsLmRlY2ltYWxzKSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTMocGFyc2VkSW5wdXQubWluQ29pbk91dCwgbWludFhEZXRhaWwuZGVjaW1hbHMpIHx8IDBcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBzd2FwVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRYRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WTogbWludFlEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WURldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vbGlxdWlkc3dhcC9jcmVhdGUtcG9vbC50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjUgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG5cbi8vIHNyYy91dGlscy9wYXJzZS1mdW5naWJsZS1hc3NldC10by13cmFwcGVkLWFzc2V0LnRzXG52YXIgcGFyc2VGdW5naWJsZUFzc2V0QWRkcmVzc1RvV3JhcHBlZEFzc2V0QWRkcmVzcyA9IChhc3NldEFkZHJlc3MpID0+IHtcbiAgaWYgKGFzc2V0QWRkcmVzcyA9PT0gXCIweDM1N2IwYjc0YmM4MzNlOTVhMTE1YWQyMjYwNDg1NGQ2YjBmY2ExNTFjZWNkOTQxMTE3NzBlNWQ2ZmZjOWRjMmJcIikge1xuICAgIHJldHVybiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6ZmFfdG9fY29pbl93cmFwcGVyOjpXcmFwcGVkVVNEVFwiO1xuICB9XG4gIHJldHVybiBhc3NldEFkZHJlc3M7XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2xpcXVpZHN3YXAvY3JlYXRlLXBvb2wudHNcbnZhciBMaXF1aWRTd2FwQ3JlYXRlUG9vbFRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyNSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwibGlxdWlkc3dhcF9jcmVhdGVfcG9vbFwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IHBvb2wgaW4gbGlxdWlkc3dhcFxuXG4gICAgaWYgeW91IHdhbnQgdG8gY3JlYXRlIGEgcG9vbCB3aXRoIEFQVCBhbmQgb25lIG9mIHRoZSB0b2tlbiwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG5cdGlmIHVzZXIgYWRkZWQgbWludFggb3IgbWludFkgYXMgYXNzZXQgbmFtZSwgYW5kIHlvdSBkb24ndCBoYXZlIHRoZSBhZGRyZXNzIG9mIHRoZSBhc3NldCwgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyB0b2tlbiBuYW1lczpcblx0Wyd1c2R0JywgJ3p1c2R0JywgJ3p1c2RjJywgJ2FwdCcsICdzdGhhcHQnLCAnbW9kJywgJ3RobCcsICd3dXNkYycgLCAnendldGgnLCAnd3dldGgnLCAnY2FrZScsICdzdGFwdCcsICdhYnRjJywgJ3N0b25lJyAsICd0cnVhcHQnLCAnc2J0YyddXG5cdG9yIHdoYXRldmVyIG5hbWUgdGhlIHVzZXIgaGFzIHByb3ZpZGVkLCB5b3UgY2FuIHVzZSB0aGUgdG9rZW4gbmFtZSB0byBnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIFxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIG1pbnRYOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICAgIG1pbnRZOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGxldCBtaW50WCA9IHBhcnNlZElucHV0Lm1pbnRYO1xuICAgICAgY29uc3QgdG9rZW5YID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WCk7XG4gICAgICBpZiAodG9rZW5YKSB7XG4gICAgICAgIG1pbnRYID0gdG9rZW5YLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGxldCBtaW50WSA9IHBhcnNlZElucHV0Lm1pbnRZO1xuICAgICAgY29uc3QgdG9rZW5ZID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WSk7XG4gICAgICBpZiAodG9rZW5ZKSB7XG4gICAgICAgIG1pbnRZID0gdG9rZW5ZLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pbnRYRGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMobWludFgpO1xuICAgICAgY29uc3QgbWludFlEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WSk7XG4gICAgICBjb25zdCBjcmVhdGVQb29sVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5jcmVhdGVQb29sKFxuICAgICAgICBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzKG1pbnRYKSxcbiAgICAgICAgcGFyc2VGdW5naWJsZUFzc2V0QWRkcmVzc1RvV3JhcHBlZEFzc2V0QWRkcmVzcyhtaW50WSlcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBjcmVhdGVQb29sVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRYRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WTogbWludFlEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WURldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vbGlxdWlkc3dhcC9hZGQtbGlxdWlkaXR5LnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTQgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyNiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBMaXF1aWRTd2FwQWRkTGlxdWlkaXR5VG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDI2IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJsaXF1aWRzd2FwX2FkZF9saXF1aWRpdHlcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIGFkZCBsaXF1aWRpdHkgaW4gbGlxdWlkc3dhcFxuXG4gICAgaWYgeW91IHdhbnQgdG8gYWRkIEFQVCBhbmQgb25lIG9mIHRoZSB0b2tlbiwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG5cdGlmIHVzZXIgYWRkZWQgbWludFggb3IgbWludFkgYXMgYXNzZXQgbmFtZSwgYW5kIHlvdSBkb24ndCBoYXZlIHRoZSBhZGRyZXNzIG9mIHRoZSBhc3NldCwgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyB0b2tlbiBuYW1lczpcblx0Wyd1c2R0JywgJ3p1c2R0JywgJ3p1c2RjJywgJ2FwdCcsICdzdGhhcHQnLCAnbW9kJywgJ3RobCcsICd3dXNkYycgLCAnendldGgnLCAnd3dldGgnLCAnY2FrZScsICdzdGFwdCcsICdhYnRjJywgJ3N0b25lJyAsICd0cnVhcHQnLCAnc2J0YyddXG5cdG9yIHdoYXRldmVyIG5hbWUgdGhlIHVzZXIgaGFzIHByb3ZpZGVkLCB5b3UgY2FuIHVzZSB0aGUgdG9rZW4gbmFtZSB0byBnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIFxuXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgbWludFk6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgbWludFhBbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBtaW50WUFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBsZXQgbWludFggPSBwYXJzZWRJbnB1dC5taW50WDtcbiAgICAgIGNvbnN0IHRva2VuWCA9IGdldFRva2VuQnlUb2tlbk5hbWUobWludFgpO1xuICAgICAgaWYgKHRva2VuWCkge1xuICAgICAgICBtaW50WCA9IHRva2VuWC50b2tlbkFkZHJlc3M7XG4gICAgICB9XG4gICAgICBsZXQgbWludFkgPSBwYXJzZWRJbnB1dC5taW50WTtcbiAgICAgIGNvbnN0IHRva2VuWSA9IGdldFRva2VuQnlUb2tlbk5hbWUobWludFkpO1xuICAgICAgaWYgKHRva2VuWSkge1xuICAgICAgICBtaW50WSA9IHRva2VuWS50b2tlbkFkZHJlc3M7XG4gICAgICB9XG4gICAgICBjb25zdCB3cmFwcGVkTWludFggPSBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzKG1pbnRYKTtcbiAgICAgIGNvbnN0IHdyYXBwZWRNaW50WSA9IHBhcnNlRnVuZ2libGVBc3NldEFkZHJlc3NUb1dyYXBwZWRBc3NldEFkZHJlc3MobWludFkpO1xuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh3cmFwcGVkTWludFgpO1xuICAgICAgY29uc3QgbWludFlEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh3cmFwcGVkTWludFkpO1xuICAgICAgY29uc3Qgc3dhcFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYWRkTGlxdWlkaXR5KFxuICAgICAgICB3cmFwcGVkTWludFgsXG4gICAgICAgIHdyYXBwZWRNaW50WSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTQocGFyc2VkSW5wdXQubWludFhBbW91bnQsIG1pbnRYRGV0YWlsLmRlY2ltYWxzKSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTQocGFyc2VkSW5wdXQubWludFlBbW91bnQsIG1pbnRZRGV0YWlsLmRlY2ltYWxzKVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHN3YXBUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFg6IG1pbnRYRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFhEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRZRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9saXF1aWRzd2FwL3JlbW92ZS1saXF1aWRpdHkudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDI3IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIExpcXVpZFN3YXBSZW1vdmVMaXF1aWRpdHlUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMjcge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImxpcXVpZHN3YXBfcmVtb3ZlX2xpcXVpZGl0eVwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gcmVtb3ZlIGxpcXVpZGl0eSBmcm9tIGxpcXVpZHN3YXBcblxuICAgIGlmIHlvdSB3YW50IHRvIHJlbW92ZSBBUFQgYW5kIG9uZSBvZiB0aGUgdG9rZW4sIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcblxuXHRpZiB1c2VyIGFkZGVkIG1pbnRYIG9yIG1pbnRZIGFzIGFzc2V0IG5hbWUsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0aGUgYWRkcmVzcyBvZiB0aGUgYXNzZXQsIHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdG9rZW4gbmFtZXM6XG5cdFsndXNkdCcsICd6dXNkdCcsICd6dXNkYycsICdhcHQnLCAnc3RoYXB0JywgJ21vZCcsICd0aGwnLCAnd3VzZGMnICwgJ3p3ZXRoJywgJ3d3ZXRoJywgJ2Nha2UnLCAnc3RhcHQnLCAnYWJ0YycsICdzdG9uZScgLCAndHJ1YXB0JywgJ3NidGMnXVxuXHRvciB3aGF0ZXZlciBuYW1lIHRoZSB1c2VyIGhhcyBwcm92aWRlZCwgeW91IGNhbiB1c2UgdGhlIHRva2VuIG5hbWUgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBcblxuXHRtaW5NaW50WCBhbmQgbWluTWludFkgYXJlIG1pbmltdW0gYW1vdW50IG9mIHRva2VucyB0byByZWNlaXZlLCBkZWZhdWx0IGlzIDBcblxuXHRkZXBvc2l0IGxpcXVpZGl0eSBpbiBvbmUgb2YgdGhlIHBvb2xzIHRvIGdldCBMUCB0b2tlbnMgaWYgeW91IGRvbid0IGhhdmUgTFAgdG9rZW5zXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgbWludFk6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgbHBBbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBtaW5NaW50WDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKG9wdGlvbmFsKVxuICAgIG1pbk1pbnRZOiBudW1iZXIsIGVnIDEgb3IgMC4wMSAob3B0aW9uYWwpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgbGV0IG1pbnRYID0gcGFyc2VkSW5wdXQubWludFg7XG4gICAgICBjb25zdCB0b2tlblggPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRYKTtcbiAgICAgIGlmICh0b2tlblgpIHtcbiAgICAgICAgbWludFggPSB0b2tlblgudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgbGV0IG1pbnRZID0gcGFyc2VkSW5wdXQubWludFk7XG4gICAgICBjb25zdCB0b2tlblkgPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRZKTtcbiAgICAgIGlmICh0b2tlblkpIHtcbiAgICAgICAgbWludFkgPSB0b2tlblkudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKG1pbnRZKTtcbiAgICAgIGNvbnN0IHJlbW92ZUxpcXVpZGl0eVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQucmVtb3ZlTGlxdWlkaXR5KFxuICAgICAgICBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzKG1pbnRYKSxcbiAgICAgICAgcGFyc2VGdW5naWJsZUFzc2V0QWRkcmVzc1RvV3JhcHBlZEFzc2V0QWRkcmVzcyhtaW50WSksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjE1KHBhcnNlZElucHV0LmxwQW1vdW50LCA2KSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTUocGFyc2VkSW5wdXQubWluTWludFggfHwgMCwgbWludFhEZXRhaWwuZGVjaW1hbHMpLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNShwYXJzZWRJbnB1dC5taW5NaW50WSB8fCAwLCBtaW50WURldGFpbC5kZWNpbWFscylcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFg6IG1pbnRYRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFhEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRZRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hlbG9uL2xlbmQtdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDI4IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEVjaGVsb25MZW5kVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMjgge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fbGVuZF90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gbGVuZCBBUFQsIHRva2VucyBvciBmdW5naWJsZSBhc3NldCB0byBhIHBvc2l0aW9uXG5cbiAgICBpZiB5b3Ugd2FudCB0byBsZW5kIEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICAgIGlmIHVzZXIgYWRkZWQgbWludCBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuICAgIFsndXNkdCcsICd6dXNkdCcsICd6dXNkYycsICdhcHQnLCAnc3RoYXB0JywgJ21vZCcsICd0aGwnLCAnd3VzZGMnICwgJ3p3ZXRoJywgJ3d3ZXRoJywgJ2Nha2UnLCAnc3RhcHQnLCAnYWJ0YycsICdzdG9uZScgLCAndHJ1YXB0JywgJ3NidGMnXVxuICAgIG9yIHdoYXRldmVyIG5hbWUgdGhlIHVzZXIgaGFzIHByb3ZpZGVkLCB5b3UgY2FuIHVzZSB0aGUgdG9rZW4gbmFtZSB0byBnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuQnlUb2tlbk5hbWUocGFyc2VkSW5wdXQubWludCkgfHwgZ2V0VG9rZW5CeVRva2VuQWRkcmVzcyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGlmICghdG9rZW4pIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG5vdCBmb3VuZFwiKTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh0b2tlbi50b2tlbkFkZHJlc3MpO1xuICAgICAgY29uc29sZS5sb2coXCJtaW50RGV0YWlsXCIsIG1pbnREZXRhaWwpO1xuICAgICAgY29uc3QgbGVuZFRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5sZW5kVG9rZW5XaXRoRWNoZWxvbihcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNihwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHRva2VuLnBvb2xBZGRyZXNzLFxuICAgICAgICB0b2tlbi50b2tlbkFkZHJlc3Muc3BsaXQoXCI6OlwiKS5sZW5ndGggIT09IDNcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hlbG9uL3dpdGhkcmF3LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTcgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyOSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hlbG9uV2l0aGRyYXdUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyOSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiZWNoZWxvbl93aXRoZHJhd190b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gd2l0aGRyYXcgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgICBpZiB5b3Ugd2FudCB0byB3aXRoZHJhdyBBUFQsIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcbiAgICBpZiB1c2VyIGFkZGVkIG1pbnQgYXMgYXNzZXQgbmFtZSwgYW5kIHlvdSBkb24ndCBoYXZlIHRoZSBhZGRyZXNzIG9mIHRoZSBhc3NldCwgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyB0b2tlbiBuYW1lczpcbiAgICBbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cbiAgICBvciB3aGF0ZXZlciBuYW1lIHRoZSB1c2VyIGhhcyBwcm92aWRlZCwgeW91IGNhbiB1c2UgdGhlIHRva2VuIG5hbWUgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlblxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApIChJTVBPUlRBTlQpOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKHBhcnNlZElucHV0Lm1pbnQpIHx8IGdldFRva2VuQnlUb2tlbkFkZHJlc3MocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBpZiAoIXRva2VuKSB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBub3QgZm91bmRcIik7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHModG9rZW4udG9rZW5BZGRyZXNzKTtcbiAgICAgIGNvbnNvbGUubG9nKFwibWludERldGFpbFwiLCBtaW50RGV0YWlsKTtcbiAgICAgIGNvbnN0IHdpdGhkcmF3VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LndpdGhkcmF3VG9rZW5XaXRoRWNoZWxvbihcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNyhwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHRva2VuLnBvb2xBZGRyZXNzLFxuICAgICAgICB0b2tlbi50b2tlbkFkZHJlc3Muc3BsaXQoXCI6OlwiKS5sZW5ndGggIT09IDNcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSB8fCBcIkFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vZWNoZWxvbi9yZXBheS10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjE4IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzAgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgRWNoZWxvblJlcGF5VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzAge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fcmVwYXlfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlcGF5IEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IGZyb20gYSBwb3NpdGlvblxuXG4gICAgaWYgeW91IHdhbnQgdG8gcmVwYXkgQVBULCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG4gICAgaWYgdXNlciBhZGRlZCBtaW50IGFzIGFzc2V0IG5hbWUsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0aGUgYWRkcmVzcyBvZiB0aGUgYXNzZXQsIHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdG9rZW4gbmFtZXM6XG4gICAgWyd1c2R0JywgJ3p1c2R0JywgJ3p1c2RjJywgJ2FwdCcsICdzdGhhcHQnLCAnbW9kJywgJ3RobCcsICd3dXNkYycgLCAnendldGgnLCAnd3dldGgnLCAnY2FrZScsICdzdGFwdCcsICdhYnRjJywgJ3N0b25lJyAsICd0cnVhcHQnLCAnc2J0YyddXG4gICAgb3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW5cblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKSAoSU1QT1JUQU5UKTpcbiAgICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW5CeVRva2VuTmFtZShwYXJzZWRJbnB1dC5taW50KSB8fCBnZXRUb2tlbkJ5VG9rZW5BZGRyZXNzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgaWYgKCF0b2tlbikgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gbm90IGZvdW5kXCIpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHRva2VuLnRva2VuQWRkcmVzcyk7XG4gICAgICBjb25zdCByZXBheVRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5yZXBheVRva2VuV2l0aEVjaGVsb24oXG4gICAgICAgIHRva2VuLnRva2VuQWRkcmVzcyxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTgocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICB0b2tlbi5wb29sQWRkcmVzcyxcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLnNwbGl0KFwiOjpcIikubGVuZ3RoICE9PSAzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgcmVwYXlUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUgfHwgXCJBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFscyB8fCA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2VjaGVsb24vYm9ycm93LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzMSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hlbG9uQm9ycm93VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzEge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fYm9ycm93X3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBib3Jyb3cgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gYm9ycm93IEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG4gIGlmIHVzZXIgYWRkZWQgbWludCBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuICBbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cbiAgb3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gXG5cblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuQnlUb2tlbk5hbWUocGFyc2VkSW5wdXQubWludCkgfHwgZ2V0VG9rZW5CeVRva2VuQWRkcmVzcyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGlmICghdG9rZW4pIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG5vdCBmb3VuZFwiKTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh0b2tlbi50b2tlbkFkZHJlc3MpO1xuICAgICAgY29uc3QgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmJvcnJvd1Rva2VuV2l0aEVjaGVsb24oXG4gICAgICAgIHRva2VuLnRva2VuQWRkcmVzcyxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTkocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICB0b2tlbi5wb29sQWRkcmVzcyxcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLnNwbGl0KFwiOjpcIikubGVuZ3RoICE9PSAzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hvL3N0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjAgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzMiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hvU3Rha2VUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzMiB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiZWNob19zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gc3Rha2UgdG9rZW4gaW4gRWNob1xuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHN0YWtlVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5zdGFrZVRva2VuV2l0aEVjaG8oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIwKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBzdGFrZVRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBcImVBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hvL3Vuc3Rha2UudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yMSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDMzIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEVjaG9VbnN0YWtlVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzMge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaG9fdW5zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gdW5zdGFrZSB0b2tlbiBpbiBFY2hvXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdW5zdGFrZVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQudW5zdGFrZVRva2VuV2l0aEVjaG8oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIxKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB1bnN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vb3BlbmFpL2NyZWF0ZS1pbWFnZS50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzQgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgT3BlbkFJQ3JlYXRlSW1hZ2VUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzQge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcIm9wZW5haV9jcmVhdGVfaW1hZ2VcIjtcbiAgZGVzY3JpcHRpb24gPSBgXG4gICAgR2VuZXJhdGUgYW4gaW1hZ2UgdXNpbmcgT3BlbkFJJ3MgREFMTC1FXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgcHJvbXB0OiBzdHJpbmcsIFRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGltYWdlIHRvIGdlbmVyYXRlIChyZXF1aXJlZClcbiAgICBzaXplOiBzdHJpbmcsIEltYWdlIHNpemUgKCcyNTZ4MjU2JywgJzUxMng1MTInLCBvciAnMTAyNHgxMDI0JykgKGRlZmF1bHQ6ICcxMDI0eDEwMjQnKVxuICAgIG46IG51bWJlciwgTnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZSAoZGVmYXVsdDogMSlgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWdlbnQuY3JlYXRlSW1hZ2VXaXRoT3BlbkFJKHBhcnNlZElucHV0LnByb21wdCwgcGFyc2VkSW5wdXQuc2l6ZSwgcGFyc2VkSW5wdXQubik7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZXNwb25zZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vcGFub3JhL3N3YXAudHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDM1IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFBhbm9yYVN3YXBUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzUge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInBhbm9yYV9hZ2dyZWdhdG9yX3N3YXBcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHN3YXAgdG9rZW5zIGluIHBhbm9yYSAtIGxpcXVpZGl0eSBhZ2dyZWdhdG9yIG9uIGFwdG9zXG5cblx0aWYgeW91IHdhbnQgdG8gc3dhcCBBUFQgYW5kIG9uZSBvZiB0aGUgdG9rZW4sIGZyb21Ub2tlbiB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG5cdElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcblx0ZnJvbVRva2VuOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcblx0dG9Ub2tlbjogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG5cdHN3YXBBbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcblx0dG9XYWxsZXRBZGRyZXNzOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKVxuXHRgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50WERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0LmZyb21Ub2tlbik7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0LnRvVG9rZW4pO1xuICAgICAgY29uc3Qgc3dhcFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuc3dhcFdpdGhQYW5vcmEoXG4gICAgICAgIHBhcnNlZElucHV0LmZyb21Ub2tlbixcbiAgICAgICAgcGFyc2VkSW5wdXQudG9Ub2tlbixcbiAgICAgICAgcGFyc2VkSW5wdXQuc3dhcEFtb3VudCxcbiAgICAgICAgcGFyc2VkSW5wdXQudG9XYWxsZXRBZGRyZXNzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgc3dhcFRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WDogbWludFhEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WERldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFk6IG1pbnRZRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFlEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL3RoYWxhL3N0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzNiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBUaGFsYVN0YWtlVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzYge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3N0YWtlX3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBzdGFrZSB0aEFQVCBpbiBUaGFsYVxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHN0YWtlVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5zdGFrZVRva2Vuc1dpdGhUaGFsYShcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjIocGFyc2VkSW5wdXQuYW1vdW50LCA4KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwidGhBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi90aGFsYS91bnN0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjMgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzNyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBUaGFsYVVuc3Rha2VUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzNyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwidGhhbGFfdW5zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gdW5zdGFrZSB0aEFQVCBpbiBUaGFsYVxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHVuc3Rha2VUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnVuc3Rha2VUb2tlbnNXaXRoVGhhbGEoXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIzKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB1bnN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvbWludC1tb2QudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDM4IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFRoYWxhTWludE1PRFRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzOCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwidGhhbGFfbWludF9tb2RcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIG1pbnQgbW92ZSBkb2xsYXIgKE1PRCkgaW4gVGhhbGFcblxuICAgIE9ubHkgc3VwcG9ydGVkIGNvaW4gdHlwZXM6IGx6VVNEQywgd2hVU0RDLCBvciBVU0R0XG5cblx0aWYgdGhlIHVzZXIgY29pbiBpcyBub3QgaW4gdGhlIGxpc3QgLCBkZWZhdWx0IHRvIGx6VVNEQ1xuXG5cdG1pbnRUeXBlIGZvciBselVTREMgLSAweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RDXG5cdG1pbnRUeXBlIGZvciB3VVNEQyAtIDB4NWUxNTZmMTIwN2QwZWJmYTE5YTllZWZmMDBkNjJhMjgyMjc4ZmI4NzE5ZjRmYWIzYTU4NmEwYTJjMGZmZmJlYTo6Y29pbjo6VFxuXHRtaW50VHlwZSBmb3IgVVNEdCAtIDB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIG1pbnRUeXBlOiBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludE1PRFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQubWludE1PRFdpdGhUaGFsYShcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFR5cGUsXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI0KHBhcnNlZElucHV0LmFtb3VudCwgNilcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBtaW50TU9EVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiTU9EXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvcmVkZWVtLW1vZC50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI1IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzkgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgVGhhbGFSZWRlZW1NT0RUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzkge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3JlZGVlbV9tb2RcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlZGVlbSBtb3ZlIGRvbGxhciAoTU9EKSBpbiBUaGFsYVxuXG4gIE9ubHkgc3VwcG9ydGVkIGNvaW4gdHlwZXM6IGx6VVNEQywgd2hVU0RDLCBvciBVU0R0XG5cblx0aWYgdGhlIHVzZXIgY29pbiBpcyBub3QgaW4gdGhlIGxpc3QgLCBkZWZhdWx0IHRvIGx6VVNEQ1xuXG5cdG1pbnRUeXBlIGZvciBselVTREMgLSAweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RDXG5cdG1pbnRUeXBlIGZvciB3VVNEQyAtIDB4NWUxNTZmMTIwN2QwZWJmYTE5YTllZWZmMDBkNjJhMjgyMjc4ZmI4NzE5ZjRmYWIzYTU4NmEwYTJjMGZmZmJlYTo6Y29pbjo6VFxuXHRtaW50VHlwZSBmb3IgVVNEdCAtIDB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlxuXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFR5cGU6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHRva2VuRGV0YWlscyA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnRUeXBlKTtcbiAgICAgIGNvbnN0IHJlZGVlbU1PRFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQucmVkZWVtTU9EV2l0aFRoYWxhKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjUocGFyc2VkSW5wdXQuYW1vdW50LCA2KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHJlZGVlbU1PRFRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiB0b2tlbkRldGFpbHMubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogdG9rZW5EZXRhaWxzLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL3RoYWxhL2FkZC1saXF1aWRpdHkudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDQwIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFRoYWxhQWRkTGlxdWlkaXR5VG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDQwIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJ0aGFsYV9hZGRfbGlxdWlkaXR5XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBhZGQgbGlxdWlkaXR5IHRvIGEgVGhhbGEgcG9vbFxuXG4gICAgSWYgeW91IHdhbnQgdG8gYWRkIEFQVCwgdXNlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyB0aGUgY29pbiB0eXBlXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIG1pbnRZOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgICBtaW50WEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIG1pbnRZQW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnRZKTtcbiAgICAgIGNvbnN0IGFkZExpcXVpZGl0eVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYWRkTGlxdWlkaXR5V2l0aFRoYWxhKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50WCxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI2KHBhcnNlZElucHV0Lm1pbnRYQW1vdW50LCBtaW50WERldGFpbC5kZWNpbWFscyksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI2KHBhcnNlZElucHV0Lm1pbnRZQW1vdW50LCBtaW50WURldGFpbC5kZWNpbWFscylcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBhZGRMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRYRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WTogbWludFlEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WURldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvcmVtb3ZlLWxpcXVpZGl0eS50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI3IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNDEgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgVGhhbGFSZW1vdmVMaXF1aWRpdHlUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sNDEge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3JlbW92ZV9saXF1aWRpdHlcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlbW92ZSBsaXF1aWRpdHkgZnJvbSBhIFRoYWxhIHBvb2xcblxuICAgIElmIG9uZSBvZiB5b3VyIGNvaW5zIGlzIEFQVCwgdXNlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyB0aGUgY29pbiB0eXBlXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIG1pbnRZOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgICBscEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnRYRGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludFgpO1xuICAgICAgY29uc3QgbWludFlEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50WSk7XG4gICAgICBjb25zdCByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnJlbW92ZUxpcXVpZGl0eVdpdGhUaGFsYShcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFgsXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnRZLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNyhwYXJzZWRJbnB1dC5scEFtb3VudCwgNilcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IDZcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IDZcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2luZGV4LnRzXG52YXIgY3JlYXRlQXB0b3NUb29scyA9IChhZ2VudCwgY29uZmlnID0ge30pID0+IHtcbiAgY29uc3QgdG9vbHMgPSBbXG4gICAgLy8gQXB0b3MgdG9vbHNcbiAgICBuZXcgQXB0b3NCYWxhbmNlVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zQWNjb3VudEFkZHJlc3NUb29sKGFnZW50KSxcbiAgICBuZXcgQXB0b3NUcmFuc2ZlclRva2VuVG9vbChhZ2VudCksXG4gICAgLy8gbmV3IEFwdG9zQnVybk5GVFRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc0J1cm5Ub2tlblRvb2woYWdlbnQpLFxuICAgIC8vIG5ldyBBcHRvc1RyYW5zZmVyTkZUVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zVHJhbnNhY3Rpb25Ub29sKGFnZW50KSxcbiAgICBuZXcgQXB0b3NHZXRUb2tlbkRldGFpbFRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc01pbnRUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc0NyZWF0ZVRva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zR2V0VG9rZW5QcmljZVRvb2woYWdlbnQpLFxuICAgIC8vIEFtbmlzIHRvb2xzXG4gICAgbmV3IEFtbmlzU3Rha2VUb29sKGFnZW50KSxcbiAgICBuZXcgQW1uaXNXaXRoZHJhd1N0YWtlVG9vbChhZ2VudCksXG4gICAgLy8gSm91bGUgdG9vbHNcbiAgICBuZXcgSm91bGVMZW5kVG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgSm91bGVXaXRoZHJhd1Rva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEpvdWxlQm9ycm93VG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgSm91bGVSZXBheVRva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEpvdWxlR2V0UG9vbERldGFpbHMoYWdlbnQpLFxuICAgIG5ldyBKb3VsZUdldFVzZXJQb3NpdGlvbihhZ2VudCksXG4gICAgbmV3IEpvdWxlR2V0VXNlckFsbFBvc2l0aW9ucyhhZ2VudCksXG4gICAgLy8gTGlxdWlkU3dhcCB0b29sc1xuICAgIG5ldyBMaXF1aWRTd2FwQ3JlYXRlUG9vbFRvb2woYWdlbnQpLFxuICAgIG5ldyBMaXF1aWRTd2FwQWRkTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IExpcXVpZFN3YXBSZW1vdmVMaXF1aWRpdHlUb29sKGFnZW50KSxcbiAgICBuZXcgTGlxdWlkU3dhcFN3YXBUb29sKGFnZW50KSxcbiAgICAvLyBBcmllcyB0b29sc1xuICAgIG5ldyBBcmllc0NyZWF0ZVByb2ZpbGVUb29sKGFnZW50KSxcbiAgICBuZXcgQXJpZXNXaXRoZHJhd1Rvb2woYWdlbnQpLFxuICAgIG5ldyBBcmllc0JvcnJvd1Rvb2woYWdlbnQpLFxuICAgIG5ldyBBcmllc0xlbmRUb29sKGFnZW50KSxcbiAgICBuZXcgQXJpZXNSZXBheVRvb2woYWdlbnQpLFxuICAgIC8vIFRoYWxhIHRvb2xzXG4gICAgbmV3IFRoYWxhQWRkTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IFRoYWxhUmVtb3ZlTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IFRoYWxhTWludE1PRFRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVJlZGVlbU1PRFRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVVuc3Rha2VUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVN0YWtlVG9rZW5Ub29sKGFnZW50KSxcbiAgICAvLyBQYW5vcmEgdG9vbHNcbiAgICBuZXcgUGFub3JhU3dhcFRvb2woYWdlbnQpLFxuICAgIC8vIE9wZW5BSSB0b29sc1xuICAgIG5ldyBPcGVuQUlDcmVhdGVJbWFnZVRvb2woYWdlbnQpLFxuICAgIC8vIEVjaG8gdG9vbHNcbiAgICBuZXcgRWNob1N0YWtlVG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgRWNob1Vuc3Rha2VUb2tlblRvb2woYWdlbnQpLFxuICAgIC8vIEVjaGVsb24gdG9vbHNcbiAgICBuZXcgRWNoZWxvbkxlbmRUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uV2l0aGRyYXdUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uUmVwYXlUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uQm9ycm93VG9rZW5Ub29sKGFnZW50KVxuICBdO1xuICByZXR1cm4gY29uZmlnLmZpbHRlciA/IHRvb2xzLmZpbHRlcigodG9vbCkgPT4gY29uZmlnPy5maWx0ZXI/LmluY2x1ZGVzKHRvb2wubmFtZSkpIDogdG9vbHM7XG59O1xuZXhwb3J0IHtcbiAgQWdlbnRSdW50aW1lLFxuICBBbW5pc1N0YWtlVG9vbCxcbiAgQW1uaXNXaXRoZHJhd1N0YWtlVG9vbCxcbiAgQXB0b3NBY2NvdW50QWRkcmVzc1Rvb2wsXG4gIEFwdG9zQmFsYW5jZVRvb2wsXG4gIEFwdG9zQnVyblRva2VuVG9vbCxcbiAgQXB0b3NDcmVhdGVUb2tlblRvb2wsXG4gIEFwdG9zR2V0VG9rZW5EZXRhaWxUb29sLFxuICBBcHRvc0dldFRva2VuUHJpY2VUb29sLFxuICBBcHRvc01pbnRUb2tlblRvb2wsXG4gIEFwdG9zVHJhbnNhY3Rpb25Ub29sLFxuICBBcHRvc1RyYW5zZmVyVG9rZW5Ub29sLFxuICBBcmllc0JvcnJvd1Rvb2wsXG4gIEFyaWVzQ3JlYXRlUHJvZmlsZVRvb2wsXG4gIEFyaWVzTGVuZFRvb2wsXG4gIEFyaWVzUmVwYXlUb29sLFxuICBBcmllc1dpdGhkcmF3VG9vbCxcbiAgQmFzZVNpZ25lcixcbiAgRWNoZWxvbkJvcnJvd1Rva2VuVG9vbCxcbiAgRWNoZWxvbkxlbmRUb2tlblRvb2wsXG4gIEVjaGVsb25SZXBheVRva2VuVG9vbCxcbiAgRWNoZWxvbldpdGhkcmF3VG9rZW5Ub29sLFxuICBFY2hvU3Rha2VUb2tlblRvb2wsXG4gIEVjaG9VbnN0YWtlVG9rZW5Ub29sLFxuICBKb3VsZUJvcnJvd1Rva2VuVG9vbCxcbiAgSm91bGVHZXRQb29sRGV0YWlscyxcbiAgSm91bGVHZXRVc2VyQWxsUG9zaXRpb25zLFxuICBKb3VsZUdldFVzZXJQb3NpdGlvbixcbiAgSm91bGVMZW5kVG9rZW5Ub29sLFxuICBKb3VsZVJlcGF5VG9rZW5Ub29sLFxuICBKb3VsZVdpdGhkcmF3VG9rZW5Ub29sLFxuICBMaXF1aWRTd2FwQWRkTGlxdWlkaXR5VG9vbCxcbiAgTGlxdWlkU3dhcENyZWF0ZVBvb2xUb29sLFxuICBMaXF1aWRTd2FwUmVtb3ZlTGlxdWlkaXR5VG9vbCxcbiAgTGlxdWlkU3dhcFN3YXBUb29sLFxuICBMb2NhbFNpZ25lcixcbiAgT3BlbkFJQ3JlYXRlSW1hZ2VUb29sLFxuICBQYW5vcmFTd2FwVG9vbCxcbiAgVGhhbGFBZGRMaXF1aWRpdHlUb29sLFxuICBUaGFsYU1pbnRNT0RUb29sLFxuICBUaGFsYVJlZGVlbU1PRFRvb2wsXG4gIFRoYWxhUmVtb3ZlTGlxdWlkaXR5VG9vbCxcbiAgVGhhbGFTdGFrZVRva2VuVG9vbCxcbiAgVGhhbGFVbnN0YWtlVG9rZW5Ub29sLFxuICBXYWxsZXRTaWduZXIsXG4gIGNyZWF0ZUFwdG9zVG9vbHMsXG4gIHBhcnNlSnNvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/move-agent-kit@0.1.2_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_okwd2zfxzvm6umsud4q6sx2w2u/node_modules/move-agent-kit/dist/index.mjs\n");

/***/ })

};
;