"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/move-agent-kit@0.1.3_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_gjjxnooyl53gptg3emkop5uql4";
exports.ids = ["vendor-chunks/move-agent-kit@0.1.3_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_gjjxnooyl53gptg3emkop5uql4"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/move-agent-kit@0.1.3_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_gjjxnooyl53gptg3emkop5uql4/node_modules/move-agent-kit/dist/index.mjs":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/move-agent-kit@0.1.3_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_gjjxnooyl53gptg3emkop5uql4/node_modules/move-agent-kit/dist/index.mjs ***!
  \************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentRuntime: () => (/* binding */ AgentRuntime),\n/* harmony export */   AmnisStakeTool: () => (/* binding */ AmnisStakeTool),\n/* harmony export */   AmnisWithdrawStakeTool: () => (/* binding */ AmnisWithdrawStakeTool),\n/* harmony export */   AptosAccountAddressTool: () => (/* binding */ AptosAccountAddressTool),\n/* harmony export */   AptosBalanceTool: () => (/* binding */ AptosBalanceTool),\n/* harmony export */   AptosBurnTokenTool: () => (/* binding */ AptosBurnTokenTool),\n/* harmony export */   AptosCreateTokenTool: () => (/* binding */ AptosCreateTokenTool),\n/* harmony export */   AptosGetTokenDetailTool: () => (/* binding */ AptosGetTokenDetailTool),\n/* harmony export */   AptosGetTokenPriceTool: () => (/* binding */ AptosGetTokenPriceTool),\n/* harmony export */   AptosMintTokenTool: () => (/* binding */ AptosMintTokenTool),\n/* harmony export */   AptosTransactionTool: () => (/* binding */ AptosTransactionTool),\n/* harmony export */   AptosTransferTokenTool: () => (/* binding */ AptosTransferTokenTool),\n/* harmony export */   AriesBorrowTool: () => (/* binding */ AriesBorrowTool),\n/* harmony export */   AriesCreateProfileTool: () => (/* binding */ AriesCreateProfileTool),\n/* harmony export */   AriesLendTool: () => (/* binding */ AriesLendTool),\n/* harmony export */   AriesRepayTool: () => (/* binding */ AriesRepayTool),\n/* harmony export */   AriesWithdrawTool: () => (/* binding */ AriesWithdrawTool),\n/* harmony export */   BaseSigner: () => (/* binding */ BaseSigner),\n/* harmony export */   EchelonBorrowTokenTool: () => (/* binding */ EchelonBorrowTokenTool),\n/* harmony export */   EchelonLendTokenTool: () => (/* binding */ EchelonLendTokenTool),\n/* harmony export */   EchelonRepayTokenTool: () => (/* binding */ EchelonRepayTokenTool),\n/* harmony export */   EchelonWithdrawTokenTool: () => (/* binding */ EchelonWithdrawTokenTool),\n/* harmony export */   EchoStakeTokenTool: () => (/* binding */ EchoStakeTokenTool),\n/* harmony export */   EchoUnstakeTokenTool: () => (/* binding */ EchoUnstakeTokenTool),\n/* harmony export */   JouleBorrowTokenTool: () => (/* binding */ JouleBorrowTokenTool),\n/* harmony export */   JouleGetPoolDetails: () => (/* binding */ JouleGetPoolDetails),\n/* harmony export */   JouleGetUserAllPositions: () => (/* binding */ JouleGetUserAllPositions),\n/* harmony export */   JouleGetUserPosition: () => (/* binding */ JouleGetUserPosition),\n/* harmony export */   JouleLendTokenTool: () => (/* binding */ JouleLendTokenTool),\n/* harmony export */   JouleRepayTokenTool: () => (/* binding */ JouleRepayTokenTool),\n/* harmony export */   JouleWithdrawTokenTool: () => (/* binding */ JouleWithdrawTokenTool),\n/* harmony export */   LiquidSwapAddLiquidityTool: () => (/* binding */ LiquidSwapAddLiquidityTool),\n/* harmony export */   LiquidSwapCreatePoolTool: () => (/* binding */ LiquidSwapCreatePoolTool),\n/* harmony export */   LiquidSwapRemoveLiquidityTool: () => (/* binding */ LiquidSwapRemoveLiquidityTool),\n/* harmony export */   LiquidSwapSwapTool: () => (/* binding */ LiquidSwapSwapTool),\n/* harmony export */   LocalSigner: () => (/* binding */ LocalSigner),\n/* harmony export */   OpenAICreateImageTool: () => (/* binding */ OpenAICreateImageTool),\n/* harmony export */   PanoraSwapTool: () => (/* binding */ PanoraSwapTool),\n/* harmony export */   ThalaAddLiquidityTool: () => (/* binding */ ThalaAddLiquidityTool),\n/* harmony export */   ThalaMintMODTool: () => (/* binding */ ThalaMintMODTool),\n/* harmony export */   ThalaRedeemMODTool: () => (/* binding */ ThalaRedeemMODTool),\n/* harmony export */   ThalaRemoveLiquidityTool: () => (/* binding */ ThalaRemoveLiquidityTool),\n/* harmony export */   ThalaStakeTokenTool: () => (/* binding */ ThalaStakeTokenTool),\n/* harmony export */   ThalaUnstakeTokenTool: () => (/* binding */ ThalaUnstakeTokenTool),\n/* harmony export */   WalletSigner: () => (/* binding */ WalletSigner),\n/* harmony export */   createAptosTools: () => (/* binding */ createAptosTools),\n/* harmony export */   parseJson: () => (/* binding */ parseJson)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(rsc)/./node_modules/.pnpm/@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6/node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _pythnetwork_pyth_aptos_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pythnetwork/pyth-aptos-js */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+pyth-aptos-js@1.4.2_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/pyth-aptos-js/lib/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/.pnpm/axios@1.7.9/node_modules/axios/lib/axios.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/.pnpm/openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2/node_modules/openai/index.mjs\");\n/* harmony import */ var langchain_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! langchain/tools */ \"(rsc)/./node_modules/.pnpm/langchain@0.3.19_@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_b_n5hmvd5wk3eoywbtxti7xivvxu/node_modules/langchain/tools.js\");\n// src/signers/base-signer.ts\nvar BaseSigner = class {\n  constructor(account, aptos) {\n    this.account = account;\n    this.aptos = aptos;\n  }\n  getAddress() {\n    return this.account.accountAddress;\n  }\n};\n\n// src/signers/local-signer.ts\n\nvar LocalSigner = class extends BaseSigner {\n  constructor(account, network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET) {\n    const config = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AptosConfig({ network });\n    const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Aptos(config);\n    super(account, aptos);\n  }\n  async signTransaction(transaction) {\n    const senderAuthenticator = this.aptos.transaction.sign({\n      signer: this.account,\n      transaction\n    });\n    return {\n      senderAuthenticator\n    };\n  }\n  async sendTransaction(transaction) {\n    const signedTx = await this.signTransaction(transaction);\n    const submittedTx = await this.aptos.transaction.submit.simple({\n      transaction,\n      senderAuthenticator: signedTx.senderAuthenticator\n    });\n    const result = await this.aptos.waitForTransaction({\n      transactionHash: submittedTx.hash\n    });\n    return result.hash;\n  }\n  async signMessage(message) {\n    const signedMessage = this.account.signWithAuthenticator(message);\n    return signedMessage.toString();\n  }\n};\n\n// src/signers/wallet-signer.ts\n\nvar WalletSigner = class extends BaseSigner {\n  constructor(account, wallet, network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET) {\n    const config = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AptosConfig({ network });\n    const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Aptos(config);\n    super(account, aptos);\n    this.wallet = wallet;\n  }\n  getAddress() {\n    const walletAddress = this.wallet?.account?.address;\n    return walletAddress ? _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.fromString(walletAddress) : this.account.accountAddress;\n  }\n  async signTransaction(transaction) {\n    const senderAuthenticator = await this.wallet.signTransaction(transaction);\n    return {\n      senderAuthenticator\n    };\n  }\n  async sendTransaction(transaction) {\n    const txHash = await this.wallet.signAndSubmitTransaction(transaction);\n    return txHash.hash;\n  }\n  async signMessage(message) {\n    return this.wallet.signMessage(message);\n  }\n};\n\n// src/agent.ts\n\n\n// src/constants/price-feed.ts\nvar priceFeed = [\n  \"0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a\",\n  \"0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b\",\n  \"0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b\",\n  \"0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5\",\n  \"0x9d4294bbcd1174d6f2003ec365831e64cc31d9f6f15a2b85399db8d5000960f6\",\n  \"0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5\",\n  \"0xc9d8b075a5c69303365ae23633d4e085199bf5c520a3b90fed1322a0342ffc33\",\n  \"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43\"\n];\n\n// src/tools/amnis/stake-token.ts\nasync function stakeTokens(agent, to, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::router::deposit_and_stake_entry\",\n        functionArguments: [amount, to.toString()]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token staking failed\");\n      throw new Error(\"Token staking failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token staking failed: ${error.message}`);\n  }\n}\n\n// src/tools/amnis/withdraw-stake.ts\nasync function unstakeTokens(agent, to, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::router::unstake_entry\",\n        functionArguments: [amount, to.toString()]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token unstaking failed\");\n      throw new Error(\"Token unstaking failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token unstaking failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/balance.ts\n\nasync function getBalance(agent, mint) {\n  try {\n    if (mint) {\n      let balance2;\n      if (mint.split(\"::\").length !== 3) {\n        const balances = await agent.aptos.getCurrentFungibleAssetBalances({\n          options: {\n            where: {\n              owner_address: {\n                _eq: agent.account.getAddress().toStringLong()\n              },\n              asset_type: { _eq: mint }\n            }\n          }\n        });\n        balance2 = balances[0].amount ?? 0;\n      } else {\n        balance2 = await agent.aptos.getAccountCoinAmount({\n          accountAddress: agent.account.getAddress(),\n          coinType: mint\n        });\n      }\n      return balance2;\n    }\n    const balance = await agent.aptos.getAccountAPTAmount({\n      accountAddress: agent.account.getAddress()\n    });\n    const convertedBalance = (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromOnChainToHumanReadable)(balance, 8);\n    return convertedBalance;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/burn-nft.ts\nasync function burnNFT(agent, mint) {\n  return \"\";\n}\n\n// src/tools/aptos/burn-token.ts\nasync function burnToken(agent, amount, mint) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::burn_fa\",\n        functionArguments: [mint, amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token burn failed\");\n      throw new Error(\"Token burn failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token burn failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/transfer-nft.ts\nasync function transferNFT(agent, to, mint) {\n  return \"\";\n}\n\n// src/tools/aptos/transfer-token.ts\nasync function transferTokens(agent, to, amount, mint) {\n  const COIN_STANDARD_DATA = {\n    function: \"0x1::coin::transfer\",\n    typeArguments: [mint],\n    functionArguments: [to.toString(), amount]\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x1::primary_fungible_store::transfer\",\n    typeArguments: [\"0x1::fungible_asset::Metadata\"],\n    functionArguments: [mint, to.toString(), amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: mint.split(\"::\").length === 3 ? COIN_STANDARD_DATA : FUNGIBLE_ASSET_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token transfer failed\");\n      throw new Error(\"Token transfer failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/mint-token.ts\nasync function mintToken(agent, to, mint, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::mint_to_address\",\n        functionArguments: [to.toString(), mint, amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token mint failed\");\n      throw new Error(\"Token mint failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Token mint failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/create-token.ts\nasync function createToken(agent, name, symbol, iconURI, projectURI) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x67c8564aee3799e9ac669553fdef3a3828d4626f24786b6a5642152fa09469dd::launchpad::create_fa_simple\",\n        functionArguments: [name, symbol, iconURI, projectURI]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token creation failed\");\n      throw new Error(\"Token creation failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      // @ts-ignore\n      token: signedTransaction.events[0].data.fa_obj.inner\n    };\n  } catch (error) {\n    throw new Error(`Token creation failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-transaction.ts\nasync function getTransaction(agent, hash) {\n  try {\n    const transaction = await agent.aptos.getTransactionByHash({\n      transactionHash: hash\n    });\n    return transaction;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-token-details.ts\n\nasync function getTokenDetails(tokenAddress) {\n  try {\n    const res = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(\n      \"https://raw.githubusercontent.com/PanoraExchange/Aptos-Tokens/refs/heads/main/token-list.json\"\n    );\n    const tokenData = await res.data;\n    if (!tokenAddress || tokenAddress === \"\") return tokenData[0];\n    const token = tokenData.find(\n      (tokenAddr) => (tokenAddr.tokenAddress || tokenAddr.faAddress).toLowerCase() === tokenAddress.toLowerCase()\n    );\n    if (!token && tokenAddress.includes(\"fa_to_coin_wrapper::WrappedUSDT\")) {\n      return tokenData.find(\n        (e) => e.faAddress === \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\"\n      );\n    }\n    if (!token) throw new Error(\"Cannot find token\");\n    return token;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/aptos/get-token-price.ts\nasync function getTokenPrice(query) {\n  try {\n    const assetDataResponse = await fetch(`https://hermes.pyth.network/v2/price_feeds?query=${query}&asset_type=crypto`);\n    const assetData = await assetDataResponse.json();\n    const formattedData = assetData.map((data) => {\n      return {\n        id: data.id,\n        displayName: data.attributes.display_symbol,\n        symbol: data.attributes.symbol\n      };\n    });\n    const assetIdArray = formattedData.map((data) => data.id);\n    if (assetIdArray.length === 0) {\n      throw new Error(\"No assets found for the given query\");\n    }\n    const assetPriceDataResponse = await fetch(\n      `https://hermes.pyth.network/v2/updates/price/latest?ids[]=${assetIdArray.join(\"&ids[]=\")}`\n    );\n    const assetPriceData = await assetPriceDataResponse.json();\n    const priceFeed2 = formattedData.map((data) => {\n      const priceData = assetPriceData.parsed.find((price) => price.id === data.id);\n      return {\n        ...data,\n        price: (Number(priceData.price.price) / 10 ** Math.abs(priceData.price.expo)).toLocaleString() || Number(priceData.price.price).toLocaleString()\n      };\n    });\n    return priceFeed2;\n  } catch (error) {\n    throw new Error(`Token transfer failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/lend.ts\nasync function lendToken(agent, amount, mint, positionId, newPosition, fungibleAsset) {\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, newPosition];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::lend\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::lend_fa\",\n    functionArguments: [positionId, mint.toString(), newPosition, amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token mint failed\");\n      throw new Error(\"Token mint failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      // @ts-ignore\n      positionId: signedTransaction.events[0].data.position_id\n    };\n  } catch (error) {\n    throw new Error(`Token mint failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/borrow.ts\nasync function borrowToken(agent, amount, mint, positionId, fungibleAsset) {\n  const pyth_update_data = await agent.getPythData();\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, pyth_update_data];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::borrow\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::borrow_fa\",\n    functionArguments: [positionId, mint.toString(), amount, pyth_update_data]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token borrow failed\");\n      throw new Error(\"Token borrow failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/repay.ts\nasync function repayToken(agent, amount, mint, positionId, fungibleAsset) {\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::repay\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::repay_fa\",\n    functionArguments: [positionId, mint.toString(), amount]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token repay failed\");\n      throw new Error(\"Token repay failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/withdraw.ts\nasync function withdrawToken(agent, amount, mint, positionId, fungibleAsset) {\n  const pyth_update_data = await agent.getPythData();\n  const DEFAULT_FUNCTIONAL_ARGS = [positionId, amount, pyth_update_data];\n  const COIN_STANDARD_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::withdraw\",\n    typeArguments: [mint.toString()],\n    functionArguments: DEFAULT_FUNCTIONAL_ARGS\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::withdraw_fa\",\n    functionArguments: [positionId, mint.toString(), amount, pyth_update_data]\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Token withdraw failed\");\n      throw new Error(\"Token withdraw failed\");\n    }\n    return {\n      hash: signedTransaction.hash,\n      positionId\n    };\n  } catch (error) {\n    throw new Error(`Token withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/joule/pool-detail.ts\nasync function getPoolDetails(agent, mint) {\n  try {\n    const allPoolDetailsResponse = await fetch(\"https://price-api.joule.finance/api/market\");\n    const allPoolDetails = await allPoolDetailsResponse.json();\n    const poolDetail = allPoolDetails.data.find((pool) => pool.asset.type.includes(mint));\n    if (!poolDetail) {\n      throw new Error(\"Pool not found\");\n    }\n    return {\n      assetName: poolDetail.asset.assetName,\n      tokenAddress: mint,\n      ltv: poolDetail.ltv,\n      decimals: poolDetail.asset.decimals,\n      marketSize: Number(poolDetail.marketSize) / poolDetail.asset.decimals,\n      totalBorrowed: Number(poolDetail.totalBorrowed) / poolDetail.asset.decimals,\n      depositApy: poolDetail.depositApy,\n      extraDepositApy: poolDetail.extraAPY.depositAPY,\n      borrowApy: poolDetail.borrowApy,\n      price: poolDetail.priceInfo.price\n    };\n  } catch (error) {\n    throw new Error(`Failed to get pool details: ${error.message}`);\n  }\n}\n\n// src/tools/joule/user-position.ts\nasync function getUserPosition(agent, userAddress, positionId) {\n  try {\n    const transaction = await agent.aptos.view({\n      payload: {\n        function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::user_position_details\",\n        functionArguments: [userAddress.toString(), positionId]\n      }\n    });\n    if (!transaction) {\n      throw new Error(\"Failed to fetch user position\");\n    }\n    return transaction;\n  } catch (error) {\n    throw new Error(`Failed to get user position: ${error.message}`);\n  }\n}\n\n// src/utils/clean-joule-all-positions-list.ts\nvar removeLastInterestRateIndex = (obj) => {\n  if (!obj || typeof obj !== \"object\") {\n    return obj;\n  }\n  if (Array.isArray(obj)) {\n    return obj.map((item) => removeLastInterestRateIndex(item));\n  }\n  return Object.entries(obj).reduce((acc, [key, value]) => {\n    if (key === \"last_interest_rate_index\") {\n      return acc;\n    }\n    acc[key] = removeLastInterestRateIndex(value);\n    return acc;\n  }, {});\n};\n\n// src/tools/joule/user-all-positions.ts\nasync function getUserAllPositions(agent, userAddress) {\n  try {\n    const transaction = await agent.aptos.view({\n      payload: {\n        function: \"0x2fe576faa841347a9b1b32c869685deb75a15e3f62dfe37cbd6d52cc403a16f6::pool::user_positions_map\",\n        functionArguments: [userAddress.toString()]\n      }\n    });\n    if (!transaction) {\n      throw new Error(\"Failed to fetch user all positions\");\n    }\n    const cleanedTransaction = removeLastInterestRateIndex(transaction);\n    return cleanedTransaction;\n  } catch (error) {\n    throw new Error(`Failed to get user all positions: ${error.message}`);\n  }\n}\n\n// src/tools/aries/create-profile.ts\nasync function createAriesProfile(agent) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::register_user\",\n        functionArguments: [\"Main account\"]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Create profile failed\");\n      throw new Error(\"Create profile failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Create profile failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/lend.ts\nasync function lendAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::deposit\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, false]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Lend failed\");\n      throw new Error(\"Lend failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Lend failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/borrow.ts\nasync function borrowAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::withdraw\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, true]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Borrow failed\");\n      throw new Error(\"Borrow failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/withdraw.ts\nasync function withdrawAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::withdraw\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, false]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Withdraw failed\");\n      throw new Error(\"Withdraw failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/aries/repay.ts\nasync function repayAriesToken(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::controller::deposit\",\n        typeArguments: [mintType],\n        functionArguments: [\"Main account\", amount, true]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Repay failed\");\n      throw new Error(\"Repay failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/lend.ts\nasync function lendTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::supply\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::supply_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Lend failed\");\n      throw new Error(\"Lend failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Lend failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/withdraw.ts\nasync function withdrawTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::withdraw\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::withdraw_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Withdraw failed\");\n      throw new Error(\"Withdraw failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Withdraw failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/repay.ts\nasync function repayTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  try {\n    const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n    const COIN_STANDARD_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::repay\",\n      typeArguments: [mintType.toString()],\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const FUNGIBLE_ASSET_DATA = {\n      function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::repay_fa\",\n      functionArguments: FUNCTIONAL_ARGS_DATA\n    };\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Repay failed\");\n      throw new Error(\"Repay failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Repay failed: ${error.message}`);\n  }\n}\n\n// src/tools/echelon/borrow.ts\nasync function borrowTokenWithEchelon(agent, mintType, amount, poolAddress, fungibleAsset) {\n  const FUNCTIONAL_ARGS_DATA = [poolAddress, amount];\n  const COIN_STANDARD_DATA = {\n    function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::borrow\",\n    typeArguments: [mintType.toString()],\n    functionArguments: FUNCTIONAL_ARGS_DATA\n  };\n  const FUNGIBLE_ASSET_DATA = {\n    function: \"0xc6bc659f1649553c1a3fa05d9727433dc03843baac29473c817d06d39e7621ba::scripts::borrow_fa\",\n    functionArguments: FUNCTIONAL_ARGS_DATA\n  };\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: fungibleAsset ? FUNGIBLE_ASSET_DATA : COIN_STANDARD_DATA\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Borrow failed\");\n      throw new Error(\"Borrow failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Borrow failed: ${error.message}`);\n  }\n}\n\n// src/tools/echo/stake.ts\nasync function stakeTokenWithEcho(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xa0281660ff6ca6c1b68b55fcb9b213c2276f90ad007ad27fd003cf2f3478e96e::lsdmanage::stake\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Stake token in Echo failed\");\n      throw new Error(\"Stake token in Echo failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Stake token in Echo failed: ${error.message}`);\n  }\n}\n\n// src/tools/echo/unstake.ts\nasync function unstakeTokenWithEcho(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xa0281660ff6ca6c1b68b55fcb9b213c2276f90ad007ad27fd003cf2f3478e96e::lsdmanage::unstake\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Unstake token in Echo failed\");\n      throw new Error(\"Unstake token in Echo failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Unstake token in Echo failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/swap.ts\nasync function swap(agent, mintX, mintY, swapAmount, minCoinOut = 0) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::scripts_v2::swap\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"\n        ],\n        functionArguments: [swapAmount, minCoinOut]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Swap failed\");\n      throw new Error(\"Swap failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Swap failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/create-pool.ts\nasync function createPool(agent, mintX, mintY) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::scripts_v2::register_pool\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12::curves::Uncorrelated\"\n        ],\n        functionArguments: []\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Create pool failed\");\n      throw new Error(\"Create pool failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Create pool failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/add-liquidity.ts\nasync function addLiquidity(agent, mintX, mintY, mintXAmount, mintYAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9dd974aea0f927ead664b9e1c295e4215bd441a9fb4e53e5ea0bf22f356c8a2b::router::add_liquidity_v05\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated\"\n        ],\n        functionArguments: [\n          mintXAmount,\n          0,\n          //coin_x_min,\n          mintYAmount,\n          0\n          // coin_y_min\n        ]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Add liquidity failed\");\n      throw new Error(\"Add liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    console.error(error, \"Add liquidity failed\");\n    throw new Error(`Add liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/liquidswap/remove-liquidity.ts\nasync function removeLiquidity(agent, mintX, mintY, lpAmount, minMintX = 0, minMintY = 0) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x9dd974aea0f927ead664b9e1c295e4215bd441a9fb4e53e5ea0bf22f356c8a2b::router::remove_liquidity_v05\",\n        typeArguments: [\n          mintX,\n          mintY,\n          \"0x163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated\"\n        ],\n        functionArguments: [lpAmount, minMintX, minMintY]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Remove liquidity failed\");\n      throw new Error(\"Remove liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Remove liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/panora/swap.ts\n\nasync function swapWithPanora(agent, fromToken, toToken, swapAmount, toWalletAddress) {\n  try {\n    const panoraParameters = {\n      fromTokenAddress: fromToken,\n      toTokenAddress: toToken,\n      fromTokenAmount: swapAmount.toString(),\n      toWalletAddress: toWalletAddress ? toWalletAddress : agent.account.getAddress().toString()\n    };\n    const url = `https://api.panora.exchange/swap?${new URLSearchParams(panoraParameters).toString()}`;\n    const panoraApiKey = agent.config.PANORA_API_KEY;\n    if (!panoraApiKey) {\n      throw new Error(\"No PANORA_API_KEY in config\");\n    }\n    const res = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(\n      url,\n      {},\n      {\n        headers: {\n          \"x-api-key\": panoraApiKey\n        }\n      }\n    );\n    const response = await res.data;\n    if (response.quotes.length <= 0) {\n      throw new Error(\"no quotes available from panora\");\n    }\n    const transactionData = response.quotes[0].txData;\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: transactionData.function,\n        typeArguments: transactionData.type_arguments,\n        functionArguments: transactionData.arguments\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Swap failed\");\n      throw new Error(\"Swap tx failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Swap failed: ${error.message}`);\n  }\n}\n\n// src/tools/openai/create-image.ts\n\nasync function createImage(agent, prompt, size = \"1024x1024\", n = 1) {\n  try {\n    const apiKey = agent.config.OPENAI_API_KEY;\n    if (!apiKey) {\n      throw new Error(\"No OPENAI_API_KEY in config\");\n    }\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({ apiKey });\n    const response = await openai.images.generate({\n      prompt,\n      n,\n      size\n    });\n    return {\n      images: response.data.map((img) => img.url)\n    };\n  } catch (error) {\n    throw new Error(`Image generation failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/stake.ts\nasync function stakeTokenWithThala(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::scripts::stake_APT_and_thAPT\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Stake APT failed\");\n      throw new Error(\"Stake APT failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Stake APT failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/unstake.ts\nasync function unstakeAPTWithThala(agent, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::scripts::unstake_thAPT\",\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Unstake token failed\");\n      throw new Error(\"Unstake token failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Unstake token failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/mint-mod.ts\nasync function mintMODWithThala(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::psm_scripts::mint\",\n        typeArguments: [mintType],\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Mint MOD failed\");\n      throw new Error(\"Mint MOD failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Mint MOD failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/redeem-mod.ts\nasync function redeemMODWithThala(agent, mintType, amount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::psm_scripts::redeem\",\n        typeArguments: [mintType],\n        functionArguments: [amount]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Redeem MOD failed\");\n      throw new Error(\"Redeem MOD failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Redeem MOD failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/add-liquidity.ts\nasync function addLiquidityWithThala(agent, mintTypeX, mintTypeY, mintXAmount, mintYAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool_scripts::add_liquidity\",\n        typeArguments: [\n          mintTypeX,\n          mintTypeY,\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\"\n        ],\n        functionArguments: [mintXAmount, mintYAmount, 0, 0, 0, 0, 0, 0]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Add liquidity failed\");\n      throw new Error(\"Add liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Add liquidity failed: ${error.message}`);\n  }\n}\n\n// src/tools/thala/remove-liquidity.ts\nasync function removeLiquidityWithThala(agent, mintTypeX, mintTypeY, lpAmount) {\n  try {\n    const transaction = await agent.aptos.transaction.build.simple({\n      sender: agent.account.getAddress(),\n      data: {\n        function: \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool_scripts::remove_liquidity\",\n        typeArguments: [\n          mintTypeX,\n          mintTypeY,\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::weighted_pool::Weight_50\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\",\n          \"0x48271d39d0b05bd6efca2278f22277d6fcc375504f9839fd73f74ace240861af::base_pool::Null\"\n        ],\n        functionArguments: [lpAmount, 0, 0, 0, 0]\n      }\n    });\n    const committedTransactionHash = await agent.account.sendTransaction(transaction);\n    const signedTransaction = await agent.aptos.waitForTransaction({\n      transactionHash: committedTransactionHash\n    });\n    if (!signedTransaction.success) {\n      console.error(signedTransaction, \"Remove liquidity failed\");\n      throw new Error(\"Remove liquidity failed\");\n    }\n    return signedTransaction.hash;\n  } catch (error) {\n    throw new Error(`Remove liquidity failed: ${error.message}`);\n  }\n}\n\n// src/utils/get-pool-address-by-token-name.ts\nvar tokensList = [\n  {\n    name: \"USDt\",\n    poolAddress: \"0xac00e90cdadec06d81e0d5ce7a3e93d63d563e982dea0ca15bad2b067f42d2be\",\n    decimals: 6,\n    tokenAddress: \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\"\n  },\n  {\n    name: \"zUSDT\",\n    poolAddress: \"0x447b3b516546f28e8c4f6825a6287b09161659e7c500c599c29c28a8492844b8\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\"\n  },\n  {\n    name: \"zUSDC\",\n    poolAddress: \"0xa9c51ca3bcd93978d0c4aada7c4cf47c0791caced3cdc4e15f2c8e0797d1f93c\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\"\n  },\n  {\n    name: \"APT\",\n    poolAddress: \"0x761a97787fa8b3ae0cef91ebc2d96e56cc539df5bc88dadabee98ae00363a831\",\n    decimals: 8,\n    tokenAddress: \"0x1::aptos_coin::AptosCoin\"\n  },\n  {\n    name: \"sthAPT\",\n    poolAddress: \"0xed6bf9fe7e3f42c6831ffac91824a545c4b8bfcb40a59b3f4ccfe203cafb7f42\",\n    decimals: 8,\n    tokenAddress: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6::staking::StakedThalaAPT\"\n  },\n  {\n    name: \"MOD\",\n    poolAddress: \"0xef2ae89796725d0eb363326ecb7df159feb949f6d1f400f76deeeebccbac00f1\",\n    decimals: 8,\n    tokenAddress: \"0x6f986d146e4a90b828d8c12c14b6f4e003fdff11a8eecceceb63744363eaac01::mod_coin::MOD\"\n  },\n  {\n    name: \"THL\",\n    poolAddress: \"0x127ea5b4c450be695e488da1c3bc013e2e93d8cf00270ef90385189844bc9755\",\n    decimals: 8,\n    tokenAddress: \"0x7fd500c11216f0fe3095d0c4b8aa4d64a4e2e04f83758462f2b127255643615::thl_coin::THL\"\n  },\n  {\n    name: \"wUSDC\",\n    poolAddress: \"0xa76ebfb432982c864783fdb33cdf5a9edb18ac1b950deb8037f5cf8c984da3d2\",\n    decimals: 6,\n    tokenAddress: \"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\"\n  },\n  {\n    name: \"zWETH\",\n    poolAddress: \"0x548cf587bd918a0005b3372a1d23e64b18ace3c61962f087a21eac52cf228504\",\n    decimals: 6,\n    tokenAddress: \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::WETH\"\n  },\n  {\n    name: \"wWETH\",\n    poolAddress: \"0x114ee519ffa1e8697784bd1a350822cb37601a1476289051b8295165597a4538\",\n    decimals: 6,\n    tokenAddress: \"0xcc8a89c8dce9693d354449f1f73e60e14e347417854f029db5bc8e7454008abb::coin::T\"\n  },\n  {\n    name: \"CAKE\",\n    poolAddress: \"0x41b039e5518b1a3786ee798d895e0ddf3141fbbc20009284323fa51ea279c819\",\n    decimals: 8,\n    tokenAddress: \"0x159df6b7689437016108a019fd5bef736bac692b6d4a1f10c941f6fbb9a74ca6::oft::CakeOFT\"\n  },\n  {\n    name: \"stAPT\",\n    poolAddress: \"0xc3c9cc885a52004e0490f6a8291b3bc5854f0e42d931fb124736bd189c9f0f45\",\n    decimals: 8,\n    tokenAddress: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::stapt_token::StakedApt\"\n  },\n  {\n    name: \"aBTC\",\n    poolAddress: \"0xacb7262b33a147b47b950a3a26d7699e1a58bcaa475ef636cb0fea53fa0eb872\",\n    decimals: 10,\n    tokenAddress: \"0x4e1854f6d332c9525e258fb6e66f84b6af8aba687bbcb832a24768c4e175feec::abtc::ABTC\"\n  },\n  {\n    name: \"STONE\",\n    poolAddress: \"0x075c39f18c7bc00ac0f81a0f9ab7e319e23790d7d8c3df968d84a23699584bd9\",\n    decimals: 8,\n    tokenAddress: \"0x543c5660aa4d496687e2068c11765f04607c4f4b639a83233a9333604fb8ce59::stakestone_ether::StakeStoneEther\"\n  },\n  {\n    name: \"truAPT\",\n    poolAddress: \"0x7bd5be03df0fb3841fed337b8e7a353818b917cce6db28b807b691002a122d73\",\n    decimals: 8,\n    tokenAddress: \"0xaef6a8c3182e076db72d64324617114cacf9a52f28325edc10b483f7f05da0e7\"\n  },\n  {\n    name: \"sBTC\",\n    poolAddress: \"0x754114c656e26498a8c0b20fa24af663fed5e4b24acb471c103daea0f7006b40\",\n    decimals: 8,\n    tokenAddress: \"0x5dee1d4b13fae338a1e1780f9ad2709a010e824388efd169171a26e3ea9029bb::stakestone_bitcoin::StakeStoneBitcoin\"\n  }\n];\nvar getTokenByTokenName = (name) => {\n  const token = tokensList.find(\n    (token2) => token2.name.toLowerCase() === name.toLowerCase() || token2.name.toLowerCase().includes(name.toLowerCase())\n  );\n  return token;\n};\nvar getTokenByTokenAddress = (address) => {\n  const token = tokensList.find((token2) => token2.tokenAddress.toLowerCase() === address.toLowerCase());\n  return token;\n};\n\n// src/agent.ts\nvar AgentRuntime = class {\n  account;\n  aptos;\n  config;\n  constructor(account, aptos, config) {\n    this.account = account;\n    this.aptos = aptos;\n    this.config = config ? config : {};\n  }\n  async getPythData() {\n    const connection = new _pythnetwork_pyth_aptos_js__WEBPACK_IMPORTED_MODULE_1__.AptosPriceServiceConnection(\"https://hermes.pyth.network\");\n    return await connection.getPriceFeedsUpdateData(priceFeed);\n  }\n  getBalance(mint) {\n    return getBalance(this, mint);\n  }\n  getTokenDetails(token) {\n    return getTokenDetails(token);\n  }\n  getTokenByTokenName(name) {\n    return getTokenByTokenName(name);\n  }\n  getTokenPrice(query) {\n    return getTokenPrice(query);\n  }\n  transferTokens(to, amount, mint) {\n    return transferTokens(this, to, amount, mint);\n  }\n  getTransaction(hash) {\n    return getTransaction(this, hash);\n  }\n  burnToken(amount, mint) {\n    return burnToken(this, amount, mint);\n  }\n  createToken(name, symbol, iconURI, projectURI) {\n    return createToken(this, name, symbol, iconURI, projectURI);\n  }\n  mintToken(to, mint, amount) {\n    return mintToken(this, to, mint, amount);\n  }\n  stakeTokensWithAmnis(to, amount) {\n    return stakeTokens(this, to, amount);\n  }\n  withdrawStakeFromAmnis(to, amount) {\n    return unstakeTokens(this, to, amount);\n  }\n  transferNFT(to, mint) {\n    return transferNFT(this, to, mint);\n  }\n  burnNFT(mint) {\n    return burnNFT(this, mint);\n  }\n  lendToken(amount, mint, positionId, newPosition, fungibleAsset) {\n    return lendToken(this, amount, mint, positionId, newPosition, fungibleAsset);\n  }\n  borrowToken(amount, mint, positionId, fungibleAsset) {\n    return borrowToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  withdrawToken(amount, mint, positionId, fungibleAsset) {\n    return withdrawToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  repayToken(amount, mint, positionId, fungibleAsset) {\n    return repayToken(this, amount, mint, positionId, fungibleAsset);\n  }\n  getUserPosition(userAddress, positionId) {\n    return getUserPosition(this, userAddress, positionId);\n  }\n  getUserAllPositions(userAddress) {\n    return getUserAllPositions(this, userAddress);\n  }\n  getPoolDetails(mint) {\n    return getPoolDetails(this, mint);\n  }\n  addLiquidity(mintX, mintY, mintXAmount, mintYAmount) {\n    return addLiquidity(this, mintX, mintY, mintXAmount, mintYAmount);\n  }\n  removeLiquidity(mintX, mintY, lpAmount, minMintX = 0, minMintY = 0) {\n    return removeLiquidity(this, mintX, mintY, lpAmount, minMintX, minMintY);\n  }\n  swap(mintX, mintY, swapAmount, minCoinOut) {\n    return swap(this, mintX, mintY, swapAmount, minCoinOut);\n  }\n  createPool(mintX, mintY) {\n    return createPool(this, mintX, mintY);\n  }\n  // Aries\n  createAriesProfile() {\n    return createAriesProfile(this);\n  }\n  lendAriesToken(mintType, amount) {\n    return lendAriesToken(this, mintType, amount);\n  }\n  borrowAriesToken(mintType, amount) {\n    return borrowAriesToken(this, mintType, amount);\n  }\n  withdrawAriesToken(mintType, amount) {\n    return withdrawAriesToken(this, mintType, amount);\n  }\n  repayAriesToken(mintType, amount) {\n    return repayAriesToken(this, mintType, amount);\n  }\n  // Thala\n  stakeTokensWithThala(amount) {\n    return stakeTokenWithThala(this, amount);\n  }\n  unstakeTokensWithThala(amount) {\n    return unstakeAPTWithThala(this, amount);\n  }\n  mintMODWithThala(mintType, amount) {\n    return mintMODWithThala(this, mintType, amount);\n  }\n  redeemMODWithThala(mintType, amount) {\n    return redeemMODWithThala(this, mintType, amount);\n  }\n  addLiquidityWithThala(mintX, mintY, mintXAmount, mintYAmount) {\n    return addLiquidityWithThala(this, mintX, mintY, mintXAmount, mintYAmount);\n  }\n  removeLiquidityWithThala(mintX, mintY, lpAmount) {\n    return removeLiquidityWithThala(this, mintX, mintY, lpAmount);\n  }\n  // panora\n  swapWithPanora(fromToken, toToken, swapAmount, toWalletAddress) {\n    return swapWithPanora(this, fromToken, toToken, swapAmount, toWalletAddress);\n  }\n  // openai\n  createImageWithOpenAI(prompt, size, n) {\n    return createImage(this, prompt, size, n);\n  }\n  // Echo\n  stakeTokenWithEcho(amount) {\n    return stakeTokenWithEcho(this, amount);\n  }\n  unstakeTokenWithEcho(amount) {\n    return unstakeTokenWithEcho(this, amount);\n  }\n  // Echelon\n  lendTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return lendTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  withdrawTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return withdrawTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  repayTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return repayTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n  borrowTokenWithEchelon(mintType, amount, poolAddress, fungibleAsset) {\n    return borrowTokenWithEchelon(this, mintType, amount, poolAddress, fungibleAsset);\n  }\n};\n\n// src/langchain/account/address.ts\n\nvar AptosAccountAddressTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_get_wallet_address\";\n  description = \"Get the wallet address of the agent\";\n  async _call(_input) {\n    return this.agent.account.getAddress().toString();\n  }\n};\n\n// src/langchain/amnis/stake.ts\n\n\nvar AmnisStakeTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"amnis_stake\";\n  description = `this tool can be used to stake APT (Aptos) to amnis validator and receive its liquid staking token stAPT (staked APT)\n\n\tkeep recipient blank if user themselves wants to receive stAPT and not send to anybody else\n\n  Inputs ( input is a JSON string ) (required):\n  amount: number, eg 1 or 0.01 (required)\n  recipient: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.recipient) || this.agent.account.getAddress();\n      const stakeTransactionHash = await this.agent.stakeTokensWithAmnis(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"stAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/amnis/withdraw-stake.ts\n\n\nvar AmnisWithdrawStakeTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"amnis_withdraw_stake\";\n  description = `this tool can be used to withdraw staked APT (Aptos) from amnis validator and receive back APT\n\n\tkeep recipient blank if user themselves wants to receive APT and not send to anybody else\n\n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  recipient: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.recipient) || this.agent.account.getAddress();\n      const withdrawStakeTransactionHash = await this.agent.withdrawStakeFromAmnis(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawStakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/balance.ts\n\nvar AptosBalanceTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_balance\";\n  description = `Get the balance of a Aptos account.\n\n  If you want to get the balance of your wallet, you don't need to provide the mint.\n  If no mint is provided, the balance will be in APT.\n  if you want to get balance of a fungible asset, you need to provide the asset address as mint\n\n  Inputs ( input is a JSON string ):\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"\n  0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mint = parsedInput.mint || void 0;\n      const mintDetails = this.agent.getTokenDetails(mint);\n      const balance = await this.agent.getBalance(mint);\n      return JSON.stringify({\n        status: \"success\",\n        balance,\n        token: {\n          name: mintDetails.name || \"APT\",\n          decimals: mintDetails.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-token-details.ts\n\nvar AptosGetTokenDetailTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_token_details\";\n  description = `Get the detail of any aptos tokens\n\n  details also include decimals which you can use to make onchain values readable to a human user\n\n  Inputs ( input is a JSON string ):\n  token: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mint = parsedInput.token || \"\";\n      const tokenData = await this.agent.getTokenDetails(mint);\n      return JSON.stringify({\n        status: \"success\",\n        tokenData\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/transfer-token.ts\n\n\nvar AptosTransferTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_transfer_token\";\n  description = `this tool can be used to transfer APT, any token or fungible asset to a recipient\n\n  if you want to transfer APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to transfer token other than APT, you need to provide the mint of that specific token\n  if you want to transfer fungible asset, add fungible asset address as mint\n\n  keep to blank if user themselves wants to receive the token and not send to anybody else\n\n  Inputs ( input is a JSON string ):\n  to: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" \n  or \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.to) || this.agent.account.getAddress();\n      const transferTokenTransactionHash = await this.agent.transferTokens(\n        recipient,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 6),\n        parsedInput.mint\n      );\n      return JSON.stringify({\n        status: \"success\",\n        transferTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/burn-token.ts\n\n\nvar AptosBurnTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_burn_token\";\n  description = `this tool can be used to burn a fungible asset\n\n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required) \n  mint: string, \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const burnTransactionHash = await this.agent.burnToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint\n      );\n      return JSON.stringify({\n        status: \"success\",\n        burnTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/mint-token.ts\n\n\nvar AptosMintTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_mint_token\";\n  description = `this tool can be used to create fungible asset to a recipient\n\nif the recipient wants to receive the token and not send to anybody else, keep to blank\n\n  Inputs ( input is a JSON string ):\n  to: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const recipient = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.to) || this.agent.account.getAddress();\n      const mintTokenTransactionHash = await this.agent.mintToken(recipient, parsedInput.mint, parsedInput.amount);\n      return JSON.stringify({\n        status: \"success\",\n        mintTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/create-token.ts\n\nvar AptosCreateTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_create_token\";\n  description = `this tool can be used to create fungible asset to a recipient\n\n  Inputs ( input is a JSON string ):\n  name: string, eg \"USDT\" (required)\n  symbol: string, eg \"USDT\" (required)\n  iconURI: string, eg \"https://example.com/icon.png\" (required)\n  projectURI: string, eg \"https://example.com/project\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const createTokenTransactionHash = await this.agent.createToken(\n        parsedInput.name,\n        parsedInput.symbol,\n        parsedInput.iconURI,\n        parsedInput.projectURI\n      );\n      return JSON.stringify({\n        status: \"success\",\n        createTokenTransactionHash,\n        token: {\n          name: parsedInput.name,\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-transaction.ts\n\nvar AptosTransactionTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_get_transaction\";\n  description = `Fetches a transaction from aptos blockchain\n\n  Inputs ( input is a JSON string ):\n  transactionHash: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const aptosTransaction = await this.agent.getTransaction(parsedInput.transactionHash);\n      return JSON.stringify({\n        status: \"success\",\n        aptosTransaction\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aptos/get-token-price.ts\n\nvar AptosGetTokenPriceTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aptos_token_price\";\n  description = `Get the live price of any aptos tokens in USD.\n\tdo not do any decimals conversion here, the price is already in USD\n\n  details also include decimals which you can use to make onchain values readable to a human user\n\n  Inputs ( input is a JSON string - this is IMPORTANT):\n  token: string, eg usdt, btc etc.`;\n  async _call(input) {\n    console.log(\"input\", input);\n    try {\n      const parsedInput = parseJson(input);\n      const token = parsedInput.token || input || \"usdt\";\n      const tokenData = await this.agent.getTokenPrice(token);\n      return JSON.stringify({\n        status: \"success\",\n        tokenData\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/create-profile.ts\n\nvar AriesCreateProfileTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_create_profile\";\n  description = `this tool can be used to create a profile in Aries\n    `;\n  async _call() {\n    try {\n      const createProfileTransactionHash = await this.agent.createAriesProfile();\n      return JSON.stringify({\n        status: \"success\",\n        createProfileTransactionHash\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/lend-token.ts\n\n\n\n// src/utils/parse-json.ts\nvar parseJson = (input) => {\n  try {\n    const forbiddenWords = [\"null\", \"undefined\", \"{}\"];\n    if (input in forbiddenWords) throw new Error();\n    const parsedInput = JSON.parse(input);\n    return parsedInput;\n  } catch (e) {\n    return {};\n  }\n};\n\n// src/langchain/aries/lend-token.ts\nvar AriesLendTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_lend\";\n  description = `this tool can be used to lend tokens in Aries\n\n    if you want to lend APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const lendTokenTransactionHash = await this.agent.lendAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/withdraw-token.ts\n\n\nvar AriesWithdrawTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_withdraw\";\n  description = `this tool can be used to withdraw tokens from Aries\n\n    if you want to withdraw APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const withdrawTokenTransactionHash = await this.agent.withdrawAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/borrow-token.ts\n\n\nvar AriesBorrowTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_borrow\";\n  description = `this tool can be used to borrow tokens from Aries\n\n    if you want to borrow APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const borrowTokenTransactionHash = await this.agent.borrowAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/aries/repay-token.ts\n\n\nvar AriesRepayTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"aries_repay\";\n  description = `this tool can be used to repay tokens in Aries\n\n    if you want to repay APT, mintType will be \"0x1::aptos_coin::AptosCoin\"\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0x1::aptos_coin::AptosCoin\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const repayTokenTransactionHash = await this.agent.repayAriesToken(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/lend-token.ts\n\n\nvar JouleLendTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_lend_token\";\n  description = `this tool can be used to lend APT, tokens or fungible asset to a position\n\n  if you want to lend APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to lend token other than APT, you need to provide the mint of that specific token\n  if you want to lend fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n\n  if positionId is not provided, the positionId will be 1234 and newPosition should be true\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  newPosition: boolean, (required)  \n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const lendTokenTransactionHash = await this.agent.lendToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        parsedInput.newPosition,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/borrow-token.ts\n\n\nvar JouleBorrowTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_borrow_token\";\n  description = `this tool can be used to borrow APT, tokens or fungible asset from a position\n\n  if you want to borrow APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to borrow token other than APT, you need to provide the mint of that specific token\n  if you want to borrow fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const borrowTokenTransactionHash = await this.agent.borrowToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/withdraw-token.ts\n\n\nvar JouleWithdrawTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_withdraw_token\";\n  description = `this tool can be used to withdraw APT, tokens or fungible asset from a position\n\n  if you want to withdraw APT, add \"0x1::aptos_coin::AptosCoin\" as mint\n  if you want to withdraw token other than APT, you need to provide the mint of that specific token\n  if you want to withdraw fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const fungibleAsset = mintDetail.faAddress.toLowerCase() === parsedInput.mint.toLowerCase();\n      const withdrawTokenTransactionHash = await this.agent.withdrawToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        fungibleAsset\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/repay-token.ts\n\n\nvar JouleRepayTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_repay_token\";\n  description = `this tool can be used to repay APT, tokens or fungible asset from a position\n\n  if you want to repay APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n  if you want to repay token other than APT, you need to provide the mint of that specific token\n  if you want to repay fungible asset, add \"0x1::aptos_coin::AptosCoin\" as mint and provide fungible asset address\n  \n  Inputs ( input is a JSON string ):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n  positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  fungibleAssetAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintDetail = await this.agent.getTokenDetails(parsedInput.mint);\n      const repayTokenTransactionHash = await this.agent.repayToken(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        parsedInput.mint,\n        parsedInput.positionId,\n        parsedInput.fungibleAssetAddress\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name,\n          decimals: mintDetail.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-pool-details.ts\n\nvar JouleGetPoolDetails = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_pool_details\";\n  description = `the tool can be used to get a token / fungible asset pool details\n\n  Inputs ( input is a JSON string ):\n     mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\n  Example: '{\"mint\": \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\"}'\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const pool = await this.agent.getPoolDetails(parsedInput.mint);\n      return JSON.stringify({\n        status: \"success\",\n        pool\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-user-position.ts\n\n\nvar JouleGetUserPosition = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_user_position\";\n  description = `the tool can be used to get details about a user's position\n\n\tkeep userAddress blank if user wants to get their own position or didn't provide any other user's address\n\n\task user to provide positionId from the list of positions they have if they want to get details about a specific position.\n\tdo not fill random positionId if the user didn't provide any positionId\n\n  Inputs ( input is a JSON string ):\n     userAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n     positionId: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const userAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.userAddress) || this.agent.account.getAddress();\n      const jouleUserPosition = await this.agent.getUserPosition(userAddress, parsedInput.positionId);\n      return JSON.stringify({\n        status: \"success\",\n        jouleUserPosition\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/joule/get-user-all-positions.ts\n\n\nvar JouleGetUserAllPositions = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"joule_get_user_all_positions\";\n  description = `the tool can be used to get details about a user's all positions\n\n\tkeep userAddress blank if user wants to get their own position or didn't provide any other user's address\n\n  Inputs ( input is a JSON string ):\n     userAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const userAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(parsedInput.userAddress) || this.agent.account.getAddress();\n      const jouleUserAllPositions = await this.agent.getUserAllPositions(userAddress);\n      return JSON.stringify({\n        status: \"success\",\n        jouleUserAllPositions,\n        tokens: tokensList.map((token) => {\n          return {\n            name: token.name,\n            decimals: token.decimals,\n            tokenAddress: token.tokenAddress\n          };\n        })\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/swap.ts\n\n\nvar LiquidSwapSwapTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_swap\";\n  description = `this tool can be used to swap tokens in liquidswap\n\nwant to swap APT and one of the token, mint is 0x1::aptos_coin::AptosCoin\none of the token is USDT, use 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\n\nif user added mintX or mintY as asset name, and you don't have the address of the asset, use these token names:\nusdt,zusdt,zusdc,apt,sthapt,mod,thl,wusdc,zweth,wweth,cake,stapt,abtc,stone,truapt,sbtc\nor whatever name the user has provided, you can use the token name to get the address of the token \n\ncant swap any fungible tokens. only coin standard swap allowed. if user trying to swap fungible token, ask it to swap via panora.\n\ncoin standard format : string::string::string\n\nInputs (input is a JSON string):\nmintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\nmintY: string, eg (same as mintX) (required)\nswapAmount: number, eg 1 or 0.01 (required)\nminCoinOut: number, eg 1 or 0.01 (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const swapTransactionHash = await this.agent.swap(\n        mintX,\n        mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.swapAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minCoinOut, mintXDetail.decimals) || 0\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/create-pool.ts\n\n\n// src/utils/parse-fungible-asset-to-wrapped-asset.ts\nvar parseFungibleAssetAddressToWrappedAssetAddress = (assetAddress) => {\n  if (assetAddress === \"0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\") {\n    return \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3::fa_to_coin_wrapper::WrappedUSDT\";\n  }\n  return assetAddress;\n};\n\n// src/langchain/liquidswap/create-pool.ts\nvar LiquidSwapCreatePoolTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_create_pool\";\n  description = `this tool can be used to create a new pool in liquidswap\n\n    if you want to create a pool with APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const createPoolTransactionHash = await this.agent.createPool(\n        parseFungibleAssetAddressToWrappedAssetAddress(mintX),\n        parseFungibleAssetAddressToWrappedAssetAddress(mintY)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        createPoolTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/add-liquidity.ts\n\n\nvar LiquidSwapAddLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_add_liquidity\";\n  description = `this tool can be used to add liquidity in liquidswap\n\n    if you want to add APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n\tif user added mintX or mintY as asset name, and you don't have the address of the asset, you can use the following token names:\n\t['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n\tor whatever name the user has provided, you can use the token name to get the address of the token \n\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    mintXAmount: number, eg 1 or 0.01 (required)\n    mintYAmount: number, eg 1 or 0.01 (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const wrappedMintX = parseFungibleAssetAddressToWrappedAssetAddress(mintX);\n      const wrappedMintY = parseFungibleAssetAddressToWrappedAssetAddress(mintY);\n      const mintXDetail = await this.agent.getTokenDetails(wrappedMintX);\n      const mintYDetail = await this.agent.getTokenDetails(wrappedMintY);\n      const swapTransactionHash = await this.agent.addLiquidity(\n        wrappedMintX,\n        wrappedMintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintXAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintYAmount, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/liquidswap/remove-liquidity.ts\n\n\nvar LiquidSwapRemoveLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"liquidswap_remove_liquidity\";\n  description = `this tool can be used to remove liquidity from liquidswap\n\nif you want to remove APT and one of the token, mint will be \"0x1::aptos_coin::AptosCoin\"\n\nif user added mintX or mintY as asset name, and you don't have the address of the asset, use these token names:\nusdt,zusdt,zusdc,apt,sthapt,mod,thl,wusdc,zweth,wweth,cake,stapt,abtc,stone,truapt,sbtc\nor whatever name the user has provided, you can use the token name to get the address of the token \n\nminMintX and minMintY are minimum amount of tokens to receive, default is 0\n\ndeposit liquidity in one of the pools to get LP tokens if you don't have LP tokens\n\nInputs (input is a JSON string):\nmintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\nmintY: string, eg same as mintX (required)\nlpAmount: number, eg 1 or 0.01 (required)\nminMintX: number, eg 1 or 0.01 (optional)\nminMintY: number, eg 1 or 0.01 (optional)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      let mintX = parsedInput.mintX;\n      const tokenX = getTokenByTokenName(mintX);\n      if (tokenX) {\n        mintX = tokenX.tokenAddress;\n      }\n      let mintY = parsedInput.mintY;\n      const tokenY = getTokenByTokenName(mintY);\n      if (tokenY) {\n        mintY = tokenY.tokenAddress;\n      }\n      const mintXDetail = await this.agent.getTokenDetails(mintX);\n      const mintYDetail = await this.agent.getTokenDetails(mintY);\n      const removeLiquidityTransactionHash = await this.agent.removeLiquidity(\n        parseFungibleAssetAddressToWrappedAssetAddress(mintX),\n        parseFungibleAssetAddressToWrappedAssetAddress(mintY),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.lpAmount, 6),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minMintX || 0, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.minMintY || 0, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        removeLiquidityTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/lend-token.ts\n\n\nvar EchelonLendTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_lend_token\";\n  description = `this tool can be used to lend APT, tokens or fungible asset to a position\n\n    if you want to lend APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      console.log(\"mintDetail\", mintDetail);\n      const lendTokenTransactionHash = await this.agent.lendTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        lendTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/withdraw-token.ts\n\n\nvar EchelonWithdrawTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_withdraw_token\";\n  description = `this tool can be used to withdraw APT, tokens or fungible asset from a position\n\n    if you want to withdraw APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      console.log(\"mintDetail\", mintDetail);\n      const withdrawTokenTransactionHash = await this.agent.withdrawTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        withdrawTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/repay-token.ts\n\n\nvar EchelonRepayTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_repay_token\";\n  description = `this tool can be used to repay APT, tokens or fungible asset from a position\n\n    if you want to repay APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n    if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n    ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n    or whatever name the user has provided, you can use the token name to get the address of the token\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    amount: number, eg 1 or 0.01 (required)\n    mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      const repayTokenTransactionHash = await this.agent.repayTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        repayTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echelon/borrow-token.ts\n\n\nvar EchelonBorrowTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echelon_borrow_token\";\n  description = `this tool can be used to borrow APT, tokens or fungible asset from a position\n\n  if you want to borrow APT, mint will be \"0x1::aptos_coin::AptosCoin\"\n\n  if user added mint as asset name, and you don't have the address of the asset, you can use the following token names:\n  ['usdt', 'zusdt', 'zusdc', 'apt', 'sthapt', 'mod', 'thl', 'wusdc' , 'zweth', 'wweth', 'cake', 'stapt', 'abtc', 'stone' , 'truapt', 'sbtc']\n  or whatever name the user has provided, you can use the token name to get the address of the token \n\n\n  Inputs ( input is a JSON string ) (IMPORTANT):\n  amount: number, eg 1 or 0.01 (required)\n  mint: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" or \"usdt (name of the token)\" (required)\n  `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const token = getTokenByTokenName(parsedInput.mint) || getTokenByTokenAddress(parsedInput.mint);\n      if (!token) throw new Error(\"Token not found\");\n      const mintDetail = await this.agent.getTokenDetails(token.tokenAddress);\n      const borrowTokenTransactionHash = await this.agent.borrowTokenWithEchelon(\n        token.tokenAddress,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, mintDetail.decimals || 8),\n        token.poolAddress,\n        token.tokenAddress.split(\"::\").length !== 3\n      );\n      return JSON.stringify({\n        status: \"success\",\n        borrowTokenTransactionHash,\n        token: {\n          name: mintDetail.name || \"APT\",\n          decimals: mintDetail.decimals || 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echo/stake.ts\n\n\nvar EchoStakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echo_stake_token\";\n  description = `this tool can be used to stake token in Echo\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const stakeTransactionHash = await this.agent.stakeTokenWithEcho(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"eAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/echo/unstake.ts\n\n\nvar EchoUnstakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"echo_unstake_token\";\n  description = `this tool can be used to unstake token in Echo\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const unstakeTransactionHash = await this.agent.unstakeTokenWithEcho(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        unstakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/openai/create-image.ts\n\nvar OpenAICreateImageTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"openai_create_image\";\n  description = `\n    Generate an image using OpenAI's DALL-E\n\n    Inputs ( input is a JSON string ):\n    prompt: string, Text description of the image to generate (required)\n    size: string, Image size ('256x256', '512x512', or '1024x1024') (default: '1024x1024')\n    n: number, Number of images to generate (default: 1)`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const response = await this.agent.createImageWithOpenAI(parsedInput.prompt, parsedInput.size, parsedInput.n);\n      return JSON.stringify({\n        status: \"success\",\n        response\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/panora/swap.ts\n\nvar PanoraSwapTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"panora_aggregator_swap\";\n  description = `this tool can be used to swap tokens in panora - liquidity aggregator on aptos\n\n\tif you want to swap APT and one of the token, fromToken will be \"0x1::aptos_coin::AptosCoin\"\n\n\tInputs ( input is a JSON string ):\n\tfromToken: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\ttoToken: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n\tswapAmount: number, eg 1 or 0.01 (required)\n\ttoWalletAddress: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa\" (optional)\n\t`;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.fromToken);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.toToken);\n      const swapTransactionHash = await this.agent.swapWithPanora(\n        parsedInput.fromToken,\n        parsedInput.toToken,\n        parsedInput.swapAmount,\n        parsedInput.toWalletAddress\n      );\n      return JSON.stringify({\n        status: \"success\",\n        swapTransactionHash,\n        token: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/stake.ts\n\n\nvar ThalaStakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_stake_token\";\n  description = `this tool can be used to stake thAPT in Thala\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const stakeTransactionHash = await this.agent.stakeTokensWithThala(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        stakeTransactionHash,\n        token: {\n          name: \"thAPT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/unstake.ts\n\n\nvar ThalaUnstakeTokenTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_unstake_token\";\n  description = `this tool can be used to unstake thAPT in Thala\n\n    Inputs ( input is a JSON string ):\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const unstakeTransactionHash = await this.agent.unstakeTokensWithThala(\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 8)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        unstakeTransactionHash,\n        token: {\n          name: \"APT\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/mint-mod.ts\n\n\nvar ThalaMintMODTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_mint_mod\";\n  description = `this tool can be used to mint move dollar (MOD) in Thala\n\n    Only supported coin types: lzUSDC, whUSDC, or USDt\n\n\tif the user coin is not in the list , default to lzUSDC\n\n\tmintType for lzUSDC - 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\n\tmintType for wUSDC - 0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\n\tmintType for USDt - 0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\n\n    Inputs ( input is a JSON string ):\n    mintType: eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintMODTransactionHash = await this.agent.mintMODWithThala(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        mintMODTransactionHash,\n        token: {\n          name: \"MOD\",\n          decimals: 8\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/redeem-mod.ts\n\n\nvar ThalaRedeemMODTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_redeem_mod\";\n  description = `this tool can be used to redeem move dollar (MOD) in Thala\n\n  Only supported coin types: lzUSDC, whUSDC, or USDt\n\n\tif the user coin is not in the list , default to lzUSDC\n\n\tmintType for lzUSDC - 0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC\n\tmintType for wUSDC - 0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T\n\tmintType for USDt - 0x357b0b74bc833e95a115ad22604854d6b0fca151cecd94111770e5d6ffc9dc2b\n\n\n    Inputs ( input is a JSON string ):\n    mintType: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    amount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const tokenDetails = await this.agent.getTokenDetails(parsedInput.mintType);\n      const redeemMODTransactionHash = await this.agent.redeemMODWithThala(\n        parsedInput.mintType,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.amount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        redeemMODTransactionHash,\n        token: {\n          name: tokenDetails.name,\n          decimals: tokenDetails.decimals\n        }\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/add-liquidity.ts\n\n\nvar ThalaAddLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_add_liquidity\";\n  description = `this tool can be used to add liquidity to a Thala pool\n\n    If you want to add APT, use \"0x1::aptos_coin::AptosCoin\" as the coin type\n\n    Inputs ( input is a JSON string ) (IMPORTANT):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintXAmount: number, eg 1 or 0.01 (required)\n    mintYAmount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.mintX);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.mintY);\n      const addLiquidityTransactionHash = await this.agent.addLiquidityWithThala(\n        parsedInput.mintX,\n        parsedInput.mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintXAmount, mintXDetail.decimals),\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.mintYAmount, mintYDetail.decimals)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        addLiquidityTransactionHash,\n        tokens: [\n          {\n            mintX: mintXDetail.name,\n            decimals: mintXDetail.decimals\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: mintYDetail.decimals\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/thala/remove-liquidity.ts\n\n\nvar ThalaRemoveLiquidityTool = class extends langchain_tools__WEBPACK_IMPORTED_MODULE_4__.Tool {\n  constructor(agent) {\n    super();\n    this.agent = agent;\n  }\n  name = \"thala_remove_liquidity\";\n  description = `this tool can be used to remove liquidity from a Thala pool\n\n    If one of your coins is APT, use \"0x1::aptos_coin::AptosCoin\" as the coin type\n\n    Inputs ( input is a JSON string ):\n    mintX: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    mintY: string, eg \"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT\" (required)\n    lpAmount: number, eg 1 or 0.01 (required)\n    `;\n  async _call(input) {\n    try {\n      const parsedInput = parseJson(input);\n      const mintXDetail = await this.agent.getTokenDetails(parsedInput.mintX);\n      const mintYDetail = await this.agent.getTokenDetails(parsedInput.mintY);\n      const removeLiquidityTransactionHash = await this.agent.removeLiquidityWithThala(\n        parsedInput.mintX,\n        parsedInput.mintY,\n        (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.convertAmountFromHumanReadableToOnChain)(parsedInput.lpAmount, 6)\n      );\n      return JSON.stringify({\n        status: \"success\",\n        removeLiquidityTransactionHash,\n        tokens: [\n          {\n            mintX: mintXDetail.name,\n            decimals: 6\n          },\n          {\n            mintY: mintYDetail.name,\n            decimals: 6\n          }\n        ]\n      });\n    } catch (error) {\n      return JSON.stringify({\n        status: \"error\",\n        message: error.message,\n        code: error.code || \"UNKNOWN_ERROR\"\n      });\n    }\n  }\n};\n\n// src/langchain/index.ts\nvar createAptosTools = (agent, config = {}) => {\n  const tools = [\n    // Aptos tools\n    new AptosBalanceTool(agent),\n    new AptosAccountAddressTool(agent),\n    new AptosTransferTokenTool(agent),\n    // new AptosBurnNFTTool(agent),\n    new AptosBurnTokenTool(agent),\n    // new AptosTransferNFTTool(agent),\n    new AptosTransactionTool(agent),\n    new AptosGetTokenDetailTool(agent),\n    new AptosMintTokenTool(agent),\n    new AptosCreateTokenTool(agent),\n    new AptosGetTokenPriceTool(agent),\n    // Amnis tools\n    new AmnisStakeTool(agent),\n    new AmnisWithdrawStakeTool(agent),\n    // Joule tools\n    new JouleLendTokenTool(agent),\n    new JouleWithdrawTokenTool(agent),\n    new JouleBorrowTokenTool(agent),\n    new JouleRepayTokenTool(agent),\n    new JouleGetPoolDetails(agent),\n    new JouleGetUserPosition(agent),\n    new JouleGetUserAllPositions(agent),\n    // LiquidSwap tools\n    new LiquidSwapCreatePoolTool(agent),\n    new LiquidSwapAddLiquidityTool(agent),\n    new LiquidSwapRemoveLiquidityTool(agent),\n    new LiquidSwapSwapTool(agent),\n    // Aries tools\n    new AriesCreateProfileTool(agent),\n    new AriesWithdrawTool(agent),\n    new AriesBorrowTool(agent),\n    new AriesLendTool(agent),\n    new AriesRepayTool(agent),\n    // Thala tools\n    new ThalaAddLiquidityTool(agent),\n    new ThalaRemoveLiquidityTool(agent),\n    new ThalaMintMODTool(agent),\n    new ThalaRedeemMODTool(agent),\n    new ThalaUnstakeTokenTool(agent),\n    new ThalaStakeTokenTool(agent),\n    // Panora tools\n    new PanoraSwapTool(agent),\n    // OpenAI tools\n    new OpenAICreateImageTool(agent),\n    // Echo tools\n    new EchoStakeTokenTool(agent),\n    new EchoUnstakeTokenTool(agent),\n    // Echelon tools\n    new EchelonLendTokenTool(agent),\n    new EchelonWithdrawTokenTool(agent),\n    new EchelonRepayTokenTool(agent),\n    new EchelonBorrowTokenTool(agent)\n  ];\n  return config.filter ? tools.filter((tool) => config?.filter?.includes(tool.name)) : tools;\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbW92ZS1hZ2VudC1raXRAMC4xLjNfQGFwdG9zLWxhYnMrdHMtc2RrQDEuMzUuMF9heGlvc0AxLjcuOV9nb3RAMTEuOC42X19AYXB0b3MtbGFicyt3YWxsZXQtYWRhX2dqanhub295bDUzZ3B0ZzNlbWtvcDV1cWw0L25vZGVfbW9kdWxlcy9tb3ZlLWFnZW50LWtpdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUU7QUFDakU7QUFDQSxpQ0FBaUMsdURBQU87QUFDeEMsdUJBQXVCLDJEQUFXLEdBQUcsU0FBUztBQUM5QyxzQkFBc0IscURBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VIO0FBQ3ZIO0FBQ0EseUNBQXlDLHVEQUFRO0FBQ2pELHVCQUF1QiwyREFBWSxHQUFHLFNBQVM7QUFDL0Msc0JBQXNCLHFEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOERBQWM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lFOztBQUV6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtREFBbUQsY0FBYztBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0RBQW9ELGNBQWM7QUFDbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHlEQUF5RCxjQUFjO0FBQ3ZFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0NBQW9DLGNBQWM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQ0FBc0MsY0FBYztBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdDQUF3QyxjQUFjO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQ0FBb0MsY0FBYztBQUNsRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdDQUF3QyxjQUFjO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQ0FBc0MsY0FBYztBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtREFBbUQsY0FBYztBQUNqRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixxREFBcUQsY0FBYztBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0NBQW9DLGNBQWM7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGdEQUFnRCxjQUFjO0FBQzlEO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxpREFBaUQ7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQU07QUFDNUI7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG9DQUFvQyxjQUFjO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhDQUFNLEdBQUcsUUFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZ0RBQWdELGNBQWM7QUFDOUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3Q0FBd0MsY0FBYztBQUN0RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixnREFBZ0QsY0FBYztBQUM5RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUZBQTJCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWlERTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vbW92ZS1hZ2VudC1raXRAMC4xLjNfQGFwdG9zLWxhYnMrdHMtc2RrQDEuMzUuMF9heGlvc0AxLjcuOV9nb3RAMTEuOC42X19AYXB0b3MtbGFicyt3YWxsZXQtYWRhX2dqanhub295bDUzZ3B0ZzNlbWtvcDV1cWw0L25vZGVfbW9kdWxlcy9tb3ZlLWFnZW50LWtpdC9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2lnbmVycy9iYXNlLXNpZ25lci50c1xudmFyIEJhc2VTaWduZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGFjY291bnQsIGFwdG9zKSB7XG4gICAgdGhpcy5hY2NvdW50ID0gYWNjb3VudDtcbiAgICB0aGlzLmFwdG9zID0gYXB0b3M7XG4gIH1cbiAgZ2V0QWRkcmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50LmFjY291bnRBZGRyZXNzO1xuICB9XG59O1xuXG4vLyBzcmMvc2lnbmVycy9sb2NhbC1zaWduZXIudHNcbmltcG9ydCB7IEFwdG9zLCBBcHRvc0NvbmZpZywgTmV0d29yayB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBMb2NhbFNpZ25lciA9IGNsYXNzIGV4dGVuZHMgQmFzZVNpZ25lciB7XG4gIGNvbnN0cnVjdG9yKGFjY291bnQsIG5ldHdvcmsgPSBOZXR3b3JrLkRFVk5FVCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBBcHRvc0NvbmZpZyh7IG5ldHdvcmsgfSk7XG4gICAgY29uc3QgYXB0b3MgPSBuZXcgQXB0b3MoY29uZmlnKTtcbiAgICBzdXBlcihhY2NvdW50LCBhcHRvcyk7XG4gIH1cbiAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XG4gICAgY29uc3Qgc2VuZGVyQXV0aGVudGljYXRvciA9IHRoaXMuYXB0b3MudHJhbnNhY3Rpb24uc2lnbih7XG4gICAgICBzaWduZXI6IHRoaXMuYWNjb3VudCxcbiAgICAgIHRyYW5zYWN0aW9uXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbmRlckF1dGhlbnRpY2F0b3JcbiAgICB9O1xuICB9XG4gIGFzeW5jIHNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xuICAgIGNvbnN0IHNpZ25lZFR4ID0gYXdhaXQgdGhpcy5zaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHN1Ym1pdHRlZFR4ID0gYXdhaXQgdGhpcy5hcHRvcy50cmFuc2FjdGlvbi5zdWJtaXQuc2ltcGxlKHtcbiAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgc2VuZGVyQXV0aGVudGljYXRvcjogc2lnbmVkVHguc2VuZGVyQXV0aGVudGljYXRvclxuICAgIH0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogc3VibWl0dGVkVHguaGFzaFxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQuaGFzaDtcbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3Qgc2lnbmVkTWVzc2FnZSA9IHRoaXMuYWNjb3VudC5zaWduV2l0aEF1dGhlbnRpY2F0b3IobWVzc2FnZSk7XG4gICAgcmV0dXJuIHNpZ25lZE1lc3NhZ2UudG9TdHJpbmcoKTtcbiAgfVxufTtcblxuLy8gc3JjL3NpZ25lcnMvd2FsbGV0LXNpZ25lci50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MsIEFwdG9zIGFzIEFwdG9zMiwgQXB0b3NDb25maWcgYXMgQXB0b3NDb25maWcyLCBOZXR3b3JrIGFzIE5ldHdvcmsyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIFdhbGxldFNpZ25lciA9IGNsYXNzIGV4dGVuZHMgQmFzZVNpZ25lciB7XG4gIGNvbnN0cnVjdG9yKGFjY291bnQsIHdhbGxldCwgbmV0d29yayA9IE5ldHdvcmsyLkRFVk5FVCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBBcHRvc0NvbmZpZzIoeyBuZXR3b3JrIH0pO1xuICAgIGNvbnN0IGFwdG9zID0gbmV3IEFwdG9zMihjb25maWcpO1xuICAgIHN1cGVyKGFjY291bnQsIGFwdG9zKTtcbiAgICB0aGlzLndhbGxldCA9IHdhbGxldDtcbiAgfVxuICBnZXRBZGRyZXNzKCkge1xuICAgIGNvbnN0IHdhbGxldEFkZHJlc3MgPSB0aGlzLndhbGxldD8uYWNjb3VudD8uYWRkcmVzcztcbiAgICByZXR1cm4gd2FsbGV0QWRkcmVzcyA/IEFjY291bnRBZGRyZXNzLmZyb21TdHJpbmcod2FsbGV0QWRkcmVzcykgOiB0aGlzLmFjY291bnQuYWNjb3VudEFkZHJlc3M7XG4gIH1cbiAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XG4gICAgY29uc3Qgc2VuZGVyQXV0aGVudGljYXRvciA9IGF3YWl0IHRoaXMud2FsbGV0LnNpZ25UcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbmRlckF1dGhlbnRpY2F0b3JcbiAgICB9O1xuICB9XG4gIGFzeW5jIHNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xuICAgIGNvbnN0IHR4SGFzaCA9IGF3YWl0IHRoaXMud2FsbGV0LnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgcmV0dXJuIHR4SGFzaC5oYXNoO1xuICB9XG4gIGFzeW5jIHNpZ25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy53YWxsZXQuc2lnbk1lc3NhZ2UobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8vIHNyYy9hZ2VudC50c1xuaW1wb3J0IHsgQXB0b3NQcmljZVNlcnZpY2VDb25uZWN0aW9uIH0gZnJvbSBcIkBweXRobmV0d29yay9weXRoLWFwdG9zLWpzXCI7XG5cbi8vIHNyYy9jb25zdGFudHMvcHJpY2UtZmVlZC50c1xudmFyIHByaWNlRmVlZCA9IFtcbiAgXCIweGVhYTAyMGM2MWNjNDc5NzEyODEzNDYxY2UxNTM4OTRhOTZhNmMwMGIyMWVkMGNmYzI3OThkMWY5YTllOWM5NGFcIixcbiAgXCIweDJiODliOWRjOGZkZjlmMzQ3MDlhNWIxMDZiNDcyZjBmMzliYjZjYTljZTA0YjBmZDdmMmU5NzE2ODhlMmU1M2JcIixcbiAgXCIweDJiODliOWRjOGZkZjlmMzQ3MDlhNWIxMDZiNDcyZjBmMzliYjZjYTljZTA0YjBmZDdmMmU5NzE2ODhlMmU1M2JcIixcbiAgXCIweDAzYWU0ZGIyOWVkNGFlMzNkMzIzNTY4ODk1YWEwMDMzN2U2NThlMzQ4YjM3NTA5ZjUzNzJhZTUxZjBhZjAwZDVcIixcbiAgXCIweDlkNDI5NGJiY2QxMTc0ZDZmMjAwM2VjMzY1ODMxZTY0Y2MzMWQ5ZjZmMTVhMmI4NTM5OWRiOGQ1MDAwOTYwZjZcIixcbiAgXCIweDAzYWU0ZGIyOWVkNGFlMzNkMzIzNTY4ODk1YWEwMDMzN2U2NThlMzQ4YjM3NTA5ZjUzNzJhZTUxZjBhZjAwZDVcIixcbiAgXCIweGM5ZDhiMDc1YTVjNjkzMDMzNjVhZTIzNjMzZDRlMDg1MTk5YmY1YzUyMGEzYjkwZmVkMTMyMmEwMzQyZmZjMzNcIixcbiAgXCIweGU2MmRmNmM4YjRhODVmZTFhNjdkYjQ0ZGMxMmRlNWRiMzMwZjdhYzY2YjcyZGM2NThhZmVkZjBmNGE0MTViNDNcIlxuXTtcblxuLy8gc3JjL3Rvb2xzL2FtbmlzL3N0YWtlLXRva2VuLnRzXG5hc3luYyBmdW5jdGlvbiBzdGFrZVRva2VucyhhZ2VudCwgdG8sIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MTExYWUzZTViYzgxNmE1ZTYzYzJkYTk3ZDBhYTM4ODY1MTllMGNkNWU0YjA0NjY1OWZhMzU3OTZiZDExNTQyYTo6cm91dGVyOjpkZXBvc2l0X2FuZF9zdGFrZV9lbnRyeVwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudCwgdG8udG9TdHJpbmcoKV1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVG9rZW4gc3Rha2luZyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBzdGFraW5nIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiBzdGFraW5nIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hbW5pcy93aXRoZHJhdy1zdGFrZS50c1xuYXN5bmMgZnVuY3Rpb24gdW5zdGFrZVRva2VucyhhZ2VudCwgdG8sIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MTExYWUzZTViYzgxNmE1ZTYzYzJkYTk3ZDBhYTM4ODY1MTllMGNkNWU0YjA0NjY1OWZhMzU3OTZiZDExNTQyYTo6cm91dGVyOjp1bnN0YWtlX2VudHJ5XCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50LCB0by50b1N0cmluZygpXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiB1bnN0YWtpbmcgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gdW5zdGFraW5nIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB1bnN0YWtpbmcgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL2JhbGFuY2UudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tT25DaGFpblRvSHVtYW5SZWFkYWJsZSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEJhbGFuY2UoYWdlbnQsIG1pbnQpIHtcbiAgdHJ5IHtcbiAgICBpZiAobWludCkge1xuICAgICAgbGV0IGJhbGFuY2UyO1xuICAgICAgaWYgKG1pbnQuc3BsaXQoXCI6OlwiKS5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgY29uc3QgYmFsYW5jZXMgPSBhd2FpdCBhZ2VudC5hcHRvcy5nZXRDdXJyZW50RnVuZ2libGVBc3NldEJhbGFuY2VzKHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBvd25lcl9hZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgX2VxOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKS50b1N0cmluZ0xvbmcoKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBhc3NldF90eXBlOiB7IF9lcTogbWludCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmFsYW5jZTIgPSBiYWxhbmNlc1swXS5hbW91bnQgPz8gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhbGFuY2UyID0gYXdhaXQgYWdlbnQuYXB0b3MuZ2V0QWNjb3VudENvaW5BbW91bnQoe1xuICAgICAgICAgIGFjY291bnRBZGRyZXNzOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgICAgICBjb2luVHlwZTogbWludFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYWxhbmNlMjtcbiAgICB9XG4gICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IGFnZW50LmFwdG9zLmdldEFjY291bnRBUFRBbW91bnQoe1xuICAgICAgYWNjb3VudEFkZHJlc3M6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpXG4gICAgfSk7XG4gICAgY29uc3QgY29udmVydGVkQmFsYW5jZSA9IGNvbnZlcnRBbW91bnRGcm9tT25DaGFpblRvSHVtYW5SZWFkYWJsZShiYWxhbmNlLCA4KTtcbiAgICByZXR1cm4gY29udmVydGVkQmFsYW5jZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIHRyYW5zZmVyIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy9idXJuLW5mdC50c1xuYXN5bmMgZnVuY3Rpb24gYnVybk5GVChhZ2VudCwgbWludCkge1xuICByZXR1cm4gXCJcIjtcbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL2J1cm4tdG9rZW4udHNcbmFzeW5jIGZ1bmN0aW9uIGJ1cm5Ub2tlbihhZ2VudCwgYW1vdW50LCBtaW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg2N2M4NTY0YWVlMzc5OWU5YWM2Njk1NTNmZGVmM2EzODI4ZDQ2MjZmMjQ3ODZiNmE1NjQyMTUyZmEwOTQ2OWRkOjpsYXVuY2hwYWQ6OmJ1cm5fZmFcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFttaW50LCBhbW91bnRdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIGJ1cm4gZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gYnVybiBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gYnVybiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvdHJhbnNmZXItbmZ0LnRzXG5hc3luYyBmdW5jdGlvbiB0cmFuc2Zlck5GVChhZ2VudCwgdG8sIG1pbnQpIHtcbiAgcmV0dXJuIFwiXCI7XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy90cmFuc2Zlci10b2tlbi50c1xuYXN5bmMgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbnMoYWdlbnQsIHRvLCBhbW91bnQsIG1pbnQpIHtcbiAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MTo6Y29pbjo6dHJhbnNmZXJcIixcbiAgICB0eXBlQXJndW1lbnRzOiBbbWludF0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IFt0by50b1N0cmluZygpLCBhbW91bnRdXG4gIH07XG4gIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgxOjpwcmltYXJ5X2Z1bmdpYmxlX3N0b3JlOjp0cmFuc2ZlclwiLFxuICAgIHR5cGVBcmd1bWVudHM6IFtcIjB4MTo6ZnVuZ2libGVfYXNzZXQ6Ok1ldGFkYXRhXCJdLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbbWludCwgdG8udG9TdHJpbmcoKSwgYW1vdW50XVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBtaW50LnNwbGl0KFwiOjpcIikubGVuZ3RoID09PSAzID8gQ09JTl9TVEFOREFSRF9EQVRBIDogRlVOR0lCTEVfQVNTRVRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiB0cmFuc2ZlciBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiB0cmFuc2ZlciBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gdHJhbnNmZXIgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FwdG9zL21pbnQtdG9rZW4udHNcbmFzeW5jIGZ1bmN0aW9uIG1pbnRUb2tlbihhZ2VudCwgdG8sIG1pbnQsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4NjdjODU2NGFlZTM3OTllOWFjNjY5NTUzZmRlZjNhMzgyOGQ0NjI2ZjI0Nzg2YjZhNTY0MjE1MmZhMDk0NjlkZDo6bGF1bmNocGFkOjptaW50X3RvX2FkZHJlc3NcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFt0by50b1N0cmluZygpLCBtaW50LCBhbW91bnRdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIG1pbnQgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gbWludCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gbWludCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvY3JlYXRlLXRva2VuLnRzXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVUb2tlbihhZ2VudCwgbmFtZSwgc3ltYm9sLCBpY29uVVJJLCBwcm9qZWN0VVJJKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg2N2M4NTY0YWVlMzc5OWU5YWM2Njk1NTNmZGVmM2EzODI4ZDQ2MjZmMjQ3ODZiNmE1NjQyMTUyZmEwOTQ2OWRkOjpsYXVuY2hwYWQ6OmNyZWF0ZV9mYV9zaW1wbGVcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtuYW1lLCBzeW1ib2wsIGljb25VUkksIHByb2plY3RVUkldXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlRva2VuIGNyZWF0aW9uIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIGNyZWF0aW9uIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc2g6IHNpZ25lZFRyYW5zYWN0aW9uLmhhc2gsXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0b2tlbjogc2lnbmVkVHJhbnNhY3Rpb24uZXZlbnRzWzBdLmRhdGEuZmFfb2JqLmlubmVyXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIGNyZWF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9hcHRvcy9nZXQtdHJhbnNhY3Rpb24udHNcbmFzeW5jIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9uKGFnZW50LCBoYXNoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy5nZXRUcmFuc2FjdGlvbkJ5SGFzaCh7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGhhc2hcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB0cmFuc2ZlciBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvZ2V0LXRva2VuLWRldGFpbHMudHNcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuRGV0YWlscyh0b2tlbkFkZHJlc3MpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICBcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9QYW5vcmFFeGNoYW5nZS9BcHRvcy1Ub2tlbnMvcmVmcy9oZWFkcy9tYWluL3Rva2VuLWxpc3QuanNvblwiXG4gICAgKTtcbiAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCByZXMuZGF0YTtcbiAgICBpZiAoIXRva2VuQWRkcmVzcyB8fCB0b2tlbkFkZHJlc3MgPT09IFwiXCIpIHJldHVybiB0b2tlbkRhdGFbMF07XG4gICAgY29uc3QgdG9rZW4gPSB0b2tlbkRhdGEuZmluZChcbiAgICAgICh0b2tlbkFkZHIpID0+ICh0b2tlbkFkZHIudG9rZW5BZGRyZXNzIHx8IHRva2VuQWRkci5mYUFkZHJlc3MpLnRvTG93ZXJDYXNlKCkgPT09IHRva2VuQWRkcmVzcy50b0xvd2VyQ2FzZSgpXG4gICAgKTtcbiAgICBpZiAoIXRva2VuICYmIHRva2VuQWRkcmVzcy5pbmNsdWRlcyhcImZhX3RvX2NvaW5fd3JhcHBlcjo6V3JhcHBlZFVTRFRcIikpIHtcbiAgICAgIHJldHVybiB0b2tlbkRhdGEuZmluZChcbiAgICAgICAgKGUpID0+IGUuZmFBZGRyZXNzID09PSBcIjB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIXRva2VuKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCB0b2tlblwiKTtcbiAgICByZXR1cm4gdG9rZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiB0cmFuc2ZlciBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXB0b3MvZ2V0LXRva2VuLXByaWNlLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlblByaWNlKHF1ZXJ5KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXNzZXREYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9oZXJtZXMucHl0aC5uZXR3b3JrL3YyL3ByaWNlX2ZlZWRzP3F1ZXJ5PSR7cXVlcnl9JmFzc2V0X3R5cGU9Y3J5cHRvYCk7XG4gICAgY29uc3QgYXNzZXREYXRhID0gYXdhaXQgYXNzZXREYXRhUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IGZvcm1hdHRlZERhdGEgPSBhc3NldERhdGEubWFwKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuYXR0cmlidXRlcy5kaXNwbGF5X3N5bWJvbCxcbiAgICAgICAgc3ltYm9sOiBkYXRhLmF0dHJpYnV0ZXMuc3ltYm9sXG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGFzc2V0SWRBcnJheSA9IGZvcm1hdHRlZERhdGEubWFwKChkYXRhKSA9PiBkYXRhLmlkKTtcbiAgICBpZiAoYXNzZXRJZEFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXNzZXRzIGZvdW5kIGZvciB0aGUgZ2l2ZW4gcXVlcnlcIik7XG4gICAgfVxuICAgIGNvbnN0IGFzc2V0UHJpY2VEYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2hlcm1lcy5weXRoLm5ldHdvcmsvdjIvdXBkYXRlcy9wcmljZS9sYXRlc3Q/aWRzW109JHthc3NldElkQXJyYXkuam9pbihcIiZpZHNbXT1cIil9YFxuICAgICk7XG4gICAgY29uc3QgYXNzZXRQcmljZURhdGEgPSBhd2FpdCBhc3NldFByaWNlRGF0YVJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCBwcmljZUZlZWQyID0gZm9ybWF0dGVkRGF0YS5tYXAoKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHByaWNlRGF0YSA9IGFzc2V0UHJpY2VEYXRhLnBhcnNlZC5maW5kKChwcmljZSkgPT4gcHJpY2UuaWQgPT09IGRhdGEuaWQpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgcHJpY2U6IChOdW1iZXIocHJpY2VEYXRhLnByaWNlLnByaWNlKSAvIDEwICoqIE1hdGguYWJzKHByaWNlRGF0YS5wcmljZS5leHBvKSkudG9Mb2NhbGVTdHJpbmcoKSB8fCBOdW1iZXIocHJpY2VEYXRhLnByaWNlLnByaWNlKS50b0xvY2FsZVN0cmluZygpXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBwcmljZUZlZWQyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gdHJhbnNmZXIgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2pvdWxlL2xlbmQudHNcbmFzeW5jIGZ1bmN0aW9uIGxlbmRUb2tlbihhZ2VudCwgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBuZXdQb3NpdGlvbiwgZnVuZ2libGVBc3NldCkge1xuICBjb25zdCBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHUyA9IFtwb3NpdGlvbklkLCBhbW91bnQsIG5ld1Bvc2l0aW9uXTtcbiAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6bGVuZFwiLFxuICAgIHR5cGVBcmd1bWVudHM6IFttaW50LnRvU3RyaW5nKCldLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHU1xuICB9O1xuICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6bGVuZF9mYVwiLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbcG9zaXRpb25JZCwgbWludC50b1N0cmluZygpLCBuZXdQb3NpdGlvbiwgYW1vdW50XVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBmdW5naWJsZUFzc2V0ID8gRlVOR0lCTEVfQVNTRVRfREFUQSA6IENPSU5fU1RBTkRBUkRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiBtaW50IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG1pbnQgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaGFzaDogc2lnbmVkVHJhbnNhY3Rpb24uaGFzaCxcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHBvc2l0aW9uSWQ6IHNpZ25lZFRyYW5zYWN0aW9uLmV2ZW50c1swXS5kYXRhLnBvc2l0aW9uX2lkXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIG1pbnQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2pvdWxlL2JvcnJvdy50c1xuYXN5bmMgZnVuY3Rpb24gYm9ycm93VG9rZW4oYWdlbnQsIGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCkge1xuICBjb25zdCBweXRoX3VwZGF0ZV9kYXRhID0gYXdhaXQgYWdlbnQuZ2V0UHl0aERhdGEoKTtcbiAgY29uc3QgREVGQVVMVF9GVU5DVElPTkFMX0FSR1MgPSBbcG9zaXRpb25JZCwgYW1vdW50LCBweXRoX3VwZGF0ZV9kYXRhXTtcbiAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6Ym9ycm93XCIsXG4gICAgdHlwZUFyZ3VtZW50czogW21pbnQudG9TdHJpbmcoKV0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IERFRkFVTFRfRlVOQ1RJT05BTF9BUkdTXG4gIH07XG4gIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpib3Jyb3dfZmFcIixcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogW3Bvc2l0aW9uSWQsIG1pbnQudG9TdHJpbmcoKSwgYW1vdW50LCBweXRoX3VwZGF0ZV9kYXRhXVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBmdW5naWJsZUFzc2V0ID8gRlVOR0lCTEVfQVNTRVRfREFUQSA6IENPSU5fU1RBTkRBUkRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiBib3Jyb3cgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gYm9ycm93IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc2g6IHNpZ25lZFRyYW5zYWN0aW9uLmhhc2gsXG4gICAgICBwb3NpdGlvbklkXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRva2VuIGJvcnJvdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvcmVwYXkudHNcbmFzeW5jIGZ1bmN0aW9uIHJlcGF5VG9rZW4oYWdlbnQsIGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCkge1xuICBjb25zdCBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHUyA9IFtwb3NpdGlvbklkLCBhbW91bnRdO1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHgyZmU1NzZmYWE4NDEzNDdhOWIxYjMyYzg2OTY4NWRlYjc1YTE1ZTNmNjJkZmUzN2NiZDZkNTJjYzQwM2ExNmY2Ojpwb29sOjpyZXBheVwiLFxuICAgIHR5cGVBcmd1bWVudHM6IFttaW50LnRvU3RyaW5nKCldLFxuICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBERUZBVUxUX0ZVTkNUSU9OQUxfQVJHU1xuICB9O1xuICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6cmVwYXlfZmFcIixcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogW3Bvc2l0aW9uSWQsIG1pbnQudG9TdHJpbmcoKSwgYW1vdW50XVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiBmdW5naWJsZUFzc2V0ID8gRlVOR0lCTEVfQVNTRVRfREFUQSA6IENPSU5fU1RBTkRBUkRfREFUQVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJUb2tlbiByZXBheSBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiByZXBheSBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBoYXNoOiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoLFxuICAgICAgcG9zaXRpb25JZFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiByZXBheSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvd2l0aGRyYXcudHNcbmFzeW5jIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWdlbnQsIGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCkge1xuICBjb25zdCBweXRoX3VwZGF0ZV9kYXRhID0gYXdhaXQgYWdlbnQuZ2V0UHl0aERhdGEoKTtcbiAgY29uc3QgREVGQVVMVF9GVU5DVElPTkFMX0FSR1MgPSBbcG9zaXRpb25JZCwgYW1vdW50LCBweXRoX3VwZGF0ZV9kYXRhXTtcbiAgY29uc3QgQ09JTl9TVEFOREFSRF9EQVRBID0ge1xuICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6d2l0aGRyYXdcIixcbiAgICB0eXBlQXJndW1lbnRzOiBbbWludC50b1N0cmluZygpXSxcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogREVGQVVMVF9GVU5DVElPTkFMX0FSR1NcbiAgfTtcbiAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICBmdW5jdGlvbjogXCIweDJmZTU3NmZhYTg0MTM0N2E5YjFiMzJjODY5Njg1ZGViNzVhMTVlM2Y2MmRmZTM3Y2JkNmQ1MmNjNDAzYTE2ZjY6OnBvb2w6OndpdGhkcmF3X2ZhXCIsXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtwb3NpdGlvbklkLCBtaW50LnRvU3RyaW5nKCksIGFtb3VudCwgcHl0aF91cGRhdGVfZGF0YV1cbiAgfTtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YTogZnVuZ2libGVBc3NldCA/IEZVTkdJQkxFX0FTU0VUX0RBVEEgOiBDT0lOX1NUQU5EQVJEX0RBVEFcbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVG9rZW4gd2l0aGRyYXcgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gd2l0aGRyYXcgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaGFzaDogc2lnbmVkVHJhbnNhY3Rpb24uaGFzaCxcbiAgICAgIHBvc2l0aW9uSWRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gd2l0aGRyYXcgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2pvdWxlL3Bvb2wtZGV0YWlsLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRQb29sRGV0YWlscyhhZ2VudCwgbWludCkge1xuICB0cnkge1xuICAgIGNvbnN0IGFsbFBvb2xEZXRhaWxzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vcHJpY2UtYXBpLmpvdWxlLmZpbmFuY2UvYXBpL21hcmtldFwiKTtcbiAgICBjb25zdCBhbGxQb29sRGV0YWlscyA9IGF3YWl0IGFsbFBvb2xEZXRhaWxzUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IHBvb2xEZXRhaWwgPSBhbGxQb29sRGV0YWlscy5kYXRhLmZpbmQoKHBvb2wpID0+IHBvb2wuYXNzZXQudHlwZS5pbmNsdWRlcyhtaW50KSk7XG4gICAgaWYgKCFwb29sRGV0YWlsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQb29sIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzc2V0TmFtZTogcG9vbERldGFpbC5hc3NldC5hc3NldE5hbWUsXG4gICAgICB0b2tlbkFkZHJlc3M6IG1pbnQsXG4gICAgICBsdHY6IHBvb2xEZXRhaWwubHR2LFxuICAgICAgZGVjaW1hbHM6IHBvb2xEZXRhaWwuYXNzZXQuZGVjaW1hbHMsXG4gICAgICBtYXJrZXRTaXplOiBOdW1iZXIocG9vbERldGFpbC5tYXJrZXRTaXplKSAvIHBvb2xEZXRhaWwuYXNzZXQuZGVjaW1hbHMsXG4gICAgICB0b3RhbEJvcnJvd2VkOiBOdW1iZXIocG9vbERldGFpbC50b3RhbEJvcnJvd2VkKSAvIHBvb2xEZXRhaWwuYXNzZXQuZGVjaW1hbHMsXG4gICAgICBkZXBvc2l0QXB5OiBwb29sRGV0YWlsLmRlcG9zaXRBcHksXG4gICAgICBleHRyYURlcG9zaXRBcHk6IHBvb2xEZXRhaWwuZXh0cmFBUFkuZGVwb3NpdEFQWSxcbiAgICAgIGJvcnJvd0FweTogcG9vbERldGFpbC5ib3Jyb3dBcHksXG4gICAgICBwcmljZTogcG9vbERldGFpbC5wcmljZUluZm8ucHJpY2VcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBwb29sIGRldGFpbHM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvam91bGUvdXNlci1wb3NpdGlvbi50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclBvc2l0aW9uKGFnZW50LCB1c2VyQWRkcmVzcywgcG9zaXRpb25JZCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mudmlldyh7XG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4MmZlNTc2ZmFhODQxMzQ3YTliMWIzMmM4Njk2ODVkZWI3NWExNWUzZjYyZGZlMzdjYmQ2ZDUyY2M0MDNhMTZmNjo6cG9vbDo6dXNlcl9wb3NpdGlvbl9kZXRhaWxzXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbdXNlckFkZHJlc3MudG9TdHJpbmcoKSwgcG9zaXRpb25JZF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXRyYW5zYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBwb3NpdGlvblwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCB1c2VyIHBvc2l0aW9uOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3V0aWxzL2NsZWFuLWpvdWxlLWFsbC1wb3NpdGlvbnMtbGlzdC50c1xudmFyIHJlbW92ZUxhc3RJbnRlcmVzdFJhdGVJbmRleCA9IChvYmopID0+IHtcbiAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKChpdGVtKSA9PiByZW1vdmVMYXN0SW50ZXJlc3RSYXRlSW5kZXgoaXRlbSkpO1xuICB9XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAoa2V5ID09PSBcImxhc3RfaW50ZXJlc3RfcmF0ZV9pbmRleFwiKSB7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH1cbiAgICBhY2Nba2V5XSA9IHJlbW92ZUxhc3RJbnRlcmVzdFJhdGVJbmRleCh2YWx1ZSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufTtcblxuLy8gc3JjL3Rvb2xzL2pvdWxlL3VzZXItYWxsLXBvc2l0aW9ucy50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckFsbFBvc2l0aW9ucyhhZ2VudCwgdXNlckFkZHJlc3MpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnZpZXcoe1xuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBmdW5jdGlvbjogXCIweDJmZTU3NmZhYTg0MTM0N2E5YjFiMzJjODY5Njg1ZGViNzVhMTVlM2Y2MmRmZTM3Y2JkNmQ1MmNjNDAzYTE2ZjY6OnBvb2w6OnVzZXJfcG9zaXRpb25zX21hcFwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW3VzZXJBZGRyZXNzLnRvU3RyaW5nKCldXG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCF0cmFuc2FjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgYWxsIHBvc2l0aW9uc1wiKTtcbiAgICB9XG4gICAgY29uc3QgY2xlYW5lZFRyYW5zYWN0aW9uID0gcmVtb3ZlTGFzdEludGVyZXN0UmF0ZUluZGV4KHRyYW5zYWN0aW9uKTtcbiAgICByZXR1cm4gY2xlYW5lZFRyYW5zYWN0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCB1c2VyIGFsbCBwb3NpdGlvbnM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXJpZXMvY3JlYXRlLXByb2ZpbGUudHNcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFyaWVzUHJvZmlsZShhZ2VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6Y29udHJvbGxlcjo6cmVnaXN0ZXJfdXNlclwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1wiTWFpbiBhY2NvdW50XCJdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkNyZWF0ZSBwcm9maWxlIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNyZWF0ZSBwcm9maWxlIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDcmVhdGUgcHJvZmlsZSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXJpZXMvbGVuZC50c1xuYXN5bmMgZnVuY3Rpb24gbGVuZEFyaWVzVG9rZW4oYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDk3NzBmYTljNzI1Y2JkOTdlYjUwYjJiZTVmNzQxNmVmZGZkMWYxNTU0YmViMDc1MGQ0ZGFlNGM2NGU4NjBkYTM6OmNvbnRyb2xsZXI6OmRlcG9zaXRcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtcIk1haW4gYWNjb3VudFwiLCBhbW91bnQsIGZhbHNlXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJMZW5kIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkxlbmQgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYExlbmQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FyaWVzL2JvcnJvdy50c1xuYXN5bmMgZnVuY3Rpb24gYm9ycm93QXJpZXNUb2tlbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6Y29udHJvbGxlcjo6d2l0aGRyYXdcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtcIk1haW4gYWNjb3VudFwiLCBhbW91bnQsIHRydWVdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkJvcnJvdyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3Jyb3cgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEJvcnJvdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvYXJpZXMvd2l0aGRyYXcudHNcbmFzeW5jIGZ1bmN0aW9uIHdpdGhkcmF3QXJpZXNUb2tlbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OTc3MGZhOWM3MjVjYmQ5N2ViNTBiMmJlNWY3NDE2ZWZkZmQxZjE1NTRiZWIwNzUwZDRkYWU0YzY0ZTg2MGRhMzo6Y29udHJvbGxlcjo6d2l0aGRyYXdcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtcIk1haW4gYWNjb3VudFwiLCBhbW91bnQsIGZhbHNlXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJXaXRoZHJhdyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXaXRoZHJhdyBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgV2l0aGRyYXcgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2FyaWVzL3JlcGF5LnRzXG5hc3luYyBmdW5jdGlvbiByZXBheUFyaWVzVG9rZW4oYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDk3NzBmYTljNzI1Y2JkOTdlYjUwYjJiZTVmNzQxNmVmZGZkMWYxNTU0YmViMDc1MGQ0ZGFlNGM2NGU4NjBkYTM6OmNvbnRyb2xsZXI6OmRlcG9zaXRcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFtcIk1haW4gYWNjb3VudFwiLCBhbW91bnQsIHRydWVdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlJlcGF5IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlcGF5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZXBheSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvZWNoZWxvbi9sZW5kLnRzXG5hc3luYyBmdW5jdGlvbiBsZW5kVG9rZW5XaXRoRWNoZWxvbihhZ2VudCwgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBGVU5DVElPTkFMX0FSR1NfREFUQSA9IFtwb29sQWRkcmVzcywgYW1vdW50XTtcbiAgICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgICBmdW5jdGlvbjogXCIweGM2YmM2NTlmMTY0OTU1M2MxYTNmYTA1ZDk3Mjc0MzNkYzAzODQzYmFhYzI5NDczYzgxN2QwNmQzOWU3NjIxYmE6OnNjcmlwdHM6OnN1cHBseVwiLFxuICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlLnRvU3RyaW5nKCldLFxuICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gICAgfTtcbiAgICBjb25zdCBGVU5HSUJMRV9BU1NFVF9EQVRBID0ge1xuICAgICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjpzdXBwbHlfZmFcIixcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICAgIH07XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkxlbmQgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGVuZCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTGVuZCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvZWNoZWxvbi93aXRoZHJhdy50c1xuYXN5bmMgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbldpdGhFY2hlbG9uKGFnZW50LCBtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCkge1xuICB0cnkge1xuICAgIGNvbnN0IEZVTkNUSU9OQUxfQVJHU19EQVRBID0gW3Bvb2xBZGRyZXNzLCBhbW91bnRdO1xuICAgIGNvbnN0IENPSU5fU1RBTkRBUkRfREFUQSA9IHtcbiAgICAgIGZ1bmN0aW9uOiBcIjB4YzZiYzY1OWYxNjQ5NTUzYzFhM2ZhMDVkOTcyNzQzM2RjMDM4NDNiYWFjMjk0NzNjODE3ZDA2ZDM5ZTc2MjFiYTo6c2NyaXB0czo6d2l0aGRyYXdcIixcbiAgICAgIHR5cGVBcmd1bWVudHM6IFttaW50VHlwZS50b1N0cmluZygpXSxcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICAgIH07XG4gICAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICAgIGZ1bmN0aW9uOiBcIjB4YzZiYzY1OWYxNjQ5NTUzYzFhM2ZhMDVkOTcyNzQzM2RjMDM4NDNiYWFjMjk0NzNjODE3ZDA2ZDM5ZTc2MjFiYTo6c2NyaXB0czo6d2l0aGRyYXdfZmFcIixcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICAgIH07XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIldpdGhkcmF3IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldpdGhkcmF3IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBXaXRoZHJhdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvZWNoZWxvbi9yZXBheS50c1xuYXN5bmMgZnVuY3Rpb24gcmVwYXlUb2tlbldpdGhFY2hlbG9uKGFnZW50LCBtaW50VHlwZSwgYW1vdW50LCBwb29sQWRkcmVzcywgZnVuZ2libGVBc3NldCkge1xuICB0cnkge1xuICAgIGNvbnN0IEZVTkNUSU9OQUxfQVJHU19EQVRBID0gW3Bvb2xBZGRyZXNzLCBhbW91bnRdO1xuICAgIGNvbnN0IENPSU5fU1RBTkRBUkRfREFUQSA9IHtcbiAgICAgIGZ1bmN0aW9uOiBcIjB4YzZiYzY1OWYxNjQ5NTUzYzFhM2ZhMDVkOTcyNzQzM2RjMDM4NDNiYWFjMjk0NzNjODE3ZDA2ZDM5ZTc2MjFiYTo6c2NyaXB0czo6cmVwYXlcIixcbiAgICAgIHR5cGVBcmd1bWVudHM6IFttaW50VHlwZS50b1N0cmluZygpXSxcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICAgIH07XG4gICAgY29uc3QgRlVOR0lCTEVfQVNTRVRfREFUQSA9IHtcbiAgICAgIGZ1bmN0aW9uOiBcIjB4YzZiYzY1OWYxNjQ5NTUzYzFhM2ZhMDVkOTcyNzQzM2RjMDM4NDNiYWFjMjk0NzNjODE3ZDA2ZDM5ZTc2MjFiYTo6c2NyaXB0czo6cmVwYXlfZmFcIixcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBGVU5DVElPTkFMX0FSR1NfREFUQVxuICAgIH07XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IGZ1bmdpYmxlQXNzZXQgPyBGVU5HSUJMRV9BU1NFVF9EQVRBIDogQ09JTl9TVEFOREFSRF9EQVRBXG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlJlcGF5IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlcGF5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZXBheSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvZWNoZWxvbi9ib3Jyb3cudHNcbmFzeW5jIGZ1bmN0aW9uIGJvcnJvd1Rva2VuV2l0aEVjaGVsb24oYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KSB7XG4gIGNvbnN0IEZVTkNUSU9OQUxfQVJHU19EQVRBID0gW3Bvb2xBZGRyZXNzLCBhbW91bnRdO1xuICBjb25zdCBDT0lOX1NUQU5EQVJEX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjpib3Jyb3dcIixcbiAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGUudG9TdHJpbmcoKV0sXG4gICAgZnVuY3Rpb25Bcmd1bWVudHM6IEZVTkNUSU9OQUxfQVJHU19EQVRBXG4gIH07XG4gIGNvbnN0IEZVTkdJQkxFX0FTU0VUX0RBVEEgPSB7XG4gICAgZnVuY3Rpb246IFwiMHhjNmJjNjU5ZjE2NDk1NTNjMWEzZmEwNWQ5NzI3NDMzZGMwMzg0M2JhYWMyOTQ3M2M4MTdkMDZkMzllNzYyMWJhOjpzY3JpcHRzOjpib3Jyb3dfZmFcIixcbiAgICBmdW5jdGlvbkFyZ3VtZW50czogRlVOQ1RJT05BTF9BUkdTX0RBVEFcbiAgfTtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YTogZnVuZ2libGVBc3NldCA/IEZVTkdJQkxFX0FTU0VUX0RBVEEgOiBDT0lOX1NUQU5EQVJEX0RBVEFcbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiQm9ycm93IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvcnJvdyBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQm9ycm93IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hvL3N0YWtlLnRzXG5hc3luYyBmdW5jdGlvbiBzdGFrZVRva2VuV2l0aEVjaG8oYWdlbnQsIGFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4YTAyODE2NjBmZjZjYTZjMWI2OGI1NWZjYjliMjEzYzIyNzZmOTBhZDAwN2FkMjdmZDAwM2NmMmYzNDc4ZTk2ZTo6bHNkbWFuYWdlOjpzdGFrZVwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiU3Rha2UgdG9rZW4gaW4gRWNobyBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9lY2hvL3Vuc3Rha2UudHNcbmFzeW5jIGZ1bmN0aW9uIHVuc3Rha2VUb2tlbldpdGhFY2hvKGFnZW50LCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweGEwMjgxNjYwZmY2Y2E2YzFiNjhiNTVmY2I5YjIxM2MyMjc2ZjkwYWQwMDdhZDI3ZmQwMDNjZjJmMzQ3OGU5NmU6OmxzZG1hbmFnZTo6dW5zdGFrZVwiLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiVW5zdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3Rha2UgdG9rZW4gaW4gRWNobyBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5zdGFrZSB0b2tlbiBpbiBFY2hvIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9saXF1aWRzd2FwL3N3YXAudHNcbmFzeW5jIGZ1bmN0aW9uIHN3YXAoYWdlbnQsIG1pbnRYLCBtaW50WSwgc3dhcEFtb3VudCwgbWluQ29pbk91dCA9IDApIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDE5MGQ0NDI2NjI0MTc0NDI2NGI5NjRhMzdiOGYwOTg2MzE2N2ExMmQzZTcwY2RhMzkzNzZjZmI0ZTM1NjFlMTI6OnNjcmlwdHNfdjI6OnN3YXBcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW1xuICAgICAgICAgIG1pbnRYLFxuICAgICAgICAgIG1pbnRZLFxuICAgICAgICAgIFwiMHgxOTBkNDQyNjYyNDE3NDQyNjRiOTY0YTM3YjhmMDk4NjMxNjdhMTJkM2U3MGNkYTM5Mzc2Y2ZiNGUzNTYxZTEyOjpjdXJ2ZXM6OlVuY29ycmVsYXRlZFwiXG4gICAgICAgIF0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbc3dhcEFtb3VudCwgbWluQ29pbk91dF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiU3dhcCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTd2FwIGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTd2FwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9saXF1aWRzd2FwL2NyZWF0ZS1wb29sLnRzXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVQb29sKGFnZW50LCBtaW50WCwgbWludFkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDE5MGQ0NDI2NjI0MTc0NDI2NGI5NjRhMzdiOGYwOTg2MzE2N2ExMmQzZTcwY2RhMzkzNzZjZmI0ZTM1NjFlMTI6OnNjcmlwdHNfdjI6OnJlZ2lzdGVyX3Bvb2xcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW1xuICAgICAgICAgIG1pbnRYLFxuICAgICAgICAgIG1pbnRZLFxuICAgICAgICAgIFwiMHgxOTBkNDQyNjYyNDE3NDQyNjRiOTY0YTM3YjhmMDk4NjMxNjdhMTJkM2U3MGNkYTM5Mzc2Y2ZiNGUzNTYxZTEyOjpjdXJ2ZXM6OlVuY29ycmVsYXRlZFwiXG4gICAgICAgIF0sXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJDcmVhdGUgcG9vbCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDcmVhdGUgcG9vbCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ3JlYXRlIHBvb2wgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2xpcXVpZHN3YXAvYWRkLWxpcXVpZGl0eS50c1xuYXN5bmMgZnVuY3Rpb24gYWRkTGlxdWlkaXR5KGFnZW50LCBtaW50WCwgbWludFksIG1pbnRYQW1vdW50LCBtaW50WUFtb3VudCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OWRkOTc0YWVhMGY5MjdlYWQ2NjRiOWUxYzI5NWU0MjE1YmQ0NDFhOWZiNGU1M2U1ZWEwYmYyMmYzNTZjOGEyYjo6cm91dGVyOjphZGRfbGlxdWlkaXR5X3YwNVwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFgsXG4gICAgICAgICAgbWludFksXG4gICAgICAgICAgXCIweDE2M2RmMzRmY2NiZjAwM2NlMjE5ZDNmMWQ5ZTcwZDE0MGI2MDYyMmNiOWRkNDc1OTljMjVmYjJmNzk3YmE2ZTo6Y3VydmVzOjpVbmNvcnJlbGF0ZWRcIlxuICAgICAgICBdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW1xuICAgICAgICAgIG1pbnRYQW1vdW50LFxuICAgICAgICAgIDAsXG4gICAgICAgICAgLy9jb2luX3hfbWluLFxuICAgICAgICAgIG1pbnRZQW1vdW50LFxuICAgICAgICAgIDBcbiAgICAgICAgICAvLyBjb2luX3lfbWluXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiQWRkIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZGQgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvciwgXCJBZGQgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFkZCBsaXF1aWRpdHkgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL2xpcXVpZHN3YXAvcmVtb3ZlLWxpcXVpZGl0eS50c1xuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlTGlxdWlkaXR5KGFnZW50LCBtaW50WCwgbWludFksIGxwQW1vdW50LCBtaW5NaW50WCA9IDAsIG1pbk1pbnRZID0gMCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiBcIjB4OWRkOTc0YWVhMGY5MjdlYWQ2NjRiOWUxYzI5NWU0MjE1YmQ0NDFhOWZiNGU1M2U1ZWEwYmYyMmYzNTZjOGEyYjo6cm91dGVyOjpyZW1vdmVfbGlxdWlkaXR5X3YwNVwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFgsXG4gICAgICAgICAgbWludFksXG4gICAgICAgICAgXCIweDE2M2RmMzRmY2NiZjAwM2NlMjE5ZDNmMWQ5ZTcwZDE0MGI2MDYyMmNiOWRkNDc1OTljMjVmYjJmNzk3YmE2ZTo6Y3VydmVzOjpVbmNvcnJlbGF0ZWRcIlxuICAgICAgICBdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2xwQW1vdW50LCBtaW5NaW50WCwgbWluTWludFldXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlJlbW92ZSBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVtb3ZlIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVtb3ZlIGxpcXVpZGl0eSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvcGFub3JhL3N3YXAudHNcbmltcG9ydCBheGlvczIgZnJvbSBcImF4aW9zXCI7XG5hc3luYyBmdW5jdGlvbiBzd2FwV2l0aFBhbm9yYShhZ2VudCwgZnJvbVRva2VuLCB0b1Rva2VuLCBzd2FwQW1vdW50LCB0b1dhbGxldEFkZHJlc3MpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYW5vcmFQYXJhbWV0ZXJzID0ge1xuICAgICAgZnJvbVRva2VuQWRkcmVzczogZnJvbVRva2VuLFxuICAgICAgdG9Ub2tlbkFkZHJlc3M6IHRvVG9rZW4sXG4gICAgICBmcm9tVG9rZW5BbW91bnQ6IHN3YXBBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgIHRvV2FsbGV0QWRkcmVzczogdG9XYWxsZXRBZGRyZXNzID8gdG9XYWxsZXRBZGRyZXNzIDogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCkudG9TdHJpbmcoKVxuICAgIH07XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLnBhbm9yYS5leGNoYW5nZS9zd2FwPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhwYW5vcmFQYXJhbWV0ZXJzKS50b1N0cmluZygpfWA7XG4gICAgY29uc3QgcGFub3JhQXBpS2V5ID0gYWdlbnQuY29uZmlnLlBBTk9SQV9BUElfS0VZO1xuICAgIGlmICghcGFub3JhQXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBQQU5PUkFfQVBJX0tFWSBpbiBjb25maWdcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zMi5wb3N0KFxuICAgICAgdXJsLFxuICAgICAge30sXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtYXBpLWtleVwiOiBwYW5vcmFBcGlLZXlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXMuZGF0YTtcbiAgICBpZiAocmVzcG9uc2UucXVvdGVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBxdW90ZXMgYXZhaWxhYmxlIGZyb20gcGFub3JhXCIpO1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSByZXNwb25zZS5xdW90ZXNbMF0udHhEYXRhO1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3MudHJhbnNhY3Rpb24uYnVpbGQuc2ltcGxlKHtcbiAgICAgIHNlbmRlcjogYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bmN0aW9uOiB0cmFuc2FjdGlvbkRhdGEuZnVuY3Rpb24sXG4gICAgICAgIHR5cGVBcmd1bWVudHM6IHRyYW5zYWN0aW9uRGF0YS50eXBlX2FyZ3VtZW50cyxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IHRyYW5zYWN0aW9uRGF0YS5hcmd1bWVudHNcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiU3dhcCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTd2FwIHR4IGZhaWxlZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTd2FwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy9vcGVuYWkvY3JlYXRlLWltYWdlLnRzXG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUltYWdlKGFnZW50LCBwcm9tcHQsIHNpemUgPSBcIjEwMjR4MTAyNFwiLCBuID0gMSkge1xuICB0cnkge1xuICAgIGNvbnN0IGFwaUtleSA9IGFnZW50LmNvbmZpZy5PUEVOQUlfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gT1BFTkFJX0FQSV9LRVkgaW4gY29uZmlnXCIpO1xuICAgIH1cbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHsgYXBpS2V5IH0pO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmltYWdlcy5nZW5lcmF0ZSh7XG4gICAgICBwcm9tcHQsXG4gICAgICBuLFxuICAgICAgc2l6ZVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBpbWFnZXM6IHJlc3BvbnNlLmRhdGEubWFwKChpbWcpID0+IGltZy51cmwpXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEltYWdlIGdlbmVyYXRpb24gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL3RoYWxhL3N0YWtlLnRzXG5hc3luYyBmdW5jdGlvbiBzdGFrZVRva2VuV2l0aFRoYWxhKGFnZW50LCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweGZhZjRlNjMzYWU5ZWIzMTM2NmM5Y2EyNDIxNDIzMTc2MDkyNjU3NmM3YjYyNTMxM2IzNjg4YjVlOTAwNzMxZjY6OnNjcmlwdHM6OnN0YWtlX0FQVF9hbmRfdGhBUFRcIixcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFthbW91bnRdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlN0YWtlIEFQVCBmYWlsZWRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGFrZSBBUFQgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFN0YWtlIEFQVCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvdGhhbGEvdW5zdGFrZS50c1xuYXN5bmMgZnVuY3Rpb24gdW5zdGFrZUFQVFdpdGhUaGFsYShhZ2VudCwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHhmYWY0ZTYzM2FlOWViMzEzNjZjOWNhMjQyMTQyMzE3NjA5MjY1NzZjN2I2MjUzMTNiMzY4OGI1ZTkwMDczMWY2OjpzY3JpcHRzOjp1bnN0YWtlX3RoQVBUXCIsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBbYW1vdW50XVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJVbnN0YWtlIHRva2VuIGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3Rha2UgdG9rZW4gZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3Rha2UgdG9rZW4gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3Rvb2xzL3RoYWxhL21pbnQtbW9kLnRzXG5hc3luYyBmdW5jdGlvbiBtaW50TU9EV2l0aFRoYWxhKGFnZW50LCBtaW50VHlwZSwgYW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg2Zjk4NmQxNDZlNGE5MGI4MjhkOGMxMmMxNGI2ZjRlMDAzZmRmZjExYThlZWNjZWNlYjYzNzQ0MzYzZWFhYzAxOjpwc21fc2NyaXB0czo6bWludFwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbbWludFR5cGVdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2Ftb3VudF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCBhZ2VudC5hY2NvdW50LnNlbmRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy53YWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgICAgdHJhbnNhY3Rpb25IYXNoOiBjb21taXR0ZWRUcmFuc2FjdGlvbkhhc2hcbiAgICB9KTtcbiAgICBpZiAoIXNpZ25lZFRyYW5zYWN0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3Ioc2lnbmVkVHJhbnNhY3Rpb24sIFwiTWludCBNT0QgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWludCBNT0QgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pbnQgTU9EIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIHNyYy90b29scy90aGFsYS9yZWRlZW0tbW9kLnRzXG5hc3luYyBmdW5jdGlvbiByZWRlZW1NT0RXaXRoVGhhbGEoYWdlbnQsIG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDZmOTg2ZDE0NmU0YTkwYjgyOGQ4YzEyYzE0YjZmNGUwMDNmZGZmMTFhOGVlY2NlY2ViNjM3NDQzNjNlYWFjMDE6OnBzbV9zY3JpcHRzOjpyZWRlZW1cIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW21pbnRUeXBlXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFthbW91bnRdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIlJlZGVlbSBNT0QgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVkZWVtIE1PRCBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVkZWVtIE1PRCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvdGhhbGEvYWRkLWxpcXVpZGl0eS50c1xuYXN5bmMgZnVuY3Rpb24gYWRkTGlxdWlkaXR5V2l0aFRoYWxhKGFnZW50LCBtaW50VHlwZVgsIG1pbnRUeXBlWSwgbWludFhBbW91bnQsIG1pbnRZQW1vdW50KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhZ2VudC5hcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgc2VuZGVyOiBhZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZnVuY3Rpb246IFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjp3ZWlnaHRlZF9wb29sX3NjcmlwdHM6OmFkZF9saXF1aWRpdHlcIixcbiAgICAgICAgdHlwZUFyZ3VtZW50czogW1xuICAgICAgICAgIG1pbnRUeXBlWCxcbiAgICAgICAgICBtaW50VHlwZVksXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjpiYXNlX3Bvb2w6Ok51bGxcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6d2VpZ2h0ZWRfcG9vbDo6V2VpZ2h0XzUwXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OndlaWdodGVkX3Bvb2w6OldlaWdodF81MFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjpiYXNlX3Bvb2w6Ok51bGxcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6YmFzZV9wb29sOjpOdWxsXCJcbiAgICAgICAgXSxcbiAgICAgICAgZnVuY3Rpb25Bcmd1bWVudHM6IFttaW50WEFtb3VudCwgbWludFlBbW91bnQsIDAsIDAsIDAsIDAsIDAsIDBdXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgYWdlbnQuYWNjb3VudC5zZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYXdhaXQgYWdlbnQuYXB0b3Mud2FpdEZvclRyYW5zYWN0aW9uKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogY29tbWl0dGVkVHJhbnNhY3Rpb25IYXNoXG4gICAgfSk7XG4gICAgaWYgKCFzaWduZWRUcmFuc2FjdGlvbi5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKHNpZ25lZFRyYW5zYWN0aW9uLCBcIkFkZCBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRkIGxpcXVpZGl0eSBmYWlsZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbi5oYXNoO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQWRkIGxpcXVpZGl0eSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvdG9vbHMvdGhhbGEvcmVtb3ZlLWxpcXVpZGl0eS50c1xuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlTGlxdWlkaXR5V2l0aFRoYWxhKGFnZW50LCBtaW50VHlwZVgsIG1pbnRUeXBlWSwgbHBBbW91bnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLnRyYW5zYWN0aW9uLmJ1aWxkLnNpbXBsZSh7XG4gICAgICBzZW5kZXI6IGFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBmdW5jdGlvbjogXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OndlaWdodGVkX3Bvb2xfc2NyaXB0czo6cmVtb3ZlX2xpcXVpZGl0eVwiLFxuICAgICAgICB0eXBlQXJndW1lbnRzOiBbXG4gICAgICAgICAgbWludFR5cGVYLFxuICAgICAgICAgIG1pbnRUeXBlWSxcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6YmFzZV9wb29sOjpOdWxsXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjp3ZWlnaHRlZF9wb29sOjpXZWlnaHRfNTBcIixcbiAgICAgICAgICBcIjB4NDgyNzFkMzlkMGIwNWJkNmVmY2EyMjc4ZjIyMjc3ZDZmY2MzNzU1MDRmOTgzOWZkNzNmNzRhY2UyNDA4NjFhZjo6d2VpZ2h0ZWRfcG9vbDo6V2VpZ2h0XzUwXCIsXG4gICAgICAgICAgXCIweDQ4MjcxZDM5ZDBiMDViZDZlZmNhMjI3OGYyMjI3N2Q2ZmNjMzc1NTA0Zjk4MzlmZDczZjc0YWNlMjQwODYxYWY6OmJhc2VfcG9vbDo6TnVsbFwiLFxuICAgICAgICAgIFwiMHg0ODI3MWQzOWQwYjA1YmQ2ZWZjYTIyNzhmMjIyNzdkNmZjYzM3NTUwNGY5ODM5ZmQ3M2Y3NGFjZTI0MDg2MWFmOjpiYXNlX3Bvb2w6Ok51bGxcIlxuICAgICAgICBdLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50czogW2xwQW1vdW50LCAwLCAwLCAwLCAwXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IGFnZW50LmFjY291bnQuc2VuZFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IGF3YWl0IGFnZW50LmFwdG9zLndhaXRGb3JUcmFuc2FjdGlvbih7XG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGNvbW1pdHRlZFRyYW5zYWN0aW9uSGFzaFxuICAgIH0pO1xuICAgIGlmICghc2lnbmVkVHJhbnNhY3Rpb24uc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihzaWduZWRUcmFuc2FjdGlvbiwgXCJSZW1vdmUgbGlxdWlkaXR5IGZhaWxlZFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlbW92ZSBsaXF1aWRpdHkgZmFpbGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb24uaGFzaDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlbW92ZSBsaXF1aWRpdHkgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3V0aWxzL2dldC1wb29sLWFkZHJlc3MtYnktdG9rZW4tbmFtZS50c1xudmFyIHRva2Vuc0xpc3QgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlVTRHRcIixcbiAgICBwb29sQWRkcmVzczogXCIweGFjMDBlOTBjZGFkZWMwNmQ4MWUwZDVjZTdhM2U5M2Q2M2Q1NjNlOTgyZGVhMGNhMTViYWQyYjA2N2Y0MmQyYmVcIixcbiAgICBkZWNpbWFsczogNixcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHgzNTdiMGI3NGJjODMzZTk1YTExNWFkMjI2MDQ4NTRkNmIwZmNhMTUxY2VjZDk0MTExNzcwZTVkNmZmYzlkYzJiXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwielVTRFRcIixcbiAgICBwb29sQWRkcmVzczogXCIweDQ0N2IzYjUxNjU0NmYyOGU4YzRmNjgyNWE2Mjg3YjA5MTYxNjU5ZTdjNTAwYzU5OWMyOWMyOGE4NDkyODQ0YjhcIixcbiAgICBkZWNpbWFsczogNixcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInpVU0RDXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHhhOWM1MWNhM2JjZDkzOTc4ZDBjNGFhZGE3YzRjZjQ3YzA3OTFjYWNlZDNjZGM0ZTE1ZjJjOGUwNzk3ZDFmOTNjXCIsXG4gICAgZGVjaW1hbHM6IDYsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRENcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBUFRcIixcbiAgICBwb29sQWRkcmVzczogXCIweDc2MWE5Nzc4N2ZhOGIzYWUwY2VmOTFlYmMyZDk2ZTU2Y2M1MzlkZjViYzg4ZGFkYWJlZTk4YWUwMDM2M2E4MzFcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJzdGhBUFRcIixcbiAgICBwb29sQWRkcmVzczogXCIweGVkNmJmOWZlN2UzZjQyYzY4MzFmZmFjOTE4MjRhNTQ1YzRiOGJmY2I0MGE1OWIzZjRjY2ZlMjAzY2FmYjdmNDJcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHhmYWY0ZTYzM2FlOWViMzEzNjZjOWNhMjQyMTQyMzE3NjA5MjY1NzZjN2I2MjUzMTNiMzY4OGI1ZTkwMDczMWY2OjpzdGFraW5nOjpTdGFrZWRUaGFsYUFQVFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1PRFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4ZWYyYWU4OTc5NjcyNWQwZWIzNjMzMjZlY2I3ZGYxNTlmZWI5NDlmNmQxZjQwMGY3NmRlZWVlYmNjYmFjMDBmMVwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweDZmOTg2ZDE0NmU0YTkwYjgyOGQ4YzEyYzE0YjZmNGUwMDNmZGZmMTFhOGVlY2NlY2ViNjM3NDQzNjNlYWFjMDE6Om1vZF9jb2luOjpNT0RcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUSExcIixcbiAgICBwb29sQWRkcmVzczogXCIweDEyN2VhNWI0YzQ1MGJlNjk1ZTQ4OGRhMWMzYmMwMTNlMmU5M2Q4Y2YwMDI3MGVmOTAzODUxODk4NDRiYzk3NTVcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHg3ZmQ1MDBjMTEyMTZmMGZlMzA5NWQwYzRiOGFhNGQ2NGE0ZTJlMDRmODM3NTg0NjJmMmIxMjcyNTU2NDM2MTU6OnRobF9jb2luOjpUSExcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ3VVNEQ1wiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4YTc2ZWJmYjQzMjk4MmM4NjQ3ODNmZGIzM2NkZjVhOWVkYjE4YWMxYjk1MGRlYjgwMzdmNWNmOGM5ODRkYTNkMlwiLFxuICAgIGRlY2ltYWxzOiA2LFxuICAgIHRva2VuQWRkcmVzczogXCIweDVlMTU2ZjEyMDdkMGViZmExOWE5ZWVmZjAwZDYyYTI4MjI3OGZiODcxOWY0ZmFiM2E1ODZhMGEyYzBmZmZiZWE6OmNvaW46OlRcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ6V0VUSFwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4NTQ4Y2Y1ODdiZDkxOGEwMDA1YjMzNzJhMWQyM2U2NGIxOGFjZTNjNjE5NjJmMDg3YTIxZWFjNTJjZjIyODUwNFwiLFxuICAgIGRlY2ltYWxzOiA2LFxuICAgIHRva2VuQWRkcmVzczogXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpXRVRIXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwid1dFVEhcIixcbiAgICBwb29sQWRkcmVzczogXCIweDExNGVlNTE5ZmZhMWU4Njk3Nzg0YmQxYTM1MDgyMmNiMzc2MDFhMTQ3NjI4OTA1MWI4Mjk1MTY1NTk3YTQ1MzhcIixcbiAgICBkZWNpbWFsczogNixcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHhjYzhhODljOGRjZTk2OTNkMzU0NDQ5ZjFmNzNlNjBlMTRlMzQ3NDE3ODU0ZjAyOWRiNWJjOGU3NDU0MDA4YWJiOjpjb2luOjpUXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ0FLRVwiLFxuICAgIHBvb2xBZGRyZXNzOiBcIjB4NDFiMDM5ZTU1MThiMWEzNzg2ZWU3OThkODk1ZTBkZGYzMTQxZmJiYzIwMDA5Mjg0MzIzZmE1MWVhMjc5YzgxOVwiLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIHRva2VuQWRkcmVzczogXCIweDE1OWRmNmI3Njg5NDM3MDE2MTA4YTAxOWZkNWJlZjczNmJhYzY5MmI2ZDRhMWYxMGM5NDFmNmZiYjlhNzRjYTY6Om9mdDo6Q2FrZU9GVFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInN0QVBUXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHhjM2M5Y2M4ODVhNTIwMDRlMDQ5MGY2YTgyOTFiM2JjNTg1NGYwZTQyZDkzMWZiMTI0NzM2YmQxODljOWYwZjQ1XCIsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4MTExYWUzZTViYzgxNmE1ZTYzYzJkYTk3ZDBhYTM4ODY1MTllMGNkNWU0YjA0NjY1OWZhMzU3OTZiZDExNTQyYTo6c3RhcHRfdG9rZW46OlN0YWtlZEFwdFwiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImFCVENcIixcbiAgICBwb29sQWRkcmVzczogXCIweGFjYjcyNjJiMzNhMTQ3YjQ3Yjk1MGEzYTI2ZDc2OTllMWE1OGJjYWE0NzVlZjYzNmNiMGZlYTUzZmEwZWI4NzJcIixcbiAgICBkZWNpbWFsczogMTAsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4NGUxODU0ZjZkMzMyYzk1MjVlMjU4ZmI2ZTY2Zjg0YjZhZjhhYmE2ODdiYmNiODMyYTI0NzY4YzRlMTc1ZmVlYzo6YWJ0Yzo6QUJUQ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlNUT05FXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHgwNzVjMzlmMThjN2JjMDBhYzBmODFhMGY5YWI3ZTMxOWUyMzc5MGQ3ZDhjM2RmOTY4ZDg0YTIzNjk5NTg0YmQ5XCIsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4NTQzYzU2NjBhYTRkNDk2Njg3ZTIwNjhjMTE3NjVmMDQ2MDdjNGY0YjYzOWE4MzIzM2E5MzMzNjA0ZmI4Y2U1OTo6c3Rha2VzdG9uZV9ldGhlcjo6U3Rha2VTdG9uZUV0aGVyXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwidHJ1QVBUXCIsXG4gICAgcG9vbEFkZHJlc3M6IFwiMHg3YmQ1YmUwM2RmMGZiMzg0MWZlZDMzN2I4ZTdhMzUzODE4YjkxN2NjZTZkYjI4YjgwN2I2OTEwMDJhMTIyZDczXCIsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgdG9rZW5BZGRyZXNzOiBcIjB4YWVmNmE4YzMxODJlMDc2ZGI3MmQ2NDMyNDYxNzExNGNhY2Y5YTUyZjI4MzI1ZWRjMTBiNDgzZjdmMDVkYTBlN1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInNCVENcIixcbiAgICBwb29sQWRkcmVzczogXCIweDc1NDExNGM2NTZlMjY0OThhOGMwYjIwZmEyNGFmNjYzZmVkNWU0YjI0YWNiNDcxYzEwM2RhZWEwZjcwMDZiNDBcIixcbiAgICBkZWNpbWFsczogOCxcbiAgICB0b2tlbkFkZHJlc3M6IFwiMHg1ZGVlMWQ0YjEzZmFlMzM4YTFlMTc4MGY5YWQyNzA5YTAxMGU4MjQzODhlZmQxNjkxNzFhMjZlM2VhOTAyOWJiOjpzdGFrZXN0b25lX2JpdGNvaW46OlN0YWtlU3RvbmVCaXRjb2luXCJcbiAgfVxuXTtcbnZhciBnZXRUb2tlbkJ5VG9rZW5OYW1lID0gKG5hbWUpID0+IHtcbiAgY29uc3QgdG9rZW4gPSB0b2tlbnNMaXN0LmZpbmQoXG4gICAgKHRva2VuMikgPT4gdG9rZW4yLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8IHRva2VuMi5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmFtZS50b0xvd2VyQ2FzZSgpKVxuICApO1xuICByZXR1cm4gdG9rZW47XG59O1xudmFyIGdldFRva2VuQnlUb2tlbkFkZHJlc3MgPSAoYWRkcmVzcykgPT4ge1xuICBjb25zdCB0b2tlbiA9IHRva2Vuc0xpc3QuZmluZCgodG9rZW4yKSA9PiB0b2tlbjIudG9rZW5BZGRyZXNzLnRvTG93ZXJDYXNlKCkgPT09IGFkZHJlc3MudG9Mb3dlckNhc2UoKSk7XG4gIHJldHVybiB0b2tlbjtcbn07XG5cbi8vIHNyYy9hZ2VudC50c1xudmFyIEFnZW50UnVudGltZSA9IGNsYXNzIHtcbiAgYWNjb3VudDtcbiAgYXB0b3M7XG4gIGNvbmZpZztcbiAgY29uc3RydWN0b3IoYWNjb3VudCwgYXB0b3MsIGNvbmZpZykge1xuICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnQ7XG4gICAgdGhpcy5hcHRvcyA9IGFwdG9zO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnID8gY29uZmlnIDoge307XG4gIH1cbiAgYXN5bmMgZ2V0UHl0aERhdGEoKSB7XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IG5ldyBBcHRvc1ByaWNlU2VydmljZUNvbm5lY3Rpb24oXCJodHRwczovL2hlcm1lcy5weXRoLm5ldHdvcmtcIik7XG4gICAgcmV0dXJuIGF3YWl0IGNvbm5lY3Rpb24uZ2V0UHJpY2VGZWVkc1VwZGF0ZURhdGEocHJpY2VGZWVkKTtcbiAgfVxuICBnZXRCYWxhbmNlKG1pbnQpIHtcbiAgICByZXR1cm4gZ2V0QmFsYW5jZSh0aGlzLCBtaW50KTtcbiAgfVxuICBnZXRUb2tlbkRldGFpbHModG9rZW4pIHtcbiAgICByZXR1cm4gZ2V0VG9rZW5EZXRhaWxzKHRva2VuKTtcbiAgfVxuICBnZXRUb2tlbkJ5VG9rZW5OYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gZ2V0VG9rZW5CeVRva2VuTmFtZShuYW1lKTtcbiAgfVxuICBnZXRUb2tlblByaWNlKHF1ZXJ5KSB7XG4gICAgcmV0dXJuIGdldFRva2VuUHJpY2UocXVlcnkpO1xuICB9XG4gIHRyYW5zZmVyVG9rZW5zKHRvLCBhbW91bnQsIG1pbnQpIHtcbiAgICByZXR1cm4gdHJhbnNmZXJUb2tlbnModGhpcywgdG8sIGFtb3VudCwgbWludCk7XG4gIH1cbiAgZ2V0VHJhbnNhY3Rpb24oaGFzaCkge1xuICAgIHJldHVybiBnZXRUcmFuc2FjdGlvbih0aGlzLCBoYXNoKTtcbiAgfVxuICBidXJuVG9rZW4oYW1vdW50LCBtaW50KSB7XG4gICAgcmV0dXJuIGJ1cm5Ub2tlbih0aGlzLCBhbW91bnQsIG1pbnQpO1xuICB9XG4gIGNyZWF0ZVRva2VuKG5hbWUsIHN5bWJvbCwgaWNvblVSSSwgcHJvamVjdFVSSSkge1xuICAgIHJldHVybiBjcmVhdGVUb2tlbih0aGlzLCBuYW1lLCBzeW1ib2wsIGljb25VUkksIHByb2plY3RVUkkpO1xuICB9XG4gIG1pbnRUb2tlbih0bywgbWludCwgYW1vdW50KSB7XG4gICAgcmV0dXJuIG1pbnRUb2tlbih0aGlzLCB0bywgbWludCwgYW1vdW50KTtcbiAgfVxuICBzdGFrZVRva2Vuc1dpdGhBbW5pcyh0bywgYW1vdW50KSB7XG4gICAgcmV0dXJuIHN0YWtlVG9rZW5zKHRoaXMsIHRvLCBhbW91bnQpO1xuICB9XG4gIHdpdGhkcmF3U3Rha2VGcm9tQW1uaXModG8sIGFtb3VudCkge1xuICAgIHJldHVybiB1bnN0YWtlVG9rZW5zKHRoaXMsIHRvLCBhbW91bnQpO1xuICB9XG4gIHRyYW5zZmVyTkZUKHRvLCBtaW50KSB7XG4gICAgcmV0dXJuIHRyYW5zZmVyTkZUKHRoaXMsIHRvLCBtaW50KTtcbiAgfVxuICBidXJuTkZUKG1pbnQpIHtcbiAgICByZXR1cm4gYnVybk5GVCh0aGlzLCBtaW50KTtcbiAgfVxuICBsZW5kVG9rZW4oYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBuZXdQb3NpdGlvbiwgZnVuZ2libGVBc3NldCkge1xuICAgIHJldHVybiBsZW5kVG9rZW4odGhpcywgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBuZXdQb3NpdGlvbiwgZnVuZ2libGVBc3NldCk7XG4gIH1cbiAgYm9ycm93VG9rZW4oYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KSB7XG4gICAgcmV0dXJuIGJvcnJvd1Rva2VuKHRoaXMsIGFtb3VudCwgbWludCwgcG9zaXRpb25JZCwgZnVuZ2libGVBc3NldCk7XG4gIH1cbiAgd2l0aGRyYXdUb2tlbihhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gd2l0aGRyYXdUb2tlbih0aGlzLCBhbW91bnQsIG1pbnQsIHBvc2l0aW9uSWQsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG4gIHJlcGF5VG9rZW4oYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KSB7XG4gICAgcmV0dXJuIHJlcGF5VG9rZW4odGhpcywgYW1vdW50LCBtaW50LCBwb3NpdGlvbklkLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICBnZXRVc2VyUG9zaXRpb24odXNlckFkZHJlc3MsIHBvc2l0aW9uSWQpIHtcbiAgICByZXR1cm4gZ2V0VXNlclBvc2l0aW9uKHRoaXMsIHVzZXJBZGRyZXNzLCBwb3NpdGlvbklkKTtcbiAgfVxuICBnZXRVc2VyQWxsUG9zaXRpb25zKHVzZXJBZGRyZXNzKSB7XG4gICAgcmV0dXJuIGdldFVzZXJBbGxQb3NpdGlvbnModGhpcywgdXNlckFkZHJlc3MpO1xuICB9XG4gIGdldFBvb2xEZXRhaWxzKG1pbnQpIHtcbiAgICByZXR1cm4gZ2V0UG9vbERldGFpbHModGhpcywgbWludCk7XG4gIH1cbiAgYWRkTGlxdWlkaXR5KG1pbnRYLCBtaW50WSwgbWludFhBbW91bnQsIG1pbnRZQW1vdW50KSB7XG4gICAgcmV0dXJuIGFkZExpcXVpZGl0eSh0aGlzLCBtaW50WCwgbWludFksIG1pbnRYQW1vdW50LCBtaW50WUFtb3VudCk7XG4gIH1cbiAgcmVtb3ZlTGlxdWlkaXR5KG1pbnRYLCBtaW50WSwgbHBBbW91bnQsIG1pbk1pbnRYID0gMCwgbWluTWludFkgPSAwKSB7XG4gICAgcmV0dXJuIHJlbW92ZUxpcXVpZGl0eSh0aGlzLCBtaW50WCwgbWludFksIGxwQW1vdW50LCBtaW5NaW50WCwgbWluTWludFkpO1xuICB9XG4gIHN3YXAobWludFgsIG1pbnRZLCBzd2FwQW1vdW50LCBtaW5Db2luT3V0KSB7XG4gICAgcmV0dXJuIHN3YXAodGhpcywgbWludFgsIG1pbnRZLCBzd2FwQW1vdW50LCBtaW5Db2luT3V0KTtcbiAgfVxuICBjcmVhdGVQb29sKG1pbnRYLCBtaW50WSkge1xuICAgIHJldHVybiBjcmVhdGVQb29sKHRoaXMsIG1pbnRYLCBtaW50WSk7XG4gIH1cbiAgLy8gQXJpZXNcbiAgY3JlYXRlQXJpZXNQcm9maWxlKCkge1xuICAgIHJldHVybiBjcmVhdGVBcmllc1Byb2ZpbGUodGhpcyk7XG4gIH1cbiAgbGVuZEFyaWVzVG9rZW4obWludFR5cGUsIGFtb3VudCkge1xuICAgIHJldHVybiBsZW5kQXJpZXNUb2tlbih0aGlzLCBtaW50VHlwZSwgYW1vdW50KTtcbiAgfVxuICBib3Jyb3dBcmllc1Rva2VuKG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgICByZXR1cm4gYm9ycm93QXJpZXNUb2tlbih0aGlzLCBtaW50VHlwZSwgYW1vdW50KTtcbiAgfVxuICB3aXRoZHJhd0FyaWVzVG9rZW4obWludFR5cGUsIGFtb3VudCkge1xuICAgIHJldHVybiB3aXRoZHJhd0FyaWVzVG9rZW4odGhpcywgbWludFR5cGUsIGFtb3VudCk7XG4gIH1cbiAgcmVwYXlBcmllc1Rva2VuKG1pbnRUeXBlLCBhbW91bnQpIHtcbiAgICByZXR1cm4gcmVwYXlBcmllc1Rva2VuKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQpO1xuICB9XG4gIC8vIFRoYWxhXG4gIHN0YWtlVG9rZW5zV2l0aFRoYWxhKGFtb3VudCkge1xuICAgIHJldHVybiBzdGFrZVRva2VuV2l0aFRoYWxhKHRoaXMsIGFtb3VudCk7XG4gIH1cbiAgdW5zdGFrZVRva2Vuc1dpdGhUaGFsYShhbW91bnQpIHtcbiAgICByZXR1cm4gdW5zdGFrZUFQVFdpdGhUaGFsYSh0aGlzLCBhbW91bnQpO1xuICB9XG4gIG1pbnRNT0RXaXRoVGhhbGEobWludFR5cGUsIGFtb3VudCkge1xuICAgIHJldHVybiBtaW50TU9EV2l0aFRoYWxhKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQpO1xuICB9XG4gIHJlZGVlbU1PRFdpdGhUaGFsYShtaW50VHlwZSwgYW1vdW50KSB7XG4gICAgcmV0dXJuIHJlZGVlbU1PRFdpdGhUaGFsYSh0aGlzLCBtaW50VHlwZSwgYW1vdW50KTtcbiAgfVxuICBhZGRMaXF1aWRpdHlXaXRoVGhhbGEobWludFgsIG1pbnRZLCBtaW50WEFtb3VudCwgbWludFlBbW91bnQpIHtcbiAgICByZXR1cm4gYWRkTGlxdWlkaXR5V2l0aFRoYWxhKHRoaXMsIG1pbnRYLCBtaW50WSwgbWludFhBbW91bnQsIG1pbnRZQW1vdW50KTtcbiAgfVxuICByZW1vdmVMaXF1aWRpdHlXaXRoVGhhbGEobWludFgsIG1pbnRZLCBscEFtb3VudCkge1xuICAgIHJldHVybiByZW1vdmVMaXF1aWRpdHlXaXRoVGhhbGEodGhpcywgbWludFgsIG1pbnRZLCBscEFtb3VudCk7XG4gIH1cbiAgLy8gcGFub3JhXG4gIHN3YXBXaXRoUGFub3JhKGZyb21Ub2tlbiwgdG9Ub2tlbiwgc3dhcEFtb3VudCwgdG9XYWxsZXRBZGRyZXNzKSB7XG4gICAgcmV0dXJuIHN3YXBXaXRoUGFub3JhKHRoaXMsIGZyb21Ub2tlbiwgdG9Ub2tlbiwgc3dhcEFtb3VudCwgdG9XYWxsZXRBZGRyZXNzKTtcbiAgfVxuICAvLyBvcGVuYWlcbiAgY3JlYXRlSW1hZ2VXaXRoT3BlbkFJKHByb21wdCwgc2l6ZSwgbikge1xuICAgIHJldHVybiBjcmVhdGVJbWFnZSh0aGlzLCBwcm9tcHQsIHNpemUsIG4pO1xuICB9XG4gIC8vIEVjaG9cbiAgc3Rha2VUb2tlbldpdGhFY2hvKGFtb3VudCkge1xuICAgIHJldHVybiBzdGFrZVRva2VuV2l0aEVjaG8odGhpcywgYW1vdW50KTtcbiAgfVxuICB1bnN0YWtlVG9rZW5XaXRoRWNobyhhbW91bnQpIHtcbiAgICByZXR1cm4gdW5zdGFrZVRva2VuV2l0aEVjaG8odGhpcywgYW1vdW50KTtcbiAgfVxuICAvLyBFY2hlbG9uXG4gIGxlbmRUb2tlbldpdGhFY2hlbG9uKG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KSB7XG4gICAgcmV0dXJuIGxlbmRUb2tlbldpdGhFY2hlbG9uKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICB3aXRoZHJhd1Rva2VuV2l0aEVjaGVsb24obWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gd2l0aGRyYXdUb2tlbldpdGhFY2hlbG9uKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICByZXBheVRva2VuV2l0aEVjaGVsb24obWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpIHtcbiAgICByZXR1cm4gcmVwYXlUb2tlbldpdGhFY2hlbG9uKHRoaXMsIG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KTtcbiAgfVxuICBib3Jyb3dUb2tlbldpdGhFY2hlbG9uKG1pbnRUeXBlLCBhbW91bnQsIHBvb2xBZGRyZXNzLCBmdW5naWJsZUFzc2V0KSB7XG4gICAgcmV0dXJuIGJvcnJvd1Rva2VuV2l0aEVjaGVsb24odGhpcywgbWludFR5cGUsIGFtb3VudCwgcG9vbEFkZHJlc3MsIGZ1bmdpYmxlQXNzZXQpO1xuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FjY291bnQvYWRkcmVzcy50c1xuaW1wb3J0IHsgVG9vbCB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc0FjY291bnRBZGRyZXNzVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfZ2V0X3dhbGxldF9hZGRyZXNzXCI7XG4gIGRlc2NyaXB0aW9uID0gXCJHZXQgdGhlIHdhbGxldCBhZGRyZXNzIG9mIHRoZSBhZ2VudFwiO1xuICBhc3luYyBfY2FsbChfaW5wdXQpIHtcbiAgICByZXR1cm4gdGhpcy5hZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKS50b1N0cmluZygpO1xuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FtbmlzL3N0YWtlLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczIsIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDIgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQW1uaXNTdGFrZVRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhbW5pc19zdGFrZVwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gc3Rha2UgQVBUIChBcHRvcykgdG8gYW1uaXMgdmFsaWRhdG9yIGFuZCByZWNlaXZlIGl0cyBsaXF1aWQgc3Rha2luZyB0b2tlbiBzdEFQVCAoc3Rha2VkIEFQVClcblxuXHRrZWVwIHJlY2lwaWVudCBibGFuayBpZiB1c2VyIHRoZW1zZWx2ZXMgd2FudHMgdG8gcmVjZWl2ZSBzdEFQVCBhbmQgbm90IHNlbmQgdG8gYW55Ym9keSBlbHNlXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApIChyZXF1aXJlZCk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICByZWNpcGllbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgcmVjaXBpZW50ID0gQWNjb3VudEFkZHJlc3MyLmZyb20ocGFyc2VkSW5wdXQucmVjaXBpZW50KSB8fCB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpO1xuICAgICAgY29uc3Qgc3Rha2VUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnN0YWtlVG9rZW5zV2l0aEFtbmlzKFxuICAgICAgICByZWNpcGllbnQsXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbihwYXJzZWRJbnB1dC5hbW91bnQsIDgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgc3Rha2VUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogXCJzdEFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FtbmlzL3dpdGhkcmF3LXN0YWtlLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczMsIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBbW5pc1dpdGhkcmF3U3Rha2VUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYW1uaXNfd2l0aGRyYXdfc3Rha2VcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHdpdGhkcmF3IHN0YWtlZCBBUFQgKEFwdG9zKSBmcm9tIGFtbmlzIHZhbGlkYXRvciBhbmQgcmVjZWl2ZSBiYWNrIEFQVFxuXG5cdGtlZXAgcmVjaXBpZW50IGJsYW5rIGlmIHVzZXIgdGhlbXNlbHZlcyB3YW50cyB0byByZWNlaXZlIEFQVCBhbmQgbm90IHNlbmQgdG8gYW55Ym9keSBlbHNlXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgcmVjaXBpZW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKWA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IEFjY291bnRBZGRyZXNzMy5mcm9tKHBhcnNlZElucHV0LnJlY2lwaWVudCkgfHwgdGhpcy5hZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKTtcbiAgICAgIGNvbnN0IHdpdGhkcmF3U3Rha2VUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LndpdGhkcmF3U3Rha2VGcm9tQW1uaXMoXG4gICAgICAgIHJlY2lwaWVudCxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMihwYXJzZWRJbnB1dC5hbW91bnQsIDgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgd2l0aGRyYXdTdGFrZVRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBcIkFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL2JhbGFuY2UudHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDQgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NCYWxhbmNlVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDQge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFwdG9zX2JhbGFuY2VcIjtcbiAgZGVzY3JpcHRpb24gPSBgR2V0IHRoZSBiYWxhbmNlIG9mIGEgQXB0b3MgYWNjb3VudC5cblxuICBJZiB5b3Ugd2FudCB0byBnZXQgdGhlIGJhbGFuY2Ugb2YgeW91ciB3YWxsZXQsIHlvdSBkb24ndCBuZWVkIHRvIHByb3ZpZGUgdGhlIG1pbnQuXG4gIElmIG5vIG1pbnQgaXMgcHJvdmlkZWQsIHRoZSBiYWxhbmNlIHdpbGwgYmUgaW4gQVBULlxuICBpZiB5b3Ugd2FudCB0byBnZXQgYmFsYW5jZSBvZiBhIGZ1bmdpYmxlIGFzc2V0LCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBhc3NldCBhZGRyZXNzIGFzIG1pbnRcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJcbiAgMHgzNTdiMGI3NGJjODMzZTk1YTExNWFkMjI2MDQ4NTRkNmIwZmNhMTUxY2VjZDk0MTExNzcwZTVkNmZmYzlkYzJiXCIgKG9wdGlvbmFsKWA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnQgPSBwYXJzZWRJbnB1dC5taW50IHx8IHZvaWQgMDtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWxzID0gdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMobWludCk7XG4gICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRCYWxhbmNlKG1pbnQpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYmFsYW5jZSxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlscy5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWxzLmRlY2ltYWxzIHx8IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXB0b3MvZ2V0LXRva2VuLWRldGFpbHMudHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDUgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NHZXRUb2tlbkRldGFpbFRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2w1IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc190b2tlbl9kZXRhaWxzXCI7XG4gIGRlc2NyaXB0aW9uID0gYEdldCB0aGUgZGV0YWlsIG9mIGFueSBhcHRvcyB0b2tlbnNcblxuICBkZXRhaWxzIGFsc28gaW5jbHVkZSBkZWNpbWFscyB3aGljaCB5b3UgY2FuIHVzZSB0byBtYWtlIG9uY2hhaW4gdmFsdWVzIHJlYWRhYmxlIHRvIGEgaHVtYW4gdXNlclxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgdG9rZW46IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKG9wdGlvbmFsKWA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnQgPSBwYXJzZWRJbnB1dC50b2tlbiB8fCBcIlwiO1xuICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMobWludCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB0b2tlbkRhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL3RyYW5zZmVyLXRva2VuLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczQsIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4zIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc1RyYW5zZmVyVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sNiB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfdHJhbnNmZXJfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHRyYW5zZmVyIEFQVCwgYW55IHRva2VuIG9yIGZ1bmdpYmxlIGFzc2V0IHRvIGEgcmVjaXBpZW50XG5cbiAgaWYgeW91IHdhbnQgdG8gdHJhbnNmZXIgQVBULCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG4gIGlmIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRva2VuIG90aGVyIHRoYW4gQVBULCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBtaW50IG9mIHRoYXQgc3BlY2lmaWMgdG9rZW5cbiAgaWYgeW91IHdhbnQgdG8gdHJhbnNmZXIgZnVuZ2libGUgYXNzZXQsIGFkZCBmdW5naWJsZSBhc3NldCBhZGRyZXNzIGFzIG1pbnRcblxuICBrZWVwIHRvIGJsYW5rIGlmIHVzZXIgdGhlbXNlbHZlcyB3YW50cyB0byByZWNlaXZlIHRoZSB0b2tlbiBhbmQgbm90IHNlbmQgdG8gYW55Ym9keSBlbHNlXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICB0bzogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYVwiIChvcHRpb25hbClcbiAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgXG4gIG9yIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKWA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IEFjY291bnRBZGRyZXNzNC5mcm9tKHBhcnNlZElucHV0LnRvKSB8fCB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpO1xuICAgICAgY29uc3QgdHJhbnNmZXJUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQudHJhbnNmZXJUb2tlbnMoXG4gICAgICAgIHJlY2lwaWVudCxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMyhwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgNiksXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnRcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB0cmFuc2ZlclRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFsc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcHRvcy9idXJuLXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDcgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NCdXJuVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sNyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfYnVybl90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gYnVybiBhIGZ1bmdpYmxlIGFzc2V0XG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZCkgXG4gIG1pbnQ6IHN0cmluZywgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3QgYnVyblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYnVyblRva2VuKFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW40KHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KSxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGJ1cm5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FwdG9zL21pbnQtdG9rZW4udHNcbmltcG9ydCB7IEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDggfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NNaW50VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sOCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfbWludF90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGZ1bmdpYmxlIGFzc2V0IHRvIGEgcmVjaXBpZW50XG5cbmlmIHRoZSByZWNpcGllbnQgd2FudHMgdG8gcmVjZWl2ZSB0aGUgdG9rZW4gYW5kIG5vdCBzZW5kIHRvIGFueWJvZHkgZWxzZSwga2VlcCB0byBibGFua1xuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgdG86IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCByZWNpcGllbnQgPSBBY2NvdW50QWRkcmVzczUuZnJvbShwYXJzZWRJbnB1dC50bykgfHwgdGhpcy5hZ2VudC5hY2NvdW50LmdldEFkZHJlc3MoKTtcbiAgICAgIGNvbnN0IG1pbnRUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQubWludFRva2VuKHJlY2lwaWVudCwgcGFyc2VkSW5wdXQubWludCwgcGFyc2VkSW5wdXQuYW1vdW50KTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIG1pbnRUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUgfHwgXCJBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcHRvcy9jcmVhdGUtdG9rZW4udHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDkgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXB0b3NDcmVhdGVUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2w5IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc19jcmVhdGVfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBmdW5naWJsZSBhc3NldCB0byBhIHJlY2lwaWVudFxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgbmFtZTogc3RyaW5nLCBlZyBcIlVTRFRcIiAocmVxdWlyZWQpXG4gIHN5bWJvbDogc3RyaW5nLCBlZyBcIlVTRFRcIiAocmVxdWlyZWQpXG4gIGljb25VUkk6IHN0cmluZywgZWcgXCJodHRwczovL2V4YW1wbGUuY29tL2ljb24ucG5nXCIgKHJlcXVpcmVkKVxuICBwcm9qZWN0VVJJOiBzdHJpbmcsIGVnIFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9wcm9qZWN0XCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBjcmVhdGVUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuY3JlYXRlVG9rZW4oXG4gICAgICAgIHBhcnNlZElucHV0Lm5hbWUsXG4gICAgICAgIHBhcnNlZElucHV0LnN5bWJvbCxcbiAgICAgICAgcGFyc2VkSW5wdXQuaWNvblVSSSxcbiAgICAgICAgcGFyc2VkSW5wdXQucHJvamVjdFVSSVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGNyZWF0ZVRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IHBhcnNlZElucHV0Lm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vYXB0b3MvZ2V0LXRyYW5zYWN0aW9uLnRzXG5pbXBvcnQgeyBUb29sIGFzIFRvb2wxMCB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcHRvc1RyYW5zYWN0aW9uVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDEwIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcHRvc19nZXRfdHJhbnNhY3Rpb25cIjtcbiAgZGVzY3JpcHRpb24gPSBgRmV0Y2hlcyBhIHRyYW5zYWN0aW9uIGZyb20gYXB0b3MgYmxvY2tjaGFpblxuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgdHJhbnNhY3Rpb25IYXNoOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKWA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IGFwdG9zVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLmFnZW50LmdldFRyYW5zYWN0aW9uKHBhcnNlZElucHV0LnRyYW5zYWN0aW9uSGFzaCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBhcHRvc1RyYW5zYWN0aW9uXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcHRvcy9nZXQtdG9rZW4tcHJpY2UudHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDExIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFwdG9zR2V0VG9rZW5QcmljZVRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxMSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXB0b3NfdG9rZW5fcHJpY2VcIjtcbiAgZGVzY3JpcHRpb24gPSBgR2V0IHRoZSBsaXZlIHByaWNlIG9mIGFueSBhcHRvcyB0b2tlbnMgaW4gVVNELlxuXHRkbyBub3QgZG8gYW55IGRlY2ltYWxzIGNvbnZlcnNpb24gaGVyZSwgdGhlIHByaWNlIGlzIGFscmVhZHkgaW4gVVNEXG5cbiAgZGV0YWlscyBhbHNvIGluY2x1ZGUgZGVjaW1hbHMgd2hpY2ggeW91IGNhbiB1c2UgdG8gbWFrZSBvbmNoYWluIHZhbHVlcyByZWFkYWJsZSB0byBhIGh1bWFuIHVzZXJcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nIC0gdGhpcyBpcyBJTVBPUlRBTlQpOlxuICB0b2tlbjogc3RyaW5nLCBlZyB1c2R0LCBidGMgZXRjLmA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgY29uc29sZS5sb2coXCJpbnB1dFwiLCBpbnB1dCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHRva2VuID0gcGFyc2VkSW5wdXQudG9rZW4gfHwgaW5wdXQgfHwgXCJ1c2R0XCI7XG4gICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuUHJpY2UodG9rZW4pO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgdG9rZW5EYXRhXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcmllcy9jcmVhdGUtcHJvZmlsZS50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTIgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgQXJpZXNDcmVhdGVQcm9maWxlVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDEyIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcmllc19jcmVhdGVfcHJvZmlsZVwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGEgcHJvZmlsZSBpbiBBcmllc1xuICAgIGA7XG4gIGFzeW5jIF9jYWxsKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjcmVhdGVQcm9maWxlVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5jcmVhdGVBcmllc1Byb2ZpbGUoKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGNyZWF0ZVByb2ZpbGVUcmFuc2FjdGlvbkhhc2hcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL2xlbmQtdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW41IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMTMgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG5cbi8vIHNyYy91dGlscy9wYXJzZS1qc29uLnRzXG52YXIgcGFyc2VKc29uID0gKGlucHV0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9yYmlkZGVuV29yZHMgPSBbXCJudWxsXCIsIFwidW5kZWZpbmVkXCIsIFwie31cIl07XG4gICAgaWYgKGlucHV0IGluIGZvcmJpZGRlbldvcmRzKSB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICBjb25zdCBwYXJzZWRJbnB1dCA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgIHJldHVybiBwYXJzZWRJbnB1dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9hcmllcy9sZW5kLXRva2VuLnRzXG52YXIgQXJpZXNMZW5kVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDEzIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJhcmllc19sZW5kXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBsZW5kIHRva2VucyBpbiBBcmllc1xuXG4gICAgaWYgeW91IHdhbnQgdG8gbGVuZCBBUFQsIG1pbnRUeXBlIHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFR5cGU6IHN0cmluZywgZWcgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIChyZXF1aXJlZClcbiAgICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmxlbmRBcmllc1Rva2VuKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNShwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL3dpdGhkcmF3LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE0IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFyaWVzV2l0aGRyYXdUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTQge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFyaWVzX3dpdGhkcmF3XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byB3aXRoZHJhdyB0b2tlbnMgZnJvbSBBcmllc1xuXG4gICAgaWYgeW91IHdhbnQgdG8gd2l0aGRyYXcgQVBULCBtaW50VHlwZSB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIG1pbnRUeXBlOiBzdHJpbmcsIGVnIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiAocmVxdWlyZWQpXG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgY29uc3Qgd2l0aGRyYXdUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQud2l0aGRyYXdBcmllc1Rva2VuKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluNihwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFscyB8fCA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL2JvcnJvdy10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjcgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wxNSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBBcmllc0JvcnJvd1Rvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxNSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiYXJpZXNfYm9ycm93XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBib3Jyb3cgdG9rZW5zIGZyb20gQXJpZXNcblxuICAgIGlmIHlvdSB3YW50IHRvIGJvcnJvdyBBUFQsIG1pbnRUeXBlIHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFR5cGU6IHN0cmluZywgZWcgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIChyZXF1aXJlZClcbiAgICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCBib3Jyb3dUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYm9ycm93QXJpZXNUb2tlbihcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFR5cGUsXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjcocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2FyaWVzL3JlcGF5LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluOCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE2IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEFyaWVzUmVwYXlUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTYge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImFyaWVzX3JlcGF5XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byByZXBheSB0b2tlbnMgaW4gQXJpZXNcblxuICAgIGlmIHlvdSB3YW50IHRvIHJlcGF5IEFQVCwgbWludFR5cGUgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICBtaW50VHlwZTogc3RyaW5nLCBlZyBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgKHJlcXVpcmVkKVxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IHJlcGF5VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnJlcGF5QXJpZXNUb2tlbihcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFR5cGUsXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjgocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgcmVwYXlUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvbGVuZC10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wxNyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBKb3VsZUxlbmRUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxNyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfbGVuZF90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gbGVuZCBBUFQsIHRva2VucyBvciBmdW5naWJsZSBhc3NldCB0byBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gbGVuZCBBUFQsIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcbiAgaWYgeW91IHdhbnQgdG8gbGVuZCB0b2tlbiBvdGhlciB0aGFuIEFQVCwgeW91IG5lZWQgdG8gcHJvdmlkZSB0aGUgbWludCBvZiB0aGF0IHNwZWNpZmljIHRva2VuXG4gIGlmIHlvdSB3YW50IHRvIGxlbmQgZnVuZ2libGUgYXNzZXQsIGFkZCBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgYXMgbWludCBhbmQgcHJvdmlkZSBmdW5naWJsZSBhc3NldCBhZGRyZXNzXG5cbiAgaWYgcG9zaXRpb25JZCBpcyBub3QgcHJvdmlkZWQsIHRoZSBwb3NpdGlvbklkIHdpbGwgYmUgMTIzNCBhbmQgbmV3UG9zaXRpb24gc2hvdWxkIGJlIHRydWVcbiAgXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICBwb3NpdGlvbklkOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKVxuICBuZXdQb3NpdGlvbjogYm9vbGVhbiwgKHJlcXVpcmVkKSAgXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IGZ1bmdpYmxlQXNzZXQgPSBtaW50RGV0YWlsLmZhQWRkcmVzcy50b0xvd2VyQ2FzZSgpID09PSBwYXJzZWRJbnB1dC5taW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmxlbmRUb2tlbihcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluOShwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnQsXG4gICAgICAgIHBhcnNlZElucHV0LnBvc2l0aW9uSWQsXG4gICAgICAgIHBhcnNlZElucHV0Lm5ld1Bvc2l0aW9uLFxuICAgICAgICBmdW5naWJsZUFzc2V0XG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgbGVuZFRva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFsc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9qb3VsZS9ib3Jyb3ctdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE4IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEpvdWxlQm9ycm93VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMTgge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImpvdWxlX2JvcnJvd190b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gYm9ycm93IEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IGZyb20gYSBwb3NpdGlvblxuXG4gIGlmIHlvdSB3YW50IHRvIGJvcnJvdyBBUFQsIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcbiAgaWYgeW91IHdhbnQgdG8gYm9ycm93IHRva2VuIG90aGVyIHRoYW4gQVBULCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBtaW50IG9mIHRoYXQgc3BlY2lmaWMgdG9rZW5cbiAgaWYgeW91IHdhbnQgdG8gYm9ycm93IGZ1bmdpYmxlIGFzc2V0LCBhZGQgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIGFzIG1pbnQgYW5kIHByb3ZpZGUgZnVuZ2libGUgYXNzZXQgYWRkcmVzc1xuICBcbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gIHBvc2l0aW9uSWQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGNvbnN0IGZ1bmdpYmxlQXNzZXQgPSBtaW50RGV0YWlsLmZhQWRkcmVzcy50b0xvd2VyQ2FzZSgpID09PSBwYXJzZWRJbnB1dC5taW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBib3Jyb3dUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYm9ycm93VG9rZW4oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjEwKHBhcnNlZElucHV0LmFtb3VudCwgbWludERldGFpbC5kZWNpbWFscyB8fCA4KSxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludCxcbiAgICAgICAgcGFyc2VkSW5wdXQucG9zaXRpb25JZCxcbiAgICAgICAgZnVuZ2libGVBc3NldFxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGJvcnJvd1Rva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSB8fCBcIkFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvd2l0aGRyYXctdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDE5IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEpvdWxlV2l0aGRyYXdUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wxOSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfd2l0aGRyYXdfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHdpdGhkcmF3IEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IGZyb20gYSBwb3NpdGlvblxuXG4gIGlmIHlvdSB3YW50IHRvIHdpdGhkcmF3IEFQVCwgYWRkIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyBtaW50XG4gIGlmIHlvdSB3YW50IHRvIHdpdGhkcmF3IHRva2VuIG90aGVyIHRoYW4gQVBULCB5b3UgbmVlZCB0byBwcm92aWRlIHRoZSBtaW50IG9mIHRoYXQgc3BlY2lmaWMgdG9rZW5cbiAgaWYgeW91IHdhbnQgdG8gd2l0aGRyYXcgZnVuZ2libGUgYXNzZXQsIGFkZCBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCIgYXMgbWludCBhbmQgcHJvdmlkZSBmdW5naWJsZSBhc3NldCBhZGRyZXNzXG4gIFxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG5cbiAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICBwb3NpdGlvbklkOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCBmdW5naWJsZUFzc2V0ID0gbWludERldGFpbC5mYUFkZHJlc3MudG9Mb3dlckNhc2UoKSA9PT0gcGFyc2VkSW5wdXQubWludC50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3Qgd2l0aGRyYXdUb2tlblRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQud2l0aGRyYXdUb2tlbihcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTEocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50LFxuICAgICAgICBwYXJzZWRJbnB1dC5wb3NpdGlvbklkLFxuICAgICAgICBmdW5naWJsZUFzc2V0XG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgd2l0aGRyYXdUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvcmVwYXktdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDIwIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEpvdWxlUmVwYXlUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyMCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiam91bGVfcmVwYXlfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlcGF5IEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IGZyb20gYSBwb3NpdGlvblxuXG4gIGlmIHlvdSB3YW50IHRvIHJlcGF5IEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICBpZiB5b3Ugd2FudCB0byByZXBheSB0b2tlbiBvdGhlciB0aGFuIEFQVCwgeW91IG5lZWQgdG8gcHJvdmlkZSB0aGUgbWludCBvZiB0aGF0IHNwZWNpZmljIHRva2VuXG4gIGlmIHlvdSB3YW50IHRvIHJlcGF5IGZ1bmdpYmxlIGFzc2V0LCBhZGQgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiIGFzIG1pbnQgYW5kIHByb3ZpZGUgZnVuZ2libGUgYXNzZXQgYWRkcmVzc1xuICBcbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gIHBvc2l0aW9uSWQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAocmVxdWlyZWQpXG4gIGZ1bmdpYmxlQXNzZXRBZGRyZXNzOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBjb25zdCByZXBheVRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5yZXBheVRva2VuKFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMihwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnQsXG4gICAgICAgIHBhcnNlZElucHV0LnBvc2l0aW9uSWQsXG4gICAgICAgIHBhcnNlZElucHV0LmZ1bmdpYmxlQXNzZXRBZGRyZXNzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgcmVwYXlUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvZ2V0LXBvb2wtZGV0YWlscy50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjEgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVHZXRQb29sRGV0YWlscyA9IGNsYXNzIGV4dGVuZHMgVG9vbDIxIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJqb3VsZV9nZXRfcG9vbF9kZXRhaWxzXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoZSB0b29sIGNhbiBiZSB1c2VkIHRvIGdldCBhIHRva2VuIC8gZnVuZ2libGUgYXNzZXQgcG9vbCBkZXRhaWxzXG5cbiAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcblxuICBFeGFtcGxlOiAne1wibWludFwiOiBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIn0nXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHBvb2wgPSBhd2FpdCB0aGlzLmFnZW50LmdldFBvb2xEZXRhaWxzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgcG9vbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvZ2V0LXVzZXItcG9zaXRpb24udHNcbmltcG9ydCB7IEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDIyIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEpvdWxlR2V0VXNlclBvc2l0aW9uID0gY2xhc3MgZXh0ZW5kcyBUb29sMjIge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImpvdWxlX2dldF91c2VyX3Bvc2l0aW9uXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoZSB0b29sIGNhbiBiZSB1c2VkIHRvIGdldCBkZXRhaWxzIGFib3V0IGEgdXNlcidzIHBvc2l0aW9uXG5cblx0a2VlcCB1c2VyQWRkcmVzcyBibGFuayBpZiB1c2VyIHdhbnRzIHRvIGdldCB0aGVpciBvd24gcG9zaXRpb24gb3IgZGlkbid0IHByb3ZpZGUgYW55IG90aGVyIHVzZXIncyBhZGRyZXNzXG5cblx0YXNrIHVzZXIgdG8gcHJvdmlkZSBwb3NpdGlvbklkIGZyb20gdGhlIGxpc3Qgb2YgcG9zaXRpb25zIHRoZXkgaGF2ZSBpZiB0aGV5IHdhbnQgdG8gZ2V0IGRldGFpbHMgYWJvdXQgYSBzcGVjaWZpYyBwb3NpdGlvbi5cblx0ZG8gbm90IGZpbGwgcmFuZG9tIHBvc2l0aW9uSWQgaWYgdGhlIHVzZXIgZGlkbid0IHByb3ZpZGUgYW55IHBvc2l0aW9uSWRcblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgIHVzZXJBZGRyZXNzOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKVxuICAgICBwb3NpdGlvbklkOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCB1c2VyQWRkcmVzcyA9IEFjY291bnRBZGRyZXNzNi5mcm9tKHBhcnNlZElucHV0LnVzZXJBZGRyZXNzKSB8fCB0aGlzLmFnZW50LmFjY291bnQuZ2V0QWRkcmVzcygpO1xuICAgICAgY29uc3Qgam91bGVVc2VyUG9zaXRpb24gPSBhd2FpdCB0aGlzLmFnZW50LmdldFVzZXJQb3NpdGlvbih1c2VyQWRkcmVzcywgcGFyc2VkSW5wdXQucG9zaXRpb25JZCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBqb3VsZVVzZXJQb3NpdGlvblxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vam91bGUvZ2V0LXVzZXItYWxsLXBvc2l0aW9ucy50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M3IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjMgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgSm91bGVHZXRVc2VyQWxsUG9zaXRpb25zID0gY2xhc3MgZXh0ZW5kcyBUb29sMjMge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImpvdWxlX2dldF91c2VyX2FsbF9wb3NpdGlvbnNcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhlIHRvb2wgY2FuIGJlIHVzZWQgdG8gZ2V0IGRldGFpbHMgYWJvdXQgYSB1c2VyJ3MgYWxsIHBvc2l0aW9uc1xuXG5cdGtlZXAgdXNlckFkZHJlc3MgYmxhbmsgaWYgdXNlciB3YW50cyB0byBnZXQgdGhlaXIgb3duIHBvc2l0aW9uIG9yIGRpZG4ndCBwcm92aWRlIGFueSBvdGhlciB1c2VyJ3MgYWRkcmVzc1xuXG4gIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICAgdXNlckFkZHJlc3M6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmFcIiAob3B0aW9uYWwpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHVzZXJBZGRyZXNzID0gQWNjb3VudEFkZHJlc3M3LmZyb20ocGFyc2VkSW5wdXQudXNlckFkZHJlc3MpIHx8IHRoaXMuYWdlbnQuYWNjb3VudC5nZXRBZGRyZXNzKCk7XG4gICAgICBjb25zdCBqb3VsZVVzZXJBbGxQb3NpdGlvbnMgPSBhd2FpdCB0aGlzLmFnZW50LmdldFVzZXJBbGxQb3NpdGlvbnModXNlckFkZHJlc3MpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgam91bGVVc2VyQWxsUG9zaXRpb25zLFxuICAgICAgICB0b2tlbnM6IHRva2Vuc0xpc3QubWFwKCh0b2tlbikgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0b2tlbi5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IHRva2VuLmRlY2ltYWxzLFxuICAgICAgICAgICAgdG9rZW5BZGRyZXNzOiB0b2tlbi50b2tlbkFkZHJlc3NcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vbGlxdWlkc3dhcC9zd2FwLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTMgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyNCB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBMaXF1aWRTd2FwU3dhcFRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyNCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwibGlxdWlkc3dhcF9zd2FwXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBzd2FwIHRva2VucyBpbiBsaXF1aWRzd2FwXG5cbndhbnQgdG8gc3dhcCBBUFQgYW5kIG9uZSBvZiB0aGUgdG9rZW4sIG1pbnQgaXMgMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cbm9uZSBvZiB0aGUgdG9rZW4gaXMgVVNEVCwgdXNlIDB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcblxuaWYgdXNlciBhZGRlZCBtaW50WCBvciBtaW50WSBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB1c2UgdGhlc2UgdG9rZW4gbmFtZXM6XG51c2R0LHp1c2R0LHp1c2RjLGFwdCxzdGhhcHQsbW9kLHRobCx3dXNkYyx6d2V0aCx3d2V0aCxjYWtlLHN0YXB0LGFidGMsc3RvbmUsdHJ1YXB0LHNidGNcbm9yIHdoYXRldmVyIG5hbWUgdGhlIHVzZXIgaGFzIHByb3ZpZGVkLCB5b3UgY2FuIHVzZSB0aGUgdG9rZW4gbmFtZSB0byBnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuIFxuXG5jYW50IHN3YXAgYW55IGZ1bmdpYmxlIHRva2Vucy4gb25seSBjb2luIHN0YW5kYXJkIHN3YXAgYWxsb3dlZC4gaWYgdXNlciB0cnlpbmcgdG8gc3dhcCBmdW5naWJsZSB0b2tlbiwgYXNrIGl0IHRvIHN3YXAgdmlhIHBhbm9yYS5cblxuY29pbiBzdGFuZGFyZCBmb3JtYXQgOiBzdHJpbmc6OnN0cmluZzo6c3RyaW5nXG5cbklucHV0cyAoaW5wdXQgaXMgYSBKU09OIHN0cmluZyk6XG5taW50WDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbm1pbnRZOiBzdHJpbmcsIGVnIChzYW1lIGFzIG1pbnRYKSAocmVxdWlyZWQpXG5zd2FwQW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG5taW5Db2luT3V0OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgbGV0IG1pbnRYID0gcGFyc2VkSW5wdXQubWludFg7XG4gICAgICBjb25zdCB0b2tlblggPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRYKTtcbiAgICAgIGlmICh0b2tlblgpIHtcbiAgICAgICAgbWludFggPSB0b2tlblgudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgbGV0IG1pbnRZID0gcGFyc2VkSW5wdXQubWludFk7XG4gICAgICBjb25zdCB0b2tlblkgPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRZKTtcbiAgICAgIGlmICh0b2tlblkpIHtcbiAgICAgICAgbWludFkgPSB0b2tlblkudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKG1pbnRZKTtcbiAgICAgIGNvbnN0IHN3YXBUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnN3YXAoXG4gICAgICAgIG1pbnRYLFxuICAgICAgICBtaW50WSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTMocGFyc2VkSW5wdXQuc3dhcEFtb3VudCwgbWludFhEZXRhaWwuZGVjaW1hbHMpLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xMyhwYXJzZWRJbnB1dC5taW5Db2luT3V0LCBtaW50WERldGFpbC5kZWNpbWFscykgfHwgMFxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHN3YXBUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFg6IG1pbnRYRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFhEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRZRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9saXF1aWRzd2FwL2NyZWF0ZS1wb29sLnRzXG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyNSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcblxuLy8gc3JjL3V0aWxzL3BhcnNlLWZ1bmdpYmxlLWFzc2V0LXRvLXdyYXBwZWQtYXNzZXQudHNcbnZhciBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzID0gKGFzc2V0QWRkcmVzcykgPT4ge1xuICBpZiAoYXNzZXRBZGRyZXNzID09PSBcIjB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlwiKSB7XG4gICAgcmV0dXJuIFwiMHg5NzcwZmE5YzcyNWNiZDk3ZWI1MGIyYmU1Zjc0MTZlZmRmZDFmMTU1NGJlYjA3NTBkNGRhZTRjNjRlODYwZGEzOjpmYV90b19jb2luX3dyYXBwZXI6OldyYXBwZWRVU0RUXCI7XG4gIH1cbiAgcmV0dXJuIGFzc2V0QWRkcmVzcztcbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vbGlxdWlkc3dhcC9jcmVhdGUtcG9vbC50c1xudmFyIExpcXVpZFN3YXBDcmVhdGVQb29sVG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDI1IHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJsaXF1aWRzd2FwX2NyZWF0ZV9wb29sXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYSBuZXcgcG9vbCBpbiBsaXF1aWRzd2FwXG5cbiAgICBpZiB5b3Ugd2FudCB0byBjcmVhdGUgYSBwb29sIHdpdGggQVBUIGFuZCBvbmUgb2YgdGhlIHRva2VuLCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cblx0aWYgdXNlciBhZGRlZCBtaW50WCBvciBtaW50WSBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuXHRbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cblx0b3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgbWludFk6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgbGV0IG1pbnRYID0gcGFyc2VkSW5wdXQubWludFg7XG4gICAgICBjb25zdCB0b2tlblggPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRYKTtcbiAgICAgIGlmICh0b2tlblgpIHtcbiAgICAgICAgbWludFggPSB0b2tlblgudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgbGV0IG1pbnRZID0gcGFyc2VkSW5wdXQubWludFk7XG4gICAgICBjb25zdCB0b2tlblkgPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRZKTtcbiAgICAgIGlmICh0b2tlblkpIHtcbiAgICAgICAgbWludFkgPSB0b2tlblkudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKG1pbnRZKTtcbiAgICAgIGNvbnN0IGNyZWF0ZVBvb2xUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmNyZWF0ZVBvb2woXG4gICAgICAgIHBhcnNlRnVuZ2libGVBc3NldEFkZHJlc3NUb1dyYXBwZWRBc3NldEFkZHJlc3MobWludFgpLFxuICAgICAgICBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzKG1pbnRZKVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIGNyZWF0ZVBvb2xUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFg6IG1pbnRYRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFhEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRZRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9saXF1aWRzd2FwL2FkZC1saXF1aWRpdHkudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDI2IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIExpcXVpZFN3YXBBZGRMaXF1aWRpdHlUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMjYge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImxpcXVpZHN3YXBfYWRkX2xpcXVpZGl0eVwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gYWRkIGxpcXVpZGl0eSBpbiBsaXF1aWRzd2FwXG5cbiAgICBpZiB5b3Ugd2FudCB0byBhZGQgQVBUIGFuZCBvbmUgb2YgdGhlIHRva2VuLCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cblx0aWYgdXNlciBhZGRlZCBtaW50WCBvciBtaW50WSBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuXHRbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cblx0b3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gXG5cblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcbiAgICBtaW50WDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBtaW50WTogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBtaW50WEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIG1pbnRZQW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGxldCBtaW50WCA9IHBhcnNlZElucHV0Lm1pbnRYO1xuICAgICAgY29uc3QgdG9rZW5YID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WCk7XG4gICAgICBpZiAodG9rZW5YKSB7XG4gICAgICAgIG1pbnRYID0gdG9rZW5YLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGxldCBtaW50WSA9IHBhcnNlZElucHV0Lm1pbnRZO1xuICAgICAgY29uc3QgdG9rZW5ZID0gZ2V0VG9rZW5CeVRva2VuTmFtZShtaW50WSk7XG4gICAgICBpZiAodG9rZW5ZKSB7XG4gICAgICAgIG1pbnRZID0gdG9rZW5ZLnRva2VuQWRkcmVzcztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHdyYXBwZWRNaW50WCA9IHBhcnNlRnVuZ2libGVBc3NldEFkZHJlc3NUb1dyYXBwZWRBc3NldEFkZHJlc3MobWludFgpO1xuICAgICAgY29uc3Qgd3JhcHBlZE1pbnRZID0gcGFyc2VGdW5naWJsZUFzc2V0QWRkcmVzc1RvV3JhcHBlZEFzc2V0QWRkcmVzcyhtaW50WSk7XG4gICAgICBjb25zdCBtaW50WERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHdyYXBwZWRNaW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHdyYXBwZWRNaW50WSk7XG4gICAgICBjb25zdCBzd2FwVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5hZGRMaXF1aWRpdHkoXG4gICAgICAgIHdyYXBwZWRNaW50WCxcbiAgICAgICAgd3JhcHBlZE1pbnRZLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNChwYXJzZWRJbnB1dC5taW50WEFtb3VudCwgbWludFhEZXRhaWwuZGVjaW1hbHMpLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNChwYXJzZWRJbnB1dC5taW50WUFtb3VudCwgbWludFlEZXRhaWwuZGVjaW1hbHMpXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgc3dhcFRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WDogbWludFhEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WERldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFk6IG1pbnRZRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFlEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2xpcXVpZHN3YXAvcmVtb3ZlLWxpcXVpZGl0eS50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjE1IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMjcgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgTGlxdWlkU3dhcFJlbW92ZUxpcXVpZGl0eVRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyNyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwibGlxdWlkc3dhcF9yZW1vdmVfbGlxdWlkaXR5XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byByZW1vdmUgbGlxdWlkaXR5IGZyb20gbGlxdWlkc3dhcFxuXG5pZiB5b3Ugd2FudCB0byByZW1vdmUgQVBUIGFuZCBvbmUgb2YgdGhlIHRva2VuLCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG5cbmlmIHVzZXIgYWRkZWQgbWludFggb3IgbWludFkgYXMgYXNzZXQgbmFtZSwgYW5kIHlvdSBkb24ndCBoYXZlIHRoZSBhZGRyZXNzIG9mIHRoZSBhc3NldCwgdXNlIHRoZXNlIHRva2VuIG5hbWVzOlxudXNkdCx6dXNkdCx6dXNkYyxhcHQsc3RoYXB0LG1vZCx0aGwsd3VzZGMsendldGgsd3dldGgsY2FrZSxzdGFwdCxhYnRjLHN0b25lLHRydWFwdCxzYnRjXG5vciB3aGF0ZXZlciBuYW1lIHRoZSB1c2VyIGhhcyBwcm92aWRlZCwgeW91IGNhbiB1c2UgdGhlIHRva2VuIG5hbWUgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBcblxubWluTWludFggYW5kIG1pbk1pbnRZIGFyZSBtaW5pbXVtIGFtb3VudCBvZiB0b2tlbnMgdG8gcmVjZWl2ZSwgZGVmYXVsdCBpcyAwXG5cbmRlcG9zaXQgbGlxdWlkaXR5IGluIG9uZSBvZiB0aGUgcG9vbHMgdG8gZ2V0IExQIHRva2VucyBpZiB5b3UgZG9uJ3QgaGF2ZSBMUCB0b2tlbnNcblxuSW5wdXRzIChpbnB1dCBpcyBhIEpTT04gc3RyaW5nKTpcbm1pbnRYOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxubWludFk6IHN0cmluZywgZWcgc2FtZSBhcyBtaW50WCAocmVxdWlyZWQpXG5scEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxubWluTWludFg6IG51bWJlciwgZWcgMSBvciAwLjAxIChvcHRpb25hbClcbm1pbk1pbnRZOiBudW1iZXIsIGVnIDEgb3IgMC4wMSAob3B0aW9uYWwpYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgbGV0IG1pbnRYID0gcGFyc2VkSW5wdXQubWludFg7XG4gICAgICBjb25zdCB0b2tlblggPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRYKTtcbiAgICAgIGlmICh0b2tlblgpIHtcbiAgICAgICAgbWludFggPSB0b2tlblgudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgbGV0IG1pbnRZID0gcGFyc2VkSW5wdXQubWludFk7XG4gICAgICBjb25zdCB0b2tlblkgPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKG1pbnRZKTtcbiAgICAgIGlmICh0b2tlblkpIHtcbiAgICAgICAgbWludFkgPSB0b2tlblkudG9rZW5BZGRyZXNzO1xuICAgICAgfVxuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhtaW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKG1pbnRZKTtcbiAgICAgIGNvbnN0IHJlbW92ZUxpcXVpZGl0eVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQucmVtb3ZlTGlxdWlkaXR5KFxuICAgICAgICBwYXJzZUZ1bmdpYmxlQXNzZXRBZGRyZXNzVG9XcmFwcGVkQXNzZXRBZGRyZXNzKG1pbnRYKSxcbiAgICAgICAgcGFyc2VGdW5naWJsZUFzc2V0QWRkcmVzc1RvV3JhcHBlZEFzc2V0QWRkcmVzcyhtaW50WSksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjE1KHBhcnNlZElucHV0LmxwQW1vdW50LCA2KSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTUocGFyc2VkSW5wdXQubWluTWludFggfHwgMCwgbWludFhEZXRhaWwuZGVjaW1hbHMpLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNShwYXJzZWRJbnB1dC5taW5NaW50WSB8fCAwLCBtaW50WURldGFpbC5kZWNpbWFscylcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFg6IG1pbnRYRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFhEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRZRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hlbG9uL2xlbmQtdG9rZW4udHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDI4IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEVjaGVsb25MZW5kVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMjgge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fbGVuZF90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gbGVuZCBBUFQsIHRva2VucyBvciBmdW5naWJsZSBhc3NldCB0byBhIHBvc2l0aW9uXG5cbiAgICBpZiB5b3Ugd2FudCB0byBsZW5kIEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuICAgIGlmIHVzZXIgYWRkZWQgbWludCBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuICAgIFsndXNkdCcsICd6dXNkdCcsICd6dXNkYycsICdhcHQnLCAnc3RoYXB0JywgJ21vZCcsICd0aGwnLCAnd3VzZGMnICwgJ3p3ZXRoJywgJ3d3ZXRoJywgJ2Nha2UnLCAnc3RhcHQnLCAnYWJ0YycsICdzdG9uZScgLCAndHJ1YXB0JywgJ3NidGMnXVxuICAgIG9yIHdoYXRldmVyIG5hbWUgdGhlIHVzZXIgaGFzIHByb3ZpZGVkLCB5b3UgY2FuIHVzZSB0aGUgdG9rZW4gbmFtZSB0byBnZXQgdGhlIGFkZHJlc3Mgb2YgdGhlIHRva2VuXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgbWludDogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiBvciBcInVzZHQgKG5hbWUgb2YgdGhlIHRva2VuKVwiIChyZXF1aXJlZClcbiAgICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuQnlUb2tlbk5hbWUocGFyc2VkSW5wdXQubWludCkgfHwgZ2V0VG9rZW5CeVRva2VuQWRkcmVzcyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGlmICghdG9rZW4pIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG5vdCBmb3VuZFwiKTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh0b2tlbi50b2tlbkFkZHJlc3MpO1xuICAgICAgY29uc29sZS5sb2coXCJtaW50RGV0YWlsXCIsIG1pbnREZXRhaWwpO1xuICAgICAgY29uc3QgbGVuZFRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5sZW5kVG9rZW5XaXRoRWNoZWxvbihcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNihwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHRva2VuLnBvb2xBZGRyZXNzLFxuICAgICAgICB0b2tlbi50b2tlbkFkZHJlc3Muc3BsaXQoXCI6OlwiKS5sZW5ndGggIT09IDNcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBsZW5kVG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hlbG9uL3dpdGhkcmF3LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTcgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wyOSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hlbG9uV2l0aGRyYXdUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wyOSB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiZWNoZWxvbl93aXRoZHJhd190b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gd2l0aGRyYXcgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgICBpZiB5b3Ugd2FudCB0byB3aXRoZHJhdyBBUFQsIG1pbnQgd2lsbCBiZSBcIjB4MTo6YXB0b3NfY29pbjo6QXB0b3NDb2luXCJcbiAgICBpZiB1c2VyIGFkZGVkIG1pbnQgYXMgYXNzZXQgbmFtZSwgYW5kIHlvdSBkb24ndCBoYXZlIHRoZSBhZGRyZXNzIG9mIHRoZSBhc3NldCwgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyB0b2tlbiBuYW1lczpcbiAgICBbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cbiAgICBvciB3aGF0ZXZlciBuYW1lIHRoZSB1c2VyIGhhcyBwcm92aWRlZCwgeW91IGNhbiB1c2UgdGhlIHRva2VuIG5hbWUgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlblxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApIChJTVBPUlRBTlQpOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIG1pbnQ6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgb3IgXCJ1c2R0IChuYW1lIG9mIHRoZSB0b2tlbilcIiAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbkJ5VG9rZW5OYW1lKHBhcnNlZElucHV0Lm1pbnQpIHx8IGdldFRva2VuQnlUb2tlbkFkZHJlc3MocGFyc2VkSW5wdXQubWludCk7XG4gICAgICBpZiAoIXRva2VuKSB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBub3QgZm91bmRcIik7XG4gICAgICBjb25zdCBtaW50RGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHModG9rZW4udG9rZW5BZGRyZXNzKTtcbiAgICAgIGNvbnNvbGUubG9nKFwibWludERldGFpbFwiLCBtaW50RGV0YWlsKTtcbiAgICAgIGNvbnN0IHdpdGhkcmF3VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LndpdGhkcmF3VG9rZW5XaXRoRWNoZWxvbihcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4xNyhwYXJzZWRJbnB1dC5hbW91bnQsIG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOCksXG4gICAgICAgIHRva2VuLnBvb2xBZGRyZXNzLFxuICAgICAgICB0b2tlbi50b2tlbkFkZHJlc3Muc3BsaXQoXCI6OlwiKS5sZW5ndGggIT09IDNcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB3aXRoZHJhd1Rva2VuVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IG1pbnREZXRhaWwubmFtZSB8fCBcIkFQVFwiLFxuICAgICAgICAgIGRlY2ltYWxzOiBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vZWNoZWxvbi9yZXBheS10b2tlbi50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjE4IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzAgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgRWNoZWxvblJlcGF5VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzAge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fcmVwYXlfdG9rZW5cIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlcGF5IEFQVCwgdG9rZW5zIG9yIGZ1bmdpYmxlIGFzc2V0IGZyb20gYSBwb3NpdGlvblxuXG4gICAgaWYgeW91IHdhbnQgdG8gcmVwYXkgQVBULCBtaW50IHdpbGwgYmUgXCIweDE6OmFwdG9zX2NvaW46OkFwdG9zQ29pblwiXG4gICAgaWYgdXNlciBhZGRlZCBtaW50IGFzIGFzc2V0IG5hbWUsIGFuZCB5b3UgZG9uJ3QgaGF2ZSB0aGUgYWRkcmVzcyBvZiB0aGUgYXNzZXQsIHlvdSBjYW4gdXNlIHRoZSBmb2xsb3dpbmcgdG9rZW4gbmFtZXM6XG4gICAgWyd1c2R0JywgJ3p1c2R0JywgJ3p1c2RjJywgJ2FwdCcsICdzdGhhcHQnLCAnbW9kJywgJ3RobCcsICd3dXNkYycgLCAnendldGgnLCAnd3dldGgnLCAnY2FrZScsICdzdGFwdCcsICdhYnRjJywgJ3N0b25lJyAsICd0cnVhcHQnLCAnc2J0YyddXG4gICAgb3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW5cblxuICAgIElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKSAoSU1QT1JUQU5UKTpcbiAgICBhbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcbiAgICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW5CeVRva2VuTmFtZShwYXJzZWRJbnB1dC5taW50KSB8fCBnZXRUb2tlbkJ5VG9rZW5BZGRyZXNzKHBhcnNlZElucHV0Lm1pbnQpO1xuICAgICAgaWYgKCF0b2tlbikgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gbm90IGZvdW5kXCIpO1xuICAgICAgY29uc3QgbWludERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHRva2VuLnRva2VuQWRkcmVzcyk7XG4gICAgICBjb25zdCByZXBheVRva2VuVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5yZXBheVRva2VuV2l0aEVjaGVsb24oXG4gICAgICAgIHRva2VuLnRva2VuQWRkcmVzcyxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTgocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICB0b2tlbi5wb29sQWRkcmVzcyxcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLnNwbGl0KFwiOjpcIikubGVuZ3RoICE9PSAzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgcmVwYXlUb2tlblRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBtaW50RGV0YWlsLm5hbWUgfHwgXCJBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogbWludERldGFpbC5kZWNpbWFscyB8fCA4XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2VjaGVsb24vYm9ycm93LXRva2VuLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzMSB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hlbG9uQm9ycm93VG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzEge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaGVsb25fYm9ycm93X3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBib3Jyb3cgQVBULCB0b2tlbnMgb3IgZnVuZ2libGUgYXNzZXQgZnJvbSBhIHBvc2l0aW9uXG5cbiAgaWYgeW91IHdhbnQgdG8gYm9ycm93IEFQVCwgbWludCB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG4gIGlmIHVzZXIgYWRkZWQgbWludCBhcyBhc3NldCBuYW1lLCBhbmQgeW91IGRvbid0IGhhdmUgdGhlIGFkZHJlc3Mgb2YgdGhlIGFzc2V0LCB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHRva2VuIG5hbWVzOlxuICBbJ3VzZHQnLCAnenVzZHQnLCAnenVzZGMnLCAnYXB0JywgJ3N0aGFwdCcsICdtb2QnLCAndGhsJywgJ3d1c2RjJyAsICd6d2V0aCcsICd3d2V0aCcsICdjYWtlJywgJ3N0YXB0JywgJ2FidGMnLCAnc3RvbmUnICwgJ3RydWFwdCcsICdzYnRjJ11cbiAgb3Igd2hhdGV2ZXIgbmFtZSB0aGUgdXNlciBoYXMgcHJvdmlkZWQsIHlvdSBjYW4gdXNlIHRoZSB0b2tlbiBuYW1lIHRvIGdldCB0aGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gXG5cblxuICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICBtaW50OiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIG9yIFwidXNkdCAobmFtZSBvZiB0aGUgdG9rZW4pXCIgKHJlcXVpcmVkKVxuICBgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuQnlUb2tlbk5hbWUocGFyc2VkSW5wdXQubWludCkgfHwgZ2V0VG9rZW5CeVRva2VuQWRkcmVzcyhwYXJzZWRJbnB1dC5taW50KTtcbiAgICAgIGlmICghdG9rZW4pIHRocm93IG5ldyBFcnJvcihcIlRva2VuIG5vdCBmb3VuZFwiKTtcbiAgICAgIGNvbnN0IG1pbnREZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyh0b2tlbi50b2tlbkFkZHJlc3MpO1xuICAgICAgY29uc3QgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LmJvcnJvd1Rva2VuV2l0aEVjaGVsb24oXG4gICAgICAgIHRva2VuLnRva2VuQWRkcmVzcyxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMTkocGFyc2VkSW5wdXQuYW1vdW50LCBtaW50RGV0YWlsLmRlY2ltYWxzIHx8IDgpLFxuICAgICAgICB0b2tlbi5wb29sQWRkcmVzcyxcbiAgICAgICAgdG9rZW4udG9rZW5BZGRyZXNzLnNwbGl0KFwiOjpcIikubGVuZ3RoICE9PSAzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgYm9ycm93VG9rZW5UcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgbmFtZTogbWludERldGFpbC5uYW1lIHx8IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IG1pbnREZXRhaWwuZGVjaW1hbHMgfHwgOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hvL3N0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjAgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzMiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBFY2hvU3Rha2VUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzMiB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwiZWNob19zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gc3Rha2UgdG9rZW4gaW4gRWNob1xuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHN0YWtlVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5zdGFrZVRva2VuV2l0aEVjaG8oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIwKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBzdGFrZVRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiBcImVBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi9lY2hvL3Vuc3Rha2UudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yMSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDMzIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIEVjaG9VbnN0YWtlVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzMge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcImVjaG9fdW5zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gdW5zdGFrZSB0b2tlbiBpbiBFY2hvXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgdW5zdGFrZVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQudW5zdGFrZVRva2VuV2l0aEVjaG8oXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIxKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB1bnN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vb3BlbmFpL2NyZWF0ZS1pbWFnZS50c1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzQgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgT3BlbkFJQ3JlYXRlSW1hZ2VUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzQge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcIm9wZW5haV9jcmVhdGVfaW1hZ2VcIjtcbiAgZGVzY3JpcHRpb24gPSBgXG4gICAgR2VuZXJhdGUgYW4gaW1hZ2UgdXNpbmcgT3BlbkFJJ3MgREFMTC1FXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgcHJvbXB0OiBzdHJpbmcsIFRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGltYWdlIHRvIGdlbmVyYXRlIChyZXF1aXJlZClcbiAgICBzaXplOiBzdHJpbmcsIEltYWdlIHNpemUgKCcyNTZ4MjU2JywgJzUxMng1MTInLCBvciAnMTAyNHgxMDI0JykgKGRlZmF1bHQ6ICcxMDI0eDEwMjQnKVxuICAgIG46IG51bWJlciwgTnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZSAoZGVmYXVsdDogMSlgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWdlbnQuY3JlYXRlSW1hZ2VXaXRoT3BlbkFJKHBhcnNlZElucHV0LnByb21wdCwgcGFyc2VkSW5wdXQuc2l6ZSwgcGFyc2VkSW5wdXQubik7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZXNwb25zZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vcGFub3JhL3N3YXAudHNcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDM1IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFBhbm9yYVN3YXBUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzUge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInBhbm9yYV9hZ2dyZWdhdG9yX3N3YXBcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHN3YXAgdG9rZW5zIGluIHBhbm9yYSAtIGxpcXVpZGl0eSBhZ2dyZWdhdG9yIG9uIGFwdG9zXG5cblx0aWYgeW91IHdhbnQgdG8gc3dhcCBBUFQgYW5kIG9uZSBvZiB0aGUgdG9rZW4sIGZyb21Ub2tlbiB3aWxsIGJlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIlxuXG5cdElucHV0cyAoIGlucHV0IGlzIGEgSlNPTiBzdHJpbmcgKTpcblx0ZnJvbVRva2VuOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcblx0dG9Ub2tlbjogc3RyaW5nLCBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG5cdHN3YXBBbW91bnQ6IG51bWJlciwgZWcgMSBvciAwLjAxIChyZXF1aXJlZClcblx0dG9XYWxsZXRBZGRyZXNzOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhXCIgKG9wdGlvbmFsKVxuXHRgO1xuICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IHBhcnNlSnNvbihpbnB1dCk7XG4gICAgICBjb25zdCBtaW50WERldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0LmZyb21Ub2tlbik7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0LnRvVG9rZW4pO1xuICAgICAgY29uc3Qgc3dhcFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuc3dhcFdpdGhQYW5vcmEoXG4gICAgICAgIHBhcnNlZElucHV0LmZyb21Ub2tlbixcbiAgICAgICAgcGFyc2VkSW5wdXQudG9Ub2tlbixcbiAgICAgICAgcGFyc2VkSW5wdXQuc3dhcEFtb3VudCxcbiAgICAgICAgcGFyc2VkSW5wdXQudG9XYWxsZXRBZGRyZXNzXG4gICAgICApO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgc3dhcFRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WDogbWludFhEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WERldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWludFk6IG1pbnRZRGV0YWlsLm5hbWUsXG4gICAgICAgICAgICBkZWNpbWFsczogbWludFlEZXRhaWwuZGVjaW1hbHNcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL3RoYWxhL3N0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzNiB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBUaGFsYVN0YWtlVG9rZW5Ub29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzYge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3N0YWtlX3Rva2VuXCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBzdGFrZSB0aEFQVCBpbiBUaGFsYVxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHN0YWtlVHJhbnNhY3Rpb25IYXNoID0gYXdhaXQgdGhpcy5hZ2VudC5zdGFrZVRva2Vuc1dpdGhUaGFsYShcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjIocGFyc2VkSW5wdXQuYW1vdW50LCA4KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwidGhBUFRcIixcbiAgICAgICAgICBkZWNpbWFsczogOFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgXCJVTktOT1dOX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2xhbmdjaGFpbi90aGFsYS91bnN0YWtlLnRzXG5pbXBvcnQgeyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4gYXMgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjMgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBUb29sIGFzIFRvb2wzNyB9IGZyb20gXCJsYW5nY2hhaW4vdG9vbHNcIjtcbnZhciBUaGFsYVVuc3Rha2VUb2tlblRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzNyB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwidGhhbGFfdW5zdGFrZV90b2tlblwiO1xuICBkZXNjcmlwdGlvbiA9IGB0aGlzIHRvb2wgY2FuIGJlIHVzZWQgdG8gdW5zdGFrZSB0aEFQVCBpbiBUaGFsYVxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHVuc3Rha2VUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnVuc3Rha2VUb2tlbnNXaXRoVGhhbGEoXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjIzKHBhcnNlZElucHV0LmFtb3VudCwgOClcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICB1bnN0YWtlVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiQVBUXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvbWludC1tb2QudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDM4IH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFRoYWxhTWludE1PRFRvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wzOCB7XG4gIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gIH1cbiAgbmFtZSA9IFwidGhhbGFfbWludF9tb2RcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIG1pbnQgbW92ZSBkb2xsYXIgKE1PRCkgaW4gVGhhbGFcblxuICAgIE9ubHkgc3VwcG9ydGVkIGNvaW4gdHlwZXM6IGx6VVNEQywgd2hVU0RDLCBvciBVU0R0XG5cblx0aWYgdGhlIHVzZXIgY29pbiBpcyBub3QgaW4gdGhlIGxpc3QgLCBkZWZhdWx0IHRvIGx6VVNEQ1xuXG5cdG1pbnRUeXBlIGZvciBselVTREMgLSAweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RDXG5cdG1pbnRUeXBlIGZvciB3VVNEQyAtIDB4NWUxNTZmMTIwN2QwZWJmYTE5YTllZWZmMDBkNjJhMjgyMjc4ZmI4NzE5ZjRmYWIzYTU4NmEwYTJjMGZmZmJlYTo6Y29pbjo6VFxuXHRtaW50VHlwZSBmb3IgVVNEdCAtIDB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlxuXG4gICAgSW5wdXRzICggaW5wdXQgaXMgYSBKU09OIHN0cmluZyApOlxuICAgIG1pbnRUeXBlOiBlZyBcIjB4ZjIyYmVkZTIzN2EwN2UxMjFiNTZkOTFhNDkxZWI3YmNkZmQxZjU5MDc5MjZhOWU1ODMzOGY5NjRhMDFiMTdmYTo6YXNzZXQ6OlVTRFRcIiAocmVxdWlyZWQpXG4gICAgYW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludE1PRFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQubWludE1PRFdpdGhUaGFsYShcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFR5cGUsXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI0KHBhcnNlZElucHV0LmFtb3VudCwgNilcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBtaW50TU9EVHJhbnNhY3Rpb25IYXNoLFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIG5hbWU6IFwiTU9EXCIsXG4gICAgICAgICAgZGVjaW1hbHM6IDhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvcmVkZWVtLW1vZC50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI1IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sMzkgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgVGhhbGFSZWRlZW1NT0RUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sMzkge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3JlZGVlbV9tb2RcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlZGVlbSBtb3ZlIGRvbGxhciAoTU9EKSBpbiBUaGFsYVxuXG4gIE9ubHkgc3VwcG9ydGVkIGNvaW4gdHlwZXM6IGx6VVNEQywgd2hVU0RDLCBvciBVU0R0XG5cblx0aWYgdGhlIHVzZXIgY29pbiBpcyBub3QgaW4gdGhlIGxpc3QgLCBkZWZhdWx0IHRvIGx6VVNEQ1xuXG5cdG1pbnRUeXBlIGZvciBselVTREMgLSAweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RDXG5cdG1pbnRUeXBlIGZvciB3VVNEQyAtIDB4NWUxNTZmMTIwN2QwZWJmYTE5YTllZWZmMDBkNjJhMjgyMjc4ZmI4NzE5ZjRmYWIzYTU4NmEwYTJjMGZmZmJlYTo6Y29pbjo6VFxuXHRtaW50VHlwZSBmb3IgVVNEdCAtIDB4MzU3YjBiNzRiYzgzM2U5NWExMTVhZDIyNjA0ODU0ZDZiMGZjYTE1MWNlY2Q5NDExMTc3MGU1ZDZmZmM5ZGMyYlxuXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFR5cGU6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIGFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IHRva2VuRGV0YWlscyA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnRUeXBlKTtcbiAgICAgIGNvbnN0IHJlZGVlbU1PRFRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQucmVkZWVtTU9EV2l0aFRoYWxhKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50VHlwZSxcbiAgICAgICAgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluMjUocGFyc2VkSW5wdXQuYW1vdW50LCA2KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgIHJlZGVlbU1PRFRyYW5zYWN0aW9uSGFzaCxcbiAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICBuYW1lOiB0b2tlbkRldGFpbHMubmFtZSxcbiAgICAgICAgICBkZWNpbWFsczogdG9rZW5EZXRhaWxzLmRlY2ltYWxzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL3RoYWxhL2FkZC1saXF1aWRpdHkudHNcbmltcG9ydCB7IGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbiBhcyBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IFRvb2wgYXMgVG9vbDQwIH0gZnJvbSBcImxhbmdjaGFpbi90b29sc1wiO1xudmFyIFRoYWxhQWRkTGlxdWlkaXR5VG9vbCA9IGNsYXNzIGV4dGVuZHMgVG9vbDQwIHtcbiAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgfVxuICBuYW1lID0gXCJ0aGFsYV9hZGRfbGlxdWlkaXR5XCI7XG4gIGRlc2NyaXB0aW9uID0gYHRoaXMgdG9vbCBjYW4gYmUgdXNlZCB0byBhZGQgbGlxdWlkaXR5IHRvIGEgVGhhbGEgcG9vbFxuXG4gICAgSWYgeW91IHdhbnQgdG8gYWRkIEFQVCwgdXNlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyB0aGUgY29pbiB0eXBlXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICkgKElNUE9SVEFOVCk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIG1pbnRZOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgICBtaW50WEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIG1pbnRZQW1vdW50OiBudW1iZXIsIGVnIDEgb3IgMC4wMSAocmVxdWlyZWQpXG4gICAgYDtcbiAgYXN5bmMgX2NhbGwoaW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBwYXJzZUpzb24oaW5wdXQpO1xuICAgICAgY29uc3QgbWludFhEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50WCk7XG4gICAgICBjb25zdCBtaW50WURldGFpbCA9IGF3YWl0IHRoaXMuYWdlbnQuZ2V0VG9rZW5EZXRhaWxzKHBhcnNlZElucHV0Lm1pbnRZKTtcbiAgICAgIGNvbnN0IGFkZExpcXVpZGl0eVRyYW5zYWN0aW9uSGFzaCA9IGF3YWl0IHRoaXMuYWdlbnQuYWRkTGlxdWlkaXR5V2l0aFRoYWxhKFxuICAgICAgICBwYXJzZWRJbnB1dC5taW50WCxcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI2KHBhcnNlZElucHV0Lm1pbnRYQW1vdW50LCBtaW50WERldGFpbC5kZWNpbWFscyksXG4gICAgICAgIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI2KHBhcnNlZElucHV0Lm1pbnRZQW1vdW50LCBtaW50WURldGFpbC5kZWNpbWFscylcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICBhZGRMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IG1pbnRYRGV0YWlsLmRlY2ltYWxzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtaW50WTogbWludFlEZXRhaWwubmFtZSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiBtaW50WURldGFpbC5kZWNpbWFsc1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IFwiVU5LTk9XTl9FUlJPUlwiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9sYW5nY2hhaW4vdGhhbGEvcmVtb3ZlLWxpcXVpZGl0eS50c1xuaW1wb3J0IHsgY29udmVydEFtb3VudEZyb21IdW1hblJlYWRhYmxlVG9PbkNoYWluIGFzIGNvbnZlcnRBbW91bnRGcm9tSHVtYW5SZWFkYWJsZVRvT25DaGFpbjI3IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgVG9vbCBhcyBUb29sNDEgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzXCI7XG52YXIgVGhhbGFSZW1vdmVMaXF1aWRpdHlUb29sID0gY2xhc3MgZXh0ZW5kcyBUb29sNDEge1xuICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICB9XG4gIG5hbWUgPSBcInRoYWxhX3JlbW92ZV9saXF1aWRpdHlcIjtcbiAgZGVzY3JpcHRpb24gPSBgdGhpcyB0b29sIGNhbiBiZSB1c2VkIHRvIHJlbW92ZSBsaXF1aWRpdHkgZnJvbSBhIFRoYWxhIHBvb2xcblxuICAgIElmIG9uZSBvZiB5b3VyIGNvaW5zIGlzIEFQVCwgdXNlIFwiMHgxOjphcHRvc19jb2luOjpBcHRvc0NvaW5cIiBhcyB0aGUgY29pbiB0eXBlXG5cbiAgICBJbnB1dHMgKCBpbnB1dCBpcyBhIEpTT04gc3RyaW5nICk6XG4gICAgbWludFg6IHN0cmluZywgZWcgXCIweGYyMmJlZGUyMzdhMDdlMTIxYjU2ZDkxYTQ5MWViN2JjZGZkMWY1OTA3OTI2YTllNTgzMzhmOTY0YTAxYjE3ZmE6OmFzc2V0OjpVU0RUXCIgKHJlcXVpcmVkKVxuICAgIG1pbnRZOiBzdHJpbmcsIGVnIFwiMHhmMjJiZWRlMjM3YTA3ZTEyMWI1NmQ5MWE0OTFlYjdiY2RmZDFmNTkwNzkyNmE5ZTU4MzM4Zjk2NGEwMWIxN2ZhOjphc3NldDo6VVNEVFwiIChyZXF1aXJlZClcbiAgICBscEFtb3VudDogbnVtYmVyLCBlZyAxIG9yIDAuMDEgKHJlcXVpcmVkKVxuICAgIGA7XG4gIGFzeW5jIF9jYWxsKGlucHV0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VKc29uKGlucHV0KTtcbiAgICAgIGNvbnN0IG1pbnRYRGV0YWlsID0gYXdhaXQgdGhpcy5hZ2VudC5nZXRUb2tlbkRldGFpbHMocGFyc2VkSW5wdXQubWludFgpO1xuICAgICAgY29uc3QgbWludFlEZXRhaWwgPSBhd2FpdCB0aGlzLmFnZW50LmdldFRva2VuRGV0YWlscyhwYXJzZWRJbnB1dC5taW50WSk7XG4gICAgICBjb25zdCByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2ggPSBhd2FpdCB0aGlzLmFnZW50LnJlbW92ZUxpcXVpZGl0eVdpdGhUaGFsYShcbiAgICAgICAgcGFyc2VkSW5wdXQubWludFgsXG4gICAgICAgIHBhcnNlZElucHV0Lm1pbnRZLFxuICAgICAgICBjb252ZXJ0QW1vdW50RnJvbUh1bWFuUmVhZGFibGVUb09uQ2hhaW4yNyhwYXJzZWRJbnB1dC5scEFtb3VudCwgNilcbiAgICAgICk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgICByZW1vdmVMaXF1aWRpdHlUcmFuc2FjdGlvbkhhc2gsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRYOiBtaW50WERldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IDZcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbnRZOiBtaW50WURldGFpbC5uYW1lLFxuICAgICAgICAgICAgZGVjaW1hbHM6IDZcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXJyb3IuY29kZSB8fCBcIlVOS05PV05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBzcmMvbGFuZ2NoYWluL2luZGV4LnRzXG52YXIgY3JlYXRlQXB0b3NUb29scyA9IChhZ2VudCwgY29uZmlnID0ge30pID0+IHtcbiAgY29uc3QgdG9vbHMgPSBbXG4gICAgLy8gQXB0b3MgdG9vbHNcbiAgICBuZXcgQXB0b3NCYWxhbmNlVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zQWNjb3VudEFkZHJlc3NUb29sKGFnZW50KSxcbiAgICBuZXcgQXB0b3NUcmFuc2ZlclRva2VuVG9vbChhZ2VudCksXG4gICAgLy8gbmV3IEFwdG9zQnVybk5GVFRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc0J1cm5Ub2tlblRvb2woYWdlbnQpLFxuICAgIC8vIG5ldyBBcHRvc1RyYW5zZmVyTkZUVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zVHJhbnNhY3Rpb25Ub29sKGFnZW50KSxcbiAgICBuZXcgQXB0b3NHZXRUb2tlbkRldGFpbFRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc01pbnRUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBBcHRvc0NyZWF0ZVRva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEFwdG9zR2V0VG9rZW5QcmljZVRvb2woYWdlbnQpLFxuICAgIC8vIEFtbmlzIHRvb2xzXG4gICAgbmV3IEFtbmlzU3Rha2VUb29sKGFnZW50KSxcbiAgICBuZXcgQW1uaXNXaXRoZHJhd1N0YWtlVG9vbChhZ2VudCksXG4gICAgLy8gSm91bGUgdG9vbHNcbiAgICBuZXcgSm91bGVMZW5kVG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgSm91bGVXaXRoZHJhd1Rva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEpvdWxlQm9ycm93VG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgSm91bGVSZXBheVRva2VuVG9vbChhZ2VudCksXG4gICAgbmV3IEpvdWxlR2V0UG9vbERldGFpbHMoYWdlbnQpLFxuICAgIG5ldyBKb3VsZUdldFVzZXJQb3NpdGlvbihhZ2VudCksXG4gICAgbmV3IEpvdWxlR2V0VXNlckFsbFBvc2l0aW9ucyhhZ2VudCksXG4gICAgLy8gTGlxdWlkU3dhcCB0b29sc1xuICAgIG5ldyBMaXF1aWRTd2FwQ3JlYXRlUG9vbFRvb2woYWdlbnQpLFxuICAgIG5ldyBMaXF1aWRTd2FwQWRkTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IExpcXVpZFN3YXBSZW1vdmVMaXF1aWRpdHlUb29sKGFnZW50KSxcbiAgICBuZXcgTGlxdWlkU3dhcFN3YXBUb29sKGFnZW50KSxcbiAgICAvLyBBcmllcyB0b29sc1xuICAgIG5ldyBBcmllc0NyZWF0ZVByb2ZpbGVUb29sKGFnZW50KSxcbiAgICBuZXcgQXJpZXNXaXRoZHJhd1Rvb2woYWdlbnQpLFxuICAgIG5ldyBBcmllc0JvcnJvd1Rvb2woYWdlbnQpLFxuICAgIG5ldyBBcmllc0xlbmRUb29sKGFnZW50KSxcbiAgICBuZXcgQXJpZXNSZXBheVRvb2woYWdlbnQpLFxuICAgIC8vIFRoYWxhIHRvb2xzXG4gICAgbmV3IFRoYWxhQWRkTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IFRoYWxhUmVtb3ZlTGlxdWlkaXR5VG9vbChhZ2VudCksXG4gICAgbmV3IFRoYWxhTWludE1PRFRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVJlZGVlbU1PRFRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVVuc3Rha2VUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBUaGFsYVN0YWtlVG9rZW5Ub29sKGFnZW50KSxcbiAgICAvLyBQYW5vcmEgdG9vbHNcbiAgICBuZXcgUGFub3JhU3dhcFRvb2woYWdlbnQpLFxuICAgIC8vIE9wZW5BSSB0b29sc1xuICAgIG5ldyBPcGVuQUlDcmVhdGVJbWFnZVRvb2woYWdlbnQpLFxuICAgIC8vIEVjaG8gdG9vbHNcbiAgICBuZXcgRWNob1N0YWtlVG9rZW5Ub29sKGFnZW50KSxcbiAgICBuZXcgRWNob1Vuc3Rha2VUb2tlblRvb2woYWdlbnQpLFxuICAgIC8vIEVjaGVsb24gdG9vbHNcbiAgICBuZXcgRWNoZWxvbkxlbmRUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uV2l0aGRyYXdUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uUmVwYXlUb2tlblRvb2woYWdlbnQpLFxuICAgIG5ldyBFY2hlbG9uQm9ycm93VG9rZW5Ub29sKGFnZW50KVxuICBdO1xuICByZXR1cm4gY29uZmlnLmZpbHRlciA/IHRvb2xzLmZpbHRlcigodG9vbCkgPT4gY29uZmlnPy5maWx0ZXI/LmluY2x1ZGVzKHRvb2wubmFtZSkpIDogdG9vbHM7XG59O1xuZXhwb3J0IHtcbiAgQWdlbnRSdW50aW1lLFxuICBBbW5pc1N0YWtlVG9vbCxcbiAgQW1uaXNXaXRoZHJhd1N0YWtlVG9vbCxcbiAgQXB0b3NBY2NvdW50QWRkcmVzc1Rvb2wsXG4gIEFwdG9zQmFsYW5jZVRvb2wsXG4gIEFwdG9zQnVyblRva2VuVG9vbCxcbiAgQXB0b3NDcmVhdGVUb2tlblRvb2wsXG4gIEFwdG9zR2V0VG9rZW5EZXRhaWxUb29sLFxuICBBcHRvc0dldFRva2VuUHJpY2VUb29sLFxuICBBcHRvc01pbnRUb2tlblRvb2wsXG4gIEFwdG9zVHJhbnNhY3Rpb25Ub29sLFxuICBBcHRvc1RyYW5zZmVyVG9rZW5Ub29sLFxuICBBcmllc0JvcnJvd1Rvb2wsXG4gIEFyaWVzQ3JlYXRlUHJvZmlsZVRvb2wsXG4gIEFyaWVzTGVuZFRvb2wsXG4gIEFyaWVzUmVwYXlUb29sLFxuICBBcmllc1dpdGhkcmF3VG9vbCxcbiAgQmFzZVNpZ25lcixcbiAgRWNoZWxvbkJvcnJvd1Rva2VuVG9vbCxcbiAgRWNoZWxvbkxlbmRUb2tlblRvb2wsXG4gIEVjaGVsb25SZXBheVRva2VuVG9vbCxcbiAgRWNoZWxvbldpdGhkcmF3VG9rZW5Ub29sLFxuICBFY2hvU3Rha2VUb2tlblRvb2wsXG4gIEVjaG9VbnN0YWtlVG9rZW5Ub29sLFxuICBKb3VsZUJvcnJvd1Rva2VuVG9vbCxcbiAgSm91bGVHZXRQb29sRGV0YWlscyxcbiAgSm91bGVHZXRVc2VyQWxsUG9zaXRpb25zLFxuICBKb3VsZUdldFVzZXJQb3NpdGlvbixcbiAgSm91bGVMZW5kVG9rZW5Ub29sLFxuICBKb3VsZVJlcGF5VG9rZW5Ub29sLFxuICBKb3VsZVdpdGhkcmF3VG9rZW5Ub29sLFxuICBMaXF1aWRTd2FwQWRkTGlxdWlkaXR5VG9vbCxcbiAgTGlxdWlkU3dhcENyZWF0ZVBvb2xUb29sLFxuICBMaXF1aWRTd2FwUmVtb3ZlTGlxdWlkaXR5VG9vbCxcbiAgTGlxdWlkU3dhcFN3YXBUb29sLFxuICBMb2NhbFNpZ25lcixcbiAgT3BlbkFJQ3JlYXRlSW1hZ2VUb29sLFxuICBQYW5vcmFTd2FwVG9vbCxcbiAgVGhhbGFBZGRMaXF1aWRpdHlUb29sLFxuICBUaGFsYU1pbnRNT0RUb29sLFxuICBUaGFsYVJlZGVlbU1PRFRvb2wsXG4gIFRoYWxhUmVtb3ZlTGlxdWlkaXR5VG9vbCxcbiAgVGhhbGFTdGFrZVRva2VuVG9vbCxcbiAgVGhhbGFVbnN0YWtlVG9rZW5Ub29sLFxuICBXYWxsZXRTaWduZXIsXG4gIGNyZWF0ZUFwdG9zVG9vbHMsXG4gIHBhcnNlSnNvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/move-agent-kit@0.1.3_@aptos-labs+ts-sdk@1.35.0_axios@1.7.9_got@11.8.6__@aptos-labs+wallet-ada_gjjxnooyl53gptg3emkop5uql4/node_modules/move-agent-kit/dist/index.mjs\n");

/***/ })

};
;