"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme";
exports.ids = ["vendor-chunks/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChannel: () => (/* binding */ BaseChannel),\n/* harmony export */   createCheckpoint: () => (/* binding */ createCheckpoint),\n/* harmony export */   emptyChannels: () => (/* binding */ emptyChannels),\n/* harmony export */   isBaseChannel: () => (/* binding */ isBaseChannel)\n/* harmony export */ });\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.15_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferu_wxyqc73w5wk4lx2cfu5zaddqqi/node_modules/@langchain/langgraph-checkpoint/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n\n\nfunction isBaseChannel(obj) {\n    return obj != null && obj.lg_is_channel === true;\n}\nclass BaseChannel {\n    constructor() {\n        Object.defineProperty(this, \"ValueType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"UpdateType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */\n        Object.defineProperty(this, \"lg_is_channel\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    /**\n     * Mark the current value of the channel as consumed. By default, no-op.\n     * This is called by Pregel before the start of the next step, for all\n     * channels that triggered a node. If the channel was updated, return true.\n     */\n    consume() {\n        return false;\n    }\n}\nfunction emptyChannels(channels, checkpoint) {\n    const filteredChannels = Object.fromEntries(Object.entries(channels).filter(([, value]) => isBaseChannel(value)));\n    const newChannels = {};\n    for (const k in filteredChannels) {\n        if (Object.prototype.hasOwnProperty.call(filteredChannels, k)) {\n            const channelValue = checkpoint.channel_values[k];\n            newChannels[k] = filteredChannels[k].fromCheckpoint(channelValue);\n        }\n    }\n    return newChannels;\n}\nfunction createCheckpoint(checkpoint, channels, step) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let values;\n    if (channels === undefined) {\n        values = checkpoint.channel_values;\n    }\n    else {\n        values = {};\n        for (const k of Object.keys(channels)) {\n            try {\n                values[k] = channels[k].checkpoint();\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (error) {\n                if (error.name === _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError.unminifiable_name) {\n                    // no-op\n                }\n                else {\n                    throw error; // Rethrow unexpected errors\n                }\n            }\n        }\n    }\n    return {\n        v: 1,\n        id: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.uuid6)(step),\n        ts: new Date().toISOString(),\n        channel_values: values,\n        channel_versions: { ...checkpoint.channel_versions },\n        versions_seen: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.deepCopy)(checkpoint.versions_seen),\n        pending_sends: checkpoint.pending_sends ?? [],\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1FO0FBQ2xCO0FBQzFDO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQWlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNFQUFLO0FBQ2pCO0FBQ0E7QUFDQSw0QkFBNEIsZ0NBQWdDO0FBQzVELHVCQUF1Qix5RUFBUTtBQUMvQjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWVwQ29weSwgdXVpZDYsIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbmltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZUNoYW5uZWwob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iai5sZ19pc19jaGFubmVsID09PSB0cnVlO1xufVxuZXhwb3J0IGNsYXNzIEJhc2VDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiVmFsdWVUeXBlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIlVwZGF0ZVR5cGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGdfaXNfY2hhbm5lbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgY2hhbm5lbCBhcyBjb25zdW1lZC4gQnkgZGVmYXVsdCwgbm8tb3AuXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYnkgUHJlZ2VsIGJlZm9yZSB0aGUgc3RhcnQgb2YgdGhlIG5leHQgc3RlcCwgZm9yIGFsbFxuICAgICAqIGNoYW5uZWxzIHRoYXQgdHJpZ2dlcmVkIGEgbm9kZS4gSWYgdGhlIGNoYW5uZWwgd2FzIHVwZGF0ZWQsIHJldHVybiB0cnVlLlxuICAgICAqL1xuICAgIGNvbnN1bWUoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW1wdHlDaGFubmVscyhjaGFubmVscywgY2hlY2twb2ludCkge1xuICAgIGNvbnN0IGZpbHRlcmVkQ2hhbm5lbHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2hhbm5lbHMpLmZpbHRlcigoWywgdmFsdWVdKSA9PiBpc0Jhc2VDaGFubmVsKHZhbHVlKSkpO1xuICAgIGNvbnN0IG5ld0NoYW5uZWxzID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIGZpbHRlcmVkQ2hhbm5lbHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChmaWx0ZXJlZENoYW5uZWxzLCBrKSkge1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbFZhbHVlID0gY2hlY2twb2ludC5jaGFubmVsX3ZhbHVlc1trXTtcbiAgICAgICAgICAgIG5ld0NoYW5uZWxzW2tdID0gZmlsdGVyZWRDaGFubmVsc1trXS5mcm9tQ2hlY2twb2ludChjaGFubmVsVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdDaGFubmVscztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGVja3BvaW50KGNoZWNrcG9pbnQsIGNoYW5uZWxzLCBzdGVwKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgdmFsdWVzO1xuICAgIGlmIChjaGFubmVscyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlcyA9IGNoZWNrcG9pbnQuY2hhbm5lbF92YWx1ZXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKGNoYW5uZWxzKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNba10gPSBjaGFubmVsc1trXS5jaGVja3BvaW50KCk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBuby1vcFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJldGhyb3cgdW5leHBlY3RlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdjogMSxcbiAgICAgICAgaWQ6IHV1aWQ2KHN0ZXApLFxuICAgICAgICB0czogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBjaGFubmVsX3ZhbHVlczogdmFsdWVzLFxuICAgICAgICBjaGFubmVsX3ZlcnNpb25zOiB7IC4uLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyB9LFxuICAgICAgICB2ZXJzaW9uc19zZWVuOiBkZWVwQ29weShjaGVja3BvaW50LnZlcnNpb25zX3NlZW4pLFxuICAgICAgICBwZW5kaW5nX3NlbmRzOiBjaGVja3BvaW50LnBlbmRpbmdfc2VuZHMgPz8gW10sXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/binop.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/binop.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BinaryOperatorAggregate: () => (/* binding */ BinaryOperatorAggregate)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n/**\n * Stores the result of applying a binary operator to the current value and each new value.\n */\nclass BinaryOperatorAggregate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n    constructor(operator, initialValueFactory) {\n        super();\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"BinaryOperatorAggregate\"\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"operator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"initialValueFactory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.operator = operator;\n        this.initialValueFactory = initialValueFactory;\n        this.value = initialValueFactory?.();\n    }\n    fromCheckpoint(checkpoint) {\n        const empty = new BinaryOperatorAggregate(this.operator, this.initialValueFactory);\n        if (checkpoint) {\n            empty.value = checkpoint;\n        }\n        return empty;\n    }\n    update(values) {\n        let newValues = values;\n        if (!newValues.length)\n            return false;\n        if (this.value === undefined) {\n            [this.value] = newValues;\n            newValues = newValues.slice(1);\n        }\n        for (const value of newValues) {\n            if (this.value !== undefined) {\n                this.value = this.operator(this.value, value);\n            }\n        }\n        return true;\n    }\n    get() {\n        if (this.value === undefined) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value;\n    }\n    checkpoint() {\n        if (this.value === undefined) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2Jpbm9wLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpRDtBQUNUO0FBQ3hDO0FBQ0E7QUFDQTtBQUNPLHNDQUFzQyxpREFBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvYmlub3AuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1wdHlDaGFubmVsRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhbm5lbCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogU3RvcmVzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBiaW5hcnkgb3BlcmF0b3IgdG8gdGhlIGN1cnJlbnQgdmFsdWUgYW5kIGVhY2ggbmV3IHZhbHVlLlxuICovXG5leHBvcnQgY2xhc3MgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG4gICAgY29uc3RydWN0b3Iob3BlcmF0b3IsIGluaXRpYWxWYWx1ZUZhY3RvcnkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcGVyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbml0aWFsVmFsdWVGYWN0b3J5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgdGhpcy5pbml0aWFsVmFsdWVGYWN0b3J5ID0gaW5pdGlhbFZhbHVlRmFjdG9yeTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGluaXRpYWxWYWx1ZUZhY3Rvcnk/LigpO1xuICAgIH1cbiAgICBmcm9tQ2hlY2twb2ludChjaGVja3BvaW50KSB7XG4gICAgICAgIGNvbnN0IGVtcHR5ID0gbmV3IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlKHRoaXMub3BlcmF0b3IsIHRoaXMuaW5pdGlhbFZhbHVlRmFjdG9yeSk7XG4gICAgICAgIGlmIChjaGVja3BvaW50KSB7XG4gICAgICAgICAgICBlbXB0eS52YWx1ZSA9IGNoZWNrcG9pbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH1cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIGlmICghbmV3VmFsdWVzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgW3RoaXMudmFsdWVdID0gbmV3VmFsdWVzO1xuICAgICAgICAgICAgbmV3VmFsdWVzID0gbmV3VmFsdWVzLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgbmV3VmFsdWVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub3BlcmF0b3IodGhpcy52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBjaGVja3BvaW50KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/binop.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EphemeralValue: () => (/* binding */ EphemeralValue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/index.js\");\n\n\n/**\n * Stores the value received in the step immediately preceding, clears after.\n * @internal\n */\nclass EphemeralValue extends _index_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n    constructor(guard = true) {\n        super();\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"EphemeralValue\"\n        });\n        Object.defineProperty(this, \"guard\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // value is an array so we don't misinterpret an update to undefined as no write\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.guard = guard;\n    }\n    fromCheckpoint(checkpoint) {\n        const empty = new EphemeralValue(this.guard);\n        if (checkpoint) {\n            empty.value = [checkpoint];\n        }\n        return empty;\n    }\n    update(values) {\n        if (values.length === 0) {\n            const updated = this.value.length > 0;\n            // If there are no updates for this specific channel at the end of the step, wipe it.\n            this.value = [];\n            return updated;\n        }\n        if (values.length !== 1 && this.guard) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"EphemeralValue can only receive one value per step.\");\n        }\n        // eslint-disable-next-line prefer-destructuring\n        this.value = [values[values.length - 1]];\n        return true;\n    }\n    get() {\n        if (this.value.length === 0) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value[0];\n    }\n    checkpoint() {\n        if (this.value.length === 0) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value[0];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2VwaGVtZXJhbF92YWx1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUU7QUFDNUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDTyw2QkFBNkIsa0RBQVc7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseURBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseURBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2VwaGVtZXJhbF92YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuLyoqXG4gKiBTdG9yZXMgdGhlIHZhbHVlIHJlY2VpdmVkIGluIHRoZSBzdGVwIGltbWVkaWF0ZWx5IHByZWNlZGluZywgY2xlYXJzIGFmdGVyLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBFcGhlbWVyYWxWYWx1ZSBleHRlbmRzIEJhc2VDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3RvcihndWFyZCA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJFcGhlbWVyYWxWYWx1ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJndWFyZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyB2YWx1ZSBpcyBhbiBhcnJheSBzbyB3ZSBkb24ndCBtaXNpbnRlcnByZXQgYW4gdXBkYXRlIHRvIHVuZGVmaW5lZCBhcyBubyB3cml0ZVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ3VhcmQgPSBndWFyZDtcbiAgICB9XG4gICAgZnJvbUNoZWNrcG9pbnQoY2hlY2twb2ludCkge1xuICAgICAgICBjb25zdCBlbXB0eSA9IG5ldyBFcGhlbWVyYWxWYWx1ZSh0aGlzLmd1YXJkKTtcbiAgICAgICAgaWYgKGNoZWNrcG9pbnQpIHtcbiAgICAgICAgICAgIGVtcHR5LnZhbHVlID0gW2NoZWNrcG9pbnRdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbXB0eTtcbiAgICB9XG4gICAgdXBkYXRlKHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMudmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyB1cGRhdGVzIGZvciB0aGlzIHNwZWNpZmljIGNoYW5uZWwgYXQgdGhlIGVuZCBvZiB0aGUgc3RlcCwgd2lwZSBpdC5cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoICE9PSAxICYmIHRoaXMuZ3VhcmQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJFcGhlbWVyYWxWYWx1ZSBjYW4gb25seSByZWNlaXZlIG9uZSB2YWx1ZSBwZXIgc3RlcC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHRoaXMudmFsdWUgPSBbdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXV07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF07XG4gICAgfVxuICAgIGNoZWNrcG9pbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/index.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/index.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChannel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseChannel),\n/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _binop_js__WEBPACK_IMPORTED_MODULE_1__.BinaryOperatorAggregate),\n/* harmony export */   createCheckpoint: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.createCheckpoint),\n/* harmony export */   empty: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.emptyChannels)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _binop_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binop.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/binop.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtRjtBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBCYXNlQ2hhbm5lbCwgY3JlYXRlQ2hlY2twb2ludCwgZW1wdHlDaGFubmVscyBhcyBlbXB0eSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgeyBCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZSB9IGZyb20gXCIuL2Jpbm9wLmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/last_value.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/last_value.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LastValue: () => (/* binding */ LastValue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n/**\n * Stores the last value received, can receive at most one value per step.\n *\n * Since `update` is only called once per step and value can only be of length 1,\n * LastValue always stores the last value of a single node. If multiple nodes attempt to\n * write to this channel in a single step, an error will be thrown.\n * @internal\n */\nclass LastValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"LastValue\"\n        });\n        // value is an array so we don't misinterpret an update to undefined as no write\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    fromCheckpoint(checkpoint) {\n        const empty = new LastValue();\n        if (checkpoint) {\n            empty.value = [checkpoint];\n        }\n        return empty;\n    }\n    update(values) {\n        if (values.length === 0) {\n            return false;\n        }\n        if (values.length !== 1) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"LastValue can only receive one value per step.\", {\n                lc_error_code: \"INVALID_CONCURRENT_GRAPH_UPDATE\",\n            });\n        }\n        // eslint-disable-next-line prefer-destructuring\n        this.value = [values[values.length - 1]];\n        return true;\n    }\n    get() {\n        if (this.value.length === 0) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value[0];\n    }\n    checkpoint() {\n        if (this.value.length === 0) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return this.value[0];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2xhc3RfdmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFFO0FBQzdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyx3QkFBd0IsaURBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBEQUFrQjtBQUN4QztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvbGFzdF92YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFN0b3JlcyB0aGUgbGFzdCB2YWx1ZSByZWNlaXZlZCwgY2FuIHJlY2VpdmUgYXQgbW9zdCBvbmUgdmFsdWUgcGVyIHN0ZXAuXG4gKlxuICogU2luY2UgYHVwZGF0ZWAgaXMgb25seSBjYWxsZWQgb25jZSBwZXIgc3RlcCBhbmQgdmFsdWUgY2FuIG9ubHkgYmUgb2YgbGVuZ3RoIDEsXG4gKiBMYXN0VmFsdWUgYWx3YXlzIHN0b3JlcyB0aGUgbGFzdCB2YWx1ZSBvZiBhIHNpbmdsZSBub2RlLiBJZiBtdWx0aXBsZSBub2RlcyBhdHRlbXB0IHRvXG4gKiB3cml0ZSB0byB0aGlzIGNoYW5uZWwgaW4gYSBzaW5nbGUgc3RlcCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIExhc3RWYWx1ZSBleHRlbmRzIEJhc2VDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJMYXN0VmFsdWVcIlxuICAgICAgICB9KTtcbiAgICAgICAgLy8gdmFsdWUgaXMgYW4gYXJyYXkgc28gd2UgZG9uJ3QgbWlzaW50ZXJwcmV0IGFuIHVwZGF0ZSB0byB1bmRlZmluZWQgYXMgbm8gd3JpdGVcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmcm9tQ2hlY2twb2ludChjaGVja3BvaW50KSB7XG4gICAgICAgIGNvbnN0IGVtcHR5ID0gbmV3IExhc3RWYWx1ZSgpO1xuICAgICAgICBpZiAoY2hlY2twb2ludCkge1xuICAgICAgICAgICAgZW1wdHkudmFsdWUgPSBbY2hlY2twb2ludF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH1cbiAgICB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJMYXN0VmFsdWUgY2FuIG9ubHkgcmVjZWl2ZSBvbmUgdmFsdWUgcGVyIHN0ZXAuXCIsIHtcbiAgICAgICAgICAgICAgICBsY19lcnJvcl9jb2RlOiBcIklOVkFMSURfQ09OQ1VSUkVOVF9HUkFQSF9VUERBVEVcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB0aGlzLnZhbHVlID0gW3ZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV1dO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdO1xuICAgIH1cbiAgICBjaGVja3BvaW50KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/last_value.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NamedBarrierValue: () => (/* binding */ NamedBarrierValue),\n/* harmony export */   areSetsEqual: () => (/* binding */ areSetsEqual)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\nconst areSetsEqual = (a, b) => a.size === b.size && [...a].every((value) => b.has(value));\n/**\n * A channel that waits until all named values are received before making the value available.\n *\n * This ensures that if node N and node M both write to channel C, the value of C will not be updated\n * until N and M have completed updating.\n * @internal\n */\nclass NamedBarrierValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n    constructor(names) {\n        super();\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"NamedBarrierValue\"\n        });\n        Object.defineProperty(this, \"names\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // Names of nodes that we want to wait for.\n        Object.defineProperty(this, \"seen\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.names = names;\n        this.seen = new Set();\n    }\n    fromCheckpoint(checkpoint) {\n        const empty = new NamedBarrierValue(this.names);\n        if (checkpoint) {\n            empty.seen = new Set(checkpoint);\n        }\n        return empty;\n    }\n    update(values) {\n        let updated = false;\n        for (const nodeName of values) {\n            if (this.names.has(nodeName)) {\n                if (!this.seen.has(nodeName)) {\n                    this.seen.add(nodeName);\n                    updated = true;\n                }\n            }\n            else {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Value ${JSON.stringify(nodeName)} not in names ${JSON.stringify(this.names)}`);\n            }\n        }\n        return updated;\n    }\n    // If we have not yet seen all the node names we want to wait for,\n    // throw an error to prevent continuing.\n    get() {\n        if (!areSetsEqual(this.names, this.seen)) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n        }\n        return undefined;\n    }\n    checkpoint() {\n        return [...this.seen];\n    }\n    consume() {\n        if (this.seen && this.names && areSetsEqual(this.seen, this.names)) {\n            this.seen = new Set();\n            return true;\n        }\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL25hbWVkX2JhcnJpZXJfdmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRTtBQUM3QjtBQUNqQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sZ0NBQWdDLGlEQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLEdBQUc7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMERBQWtCLFVBQVUsMEJBQTBCLGVBQWUsMkJBQTJCO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseURBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvbmFtZWRfYmFycmllcl92YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY29uc3QgYXJlU2V0c0VxdWFsID0gKGEsIGIpID0+IGEuc2l6ZSA9PT0gYi5zaXplICYmIFsuLi5hXS5ldmVyeSgodmFsdWUpID0+IGIuaGFzKHZhbHVlKSk7XG4vKipcbiAqIEEgY2hhbm5lbCB0aGF0IHdhaXRzIHVudGlsIGFsbCBuYW1lZCB2YWx1ZXMgYXJlIHJlY2VpdmVkIGJlZm9yZSBtYWtpbmcgdGhlIHZhbHVlIGF2YWlsYWJsZS5cbiAqXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCBpZiBub2RlIE4gYW5kIG5vZGUgTSBib3RoIHdyaXRlIHRvIGNoYW5uZWwgQywgdGhlIHZhbHVlIG9mIEMgd2lsbCBub3QgYmUgdXBkYXRlZFxuICogdW50aWwgTiBhbmQgTSBoYXZlIGNvbXBsZXRlZCB1cGRhdGluZy5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgTmFtZWRCYXJyaWVyVmFsdWUgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG4gICAgY29uc3RydWN0b3IobmFtZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJOYW1lZEJhcnJpZXJWYWx1ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pOyAvLyBOYW1lcyBvZiBub2RlcyB0aGF0IHdlIHdhbnQgdG8gd2FpdCBmb3IuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlZW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYW1lcyA9IG5hbWVzO1xuICAgICAgICB0aGlzLnNlZW4gPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIGZyb21DaGVja3BvaW50KGNoZWNrcG9pbnQpIHtcbiAgICAgICAgY29uc3QgZW1wdHkgPSBuZXcgTmFtZWRCYXJyaWVyVmFsdWUodGhpcy5uYW1lcyk7XG4gICAgICAgIGlmIChjaGVja3BvaW50KSB7XG4gICAgICAgICAgICBlbXB0eS5zZWVuID0gbmV3IFNldChjaGVja3BvaW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfVxuICAgIHVwZGF0ZSh2YWx1ZXMpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBub2RlTmFtZSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWVzLmhhcyhub2RlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2Vlbi5oYXMobm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vlbi5hZGQobm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBWYWx1ZSAke0pTT04uc3RyaW5naWZ5KG5vZGVOYW1lKX0gbm90IGluIG5hbWVzICR7SlNPTi5zdHJpbmdpZnkodGhpcy5uYW1lcyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgfVxuICAgIC8vIElmIHdlIGhhdmUgbm90IHlldCBzZWVuIGFsbCB0aGUgbm9kZSBuYW1lcyB3ZSB3YW50IHRvIHdhaXQgZm9yLFxuICAgIC8vIHRocm93IGFuIGVycm9yIHRvIHByZXZlbnQgY29udGludWluZy5cbiAgICBnZXQoKSB7XG4gICAgICAgIGlmICghYXJlU2V0c0VxdWFsKHRoaXMubmFtZXMsIHRoaXMuc2VlbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNoZWNrcG9pbnQoKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5zZWVuXTtcbiAgICB9XG4gICAgY29uc3VtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VlbiAmJiB0aGlzLm5hbWVzICYmIGFyZVNldHNFcXVhbCh0aGlzLnNlZW4sIHRoaXMubmFtZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnNlZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CHECKPOINT_NAMESPACE_END: () => (/* binding */ CHECKPOINT_NAMESPACE_END),\n/* harmony export */   CHECKPOINT_NAMESPACE_SEPARATOR: () => (/* binding */ CHECKPOINT_NAMESPACE_SEPARATOR),\n/* harmony export */   CONFIG_KEY_CALL: () => (/* binding */ CONFIG_KEY_CALL),\n/* harmony export */   CONFIG_KEY_CHECKPOINTER: () => (/* binding */ CONFIG_KEY_CHECKPOINTER),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_ID: () => (/* binding */ CONFIG_KEY_CHECKPOINT_ID),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_MAP: () => (/* binding */ CONFIG_KEY_CHECKPOINT_MAP),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_NS: () => (/* binding */ CONFIG_KEY_CHECKPOINT_NS),\n/* harmony export */   CONFIG_KEY_PREVIOUS_STATE: () => (/* binding */ CONFIG_KEY_PREVIOUS_STATE),\n/* harmony export */   CONFIG_KEY_READ: () => (/* binding */ CONFIG_KEY_READ),\n/* harmony export */   CONFIG_KEY_RESUME_VALUE: () => (/* binding */ CONFIG_KEY_RESUME_VALUE),\n/* harmony export */   CONFIG_KEY_RESUMING: () => (/* binding */ CONFIG_KEY_RESUMING),\n/* harmony export */   CONFIG_KEY_SCRATCHPAD: () => (/* binding */ CONFIG_KEY_SCRATCHPAD),\n/* harmony export */   CONFIG_KEY_SEND: () => (/* binding */ CONFIG_KEY_SEND),\n/* harmony export */   CONFIG_KEY_STREAM: () => (/* binding */ CONFIG_KEY_STREAM),\n/* harmony export */   CONFIG_KEY_TASK_ID: () => (/* binding */ CONFIG_KEY_TASK_ID),\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   END: () => (/* binding */ END),\n/* harmony export */   ERROR: () => (/* binding */ ERROR),\n/* harmony export */   INPUT: () => (/* binding */ INPUT),\n/* harmony export */   INTERRUPT: () => (/* binding */ INTERRUPT),\n/* harmony export */   NO_WRITES: () => (/* binding */ NO_WRITES),\n/* harmony export */   NULL_TASK_ID: () => (/* binding */ NULL_TASK_ID),\n/* harmony export */   PREVIOUS: () => (/* binding */ PREVIOUS),\n/* harmony export */   PULL: () => (/* binding */ PULL),\n/* harmony export */   PUSH: () => (/* binding */ PUSH),\n/* harmony export */   RECURSION_LIMIT_DEFAULT: () => (/* binding */ RECURSION_LIMIT_DEFAULT),\n/* harmony export */   RESERVED: () => (/* binding */ RESERVED),\n/* harmony export */   RESUME: () => (/* binding */ RESUME),\n/* harmony export */   RETURN: () => (/* binding */ RETURN),\n/* harmony export */   RUNTIME_PLACEHOLDER: () => (/* binding */ RUNTIME_PLACEHOLDER),\n/* harmony export */   SELF: () => (/* binding */ SELF),\n/* harmony export */   START: () => (/* binding */ START),\n/* harmony export */   Send: () => (/* binding */ Send),\n/* harmony export */   TAG_HIDDEN: () => (/* binding */ TAG_HIDDEN),\n/* harmony export */   TAG_NOSTREAM: () => (/* binding */ TAG_NOSTREAM),\n/* harmony export */   TASKS: () => (/* binding */ TASKS),\n/* harmony export */   TASK_NAMESPACE: () => (/* binding */ TASK_NAMESPACE),\n/* harmony export */   _isSend: () => (/* binding */ _isSend),\n/* harmony export */   _isSendInterface: () => (/* binding */ _isSendInterface),\n/* harmony export */   isCommand: () => (/* binding */ isCommand)\n/* harmony export */ });\n/** Special reserved node name denoting the start of a graph. */\nconst START = \"__start__\";\n/** Special reserved node name denoting the end of a graph. */\nconst END = \"__end__\";\nconst INPUT = \"__input__\";\nconst ERROR = \"__error__\";\nconst CONFIG_KEY_SEND = \"__pregel_send\";\n/** config key containing function used to call a node (push task) */\nconst CONFIG_KEY_CALL = \"__pregel_call\";\nconst CONFIG_KEY_READ = \"__pregel_read\";\nconst CONFIG_KEY_CHECKPOINTER = \"__pregel_checkpointer\";\nconst CONFIG_KEY_RESUMING = \"__pregel_resuming\";\nconst CONFIG_KEY_TASK_ID = \"__pregel_task_id\";\nconst CONFIG_KEY_STREAM = \"__pregel_stream\";\nconst CONFIG_KEY_RESUME_VALUE = \"__pregel_resume_value\";\nconst CONFIG_KEY_SCRATCHPAD = \"__pregel_scratchpad\";\n/** config key containing state from previous invocation of graph for the given thread */\nconst CONFIG_KEY_PREVIOUS_STATE = \"__pregel_previous\";\nconst CONFIG_KEY_CHECKPOINT_ID = \"checkpoint_id\";\nconst CONFIG_KEY_CHECKPOINT_NS = \"checkpoint_ns\";\n// this one is part of public API\nconst CONFIG_KEY_CHECKPOINT_MAP = \"checkpoint_map\";\n/** Special channel reserved for graph interrupts */\nconst INTERRUPT = \"__interrupt__\";\n/** Special channel reserved for graph resume */\nconst RESUME = \"__resume__\";\n/** Special channel reserved for cases when a task exits without any writes */\nconst NO_WRITES = \"__no_writes__\";\n/** Special channel reserved for graph return */\nconst RETURN = \"__return__\";\n/** Special channel reserved for graph previous state */\nconst PREVIOUS = \"__previous__\";\nconst RUNTIME_PLACEHOLDER = \"__pregel_runtime_placeholder__\";\nconst RECURSION_LIMIT_DEFAULT = 25;\nconst TAG_HIDDEN = \"langsmith:hidden\";\nconst TAG_NOSTREAM = \"langsmith:nostream\";\nconst SELF = \"__self__\";\nconst TASKS = \"__pregel_tasks\";\nconst PUSH = \"__pregel_push\";\nconst PULL = \"__pregel_pull\";\nconst TASK_NAMESPACE = \"6ba7b831-9dad-11d1-80b4-00c04fd430c8\";\nconst NULL_TASK_ID = \"00000000-0000-0000-0000-000000000000\";\nconst RESERVED = [\n    TAG_HIDDEN,\n    INPUT,\n    INTERRUPT,\n    RESUME,\n    ERROR,\n    NO_WRITES,\n    TASKS,\n    // reserved config.configurable keys\n    CONFIG_KEY_SEND,\n    CONFIG_KEY_READ,\n    CONFIG_KEY_CHECKPOINTER,\n    CONFIG_KEY_STREAM,\n    CONFIG_KEY_RESUMING,\n    CONFIG_KEY_TASK_ID,\n    CONFIG_KEY_CALL,\n    CONFIG_KEY_RESUME_VALUE,\n    CONFIG_KEY_SCRATCHPAD,\n    CONFIG_KEY_PREVIOUS_STATE,\n    CONFIG_KEY_CHECKPOINT_MAP,\n    CONFIG_KEY_CHECKPOINT_NS,\n    CONFIG_KEY_CHECKPOINT_ID,\n];\nconst CHECKPOINT_NAMESPACE_SEPARATOR = \"|\";\nconst CHECKPOINT_NAMESPACE_END = \":\";\nfunction _isSendInterface(x) {\n    const operation = x;\n    return (operation !== null &&\n        operation !== undefined &&\n        typeof operation.node === \"string\" &&\n        operation.args !== undefined);\n}\n/**\n *\n * A message or packet to send to a specific node in the graph.\n *\n * The `Send` class is used within a `StateGraph`'s conditional edges to\n * dynamically invoke a node with a custom state at the next step.\n *\n * Importantly, the sent state can differ from the core graph's state,\n * allowing for flexible and dynamic workflow management.\n *\n * One such example is a \"map-reduce\" workflow where your graph invokes\n * the same node multiple times in parallel with different states,\n * before aggregating the results back into the main graph's state.\n *\n * @example\n * ```typescript\n * import { Annotation, Send, StateGraph } from \"@langchain/langgraph\";\n *\n * const ChainState = Annotation.Root({\n *   subjects: Annotation<string[]>,\n *   jokes: Annotation<string[]>({\n *     reducer: (a, b) => a.concat(b),\n *   }),\n * });\n *\n * const continueToJokes = async (state: typeof ChainState.State) => {\n *   return state.subjects.map((subject) => {\n *     return new Send(\"generate_joke\", { subjects: [subject] });\n *   });\n * };\n *\n * const graph = new StateGraph(ChainState)\n *   .addNode(\"generate_joke\", (state) => ({\n *     jokes: [`Joke about ${state.subjects}`],\n *   }))\n *   .addConditionalEdges(\"__start__\", continueToJokes)\n *   .addEdge(\"generate_joke\", \"__end__\")\n *   .compile();\n *\n * const res = await graph.invoke({ subjects: [\"cats\", \"dogs\"] });\n * console.log(res);\n *\n * // Invoking with two subjects results in a generated joke for each\n * // { subjects: [\"cats\", \"dogs\"], jokes: [`Joke about cats`, `Joke about dogs`] }\n * ```\n */\nclass Send {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(node, args) {\n        Object.defineProperty(this, \"node\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: node\n        });\n        Object.defineProperty(this, \"args\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: args\n        });\n        Object.defineProperty(this, \"lg_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Send\"\n        });\n    }\n    toJSON() {\n        return {\n            node: this.node,\n            args: this.args,\n        };\n    }\n}\nfunction _isSend(x) {\n    const operation = x;\n    return operation !== undefined && operation.lg_name === \"Send\";\n}\n/**\n * One or more commands to update the graph's state and send messages to nodes.\n * Can be used to combine routing logic with state updates in lieu of conditional edges\n *\n * @example\n * ```ts\n * import { Annotation, Command } from \"@langchain/langgraph\";\n *\n * // Define graph state\n * const StateAnnotation = Annotation.Root({\n *   foo: Annotation<string>,\n * });\n *\n * // Define the nodes\n * const nodeA = async (_state: typeof StateAnnotation.State) => {\n *   console.log(\"Called A\");\n *   // this is a replacement for a real conditional edge function\n *   const goto = Math.random() > .5 ? \"nodeB\" : \"nodeC\";\n *   // note how Command allows you to BOTH update the graph state AND route to the next node\n *   return new Command({\n *     // this is the state update\n *     update: {\n *       foo: \"a\",\n *     },\n *     // this is a replacement for an edge\n *     goto,\n *   });\n * };\n *\n * // Nodes B and C are unchanged\n * const nodeB = async (state: typeof StateAnnotation.State) => {\n *   console.log(\"Called B\");\n *   return {\n *     foo: state.foo + \"|b\",\n *   };\n * }\n *\n * const nodeC = async (state: typeof StateAnnotation.State) => {\n *   console.log(\"Called C\");\n *   return {\n *     foo: state.foo + \"|c\",\n *   };\n * }\n *\n * import { StateGraph } from \"@langchain/langgraph\";\n\n * // NOTE: there are no edges between nodes A, B and C!\n * const graph = new StateGraph(StateAnnotation)\n *   .addNode(\"nodeA\", nodeA, {\n *     ends: [\"nodeB\", \"nodeC\"],\n *   })\n *   .addNode(\"nodeB\", nodeB)\n *   .addNode(\"nodeC\", nodeC)\n *   .addEdge(\"__start__\", \"nodeA\")\n *   .compile();\n *\n * await graph.invoke({ foo: \"\" });\n *\n * // Randomly oscillates between\n * // { foo: 'a|c' } and { foo: 'a|b' }\n * ```\n */\nclass Command {\n    constructor(args) {\n        Object.defineProperty(this, \"lg_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Command\"\n        });\n        Object.defineProperty(this, \"lc_direct_tool_output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"graph\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"update\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"resume\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"goto\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.resume = args.resume;\n        this.graph = args.graph;\n        this.update = args.update;\n        if (args.goto) {\n            this.goto = Array.isArray(args.goto) ? args.goto : [args.goto];\n        }\n    }\n    _updateAsTuples() {\n        if (this.update &&\n            typeof this.update === \"object\" &&\n            !Array.isArray(this.update)) {\n            return Object.entries(this.update);\n        }\n        else if (Array.isArray(this.update) &&\n            this.update.every((t) => Array.isArray(t) && t.length === 2 && typeof t[0] === \"string\")) {\n            return this.update;\n        }\n        else {\n            return [[\"__root__\", this.update]];\n        }\n    }\n    toJSON() {\n        let serializedGoto;\n        if (typeof this.goto === \"string\") {\n            serializedGoto = this.goto;\n        }\n        else if (_isSend(this.goto)) {\n            serializedGoto = this.goto.toJSON();\n        }\n        else {\n            serializedGoto = this.goto.map((innerGoto) => {\n                if (typeof innerGoto === \"string\") {\n                    return innerGoto;\n                }\n                else {\n                    return innerGoto.toJSON();\n                }\n            });\n        }\n        return {\n            update: this.update,\n            resume: this.resume,\n            goto: serializedGoto,\n        };\n    }\n}\nObject.defineProperty(Command, \"PARENT\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"__parent__\"\n});\nfunction isCommand(x) {\n    return typeof x === \"object\" && !!x && x.lg_name === \"Command\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDTztBQUNQO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHFCQUFxQjtBQUMvRCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZUFBZTtBQUM1QyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNEJBQTRCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0EsUUFBUSxhQUFhLE1BQU07QUFDM0I7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBTcGVjaWFsIHJlc2VydmVkIG5vZGUgbmFtZSBkZW5vdGluZyB0aGUgc3RhcnQgb2YgYSBncmFwaC4gKi9cbmV4cG9ydCBjb25zdCBTVEFSVCA9IFwiX19zdGFydF9fXCI7XG4vKiogU3BlY2lhbCByZXNlcnZlZCBub2RlIG5hbWUgZGVub3RpbmcgdGhlIGVuZCBvZiBhIGdyYXBoLiAqL1xuZXhwb3J0IGNvbnN0IEVORCA9IFwiX19lbmRfX1wiO1xuZXhwb3J0IGNvbnN0IElOUFVUID0gXCJfX2lucHV0X19cIjtcbmV4cG9ydCBjb25zdCBFUlJPUiA9IFwiX19lcnJvcl9fXCI7XG5leHBvcnQgY29uc3QgQ09ORklHX0tFWV9TRU5EID0gXCJfX3ByZWdlbF9zZW5kXCI7XG4vKiogY29uZmlnIGtleSBjb250YWluaW5nIGZ1bmN0aW9uIHVzZWQgdG8gY2FsbCBhIG5vZGUgKHB1c2ggdGFzaykgKi9cbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX0NBTEwgPSBcIl9fcHJlZ2VsX2NhbGxcIjtcbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX1JFQUQgPSBcIl9fcHJlZ2VsX3JlYWRcIjtcbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX0NIRUNLUE9JTlRFUiA9IFwiX19wcmVnZWxfY2hlY2twb2ludGVyXCI7XG5leHBvcnQgY29uc3QgQ09ORklHX0tFWV9SRVNVTUlORyA9IFwiX19wcmVnZWxfcmVzdW1pbmdcIjtcbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX1RBU0tfSUQgPSBcIl9fcHJlZ2VsX3Rhc2tfaWRcIjtcbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX1NUUkVBTSA9IFwiX19wcmVnZWxfc3RyZWFtXCI7XG5leHBvcnQgY29uc3QgQ09ORklHX0tFWV9SRVNVTUVfVkFMVUUgPSBcIl9fcHJlZ2VsX3Jlc3VtZV92YWx1ZVwiO1xuZXhwb3J0IGNvbnN0IENPTkZJR19LRVlfU0NSQVRDSFBBRCA9IFwiX19wcmVnZWxfc2NyYXRjaHBhZFwiO1xuLyoqIGNvbmZpZyBrZXkgY29udGFpbmluZyBzdGF0ZSBmcm9tIHByZXZpb3VzIGludm9jYXRpb24gb2YgZ3JhcGggZm9yIHRoZSBnaXZlbiB0aHJlYWQgKi9cbmV4cG9ydCBjb25zdCBDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFID0gXCJfX3ByZWdlbF9wcmV2aW91c1wiO1xuZXhwb3J0IGNvbnN0IENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9JRCA9IFwiY2hlY2twb2ludF9pZFwiO1xuZXhwb3J0IGNvbnN0IENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OUyA9IFwiY2hlY2twb2ludF9uc1wiO1xuLy8gdGhpcyBvbmUgaXMgcGFydCBvZiBwdWJsaWMgQVBJXG5leHBvcnQgY29uc3QgQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUCA9IFwiY2hlY2twb2ludF9tYXBcIjtcbi8qKiBTcGVjaWFsIGNoYW5uZWwgcmVzZXJ2ZWQgZm9yIGdyYXBoIGludGVycnVwdHMgKi9cbmV4cG9ydCBjb25zdCBJTlRFUlJVUFQgPSBcIl9faW50ZXJydXB0X19cIjtcbi8qKiBTcGVjaWFsIGNoYW5uZWwgcmVzZXJ2ZWQgZm9yIGdyYXBoIHJlc3VtZSAqL1xuZXhwb3J0IGNvbnN0IFJFU1VNRSA9IFwiX19yZXN1bWVfX1wiO1xuLyoqIFNwZWNpYWwgY2hhbm5lbCByZXNlcnZlZCBmb3IgY2FzZXMgd2hlbiBhIHRhc2sgZXhpdHMgd2l0aG91dCBhbnkgd3JpdGVzICovXG5leHBvcnQgY29uc3QgTk9fV1JJVEVTID0gXCJfX25vX3dyaXRlc19fXCI7XG4vKiogU3BlY2lhbCBjaGFubmVsIHJlc2VydmVkIGZvciBncmFwaCByZXR1cm4gKi9cbmV4cG9ydCBjb25zdCBSRVRVUk4gPSBcIl9fcmV0dXJuX19cIjtcbi8qKiBTcGVjaWFsIGNoYW5uZWwgcmVzZXJ2ZWQgZm9yIGdyYXBoIHByZXZpb3VzIHN0YXRlICovXG5leHBvcnQgY29uc3QgUFJFVklPVVMgPSBcIl9fcHJldmlvdXNfX1wiO1xuZXhwb3J0IGNvbnN0IFJVTlRJTUVfUExBQ0VIT0xERVIgPSBcIl9fcHJlZ2VsX3J1bnRpbWVfcGxhY2Vob2xkZXJfX1wiO1xuZXhwb3J0IGNvbnN0IFJFQ1VSU0lPTl9MSU1JVF9ERUZBVUxUID0gMjU7XG5leHBvcnQgY29uc3QgVEFHX0hJRERFTiA9IFwibGFuZ3NtaXRoOmhpZGRlblwiO1xuZXhwb3J0IGNvbnN0IFRBR19OT1NUUkVBTSA9IFwibGFuZ3NtaXRoOm5vc3RyZWFtXCI7XG5leHBvcnQgY29uc3QgU0VMRiA9IFwiX19zZWxmX19cIjtcbmV4cG9ydCBjb25zdCBUQVNLUyA9IFwiX19wcmVnZWxfdGFza3NcIjtcbmV4cG9ydCBjb25zdCBQVVNIID0gXCJfX3ByZWdlbF9wdXNoXCI7XG5leHBvcnQgY29uc3QgUFVMTCA9IFwiX19wcmVnZWxfcHVsbFwiO1xuZXhwb3J0IGNvbnN0IFRBU0tfTkFNRVNQQUNFID0gXCI2YmE3YjgzMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzhcIjtcbmV4cG9ydCBjb25zdCBOVUxMX1RBU0tfSUQgPSBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMFwiO1xuZXhwb3J0IGNvbnN0IFJFU0VSVkVEID0gW1xuICAgIFRBR19ISURERU4sXG4gICAgSU5QVVQsXG4gICAgSU5URVJSVVBULFxuICAgIFJFU1VNRSxcbiAgICBFUlJPUixcbiAgICBOT19XUklURVMsXG4gICAgVEFTS1MsXG4gICAgLy8gcmVzZXJ2ZWQgY29uZmlnLmNvbmZpZ3VyYWJsZSBrZXlzXG4gICAgQ09ORklHX0tFWV9TRU5ELFxuICAgIENPTkZJR19LRVlfUkVBRCxcbiAgICBDT05GSUdfS0VZX0NIRUNLUE9JTlRFUixcbiAgICBDT05GSUdfS0VZX1NUUkVBTSxcbiAgICBDT05GSUdfS0VZX1JFU1VNSU5HLFxuICAgIENPTkZJR19LRVlfVEFTS19JRCxcbiAgICBDT05GSUdfS0VZX0NBTEwsXG4gICAgQ09ORklHX0tFWV9SRVNVTUVfVkFMVUUsXG4gICAgQ09ORklHX0tFWV9TQ1JBVENIUEFELFxuICAgIENPTkZJR19LRVlfUFJFVklPVVNfU1RBVEUsXG4gICAgQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUCxcbiAgICBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlMsXG4gICAgQ09ORklHX0tFWV9DSEVDS1BPSU5UX0lELFxuXTtcbmV4cG9ydCBjb25zdCBDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IgPSBcInxcIjtcbmV4cG9ydCBjb25zdCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQgPSBcIjpcIjtcbmV4cG9ydCBmdW5jdGlvbiBfaXNTZW5kSW50ZXJmYWNlKHgpIHtcbiAgICBjb25zdCBvcGVyYXRpb24gPSB4O1xuICAgIHJldHVybiAob3BlcmF0aW9uICE9PSBudWxsICYmXG4gICAgICAgIG9wZXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHR5cGVvZiBvcGVyYXRpb24ubm9kZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBvcGVyYXRpb24uYXJncyAhPT0gdW5kZWZpbmVkKTtcbn1cbi8qKlxuICpcbiAqIEEgbWVzc2FnZSBvciBwYWNrZXQgdG8gc2VuZCB0byBhIHNwZWNpZmljIG5vZGUgaW4gdGhlIGdyYXBoLlxuICpcbiAqIFRoZSBgU2VuZGAgY2xhc3MgaXMgdXNlZCB3aXRoaW4gYSBgU3RhdGVHcmFwaGAncyBjb25kaXRpb25hbCBlZGdlcyB0b1xuICogZHluYW1pY2FsbHkgaW52b2tlIGEgbm9kZSB3aXRoIGEgY3VzdG9tIHN0YXRlIGF0IHRoZSBuZXh0IHN0ZXAuXG4gKlxuICogSW1wb3J0YW50bHksIHRoZSBzZW50IHN0YXRlIGNhbiBkaWZmZXIgZnJvbSB0aGUgY29yZSBncmFwaCdzIHN0YXRlLFxuICogYWxsb3dpbmcgZm9yIGZsZXhpYmxlIGFuZCBkeW5hbWljIHdvcmtmbG93IG1hbmFnZW1lbnQuXG4gKlxuICogT25lIHN1Y2ggZXhhbXBsZSBpcyBhIFwibWFwLXJlZHVjZVwiIHdvcmtmbG93IHdoZXJlIHlvdXIgZ3JhcGggaW52b2tlc1xuICogdGhlIHNhbWUgbm9kZSBtdWx0aXBsZSB0aW1lcyBpbiBwYXJhbGxlbCB3aXRoIGRpZmZlcmVudCBzdGF0ZXMsXG4gKiBiZWZvcmUgYWdncmVnYXRpbmcgdGhlIHJlc3VsdHMgYmFjayBpbnRvIHRoZSBtYWluIGdyYXBoJ3Mgc3RhdGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEFubm90YXRpb24sIFNlbmQsIFN0YXRlR3JhcGggfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiAqXG4gKiBjb25zdCBDaGFpblN0YXRlID0gQW5ub3RhdGlvbi5Sb290KHtcbiAqICAgc3ViamVjdHM6IEFubm90YXRpb248c3RyaW5nW10+LFxuICogICBqb2tlczogQW5ub3RhdGlvbjxzdHJpbmdbXT4oe1xuICogICAgIHJlZHVjZXI6IChhLCBiKSA9PiBhLmNvbmNhdChiKSxcbiAqICAgfSksXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb250aW51ZVRvSm9rZXMgPSBhc3luYyAoc3RhdGU6IHR5cGVvZiBDaGFpblN0YXRlLlN0YXRlKSA9PiB7XG4gKiAgIHJldHVybiBzdGF0ZS5zdWJqZWN0cy5tYXAoKHN1YmplY3QpID0+IHtcbiAqICAgICByZXR1cm4gbmV3IFNlbmQoXCJnZW5lcmF0ZV9qb2tlXCIsIHsgc3ViamVjdHM6IFtzdWJqZWN0XSB9KTtcbiAqICAgfSk7XG4gKiB9O1xuICpcbiAqIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoQ2hhaW5TdGF0ZSlcbiAqICAgLmFkZE5vZGUoXCJnZW5lcmF0ZV9qb2tlXCIsIChzdGF0ZSkgPT4gKHtcbiAqICAgICBqb2tlczogW2BKb2tlIGFib3V0ICR7c3RhdGUuc3ViamVjdHN9YF0sXG4gKiAgIH0pKVxuICogICAuYWRkQ29uZGl0aW9uYWxFZGdlcyhcIl9fc3RhcnRfX1wiLCBjb250aW51ZVRvSm9rZXMpXG4gKiAgIC5hZGRFZGdlKFwiZ2VuZXJhdGVfam9rZVwiLCBcIl9fZW5kX19cIilcbiAqICAgLmNvbXBpbGUoKTtcbiAqXG4gKiBjb25zdCByZXMgPSBhd2FpdCBncmFwaC5pbnZva2UoeyBzdWJqZWN0czogW1wiY2F0c1wiLCBcImRvZ3NcIl0gfSk7XG4gKiBjb25zb2xlLmxvZyhyZXMpO1xuICpcbiAqIC8vIEludm9raW5nIHdpdGggdHdvIHN1YmplY3RzIHJlc3VsdHMgaW4gYSBnZW5lcmF0ZWQgam9rZSBmb3IgZWFjaFxuICogLy8geyBzdWJqZWN0czogW1wiY2F0c1wiLCBcImRvZ3NcIl0sIGpva2VzOiBbYEpva2UgYWJvdXQgY2F0c2AsIGBKb2tlIGFib3V0IGRvZ3NgXSB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlbmQge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3RydWN0b3Iobm9kZSwgYXJncykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2RlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBub2RlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBhcmdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZ19uYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlNlbmRcIlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9kZTogdGhpcy5ub2RlLFxuICAgICAgICAgICAgYXJnczogdGhpcy5hcmdzLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBfaXNTZW5kKHgpIHtcbiAgICBjb25zdCBvcGVyYXRpb24gPSB4O1xuICAgIHJldHVybiBvcGVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiBvcGVyYXRpb24ubGdfbmFtZSA9PT0gXCJTZW5kXCI7XG59XG4vKipcbiAqIE9uZSBvciBtb3JlIGNvbW1hbmRzIHRvIHVwZGF0ZSB0aGUgZ3JhcGgncyBzdGF0ZSBhbmQgc2VuZCBtZXNzYWdlcyB0byBub2Rlcy5cbiAqIENhbiBiZSB1c2VkIHRvIGNvbWJpbmUgcm91dGluZyBsb2dpYyB3aXRoIHN0YXRlIHVwZGF0ZXMgaW4gbGlldSBvZiBjb25kaXRpb25hbCBlZGdlc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQW5ub3RhdGlvbiwgQ29tbWFuZCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuICpcbiAqIC8vIERlZmluZSBncmFwaCBzdGF0ZVxuICogY29uc3QgU3RhdGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiAqICAgZm9vOiBBbm5vdGF0aW9uPHN0cmluZz4sXG4gKiB9KTtcbiAqXG4gKiAvLyBEZWZpbmUgdGhlIG5vZGVzXG4gKiBjb25zdCBub2RlQSA9IGFzeW5jIChfc3RhdGU6IHR5cGVvZiBTdGF0ZUFubm90YXRpb24uU3RhdGUpID0+IHtcbiAqICAgY29uc29sZS5sb2coXCJDYWxsZWQgQVwiKTtcbiAqICAgLy8gdGhpcyBpcyBhIHJlcGxhY2VtZW50IGZvciBhIHJlYWwgY29uZGl0aW9uYWwgZWRnZSBmdW5jdGlvblxuICogICBjb25zdCBnb3RvID0gTWF0aC5yYW5kb20oKSA+IC41ID8gXCJub2RlQlwiIDogXCJub2RlQ1wiO1xuICogICAvLyBub3RlIGhvdyBDb21tYW5kIGFsbG93cyB5b3UgdG8gQk9USCB1cGRhdGUgdGhlIGdyYXBoIHN0YXRlIEFORCByb3V0ZSB0byB0aGUgbmV4dCBub2RlXG4gKiAgIHJldHVybiBuZXcgQ29tbWFuZCh7XG4gKiAgICAgLy8gdGhpcyBpcyB0aGUgc3RhdGUgdXBkYXRlXG4gKiAgICAgdXBkYXRlOiB7XG4gKiAgICAgICBmb286IFwiYVwiLFxuICogICAgIH0sXG4gKiAgICAgLy8gdGhpcyBpcyBhIHJlcGxhY2VtZW50IGZvciBhbiBlZGdlXG4gKiAgICAgZ290byxcbiAqICAgfSk7XG4gKiB9O1xuICpcbiAqIC8vIE5vZGVzIEIgYW5kIEMgYXJlIHVuY2hhbmdlZFxuICogY29uc3Qgbm9kZUIgPSBhc3luYyAoc3RhdGU6IHR5cGVvZiBTdGF0ZUFubm90YXRpb24uU3RhdGUpID0+IHtcbiAqICAgY29uc29sZS5sb2coXCJDYWxsZWQgQlwiKTtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBmb286IHN0YXRlLmZvbyArIFwifGJcIixcbiAqICAgfTtcbiAqIH1cbiAqXG4gKiBjb25zdCBub2RlQyA9IGFzeW5jIChzdGF0ZTogdHlwZW9mIFN0YXRlQW5ub3RhdGlvbi5TdGF0ZSkgPT4ge1xuICogICBjb25zb2xlLmxvZyhcIkNhbGxlZCBDXCIpO1xuICogICByZXR1cm4ge1xuICogICAgIGZvbzogc3RhdGUuZm9vICsgXCJ8Y1wiLFxuICogICB9O1xuICogfVxuICpcbiAqIGltcG9ydCB7IFN0YXRlR3JhcGggfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcblxuICogLy8gTk9URTogdGhlcmUgYXJlIG5vIGVkZ2VzIGJldHdlZW4gbm9kZXMgQSwgQiBhbmQgQyFcbiAqIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoU3RhdGVBbm5vdGF0aW9uKVxuICogICAuYWRkTm9kZShcIm5vZGVBXCIsIG5vZGVBLCB7XG4gKiAgICAgZW5kczogW1wibm9kZUJcIiwgXCJub2RlQ1wiXSxcbiAqICAgfSlcbiAqICAgLmFkZE5vZGUoXCJub2RlQlwiLCBub2RlQilcbiAqICAgLmFkZE5vZGUoXCJub2RlQ1wiLCBub2RlQylcbiAqICAgLmFkZEVkZ2UoXCJfX3N0YXJ0X19cIiwgXCJub2RlQVwiKVxuICogICAuY29tcGlsZSgpO1xuICpcbiAqIGF3YWl0IGdyYXBoLmludm9rZSh7IGZvbzogXCJcIiB9KTtcbiAqXG4gKiAvLyBSYW5kb21seSBvc2NpbGxhdGVzIGJldHdlZW5cbiAqIC8vIHsgZm9vOiAnYXxjJyB9IGFuZCB7IGZvbzogJ2F8YicgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxnX25hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiQ29tbWFuZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19kaXJlY3RfdG9vbF9vdXRwdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdyYXBoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXN1bWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ290b1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVzdW1lID0gYXJncy5yZXN1bWU7XG4gICAgICAgIHRoaXMuZ3JhcGggPSBhcmdzLmdyYXBoO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9IGFyZ3MudXBkYXRlO1xuICAgICAgICBpZiAoYXJncy5nb3RvKSB7XG4gICAgICAgICAgICB0aGlzLmdvdG8gPSBBcnJheS5pc0FycmF5KGFyZ3MuZ290bykgPyBhcmdzLmdvdG8gOiBbYXJncy5nb3RvXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfdXBkYXRlQXNUdXBsZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoaXMudXBkYXRlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh0aGlzLnVwZGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnVwZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnVwZGF0ZSkgJiZcbiAgICAgICAgICAgIHRoaXMudXBkYXRlLmV2ZXJ5KCh0KSA9PiBBcnJheS5pc0FycmF5KHQpICYmIHQubGVuZ3RoID09PSAyICYmIHR5cGVvZiB0WzBdID09PSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtbXCJfX3Jvb3RfX1wiLCB0aGlzLnVwZGF0ZV1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWRHb3RvO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ290byA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgc2VyaWFsaXplZEdvdG8gPSB0aGlzLmdvdG87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX2lzU2VuZCh0aGlzLmdvdG8pKSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkR290byA9IHRoaXMuZ290by50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZWRHb3RvID0gdGhpcy5nb3RvLm1hcCgoaW5uZXJHb3RvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbm5lckdvdG8gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyR290bztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbm5lckdvdG8udG9KU09OKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy51cGRhdGUsXG4gICAgICAgICAgICByZXN1bWU6IHRoaXMucmVzdW1lLFxuICAgICAgICAgICAgZ290bzogc2VyaWFsaXplZEdvdG8sXG4gICAgICAgIH07XG4gICAgfVxufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbW1hbmQsIFwiUEFSRU5UXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogXCJfX3BhcmVudF9fXCJcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tbWFuZCh4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmICEheCAmJiB4LmxnX25hbWUgPT09IFwiQ29tbWFuZFwiO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js":
/*!******************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js ***!
  \******************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangGraphError: () => (/* binding */ BaseLangGraphError),\n/* harmony export */   EmptyChannelError: () => (/* binding */ EmptyChannelError),\n/* harmony export */   EmptyInputError: () => (/* binding */ EmptyInputError),\n/* harmony export */   GraphBubbleUp: () => (/* binding */ GraphBubbleUp),\n/* harmony export */   GraphInterrupt: () => (/* binding */ GraphInterrupt),\n/* harmony export */   GraphRecursionError: () => (/* binding */ GraphRecursionError),\n/* harmony export */   GraphValueError: () => (/* binding */ GraphValueError),\n/* harmony export */   InvalidUpdateError: () => (/* binding */ InvalidUpdateError),\n/* harmony export */   MultipleSubgraphsError: () => (/* binding */ MultipleSubgraphsError),\n/* harmony export */   NodeInterrupt: () => (/* binding */ NodeInterrupt),\n/* harmony export */   ParentCommand: () => (/* binding */ ParentCommand),\n/* harmony export */   RemoteException: () => (/* binding */ RemoteException),\n/* harmony export */   UnreachableNodeError: () => (/* binding */ UnreachableNodeError),\n/* harmony export */   getSubgraphsSeenSet: () => (/* binding */ getSubgraphsSeenSet),\n/* harmony export */   isGraphBubbleUp: () => (/* binding */ isGraphBubbleUp),\n/* harmony export */   isGraphInterrupt: () => (/* binding */ isGraphInterrupt),\n/* harmony export */   isParentCommand: () => (/* binding */ isParentCommand)\n/* harmony export */ });\n// TODO: Merge with base LangChain error class when we drop support for core@0.2.0\nclass BaseLangGraphError extends Error {\n    constructor(message, fields) {\n        let finalMessage = message ?? \"\";\n        if (fields?.lc_error_code) {\n            finalMessage = `${finalMessage}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${fields.lc_error_code}/\\n`;\n        }\n        super(finalMessage);\n        Object.defineProperty(this, \"lc_error_code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_error_code = fields?.lc_error_code;\n    }\n}\nclass GraphBubbleUp extends BaseLangGraphError {\n    get is_bubble_up() {\n        return true;\n    }\n}\nclass GraphRecursionError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"GraphRecursionError\";\n    }\n    static get unminifiable_name() {\n        return \"GraphRecursionError\";\n    }\n}\nclass GraphValueError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"GraphValueError\";\n    }\n    static get unminifiable_name() {\n        return \"GraphValueError\";\n    }\n}\nclass GraphInterrupt extends GraphBubbleUp {\n    constructor(interrupts, fields) {\n        super(JSON.stringify(interrupts, null, 2), fields);\n        Object.defineProperty(this, \"interrupts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = \"GraphInterrupt\";\n        this.interrupts = interrupts ?? [];\n    }\n    static get unminifiable_name() {\n        return \"GraphInterrupt\";\n    }\n}\n/** Raised by a node to interrupt execution. */\nclass NodeInterrupt extends GraphInterrupt {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(message, fields) {\n        super([\n            {\n                value: message,\n                when: \"during\",\n            },\n        ], fields);\n        this.name = \"NodeInterrupt\";\n    }\n    static get unminifiable_name() {\n        return \"NodeInterrupt\";\n    }\n}\nclass ParentCommand extends GraphBubbleUp {\n    constructor(command) {\n        super();\n        Object.defineProperty(this, \"command\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = \"ParentCommand\";\n        this.command = command;\n    }\n    static get unminifiable_name() {\n        return \"ParentCommand\";\n    }\n}\nfunction isParentCommand(e) {\n    return (e !== undefined &&\n        e.name === ParentCommand.unminifiable_name);\n}\nfunction isGraphBubbleUp(e) {\n    return e !== undefined && e.is_bubble_up === true;\n}\nfunction isGraphInterrupt(e) {\n    return (e !== undefined &&\n        [\n            GraphInterrupt.unminifiable_name,\n            NodeInterrupt.unminifiable_name,\n        ].includes(e.name));\n}\nclass EmptyInputError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"EmptyInputError\";\n    }\n    static get unminifiable_name() {\n        return \"EmptyInputError\";\n    }\n}\nclass EmptyChannelError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"EmptyChannelError\";\n    }\n    static get unminifiable_name() {\n        return \"EmptyChannelError\";\n    }\n}\nclass InvalidUpdateError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"InvalidUpdateError\";\n    }\n    static get unminifiable_name() {\n        return \"InvalidUpdateError\";\n    }\n}\nclass MultipleSubgraphsError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"MultipleSubgraphError\";\n    }\n    static get unminifiable_name() {\n        return \"MultipleSubgraphError\";\n    }\n}\nclass UnreachableNodeError extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"UnreachableNodeError\";\n    }\n    static get unminifiable_name() {\n        return \"UnreachableNodeError\";\n    }\n}\n/**\n * Exception raised when an error occurs in the remote graph.\n */\nclass RemoteException extends BaseLangGraphError {\n    constructor(message, fields) {\n        super(message, fields);\n        this.name = \"RemoteException\";\n    }\n    static get unminifiable_name() {\n        return \"RemoteException\";\n    }\n}\n/**\n * Used for subgraph detection.\n */\nconst getSubgraphsSeenSet = () => {\n    if (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")] === undefined) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")] = new Set();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsYUFBYSxnRkFBZ0YscUJBQXFCO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRPRE86IE1lcmdlIHdpdGggYmFzZSBMYW5nQ2hhaW4gZXJyb3IgY2xhc3Mgd2hlbiB3ZSBkcm9wIHN1cHBvcnQgZm9yIGNvcmVAMC4yLjBcbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ0dyYXBoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG4gICAgICAgIGxldCBmaW5hbE1lc3NhZ2UgPSBtZXNzYWdlID8/IFwiXCI7XG4gICAgICAgIGlmIChmaWVsZHM/LmxjX2Vycm9yX2NvZGUpIHtcbiAgICAgICAgICAgIGZpbmFsTWVzc2FnZSA9IGAke2ZpbmFsTWVzc2FnZX1cXG5cXG5Ucm91Ymxlc2hvb3RpbmcgVVJMOiBodHRwczovL2pzLmxhbmdjaGFpbi5jb20vZG9jcy90cm91Ymxlc2hvb3RpbmcvZXJyb3JzLyR7ZmllbGRzLmxjX2Vycm9yX2NvZGV9L1xcbmA7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmluYWxNZXNzYWdlKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZXJyb3JfY29kZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2Vycm9yX2NvZGUgPSBmaWVsZHM/LmxjX2Vycm9yX2NvZGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEdyYXBoQnViYmxlVXAgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuICAgIGdldCBpc19idWJibGVfdXAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBHcmFwaFJlY3Vyc2lvbkVycm9yIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgZmllbGRzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJHcmFwaFJlY3Vyc2lvbkVycm9yXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkdyYXBoUmVjdXJzaW9uRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgR3JhcGhWYWx1ZUVycm9yIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgZmllbGRzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJHcmFwaFZhbHVlRXJyb3JcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiR3JhcGhWYWx1ZUVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEdyYXBoSW50ZXJydXB0IGV4dGVuZHMgR3JhcGhCdWJibGVVcCB7XG4gICAgY29uc3RydWN0b3IoaW50ZXJydXB0cywgZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKEpTT04uc3RyaW5naWZ5KGludGVycnVwdHMsIG51bGwsIDIpLCBmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnRlcnJ1cHRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiR3JhcGhJbnRlcnJ1cHRcIjtcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRzID0gaW50ZXJydXB0cyA/PyBbXTtcbiAgICB9XG4gICAgc3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiR3JhcGhJbnRlcnJ1cHRcIjtcbiAgICB9XG59XG4vKiogUmFpc2VkIGJ5IGEgbm9kZSB0byBpbnRlcnJ1cHQgZXhlY3V0aW9uLiAqL1xuZXhwb3J0IGNsYXNzIE5vZGVJbnRlcnJ1cHQgZXh0ZW5kcyBHcmFwaEludGVycnVwdCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIHdoZW46IFwiZHVyaW5nXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLCBmaWVsZHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk5vZGVJbnRlcnJ1cHRcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiTm9kZUludGVycnVwdFwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJlbnRDb21tYW5kIGV4dGVuZHMgR3JhcGhCdWJibGVVcCB7XG4gICAgY29uc3RydWN0b3IoY29tbWFuZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21tYW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUGFyZW50Q29tbWFuZFwiO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBjb21tYW5kO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHVubWluaWZpYWJsZV9uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJQYXJlbnRDb21tYW5kXCI7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFyZW50Q29tbWFuZChlKSB7XG4gICAgcmV0dXJuIChlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgZS5uYW1lID09PSBQYXJlbnRDb21tYW5kLnVubWluaWZpYWJsZV9uYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0dyYXBoQnViYmxlVXAoZSkge1xuICAgIHJldHVybiBlICE9PSB1bmRlZmluZWQgJiYgZS5pc19idWJibGVfdXAgPT09IHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNHcmFwaEludGVycnVwdChlKSB7XG4gICAgcmV0dXJuIChlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgW1xuICAgICAgICAgICAgR3JhcGhJbnRlcnJ1cHQudW5taW5pZmlhYmxlX25hbWUsXG4gICAgICAgICAgICBOb2RlSW50ZXJydXB0LnVubWluaWZpYWJsZV9uYW1lLFxuICAgICAgICBdLmluY2x1ZGVzKGUubmFtZSkpO1xufVxuZXhwb3J0IGNsYXNzIEVtcHR5SW5wdXRFcnJvciBleHRlbmRzIEJhc2VMYW5nR3JhcGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZpZWxkcyk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiRW1wdHlJbnB1dEVycm9yXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkVtcHR5SW5wdXRFcnJvclwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFbXB0eUNoYW5uZWxFcnJvciBleHRlbmRzIEJhc2VMYW5nR3JhcGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZpZWxkcyk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiRW1wdHlDaGFubmVsRXJyb3JcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRW1wdHlDaGFubmVsRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSW52YWxpZFVwZGF0ZUVycm9yIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgZmllbGRzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJJbnZhbGlkVXBkYXRlRXJyb3JcIjtcbiAgICB9XG4gICAgc3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSW52YWxpZFVwZGF0ZUVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE11bHRpcGxlU3ViZ3JhcGhzRXJyb3IgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGZpZWxkcykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk11bHRpcGxlU3ViZ3JhcGhFcnJvclwiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHVubWluaWZpYWJsZV9uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJNdWx0aXBsZVN1YmdyYXBoRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVW5yZWFjaGFibGVOb2RlRXJyb3IgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGZpZWxkcykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlVucmVhY2hhYmxlTm9kZUVycm9yXCI7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlVucmVhY2hhYmxlTm9kZUVycm9yXCI7XG4gICAgfVxufVxuLyoqXG4gKiBFeGNlcHRpb24gcmFpc2VkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGluIHRoZSByZW1vdGUgZ3JhcGguXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW1vdGVFeGNlcHRpb24gZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGZpZWxkcykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlJlbW90ZUV4Y2VwdGlvblwiO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHVubWluaWZpYWJsZV9uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSZW1vdGVFeGNlcHRpb25cIjtcbiAgICB9XG59XG4vKipcbiAqIFVzZWQgZm9yIHN1YmdyYXBoIGRldGVjdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFN1YmdyYXBoc1NlZW5TZXQgPSAoKSA9PiB7XG4gICAgaWYgKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2xvYmFsVGhpc1tTeW1ib2wuZm9yKFwiTEdfQ0hFQ0tQT0lOVF9TRUVOX05TX1NFVFwiKV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBnbG9iYWxUaGlzW1N5bWJvbC5mb3IoXCJMR19DSEVDS1BPSU5UX1NFRU5fTlNfU0VUXCIpXSA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gZ2xvYmFsVGhpc1tTeW1ib2wuZm9yKFwiTEdfQ0hFQ0tQT0lOVF9TRUVOX05TX1NFVFwiKV07XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/index.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/index.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   entrypoint: () => (/* binding */ entrypoint),\n/* harmony export */   getPreviousState: () => (/* binding */ getPreviousState),\n/* harmony export */   task: () => (/* binding */ task)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n/* harmony import */ var _pregel_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../pregel/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/index.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pregel/read.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _pregel_call_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pregel/call.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/call.js\");\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../channels/last_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n\n\n\n\n\n\n\n\n/**\n * Define a LangGraph task using the `task` function.\n *\n * !!! warning \"Beta\"\n *     The Functional API is currently in beta and is subject to change.\n *\n * @beta\n *\n * Tasks can only be called from within an {@link entrypoint} or from within a StateGraph.\n * A task can be called like a regular function with the following differences:\n *\n * - When a checkpointer is enabled, the function inputs and outputs must be serializable.\n * - The wrapped function can only be called from within an entrypoint or StateGraph.\n * - Calling the function produces a promise. This makes it easy to parallelize tasks.\n *\n * @typeParam ArgsT - The type of arguments the task function accepts\n * @typeParam OutputT - The type of value the task function returns\n * @param optionsOrName - Either an {@link TaskOptions} object, or a string for the name of the task\n * @param func - The function that executes this task\n * @returns A proxy function that accepts the same arguments as the original and always returns the result as a Promise\n *\n * @example basic example\n * ```typescript\n * const addOne = task(\"add\", async (a: number) => a + 1);\n *\n * const workflow = entrypoint(\"example\", async (numbers: number[]) => {\n *   const promises = numbers.map(n => addOne(n));\n *   const results = await Promise.all(promises);\n *   return results;\n * });\n *\n * // Call the entrypoint\n * await workflow.invoke([1, 2, 3]); // Returns [2, 3, 4]\n * ```\n *\n * @example using a retry policy\n * ```typescript\n * const addOne = task({\n *     name: \"add\",\n *     retry: { maxAttempts: 3 }\n *   },\n *   async (a: number) => a + 1\n * );\n *\n * const workflow = entrypoint(\"example\", async (numbers: number[]) => {\n *   const promises = numbers.map(n => addOne(n));\n *   const results = await Promise.all(promises);\n *   return results;\n * });\n * ```\n */\nfunction task(optionsOrName, func) {\n    const { name, retry } = typeof optionsOrName === \"string\"\n        ? { name: optionsOrName, retry: undefined }\n        : optionsOrName;\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.isAsyncGeneratorFunction)(func) || (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.isGeneratorFunction)(func)) {\n        throw new Error(\"Generators are disallowed as tasks. For streaming responses, use config.write.\");\n    }\n    return (...args) => {\n        return (0,_pregel_call_js__WEBPACK_IMPORTED_MODULE_5__.call)({ func, name, retry }, ...args);\n    };\n}\n/**\n * Define a LangGraph workflow using the `entrypoint` function.\n *\n * !!! warning \"Beta\"\n *     The Functional API is currently in beta and is subject to change.\n *\n * @beta\n *\n * ### Function signature\n *\n * The wrapped function must accept at most **two parameters**. The first parameter\n * is the input to the function. The second (optional) parameter is a\n * {@link LangGraphRunnableConfig} object. If you wish to pass multiple parameters to\n * the function, you can pass them as an object.\n *\n * ### Helper functions\n *\n * #### Streaming\n * To write data to the \"custom\" stream, use the {@link getWriter} function, or the\n * {@link LangGraphRunnableConfig.writer} property.\n *\n * #### State management\n * The {@link getPreviousState} function can be used to access the previous state\n * that was returned from the last invocation of the entrypoint on the same thread id.\n *\n * If you wish to save state other than the return value, you can use the\n * {@link entrypoint.final} function.\n *\n * @typeParam InputT - The type of input the entrypoint accepts\n * @typeParam OutputT - The type of output the entrypoint produces\n * @param optionsOrName - Either an {@link EntrypointOptions} object, or a string for the name of the entrypoint\n * @param func - The function that executes this entrypoint\n * @returns A {@link Pregel} instance that can be run to execute the workflow\n *\n * @example Using entrypoint and tasks\n * ```typescript\n * import { task, entrypoint } from \"@langchain/langgraph\";\n * import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n * import { interrupt, Command } from \"@langchain/langgraph\";\n *\n * const composeEssay = task(\"compose\", async (topic: string) => {\n *   await new Promise(r => setTimeout(r, 1000)); // Simulate slow operation\n *   return `An essay about ${topic}`;\n * });\n *\n * const reviewWorkflow = entrypoint({\n *   name: \"review\",\n *   checkpointer: new MemorySaver()\n * }, async (topic: string) => {\n *   const essay = await composeEssay(topic);\n *   const humanReview = await interrupt({\n *     question: \"Please provide a review\",\n *     essay\n *   });\n *   return {\n *     essay,\n *     review: humanReview\n *   };\n * });\n *\n * // Example configuration for the workflow\n * const config = {\n *   configurable: {\n *     thread_id: \"some_thread\"\n *   }\n * };\n *\n * // Topic for the essay\n * const topic = \"cats\";\n *\n * // Stream the workflow to generate the essay and await human review\n * for await (const result of reviewWorkflow.stream(topic, config)) {\n *   console.log(result);\n * }\n *\n * // Example human review provided after the interrupt\n * const humanReview = \"This essay is great.\";\n *\n * // Resume the workflow with the provided human review\n * for await (const result of reviewWorkflow.stream(new Command({ resume: humanReview }), config)) {\n *   console.log(result);\n * }\n * ```\n *\n * @example Accessing the previous return value\n * ```typescript\n * import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n * import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n *\n * const accumulator = entrypoint({\n *   name: \"accumulator\",\n *   checkpointer: new MemorySaver()\n * }, async (input: string) => {\n *   const previous = getPreviousState<number>();\n *   return previous !== undefined ? `${previous } ${input}` : input;\n * });\n *\n * const config = {\n *   configurable: {\n *     thread_id: \"some_thread\"\n *   }\n * };\n * await accumulator.invoke(\"hello\", config); // returns \"hello\"\n * await accumulator.invoke(\"world\", config); // returns \"hello world\"\n * ```\n *\n * @example Using entrypoint.final to save a value\n * ```typescript\n * import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n * import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n *\n * const myWorkflow = entrypoint({\n *   name: \"accumulator\",\n *   checkpointer: new MemorySaver()\n * }, async (num: number) => {\n *   const previous = getPreviousState<number>();\n *\n *   // This will return the previous value to the caller, saving\n *   // 2 * num to the checkpoint, which will be used in the next invocation\n *   // for the `previous` parameter.\n *   return entrypoint.final({\n *     value: previous ?? 0,\n *     save: 2 * num\n *   });\n * });\n *\n * const config = {\n *   configurable: {\n *     thread_id: \"some_thread\"\n *   }\n * };\n *\n * await myWorkflow.invoke(3, config); // 0 (previous was undefined)\n * await myWorkflow.invoke(1, config); // 6 (previous was 3 * 2 from the previous invocation)\n * ```\n */\nconst entrypoint = function entrypoint(optionsOrName, func) {\n    const { name, checkpointer, store } = typeof optionsOrName === \"string\"\n        ? { name: optionsOrName, checkpointer: undefined, store: undefined }\n        : optionsOrName;\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.isAsyncGeneratorFunction)(func) || (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.isGeneratorFunction)(func)) {\n        throw new Error(\"Generators are disallowed as entrypoints. For streaming responses, use config.write.\");\n    }\n    const streamMode = \"updates\";\n    const bound = (0,_pregel_call_js__WEBPACK_IMPORTED_MODULE_5__.getRunnableForEntrypoint)(name, func);\n    return new _pregel_index_js__WEBPACK_IMPORTED_MODULE_1__.Pregel({\n        name,\n        checkpointer,\n        nodes: {\n            [name]: new _pregel_read_js__WEBPACK_IMPORTED_MODULE_2__.PregelNode({\n                bound,\n                triggers: [_constants_js__WEBPACK_IMPORTED_MODULE_3__.START],\n                channels: [_constants_js__WEBPACK_IMPORTED_MODULE_3__.START],\n                writers: [],\n            }),\n        },\n        channels: {\n            [_constants_js__WEBPACK_IMPORTED_MODULE_3__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue(),\n            [_constants_js__WEBPACK_IMPORTED_MODULE_3__.END]: new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_6__.LastValue(),\n            [_constants_js__WEBPACK_IMPORTED_MODULE_3__.PREVIOUS]: new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_6__.LastValue(),\n        },\n        inputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_3__.START,\n        outputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_3__.END,\n        streamChannels: _constants_js__WEBPACK_IMPORTED_MODULE_3__.END,\n        streamMode,\n        store,\n    });\n};\n// documented by the EntrypointFunction interface\nentrypoint.final = function final({ value, save, }) {\n    return { value, save, __lg_type: \"__pregel_final\" };\n};\n/**\n * A helper utility function for use with the functional API that returns the previous\n * state from the checkpoint from the last invocation of the current thread.\n *\n * This function allows workflows to access state that was saved in previous runs\n * using {@link entrypoint.final}.\n *\n * !!! warning \"Beta\"\n *     The Functional API is currently in beta and is subject to change.\n *\n * @beta\n *\n * @typeParam StateT - The type of the state that was previously saved\n * @returns The previous saved state from the last invocation of the current thread\n *\n * @example\n * ```typescript\n * const previousState = getPreviousState<{ counter: number }>();\n * const newCount = (previousState?.counter ?? 0) + 1;\n * ```\n */\nfunction getPreviousState() {\n    const config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    return config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_3__.CONFIG_KEY_PREVIOUS_STATE];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2Z1bmMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Y7QUFDcEM7QUFDRztBQUNvQztBQUNuQjtBQUNHO0FBQ2I7QUFDc0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxrQkFBa0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxtQkFBbUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNPO0FBQ1AsWUFBWSxjQUFjO0FBQzFCLFlBQVk7QUFDWjtBQUNBLFFBQVEsbUVBQXdCLFVBQVUsOERBQW1CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGVBQWUscURBQUksR0FBRyxtQkFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksK0JBQStCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsaUJBQWlCO0FBQ25FLElBQUksc0NBQXNDO0FBQzFDO0FBQ0E7QUFDQSxRQUFRLHdCQUF3QjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxJQUFJLHdCQUF3QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMseUJBQXlCO0FBQzlEO0FBQ0EsZUFBZSxjQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksY0FBYztBQUMxQixZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xELDhCQUE4QixNQUFNO0FBQ3BDLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLHFCQUFxQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtCQUErQjtBQUMzQyxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx3Q0FBd0MsV0FBVyxFQUFFLE1BQU07QUFDM0QsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5Qyw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtCQUErQjtBQUMzQyxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDTztBQUNQLFlBQVksNEJBQTRCO0FBQ3hDLFlBQVk7QUFDWjtBQUNBLFFBQVEsbUVBQXdCLFVBQVUsOERBQW1CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5RUFBd0I7QUFDMUMsZUFBZSxvREFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSwyQkFBMkIsZ0RBQUs7QUFDaEMsMkJBQTJCLGdEQUFLO0FBQ2hDO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLGFBQWEsZ0RBQUssT0FBTyx3RUFBYztBQUN2QyxhQUFhLDhDQUFHLE9BQU8sOERBQVM7QUFDaEMsYUFBYSxtREFBUSxPQUFPLDhEQUFTO0FBQ3JDLFNBQVM7QUFDVCx1QkFBdUIsZ0RBQUs7QUFDNUIsd0JBQXdCLDhDQUFHO0FBQzNCLHdCQUF3Qiw4Q0FBRztBQUMzQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxvQ0FBb0MsY0FBYztBQUNsRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1QkFBdUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxpQkFBaUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ087QUFDUCxtQkFBbUIsMEZBQWtDO0FBQ3JELGlDQUFpQyxvRUFBeUI7QUFDMUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZnVuYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9zaW5nbGV0b25zXCI7XG5pbXBvcnQgeyBQcmVnZWwgfSBmcm9tIFwiLi4vcHJlZ2VsL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBQcmVnZWxOb2RlIH0gZnJvbSBcIi4uL3ByZWdlbC9yZWFkLmpzXCI7XG5pbXBvcnQgeyBDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFLCBFTkQsIFBSRVZJT1VTLCBTVEFSVCwgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBFcGhlbWVyYWxWYWx1ZSB9IGZyb20gXCIuLi9jaGFubmVscy9lcGhlbWVyYWxfdmFsdWUuanNcIjtcbmltcG9ydCB7IGNhbGwsIGdldFJ1bm5hYmxlRm9yRW50cnlwb2ludCB9IGZyb20gXCIuLi9wcmVnZWwvY2FsbC5qc1wiO1xuaW1wb3J0IHsgTGFzdFZhbHVlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2xhc3RfdmFsdWUuanNcIjtcbmltcG9ydCB7IGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiwgaXNHZW5lcmF0b3JGdW5jdGlvbiB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuLyoqXG4gKiBEZWZpbmUgYSBMYW5nR3JhcGggdGFzayB1c2luZyB0aGUgYHRhc2tgIGZ1bmN0aW9uLlxuICpcbiAqICEhISB3YXJuaW5nIFwiQmV0YVwiXG4gKiAgICAgVGhlIEZ1bmN0aW9uYWwgQVBJIGlzIGN1cnJlbnRseSBpbiBiZXRhIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZS5cbiAqXG4gKiBAYmV0YVxuICpcbiAqIFRhc2tzIGNhbiBvbmx5IGJlIGNhbGxlZCBmcm9tIHdpdGhpbiBhbiB7QGxpbmsgZW50cnlwb2ludH0gb3IgZnJvbSB3aXRoaW4gYSBTdGF0ZUdyYXBoLlxuICogQSB0YXNrIGNhbiBiZSBjYWxsZWQgbGlrZSBhIHJlZ3VsYXIgZnVuY3Rpb24gd2l0aCB0aGUgZm9sbG93aW5nIGRpZmZlcmVuY2VzOlxuICpcbiAqIC0gV2hlbiBhIGNoZWNrcG9pbnRlciBpcyBlbmFibGVkLCB0aGUgZnVuY3Rpb24gaW5wdXRzIGFuZCBvdXRwdXRzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICogLSBUaGUgd3JhcHBlZCBmdW5jdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYW4gZW50cnlwb2ludCBvciBTdGF0ZUdyYXBoLlxuICogLSBDYWxsaW5nIHRoZSBmdW5jdGlvbiBwcm9kdWNlcyBhIHByb21pc2UuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBwYXJhbGxlbGl6ZSB0YXNrcy5cbiAqXG4gKiBAdHlwZVBhcmFtIEFyZ3NUIC0gVGhlIHR5cGUgb2YgYXJndW1lbnRzIHRoZSB0YXNrIGZ1bmN0aW9uIGFjY2VwdHNcbiAqIEB0eXBlUGFyYW0gT3V0cHV0VCAtIFRoZSB0eXBlIG9mIHZhbHVlIHRoZSB0YXNrIGZ1bmN0aW9uIHJldHVybnNcbiAqIEBwYXJhbSBvcHRpb25zT3JOYW1lIC0gRWl0aGVyIGFuIHtAbGluayBUYXNrT3B0aW9uc30gb2JqZWN0LCBvciBhIHN0cmluZyBmb3IgdGhlIG5hbWUgb2YgdGhlIHRhc2tcbiAqIEBwYXJhbSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgdGhpcyB0YXNrXG4gKiBAcmV0dXJucyBBIHByb3h5IGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB0aGUgc2FtZSBhcmd1bWVudHMgYXMgdGhlIG9yaWdpbmFsIGFuZCBhbHdheXMgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgUHJvbWlzZVxuICpcbiAqIEBleGFtcGxlIGJhc2ljIGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFkZE9uZSA9IHRhc2soXCJhZGRcIiwgYXN5bmMgKGE6IG51bWJlcikgPT4gYSArIDEpO1xuICpcbiAqIGNvbnN0IHdvcmtmbG93ID0gZW50cnlwb2ludChcImV4YW1wbGVcIiwgYXN5bmMgKG51bWJlcnM6IG51bWJlcltdKSA9PiB7XG4gKiAgIGNvbnN0IHByb21pc2VzID0gbnVtYmVycy5tYXAobiA9PiBhZGRPbmUobikpO1xuICogICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICogICByZXR1cm4gcmVzdWx0cztcbiAqIH0pO1xuICpcbiAqIC8vIENhbGwgdGhlIGVudHJ5cG9pbnRcbiAqIGF3YWl0IHdvcmtmbG93Lmludm9rZShbMSwgMiwgM10pOyAvLyBSZXR1cm5zIFsyLCAzLCA0XVxuICogYGBgXG4gKlxuICogQGV4YW1wbGUgdXNpbmcgYSByZXRyeSBwb2xpY3lcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFkZE9uZSA9IHRhc2soe1xuICogICAgIG5hbWU6IFwiYWRkXCIsXG4gKiAgICAgcmV0cnk6IHsgbWF4QXR0ZW1wdHM6IDMgfVxuICogICB9LFxuICogICBhc3luYyAoYTogbnVtYmVyKSA9PiBhICsgMVxuICogKTtcbiAqXG4gKiBjb25zdCB3b3JrZmxvdyA9IGVudHJ5cG9pbnQoXCJleGFtcGxlXCIsIGFzeW5jIChudW1iZXJzOiBudW1iZXJbXSkgPT4ge1xuICogICBjb25zdCBwcm9taXNlcyA9IG51bWJlcnMubWFwKG4gPT4gYWRkT25lKG4pKTtcbiAqICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAqICAgcmV0dXJuIHJlc3VsdHM7XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFzayhvcHRpb25zT3JOYW1lLCBmdW5jKSB7XG4gICAgY29uc3QgeyBuYW1lLCByZXRyeSB9ID0gdHlwZW9mIG9wdGlvbnNPck5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyB7IG5hbWU6IG9wdGlvbnNPck5hbWUsIHJldHJ5OiB1bmRlZmluZWQgfVxuICAgICAgICA6IG9wdGlvbnNPck5hbWU7XG4gICAgaWYgKGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbihmdW5jKSB8fCBpc0dlbmVyYXRvckZ1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvcnMgYXJlIGRpc2FsbG93ZWQgYXMgdGFza3MuIEZvciBzdHJlYW1pbmcgcmVzcG9uc2VzLCB1c2UgY29uZmlnLndyaXRlLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHJldHVybiBjYWxsKHsgZnVuYywgbmFtZSwgcmV0cnkgfSwgLi4uYXJncyk7XG4gICAgfTtcbn1cbi8qKlxuICogRGVmaW5lIGEgTGFuZ0dyYXBoIHdvcmtmbG93IHVzaW5nIHRoZSBgZW50cnlwb2ludGAgZnVuY3Rpb24uXG4gKlxuICogISEhIHdhcm5pbmcgXCJCZXRhXCJcbiAqICAgICBUaGUgRnVuY3Rpb25hbCBBUEkgaXMgY3VycmVudGx5IGluIGJldGEgYW5kIGlzIHN1YmplY3QgdG8gY2hhbmdlLlxuICpcbiAqIEBiZXRhXG4gKlxuICogIyMjIEZ1bmN0aW9uIHNpZ25hdHVyZVxuICpcbiAqIFRoZSB3cmFwcGVkIGZ1bmN0aW9uIG11c3QgYWNjZXB0IGF0IG1vc3QgKip0d28gcGFyYW1ldGVycyoqLiBUaGUgZmlyc3QgcGFyYW1ldGVyXG4gKiBpcyB0aGUgaW5wdXQgdG8gdGhlIGZ1bmN0aW9uLiBUaGUgc2Vjb25kIChvcHRpb25hbCkgcGFyYW1ldGVyIGlzIGFcbiAqIHtAbGluayBMYW5nR3JhcGhSdW5uYWJsZUNvbmZpZ30gb2JqZWN0LiBJZiB5b3Ugd2lzaCB0byBwYXNzIG11bHRpcGxlIHBhcmFtZXRlcnMgdG9cbiAqIHRoZSBmdW5jdGlvbiwgeW91IGNhbiBwYXNzIHRoZW0gYXMgYW4gb2JqZWN0LlxuICpcbiAqICMjIyBIZWxwZXIgZnVuY3Rpb25zXG4gKlxuICogIyMjIyBTdHJlYW1pbmdcbiAqIFRvIHdyaXRlIGRhdGEgdG8gdGhlIFwiY3VzdG9tXCIgc3RyZWFtLCB1c2UgdGhlIHtAbGluayBnZXRXcml0ZXJ9IGZ1bmN0aW9uLCBvciB0aGVcbiAqIHtAbGluayBMYW5nR3JhcGhSdW5uYWJsZUNvbmZpZy53cml0ZXJ9IHByb3BlcnR5LlxuICpcbiAqICMjIyMgU3RhdGUgbWFuYWdlbWVudFxuICogVGhlIHtAbGluayBnZXRQcmV2aW91c1N0YXRlfSBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBhY2Nlc3MgdGhlIHByZXZpb3VzIHN0YXRlXG4gKiB0aGF0IHdhcyByZXR1cm5lZCBmcm9tIHRoZSBsYXN0IGludm9jYXRpb24gb2YgdGhlIGVudHJ5cG9pbnQgb24gdGhlIHNhbWUgdGhyZWFkIGlkLlxuICpcbiAqIElmIHlvdSB3aXNoIHRvIHNhdmUgc3RhdGUgb3RoZXIgdGhhbiB0aGUgcmV0dXJuIHZhbHVlLCB5b3UgY2FuIHVzZSB0aGVcbiAqIHtAbGluayBlbnRyeXBvaW50LmZpbmFsfSBmdW5jdGlvbi5cbiAqXG4gKiBAdHlwZVBhcmFtIElucHV0VCAtIFRoZSB0eXBlIG9mIGlucHV0IHRoZSBlbnRyeXBvaW50IGFjY2VwdHNcbiAqIEB0eXBlUGFyYW0gT3V0cHV0VCAtIFRoZSB0eXBlIG9mIG91dHB1dCB0aGUgZW50cnlwb2ludCBwcm9kdWNlc1xuICogQHBhcmFtIG9wdGlvbnNPck5hbWUgLSBFaXRoZXIgYW4ge0BsaW5rIEVudHJ5cG9pbnRPcHRpb25zfSBvYmplY3QsIG9yIGEgc3RyaW5nIGZvciB0aGUgbmFtZSBvZiB0aGUgZW50cnlwb2ludFxuICogQHBhcmFtIGZ1bmMgLSBUaGUgZnVuY3Rpb24gdGhhdCBleGVjdXRlcyB0aGlzIGVudHJ5cG9pbnRcbiAqIEByZXR1cm5zIEEge0BsaW5rIFByZWdlbH0gaW5zdGFuY2UgdGhhdCBjYW4gYmUgcnVuIHRvIGV4ZWN1dGUgdGhlIHdvcmtmbG93XG4gKlxuICogQGV4YW1wbGUgVXNpbmcgZW50cnlwb2ludCBhbmQgdGFza3NcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IHRhc2ssIGVudHJ5cG9pbnQgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiAqIGltcG9ydCB7IE1lbW9yeVNhdmVyIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbiAqIGltcG9ydCB7IGludGVycnVwdCwgQ29tbWFuZCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuICpcbiAqIGNvbnN0IGNvbXBvc2VFc3NheSA9IHRhc2soXCJjb21wb3NlXCIsIGFzeW5jICh0b3BpYzogc3RyaW5nKSA9PiB7XG4gKiAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7IC8vIFNpbXVsYXRlIHNsb3cgb3BlcmF0aW9uXG4gKiAgIHJldHVybiBgQW4gZXNzYXkgYWJvdXQgJHt0b3BpY31gO1xuICogfSk7XG4gKlxuICogY29uc3QgcmV2aWV3V29ya2Zsb3cgPSBlbnRyeXBvaW50KHtcbiAqICAgbmFtZTogXCJyZXZpZXdcIixcbiAqICAgY2hlY2twb2ludGVyOiBuZXcgTWVtb3J5U2F2ZXIoKVxuICogfSwgYXN5bmMgKHRvcGljOiBzdHJpbmcpID0+IHtcbiAqICAgY29uc3QgZXNzYXkgPSBhd2FpdCBjb21wb3NlRXNzYXkodG9waWMpO1xuICogICBjb25zdCBodW1hblJldmlldyA9IGF3YWl0IGludGVycnVwdCh7XG4gKiAgICAgcXVlc3Rpb246IFwiUGxlYXNlIHByb3ZpZGUgYSByZXZpZXdcIixcbiAqICAgICBlc3NheVxuICogICB9KTtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBlc3NheSxcbiAqICAgICByZXZpZXc6IGh1bWFuUmV2aWV3XG4gKiAgIH07XG4gKiB9KTtcbiAqXG4gKiAvLyBFeGFtcGxlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSB3b3JrZmxvd1xuICogY29uc3QgY29uZmlnID0ge1xuICogICBjb25maWd1cmFibGU6IHtcbiAqICAgICB0aHJlYWRfaWQ6IFwic29tZV90aHJlYWRcIlxuICogICB9XG4gKiB9O1xuICpcbiAqIC8vIFRvcGljIGZvciB0aGUgZXNzYXlcbiAqIGNvbnN0IHRvcGljID0gXCJjYXRzXCI7XG4gKlxuICogLy8gU3RyZWFtIHRoZSB3b3JrZmxvdyB0byBnZW5lcmF0ZSB0aGUgZXNzYXkgYW5kIGF3YWl0IGh1bWFuIHJldmlld1xuICogZm9yIGF3YWl0IChjb25zdCByZXN1bHQgb2YgcmV2aWV3V29ya2Zsb3cuc3RyZWFtKHRvcGljLCBjb25maWcpKSB7XG4gKiAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiB9XG4gKlxuICogLy8gRXhhbXBsZSBodW1hbiByZXZpZXcgcHJvdmlkZWQgYWZ0ZXIgdGhlIGludGVycnVwdFxuICogY29uc3QgaHVtYW5SZXZpZXcgPSBcIlRoaXMgZXNzYXkgaXMgZ3JlYXQuXCI7XG4gKlxuICogLy8gUmVzdW1lIHRoZSB3b3JrZmxvdyB3aXRoIHRoZSBwcm92aWRlZCBodW1hbiByZXZpZXdcbiAqIGZvciBhd2FpdCAoY29uc3QgcmVzdWx0IG9mIHJldmlld1dvcmtmbG93LnN0cmVhbShuZXcgQ29tbWFuZCh7IHJlc3VtZTogaHVtYW5SZXZpZXcgfSksIGNvbmZpZykpIHtcbiAqICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlIEFjY2Vzc2luZyB0aGUgcHJldmlvdXMgcmV0dXJuIHZhbHVlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBlbnRyeXBvaW50LCBnZXRQcmV2aW91c1N0YXRlIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4gKiBpbXBvcnQgeyBNZW1vcnlTYXZlciB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50XCI7XG4gKlxuICogY29uc3QgYWNjdW11bGF0b3IgPSBlbnRyeXBvaW50KHtcbiAqICAgbmFtZTogXCJhY2N1bXVsYXRvclwiLFxuICogICBjaGVja3BvaW50ZXI6IG5ldyBNZW1vcnlTYXZlcigpXG4gKiB9LCBhc3luYyAoaW5wdXQ6IHN0cmluZykgPT4ge1xuICogICBjb25zdCBwcmV2aW91cyA9IGdldFByZXZpb3VzU3RhdGU8bnVtYmVyPigpO1xuICogICByZXR1cm4gcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IGAke3ByZXZpb3VzIH0gJHtpbnB1dH1gIDogaW5wdXQ7XG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb25maWcgPSB7XG4gKiAgIGNvbmZpZ3VyYWJsZToge1xuICogICAgIHRocmVhZF9pZDogXCJzb21lX3RocmVhZFwiXG4gKiAgIH1cbiAqIH07XG4gKiBhd2FpdCBhY2N1bXVsYXRvci5pbnZva2UoXCJoZWxsb1wiLCBjb25maWcpOyAvLyByZXR1cm5zIFwiaGVsbG9cIlxuICogYXdhaXQgYWNjdW11bGF0b3IuaW52b2tlKFwid29ybGRcIiwgY29uZmlnKTsgLy8gcmV0dXJucyBcImhlbGxvIHdvcmxkXCJcbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlIFVzaW5nIGVudHJ5cG9pbnQuZmluYWwgdG8gc2F2ZSBhIHZhbHVlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBlbnRyeXBvaW50LCBnZXRQcmV2aW91c1N0YXRlIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4gKiBpbXBvcnQgeyBNZW1vcnlTYXZlciB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50XCI7XG4gKlxuICogY29uc3QgbXlXb3JrZmxvdyA9IGVudHJ5cG9pbnQoe1xuICogICBuYW1lOiBcImFjY3VtdWxhdG9yXCIsXG4gKiAgIGNoZWNrcG9pbnRlcjogbmV3IE1lbW9yeVNhdmVyKClcbiAqIH0sIGFzeW5jIChudW06IG51bWJlcikgPT4ge1xuICogICBjb25zdCBwcmV2aW91cyA9IGdldFByZXZpb3VzU3RhdGU8bnVtYmVyPigpO1xuICpcbiAqICAgLy8gVGhpcyB3aWxsIHJldHVybiB0aGUgcHJldmlvdXMgdmFsdWUgdG8gdGhlIGNhbGxlciwgc2F2aW5nXG4gKiAgIC8vIDIgKiBudW0gdG8gdGhlIGNoZWNrcG9pbnQsIHdoaWNoIHdpbGwgYmUgdXNlZCBpbiB0aGUgbmV4dCBpbnZvY2F0aW9uXG4gKiAgIC8vIGZvciB0aGUgYHByZXZpb3VzYCBwYXJhbWV0ZXIuXG4gKiAgIHJldHVybiBlbnRyeXBvaW50LmZpbmFsKHtcbiAqICAgICB2YWx1ZTogcHJldmlvdXMgPz8gMCxcbiAqICAgICBzYXZlOiAyICogbnVtXG4gKiAgIH0pO1xuICogfSk7XG4gKlxuICogY29uc3QgY29uZmlnID0ge1xuICogICBjb25maWd1cmFibGU6IHtcbiAqICAgICB0aHJlYWRfaWQ6IFwic29tZV90aHJlYWRcIlxuICogICB9XG4gKiB9O1xuICpcbiAqIGF3YWl0IG15V29ya2Zsb3cuaW52b2tlKDMsIGNvbmZpZyk7IC8vIDAgKHByZXZpb3VzIHdhcyB1bmRlZmluZWQpXG4gKiBhd2FpdCBteVdvcmtmbG93Lmludm9rZSgxLCBjb25maWcpOyAvLyA2IChwcmV2aW91cyB3YXMgMyAqIDIgZnJvbSB0aGUgcHJldmlvdXMgaW52b2NhdGlvbilcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgZW50cnlwb2ludCA9IGZ1bmN0aW9uIGVudHJ5cG9pbnQob3B0aW9uc09yTmFtZSwgZnVuYykge1xuICAgIGNvbnN0IHsgbmFtZSwgY2hlY2twb2ludGVyLCBzdG9yZSB9ID0gdHlwZW9mIG9wdGlvbnNPck5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyB7IG5hbWU6IG9wdGlvbnNPck5hbWUsIGNoZWNrcG9pbnRlcjogdW5kZWZpbmVkLCBzdG9yZTogdW5kZWZpbmVkIH1cbiAgICAgICAgOiBvcHRpb25zT3JOYW1lO1xuICAgIGlmIChpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24oZnVuYykgfHwgaXNHZW5lcmF0b3JGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3JzIGFyZSBkaXNhbGxvd2VkIGFzIGVudHJ5cG9pbnRzLiBGb3Igc3RyZWFtaW5nIHJlc3BvbnNlcywgdXNlIGNvbmZpZy53cml0ZS5cIik7XG4gICAgfVxuICAgIGNvbnN0IHN0cmVhbU1vZGUgPSBcInVwZGF0ZXNcIjtcbiAgICBjb25zdCBib3VuZCA9IGdldFJ1bm5hYmxlRm9yRW50cnlwb2ludChuYW1lLCBmdW5jKTtcbiAgICByZXR1cm4gbmV3IFByZWdlbCh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGNoZWNrcG9pbnRlcixcbiAgICAgICAgbm9kZXM6IHtcbiAgICAgICAgICAgIFtuYW1lXTogbmV3IFByZWdlbE5vZGUoe1xuICAgICAgICAgICAgICAgIGJvdW5kLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJzOiBbU1RBUlRdLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxzOiBbU1RBUlRdLFxuICAgICAgICAgICAgICAgIHdyaXRlcnM6IFtdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICAgIGNoYW5uZWxzOiB7XG4gICAgICAgICAgICBbU1RBUlRdOiBuZXcgRXBoZW1lcmFsVmFsdWUoKSxcbiAgICAgICAgICAgIFtFTkRdOiBuZXcgTGFzdFZhbHVlKCksXG4gICAgICAgICAgICBbUFJFVklPVVNdOiBuZXcgTGFzdFZhbHVlKCksXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0Q2hhbm5lbHM6IFNUQVJULFxuICAgICAgICBvdXRwdXRDaGFubmVsczogRU5ELFxuICAgICAgICBzdHJlYW1DaGFubmVsczogRU5ELFxuICAgICAgICBzdHJlYW1Nb2RlLFxuICAgICAgICBzdG9yZSxcbiAgICB9KTtcbn07XG4vLyBkb2N1bWVudGVkIGJ5IHRoZSBFbnRyeXBvaW50RnVuY3Rpb24gaW50ZXJmYWNlXG5lbnRyeXBvaW50LmZpbmFsID0gZnVuY3Rpb24gZmluYWwoeyB2YWx1ZSwgc2F2ZSwgfSkge1xuICAgIHJldHVybiB7IHZhbHVlLCBzYXZlLCBfX2xnX3R5cGU6IFwiX19wcmVnZWxfZmluYWxcIiB9O1xufTtcbi8qKlxuICogQSBoZWxwZXIgdXRpbGl0eSBmdW5jdGlvbiBmb3IgdXNlIHdpdGggdGhlIGZ1bmN0aW9uYWwgQVBJIHRoYXQgcmV0dXJucyB0aGUgcHJldmlvdXNcbiAqIHN0YXRlIGZyb20gdGhlIGNoZWNrcG9pbnQgZnJvbSB0aGUgbGFzdCBpbnZvY2F0aW9uIG9mIHRoZSBjdXJyZW50IHRocmVhZC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyB3b3JrZmxvd3MgdG8gYWNjZXNzIHN0YXRlIHRoYXQgd2FzIHNhdmVkIGluIHByZXZpb3VzIHJ1bnNcbiAqIHVzaW5nIHtAbGluayBlbnRyeXBvaW50LmZpbmFsfS5cbiAqXG4gKiAhISEgd2FybmluZyBcIkJldGFcIlxuICogICAgIFRoZSBGdW5jdGlvbmFsIEFQSSBpcyBjdXJyZW50bHkgaW4gYmV0YSBhbmQgaXMgc3ViamVjdCB0byBjaGFuZ2UuXG4gKlxuICogQGJldGFcbiAqXG4gKiBAdHlwZVBhcmFtIFN0YXRlVCAtIFRoZSB0eXBlIG9mIHRoZSBzdGF0ZSB0aGF0IHdhcyBwcmV2aW91c2x5IHNhdmVkXG4gKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgc2F2ZWQgc3RhdGUgZnJvbSB0aGUgbGFzdCBpbnZvY2F0aW9uIG9mIHRoZSBjdXJyZW50IHRocmVhZFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcmV2aW91c1N0YXRlID0gZ2V0UHJldmlvdXNTdGF0ZTx7IGNvdW50ZXI6IG51bWJlciB9PigpO1xuICogY29uc3QgbmV3Q291bnQgPSAocHJldmlvdXNTdGF0ZT8uY291bnRlciA/PyAwKSArIDE7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXZpb3VzU3RhdGUoKSB7XG4gICAgY29uc3QgY29uZmlnID0gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xuICAgIHJldHVybiBjb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9QUkVWSU9VU19TVEFURV07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/types.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/types.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isEntrypointFinal: () => (/* binding */ isEntrypointFinal)\n/* harmony export */ });\n/**\n * Checks if a value is an EntrypointFinal - use this instead of `instanceof`, as value may have been deserialized\n * @param value The value to check\n * @returns Whether the value is an EntrypointFinal\n */\nfunction isEntrypointFinal(value) {\n    return (typeof value === \"object\" &&\n        value !== null &&\n        \"__lg_type\" in value &&\n        value.__lg_type === \"__pregel_final\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2Z1bmMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZnVuYy90eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENoZWNrcyBpZiBhIHZhbHVlIGlzIGFuIEVudHJ5cG9pbnRGaW5hbCAtIHVzZSB0aGlzIGluc3RlYWQgb2YgYGluc3RhbmNlb2ZgLCBhcyB2YWx1ZSBtYXkgaGF2ZSBiZWVuIGRlc2VyaWFsaXplZFxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVja1xuICogQHJldHVybnMgV2hldGhlciB0aGUgdmFsdWUgaXMgYW4gRW50cnlwb2ludEZpbmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VudHJ5cG9pbnRGaW5hbCh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIFwiX19sZ190eXBlXCIgaW4gdmFsdWUgJiZcbiAgICAgICAgdmFsdWUuX19sZ190eXBlID09PSBcIl9fcHJlZ2VsX2ZpbmFsXCIpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* binding */ Annotation),\n/* harmony export */   AnnotationRoot: () => (/* binding */ AnnotationRoot),\n/* harmony export */   getChannel: () => (/* binding */ getChannel)\n/* harmony export */ });\n/* harmony import */ var _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../channels/binop.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/binop.js\");\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/last_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _managed_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managed/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n\n\n\n/**\n * Should not be instantiated directly. See {@link Annotation}.\n */\nclass AnnotationRoot {\n    constructor(s) {\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"AnnotationRoot\"\n        });\n        Object.defineProperty(this, \"spec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.spec = s;\n    }\n}\n/**\n * Helper that instantiates channels within a StateGraph state.\n *\n * Can be used as a field in an {@link Annotation.Root} wrapper in one of two ways:\n * 1. **Directly**: Creates a channel that stores the most recent value returned from a node.\n * 2. **With a reducer**: Creates a channel that applies the reducer on a node's return value.\n *\n * @example\n * ```ts\n * import { StateGraph, Annotation } from \"@langchain/langgraph\";\n *\n * // Define a state with a single string key named \"currentOutput\"\n * const SimpleAnnotation = Annotation.Root({\n *   currentOutput: Annotation<string>,\n * });\n *\n * const graphBuilder = new StateGraph(SimpleAnnotation);\n *\n * // A node in the graph that returns an object with a \"currentOutput\" key\n * // replaces the value in the state. You can get the state type as shown below:\n * const myNode = (state: typeof SimpleAnnotation.State) => {\n *   return {\n *     currentOutput: \"some_new_value\",\n *   };\n * }\n *\n * const graph = graphBuilder\n *   .addNode(\"myNode\", myNode)\n *   ...\n *   .compile();\n * ```\n *\n * @example\n * ```ts\n * import { type BaseMessage, AIMessage } from \"@langchain/core/messages\";\n * import { StateGraph, Annotation } from \"@langchain/langgraph\";\n *\n * // Define a state with a single key named \"messages\" that will\n * // combine a returned BaseMessage or arrays of BaseMessages\n * const AnnotationWithReducer = Annotation.Root({\n *   messages: Annotation<BaseMessage[]>({\n *     // Different types are allowed for updates\n *     reducer: (left: BaseMessage[], right: BaseMessage | BaseMessage[]) => {\n *       if (Array.isArray(right)) {\n *         return left.concat(right);\n *       }\n *       return left.concat([right]);\n *     },\n *     default: () => [],\n *   }),\n * });\n *\n * const graphBuilder = new StateGraph(AnnotationWithReducer);\n *\n * // A node in the graph that returns an object with a \"messages\" key\n * // will update the state by combining the existing value with the returned one.\n * const myNode = (state: typeof AnnotationWithReducer.State) => {\n *   return {\n *     messages: [new AIMessage(\"Some new response\")],\n *   };\n * };\n *\n * const graph = graphBuilder\n *   .addNode(\"myNode\", myNode)\n *   ...\n *   .compile();\n * ```\n * @namespace\n * @property Root\n * Helper function that instantiates a StateGraph state. See {@link Annotation} for usage.\n */\nconst Annotation = function (annotation) {\n    if ((0,_managed_base_js__WEBPACK_IMPORTED_MODULE_2__.isConfiguredManagedValue)(annotation)) {\n        return annotation;\n    }\n    else if (annotation) {\n        return getChannel(annotation);\n    }\n    else {\n        // @ts-expect-error - Annotation without reducer\n        return new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__.LastValue();\n    }\n};\nAnnotation.Root = (sd) => new AnnotationRoot(sd);\nfunction getChannel(reducer) {\n    if (typeof reducer === \"object\" &&\n        reducer &&\n        \"reducer\" in reducer &&\n        reducer.reducer) {\n        return new _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate(reducer.reducer, reducer.default);\n    }\n    if (typeof reducer === \"object\" &&\n        reducer &&\n        \"value\" in reducer &&\n        reducer.value) {\n        return new _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate(reducer.value, reducer.default);\n    }\n    // @ts-expect-error - Annotation without reducer\n    return new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__.LastValue();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL2Fubm90YXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStEO0FBQ1Q7QUFDUztBQUMvRDtBQUNBLDZDQUE2QyxpQkFBaUI7QUFDOUQ7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1QkFBdUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUJBQXlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4QkFBOEI7QUFDMUMsWUFBWSx5QkFBeUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGtCQUFrQjtBQUNoRjtBQUNPO0FBQ1AsUUFBUSwwRUFBd0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOERBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1RUFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1RUFBdUI7QUFDMUM7QUFDQTtBQUNBLGVBQWUsOERBQVM7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZ3JhcGgvYW5ub3RhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZSB9IGZyb20gXCIuLi9jaGFubmVscy9iaW5vcC5qc1wiO1xuaW1wb3J0IHsgTGFzdFZhbHVlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2xhc3RfdmFsdWUuanNcIjtcbmltcG9ydCB7IGlzQ29uZmlndXJlZE1hbmFnZWRWYWx1ZSwgfSBmcm9tIFwiLi4vbWFuYWdlZC9iYXNlLmpzXCI7XG4vKipcbiAqIFNob3VsZCBub3QgYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LiBTZWUge0BsaW5rIEFubm90YXRpb259LlxuICovXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvblJvb3Qge1xuICAgIGNvbnN0cnVjdG9yKHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJBbm5vdGF0aW9uUm9vdFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzcGVjXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3BlYyA9IHM7XG4gICAgfVxufVxuLyoqXG4gKiBIZWxwZXIgdGhhdCBpbnN0YW50aWF0ZXMgY2hhbm5lbHMgd2l0aGluIGEgU3RhdGVHcmFwaCBzdGF0ZS5cbiAqXG4gKiBDYW4gYmUgdXNlZCBhcyBhIGZpZWxkIGluIGFuIHtAbGluayBBbm5vdGF0aW9uLlJvb3R9IHdyYXBwZXIgaW4gb25lIG9mIHR3byB3YXlzOlxuICogMS4gKipEaXJlY3RseSoqOiBDcmVhdGVzIGEgY2hhbm5lbCB0aGF0IHN0b3JlcyB0aGUgbW9zdCByZWNlbnQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIG5vZGUuXG4gKiAyLiAqKldpdGggYSByZWR1Y2VyKio6IENyZWF0ZXMgYSBjaGFubmVsIHRoYXQgYXBwbGllcyB0aGUgcmVkdWNlciBvbiBhIG5vZGUncyByZXR1cm4gdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTdGF0ZUdyYXBoLCBBbm5vdGF0aW9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4gKlxuICogLy8gRGVmaW5lIGEgc3RhdGUgd2l0aCBhIHNpbmdsZSBzdHJpbmcga2V5IG5hbWVkIFwiY3VycmVudE91dHB1dFwiXG4gKiBjb25zdCBTaW1wbGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiAqICAgY3VycmVudE91dHB1dDogQW5ub3RhdGlvbjxzdHJpbmc+LFxuICogfSk7XG4gKlxuICogY29uc3QgZ3JhcGhCdWlsZGVyID0gbmV3IFN0YXRlR3JhcGgoU2ltcGxlQW5ub3RhdGlvbik7XG4gKlxuICogLy8gQSBub2RlIGluIHRoZSBncmFwaCB0aGF0IHJldHVybnMgYW4gb2JqZWN0IHdpdGggYSBcImN1cnJlbnRPdXRwdXRcIiBrZXlcbiAqIC8vIHJlcGxhY2VzIHRoZSB2YWx1ZSBpbiB0aGUgc3RhdGUuIFlvdSBjYW4gZ2V0IHRoZSBzdGF0ZSB0eXBlIGFzIHNob3duIGJlbG93OlxuICogY29uc3QgbXlOb2RlID0gKHN0YXRlOiB0eXBlb2YgU2ltcGxlQW5ub3RhdGlvbi5TdGF0ZSkgPT4ge1xuICogICByZXR1cm4ge1xuICogICAgIGN1cnJlbnRPdXRwdXQ6IFwic29tZV9uZXdfdmFsdWVcIixcbiAqICAgfTtcbiAqIH1cbiAqXG4gKiBjb25zdCBncmFwaCA9IGdyYXBoQnVpbGRlclxuICogICAuYWRkTm9kZShcIm15Tm9kZVwiLCBteU5vZGUpXG4gKiAgIC4uLlxuICogICAuY29tcGlsZSgpO1xuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyB0eXBlIEJhc2VNZXNzYWdlLCBBSU1lc3NhZ2UgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG4gKiBpbXBvcnQgeyBTdGF0ZUdyYXBoLCBBbm5vdGF0aW9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4gKlxuICogLy8gRGVmaW5lIGEgc3RhdGUgd2l0aCBhIHNpbmdsZSBrZXkgbmFtZWQgXCJtZXNzYWdlc1wiIHRoYXQgd2lsbFxuICogLy8gY29tYmluZSBhIHJldHVybmVkIEJhc2VNZXNzYWdlIG9yIGFycmF5cyBvZiBCYXNlTWVzc2FnZXNcbiAqIGNvbnN0IEFubm90YXRpb25XaXRoUmVkdWNlciA9IEFubm90YXRpb24uUm9vdCh7XG4gKiAgIG1lc3NhZ2VzOiBBbm5vdGF0aW9uPEJhc2VNZXNzYWdlW10+KHtcbiAqICAgICAvLyBEaWZmZXJlbnQgdHlwZXMgYXJlIGFsbG93ZWQgZm9yIHVwZGF0ZXNcbiAqICAgICByZWR1Y2VyOiAobGVmdDogQmFzZU1lc3NhZ2VbXSwgcmlnaHQ6IEJhc2VNZXNzYWdlIHwgQmFzZU1lc3NhZ2VbXSkgPT4ge1xuICogICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmlnaHQpKSB7XG4gKiAgICAgICAgIHJldHVybiBsZWZ0LmNvbmNhdChyaWdodCk7XG4gKiAgICAgICB9XG4gKiAgICAgICByZXR1cm4gbGVmdC5jb25jYXQoW3JpZ2h0XSk7XG4gKiAgICAgfSxcbiAqICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAqICAgfSksXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBncmFwaEJ1aWxkZXIgPSBuZXcgU3RhdGVHcmFwaChBbm5vdGF0aW9uV2l0aFJlZHVjZXIpO1xuICpcbiAqIC8vIEEgbm9kZSBpbiB0aGUgZ3JhcGggdGhhdCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgXCJtZXNzYWdlc1wiIGtleVxuICogLy8gd2lsbCB1cGRhdGUgdGhlIHN0YXRlIGJ5IGNvbWJpbmluZyB0aGUgZXhpc3RpbmcgdmFsdWUgd2l0aCB0aGUgcmV0dXJuZWQgb25lLlxuICogY29uc3QgbXlOb2RlID0gKHN0YXRlOiB0eXBlb2YgQW5ub3RhdGlvbldpdGhSZWR1Y2VyLlN0YXRlKSA9PiB7XG4gKiAgIHJldHVybiB7XG4gKiAgICAgbWVzc2FnZXM6IFtuZXcgQUlNZXNzYWdlKFwiU29tZSBuZXcgcmVzcG9uc2VcIildLFxuICogICB9O1xuICogfTtcbiAqXG4gKiBjb25zdCBncmFwaCA9IGdyYXBoQnVpbGRlclxuICogICAuYWRkTm9kZShcIm15Tm9kZVwiLCBteU5vZGUpXG4gKiAgIC4uLlxuICogICAuY29tcGlsZSgpO1xuICogYGBgXG4gKiBAbmFtZXNwYWNlXG4gKiBAcHJvcGVydHkgUm9vdFxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgaW5zdGFudGlhdGVzIGEgU3RhdGVHcmFwaCBzdGF0ZS4gU2VlIHtAbGluayBBbm5vdGF0aW9ufSBmb3IgdXNhZ2UuXG4gKi9cbmV4cG9ydCBjb25zdCBBbm5vdGF0aW9uID0gZnVuY3Rpb24gKGFubm90YXRpb24pIHtcbiAgICBpZiAoaXNDb25maWd1cmVkTWFuYWdlZFZhbHVlKGFubm90YXRpb24pKSB7XG4gICAgICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICAgIH1cbiAgICBlbHNlIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGFubmVsKGFubm90YXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEFubm90YXRpb24gd2l0aG91dCByZWR1Y2VyXG4gICAgICAgIHJldHVybiBuZXcgTGFzdFZhbHVlKCk7XG4gICAgfVxufTtcbkFubm90YXRpb24uUm9vdCA9IChzZCkgPT4gbmV3IEFubm90YXRpb25Sb290KHNkKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFubmVsKHJlZHVjZXIpIHtcbiAgICBpZiAodHlwZW9mIHJlZHVjZXIgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgcmVkdWNlciAmJlxuICAgICAgICBcInJlZHVjZXJcIiBpbiByZWR1Y2VyICYmXG4gICAgICAgIHJlZHVjZXIucmVkdWNlcikge1xuICAgICAgICByZXR1cm4gbmV3IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlKHJlZHVjZXIucmVkdWNlciwgcmVkdWNlci5kZWZhdWx0KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWR1Y2VyID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHJlZHVjZXIgJiZcbiAgICAgICAgXCJ2YWx1ZVwiIGluIHJlZHVjZXIgJiZcbiAgICAgICAgcmVkdWNlci52YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlKHJlZHVjZXIudmFsdWUsIHJlZHVjZXIuZGVmYXVsdCk7XG4gICAgfVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBBbm5vdGF0aW9uIHdpdGhvdXQgcmVkdWNlclxuICAgIHJldHVybiBuZXcgTGFzdFZhbHVlKCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/graph.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/graph.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Branch: () => (/* binding */ Branch),\n/* harmony export */   CompiledGraph: () => (/* binding */ CompiledGraph),\n/* harmony export */   Graph: () => (/* binding */ Graph)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/runnables/graph */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables/graph.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.24.2/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@10.0.0/node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pregel/read.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _pregel_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pregel/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/index.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pregel/write.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../pregel/utils/subgraph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\n\n\n\n\n\n\n\n\n\n\n\nclass Branch {\n    constructor(options) {\n        Object.defineProperty(this, \"condition\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ends\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(options.path)) {\n            this.condition = options.path;\n        }\n        else {\n            this.condition = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(options.path).withConfig({\n                runName: `Branch`,\n            });\n        }\n        this.ends = Array.isArray(options.pathMap)\n            ? options.pathMap.reduce((acc, n) => {\n                acc[n] = n;\n                return acc;\n            }, {})\n            : options.pathMap;\n    }\n    run(writer, reader) {\n        return _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.ChannelWrite.registerWriter(new _utils_js__WEBPACK_IMPORTED_MODULE_7__.RunnableCallable({\n            trace: false,\n            func: async (input, config) => {\n                try {\n                    return await this._route(input, config, writer, reader);\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                catch (e) {\n                    // Detect & warn if NodeInterrupt is thrown in a conditional edge\n                    if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_8__.NodeInterrupt.unminifiable_name) {\n                        console.warn(\"[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.\\n\" +\n                            \"NodeInterrupt should only be thrown inside a node, not in edge conditions.\");\n                    }\n                    throw e;\n                }\n            },\n        }));\n    }\n    async _route(input, config, writer, reader\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        let result = await this.condition.invoke(reader ? reader(config) : input, config);\n        if (!Array.isArray(result)) {\n            result = [result];\n        }\n        let destinations;\n        if (this.ends) {\n            destinations = result.map((r) => ((0,_constants_js__WEBPACK_IMPORTED_MODULE_6__._isSend)(r) ? r : this.ends[r]));\n        }\n        else {\n            destinations = result;\n        }\n        if (destinations.some((dest) => !dest)) {\n            throw new Error(\"Branch condition returned unknown or null destination\");\n        }\n        if (destinations.filter(_constants_js__WEBPACK_IMPORTED_MODULE_6__._isSend).some((packet) => packet.node === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END)) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_8__.InvalidUpdateError(\"Cannot send a packet to the END node\");\n        }\n        const writeResult = await writer(destinations, config);\n        return writeResult ?? input;\n    }\n}\nclass Graph {\n    constructor() {\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"branches\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"entryPoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"compiled\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.nodes = {};\n        this.edges = new Set();\n        this.branches = {};\n    }\n    warnIfCompiled(message) {\n        if (this.compiled) {\n            console.warn(message);\n        }\n    }\n    get allEdges() {\n        return this.edges;\n    }\n    addNode(key, action, options) {\n        for (const reservedChar of [\n            _constants_js__WEBPACK_IMPORTED_MODULE_6__.CHECKPOINT_NAMESPACE_SEPARATOR,\n            _constants_js__WEBPACK_IMPORTED_MODULE_6__.CHECKPOINT_NAMESPACE_END,\n        ]) {\n            if (key.includes(reservedChar)) {\n                throw new Error(`\"${reservedChar}\" is a reserved character and is not allowed in node names.`);\n            }\n        }\n        this.warnIfCompiled(`Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n        if (key in this.nodes) {\n            throw new Error(`Node \\`${key}\\` already present.`);\n        }\n        if (key === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END) {\n            throw new Error(`Node \\`${key}\\` is reserved.`);\n        }\n        const runnable = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(\n        // Account for arbitrary state due to Send API\n        action);\n        this.nodes[key] = {\n            runnable,\n            metadata: options?.metadata,\n            subgraphs: (0,_pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_9__.isPregelLike)(runnable) ? [runnable] : options?.subgraphs,\n            ends: options?.ends,\n        };\n        return this;\n    }\n    addEdge(startKey, endKey) {\n        this.warnIfCompiled(`Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n        if (startKey === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END) {\n            throw new Error(\"END cannot be a start node\");\n        }\n        if (endKey === _constants_js__WEBPACK_IMPORTED_MODULE_6__.START) {\n            throw new Error(\"START cannot be an end node\");\n        }\n        if (Array.from(this.edges).some(([start]) => start === startKey) &&\n            !(\"channels\" in this)) {\n            throw new Error(`Already found path for ${startKey}. For multiple edges, use StateGraph.`);\n        }\n        this.edges.add([startKey, endKey]);\n        return this;\n    }\n    addConditionalEdges(source, path, pathMap) {\n        const options = typeof source === \"object\"\n            ? source\n            : {\n                source,\n                path: path,\n                pathMap,\n            };\n        this.warnIfCompiled(\"Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n        if (!_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(options.path)) {\n            const pathDisplayValues = Array.isArray(options.pathMap)\n                ? options.pathMap.join(\",\")\n                : Object.keys(options.pathMap ?? {}).join(\",\");\n            options.path = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(options.path).withConfig({\n                runName: `Branch<${options.source}${pathDisplayValues !== \"\" ? `,${pathDisplayValues}` : \"\"}>`.slice(0, 63),\n            });\n        }\n        // find a name for condition\n        const name = options.path.getName() === \"RunnableLambda\"\n            ? \"condition\"\n            : options.path.getName();\n        // validate condition\n        if (this.branches[options.source] && this.branches[options.source][name]) {\n            throw new Error(`Condition \\`${name}\\` already present for node \\`${source}\\``);\n        }\n        // save it\n        if (!this.branches[options.source]) {\n            this.branches[options.source] = {};\n        }\n        this.branches[options.source][name] = new Branch(options);\n        return this;\n    }\n    /**\n     * @deprecated use `addEdge(START, key)` instead\n     */\n    setEntryPoint(key) {\n        this.warnIfCompiled(\"Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n        return this.addEdge(_constants_js__WEBPACK_IMPORTED_MODULE_6__.START, key);\n    }\n    /**\n     * @deprecated use `addEdge(key, END)` instead\n     */\n    setFinishPoint(key) {\n        this.warnIfCompiled(\"Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n        return this.addEdge(key, _constants_js__WEBPACK_IMPORTED_MODULE_6__.END);\n    }\n    compile({ checkpointer, interruptBefore, interruptAfter, name, } = {}) {\n        // validate the graph\n        this.validate([\n            ...(Array.isArray(interruptBefore) ? interruptBefore : []),\n            ...(Array.isArray(interruptAfter) ? interruptAfter : []),\n        ]);\n        // create empty compiled graph\n        const compiled = new CompiledGraph({\n            builder: this,\n            checkpointer,\n            interruptAfter,\n            interruptBefore,\n            autoValidate: false,\n            nodes: {},\n            channels: {\n                [_constants_js__WEBPACK_IMPORTED_MODULE_6__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue(),\n                [_constants_js__WEBPACK_IMPORTED_MODULE_6__.END]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue(),\n            },\n            inputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_6__.START,\n            outputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END,\n            streamChannels: [],\n            streamMode: \"values\",\n            name,\n        });\n        // attach nodes, edges and branches\n        for (const [key, node] of Object.entries(this.nodes)) {\n            compiled.attachNode(key, node);\n        }\n        for (const [start, end] of this.edges) {\n            compiled.attachEdge(start, end);\n        }\n        for (const [start, branches] of Object.entries(this.branches)) {\n            for (const [name, branch] of Object.entries(branches)) {\n                compiled.attachBranch(start, name, branch);\n            }\n        }\n        return compiled.validate();\n    }\n    validate(interrupt) {\n        // assemble sources\n        const allSources = new Set([...this.allEdges].map(([src, _]) => src));\n        for (const [start] of Object.entries(this.branches)) {\n            allSources.add(start);\n        }\n        for (const source of allSources) {\n            if (source !== _constants_js__WEBPACK_IMPORTED_MODULE_6__.START && !(source in this.nodes)) {\n                throw new Error(`Found edge starting at unknown node \\`${source}\\``);\n            }\n        }\n        // assemble targets\n        const allTargets = new Set([...this.allEdges].map(([_, target]) => target));\n        for (const [start, branches] of Object.entries(this.branches)) {\n            for (const branch of Object.values(branches)) {\n                if (branch.ends) {\n                    for (const end of Object.values(branch.ends)) {\n                        allTargets.add(end);\n                    }\n                }\n                else {\n                    allTargets.add(_constants_js__WEBPACK_IMPORTED_MODULE_6__.END);\n                    for (const node of Object.keys(this.nodes)) {\n                        if (node !== start) {\n                            allTargets.add(node);\n                        }\n                    }\n                }\n            }\n        }\n        for (const node of Object.values(this.nodes)) {\n            for (const target of node.ends ?? []) {\n                allTargets.add(target);\n            }\n        }\n        // validate targets\n        for (const node of Object.keys(this.nodes)) {\n            if (!allTargets.has(node)) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_8__.UnreachableNodeError([\n                    `Node \\`${node}\\` is not reachable.`,\n                    \"\",\n                    \"If you are returning Command objects from your node,\",\n                    'make sure you are passing names of potential destination nodes as an \"ends\" array',\n                    'into \".addNode(..., { ends: [\"node1\", \"node2\"] })\".',\n                ].join(\"\\n\"), {\n                    lc_error_code: \"UNREACHABLE_NODE\",\n                });\n            }\n        }\n        for (const target of allTargets) {\n            if (target !== _constants_js__WEBPACK_IMPORTED_MODULE_6__.END && !(target in this.nodes)) {\n                throw new Error(`Found edge ending at unknown node \\`${target}\\``);\n            }\n        }\n        // validate interrupts\n        if (interrupt) {\n            for (const node of interrupt) {\n                if (!(node in this.nodes)) {\n                    throw new Error(`Interrupt node \\`${node}\\` is not present`);\n                }\n            }\n        }\n        this.compiled = true;\n    }\n}\nclass CompiledGraph extends _pregel_index_js__WEBPACK_IMPORTED_MODULE_3__.Pregel {\n    constructor({ builder, ...rest }) {\n        super(rest);\n        Object.defineProperty(this, \"builder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.builder = builder;\n    }\n    attachNode(key, node) {\n        this.channels[key] = new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue();\n        this.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_2__.PregelNode({\n            channels: [],\n            triggers: [],\n            metadata: node.metadata,\n            subgraphs: node.subgraphs,\n            ends: node.ends,\n        })\n            .pipe(node.runnable)\n            .pipe(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.ChannelWrite([{ channel: key, value: _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.PASSTHROUGH }], [_constants_js__WEBPACK_IMPORTED_MODULE_6__.TAG_HIDDEN]));\n        this.streamChannels.push(key);\n    }\n    attachEdge(start, end) {\n        if (end === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END) {\n            if (start === _constants_js__WEBPACK_IMPORTED_MODULE_6__.START) {\n                throw new Error(\"Cannot have an edge from START to END\");\n            }\n            this.nodes[start].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.ChannelWrite([{ channel: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END, value: _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.PASSTHROUGH }], [_constants_js__WEBPACK_IMPORTED_MODULE_6__.TAG_HIDDEN]));\n        }\n        else {\n            this.nodes[end].triggers.push(start);\n            this.nodes[end].channels.push(start);\n        }\n    }\n    attachBranch(start, name, branch) {\n        // add hidden start node\n        if (start === _constants_js__WEBPACK_IMPORTED_MODULE_6__.START && this.nodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.START]) {\n            this.nodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.START] = _pregel_index_js__WEBPACK_IMPORTED_MODULE_3__.Channel.subscribeTo(_constants_js__WEBPACK_IMPORTED_MODULE_6__.START, { tags: [_constants_js__WEBPACK_IMPORTED_MODULE_6__.TAG_HIDDEN] });\n        }\n        // attach branch writer\n        this.nodes[start].pipe(branch.run((dests) => {\n            const writes = dests.map((dest) => {\n                if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_6__._isSend)(dest)) {\n                    return dest;\n                }\n                return {\n                    channel: dest === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END ? _constants_js__WEBPACK_IMPORTED_MODULE_6__.END : `branch:${start}:${name}:${dest}`,\n                    value: _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.PASSTHROUGH,\n                };\n            });\n            return new _pregel_write_js__WEBPACK_IMPORTED_MODULE_5__.ChannelWrite(writes, [_constants_js__WEBPACK_IMPORTED_MODULE_6__.TAG_HIDDEN]);\n        }));\n        // attach branch readers\n        const ends = branch.ends\n            ? Object.values(branch.ends)\n            : Object.keys(this.nodes);\n        for (const end of ends) {\n            if (end !== _constants_js__WEBPACK_IMPORTED_MODULE_6__.END) {\n                const channelName = `branch:${start}:${name}:${end}`;\n                this.channels[channelName] =\n                    new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue();\n                this.nodes[end].triggers.push(channelName);\n                this.nodes[end].channels.push(channelName);\n            }\n        }\n    }\n    /**\n     * Returns a drawable representation of the computation graph.\n     */\n    async getGraphAsync(config) {\n        const xray = config?.xray;\n        const graph = new _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_1__.Graph();\n        const startNodes = {\n            [_constants_js__WEBPACK_IMPORTED_MODULE_6__.START]: graph.addNode({\n                schema: zod__WEBPACK_IMPORTED_MODULE_10__.z.any(),\n            }, _constants_js__WEBPACK_IMPORTED_MODULE_6__.START),\n        };\n        const endNodes = {};\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let subgraphs = {};\n        if (xray) {\n            subgraphs = Object.fromEntries((await (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.gatherIterator)(this.getSubgraphsAsync())).filter(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (x) => isCompiledGraph(x[1])));\n        }\n        function addEdge(start, end, label, conditional = false) {\n            if (end === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END && endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.END] === undefined) {\n                endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.END] = graph.addNode({ schema: zod__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_6__.END);\n            }\n            return graph.addEdge(startNodes[start], endNodes[end], label !== end ? label : undefined, conditional);\n        }\n        for (const [key, nodeSpec] of Object.entries(this.builder.nodes)) {\n            const displayKey = _escapeMermaidKeywords(key);\n            const node = nodeSpec.runnable;\n            const metadata = nodeSpec.metadata ?? {};\n            if (this.interruptBefore?.includes(key) &&\n                this.interruptAfter?.includes(key)) {\n                metadata.__interrupt = \"before,after\";\n            }\n            else if (this.interruptBefore?.includes(key)) {\n                metadata.__interrupt = \"before\";\n            }\n            else if (this.interruptAfter?.includes(key)) {\n                metadata.__interrupt = \"after\";\n            }\n            if (xray) {\n                const newXrayValue = typeof xray === \"number\" ? xray - 1 : xray;\n                const drawableSubgraph = subgraphs[key] !== undefined\n                    ? await subgraphs[key].getGraphAsync({\n                        ...config,\n                        xray: newXrayValue,\n                    })\n                    : node.getGraph(config);\n                drawableSubgraph.trimFirstNode();\n                drawableSubgraph.trimLastNode();\n                if (Object.keys(drawableSubgraph.nodes).length > 1) {\n                    const [e, s] = graph.extend(drawableSubgraph, displayKey);\n                    if (e === undefined) {\n                        throw new Error(`Could not extend subgraph \"${key}\" due to missing entrypoint.`);\n                    }\n                    // TODO: Remove default name once we stop supporting core 0.2.0\n                    // eslint-disable-next-line no-inner-declarations\n                    function _isRunnableInterface(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    thing) {\n                        return thing ? thing.lc_runnable : false;\n                    }\n                    // eslint-disable-next-line no-inner-declarations\n                    function _nodeDataStr(id, data) {\n                        if (id !== undefined && !(0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(id)) {\n                            return id;\n                        }\n                        else if (_isRunnableInterface(data)) {\n                            try {\n                                let dataStr = data.getName();\n                                dataStr = dataStr.startsWith(\"Runnable\")\n                                    ? dataStr.slice(\"Runnable\".length)\n                                    : dataStr;\n                                return dataStr;\n                            }\n                            catch (error) {\n                                return data.getName();\n                            }\n                        }\n                        else {\n                            return data.name ?? \"UnknownSchema\";\n                        }\n                    }\n                    // TODO: Remove casts when we stop supporting core 0.2.0\n                    if (s !== undefined) {\n                        startNodes[displayKey] = {\n                            name: _nodeDataStr(s.id, s.data),\n                            ...s,\n                        };\n                    }\n                    endNodes[displayKey] = {\n                        name: _nodeDataStr(e.id, e.data),\n                        ...e,\n                    };\n                }\n                else {\n                    // TODO: Remove when we stop supporting core 0.2.0\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    const newNode = graph.addNode(node, displayKey, metadata);\n                    startNodes[displayKey] = newNode;\n                    endNodes[displayKey] = newNode;\n                }\n            }\n            else {\n                // TODO: Remove when we stop supporting core 0.2.0\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                const newNode = graph.addNode(node, displayKey, metadata);\n                startNodes[displayKey] = newNode;\n                endNodes[displayKey] = newNode;\n            }\n        }\n        const sortedEdges = [...this.builder.allEdges].sort(([a], [b]) => {\n            if (a < b) {\n                return -1;\n            }\n            else if (b > a) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        for (const [start, end] of sortedEdges) {\n            addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end));\n        }\n        for (const [start, branches] of Object.entries(this.builder.branches)) {\n            const defaultEnds = {\n                ...Object.fromEntries(Object.keys(this.builder.nodes)\n                    .filter((k) => k !== start)\n                    .map((k) => [_escapeMermaidKeywords(k), _escapeMermaidKeywords(k)])),\n                [_constants_js__WEBPACK_IMPORTED_MODULE_6__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END,\n            };\n            for (const branch of Object.values(branches)) {\n                let ends;\n                if (branch.ends !== undefined) {\n                    ends = branch.ends;\n                }\n                else {\n                    ends = defaultEnds;\n                }\n                for (const [label, end] of Object.entries(ends)) {\n                    addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end), label, true);\n                }\n            }\n        }\n        for (const [key, node] of Object.entries(this.builder.nodes)) {\n            if (node.ends !== undefined) {\n                for (const end of node.ends) {\n                    addEdge(_escapeMermaidKeywords(key), _escapeMermaidKeywords(end), undefined, true);\n                }\n            }\n        }\n        return graph;\n    }\n    /**\n     * Returns a drawable representation of the computation graph.\n     *\n     * @deprecated Use getGraphAsync instead. The async method will be the default in the next minor core release.\n     */\n    getGraph(config) {\n        const xray = config?.xray;\n        const graph = new _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_1__.Graph();\n        const startNodes = {\n            [_constants_js__WEBPACK_IMPORTED_MODULE_6__.START]: graph.addNode({\n                schema: zod__WEBPACK_IMPORTED_MODULE_10__.z.any(),\n            }, _constants_js__WEBPACK_IMPORTED_MODULE_6__.START),\n        };\n        const endNodes = {};\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let subgraphs = {};\n        if (xray) {\n            subgraphs = Object.fromEntries((0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.gatherIteratorSync)(this.getSubgraphs()).filter(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (x) => isCompiledGraph(x[1])));\n        }\n        function addEdge(start, end, label, conditional = false) {\n            if (end === _constants_js__WEBPACK_IMPORTED_MODULE_6__.END && endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.END] === undefined) {\n                endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_6__.END] = graph.addNode({ schema: zod__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_6__.END);\n            }\n            return graph.addEdge(startNodes[start], endNodes[end], label !== end ? label : undefined, conditional);\n        }\n        for (const [key, nodeSpec] of Object.entries(this.builder.nodes)) {\n            const displayKey = _escapeMermaidKeywords(key);\n            const node = nodeSpec.runnable;\n            const metadata = nodeSpec.metadata ?? {};\n            if (this.interruptBefore?.includes(key) &&\n                this.interruptAfter?.includes(key)) {\n                metadata.__interrupt = \"before,after\";\n            }\n            else if (this.interruptBefore?.includes(key)) {\n                metadata.__interrupt = \"before\";\n            }\n            else if (this.interruptAfter?.includes(key)) {\n                metadata.__interrupt = \"after\";\n            }\n            if (xray) {\n                const newXrayValue = typeof xray === \"number\" ? xray - 1 : xray;\n                const drawableSubgraph = subgraphs[key] !== undefined\n                    ? subgraphs[key].getGraph({\n                        ...config,\n                        xray: newXrayValue,\n                    })\n                    : node.getGraph(config);\n                drawableSubgraph.trimFirstNode();\n                drawableSubgraph.trimLastNode();\n                if (Object.keys(drawableSubgraph.nodes).length > 1) {\n                    const [e, s] = graph.extend(drawableSubgraph, displayKey);\n                    if (e === undefined) {\n                        throw new Error(`Could not extend subgraph \"${key}\" due to missing entrypoint.`);\n                    }\n                    // TODO: Remove default name once we stop supporting core 0.2.0\n                    // eslint-disable-next-line no-inner-declarations\n                    function _isRunnableInterface(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    thing) {\n                        return thing ? thing.lc_runnable : false;\n                    }\n                    // eslint-disable-next-line no-inner-declarations\n                    function _nodeDataStr(id, data) {\n                        if (id !== undefined && !(0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(id)) {\n                            return id;\n                        }\n                        else if (_isRunnableInterface(data)) {\n                            try {\n                                let dataStr = data.getName();\n                                dataStr = dataStr.startsWith(\"Runnable\")\n                                    ? dataStr.slice(\"Runnable\".length)\n                                    : dataStr;\n                                return dataStr;\n                            }\n                            catch (error) {\n                                return data.getName();\n                            }\n                        }\n                        else {\n                            return data.name ?? \"UnknownSchema\";\n                        }\n                    }\n                    // TODO: Remove casts when we stop supporting core 0.2.0\n                    if (s !== undefined) {\n                        startNodes[displayKey] = {\n                            name: _nodeDataStr(s.id, s.data),\n                            ...s,\n                        };\n                    }\n                    endNodes[displayKey] = {\n                        name: _nodeDataStr(e.id, e.data),\n                        ...e,\n                    };\n                }\n                else {\n                    // TODO: Remove when we stop supporting core 0.2.0\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    const newNode = graph.addNode(node, displayKey, metadata);\n                    startNodes[displayKey] = newNode;\n                    endNodes[displayKey] = newNode;\n                }\n            }\n            else {\n                // TODO: Remove when we stop supporting core 0.2.0\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                const newNode = graph.addNode(node, displayKey, metadata);\n                startNodes[displayKey] = newNode;\n                endNodes[displayKey] = newNode;\n            }\n        }\n        const sortedEdges = [...this.builder.allEdges].sort(([a], [b]) => {\n            if (a < b) {\n                return -1;\n            }\n            else if (b > a) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        for (const [start, end] of sortedEdges) {\n            addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end));\n        }\n        for (const [start, branches] of Object.entries(this.builder.branches)) {\n            const defaultEnds = {\n                ...Object.fromEntries(Object.keys(this.builder.nodes)\n                    .filter((k) => k !== start)\n                    .map((k) => [_escapeMermaidKeywords(k), _escapeMermaidKeywords(k)])),\n                [_constants_js__WEBPACK_IMPORTED_MODULE_6__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END,\n            };\n            for (const branch of Object.values(branches)) {\n                let ends;\n                if (branch.ends !== undefined) {\n                    ends = branch.ends;\n                }\n                else {\n                    ends = defaultEnds;\n                }\n                for (const [label, end] of Object.entries(ends)) {\n                    addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end), label, true);\n                }\n            }\n        }\n        return graph;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isCompiledGraph(x) {\n    return (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof x.attachNode === \"function\" &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        typeof x.attachEdge === \"function\");\n}\nfunction _escapeMermaidKeywords(key) {\n    if (key === \"subgraph\") {\n        return `\"${key}\"`;\n    }\n    return key;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3lFO0FBQ0M7QUFDbEQ7QUFDa0I7QUFDSztBQUNNO0FBQ1c7QUFDRDtBQUM4RDtBQUN6QztBQUNJO0FBQzdCO0FBQ3BEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsWUFBWSwrREFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEVBQWlCO0FBQzlDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUk7QUFDakI7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwREFBWSxvQkFBb0IsdURBQWdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscURBQWE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsc0RBQU87QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0RBQU8sbUNBQW1DLDhDQUFHO0FBQzdFLHNCQUFzQiwwREFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5RUFBOEI7QUFDMUMsWUFBWSxtRUFBd0I7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQyxhQUFhO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLElBQUk7QUFDMUM7QUFDQSxvQkFBb0IsOENBQUc7QUFDdkIsc0NBQXNDLElBQUk7QUFDMUM7QUFDQSx5QkFBeUIsNEVBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhDQUFHO0FBQzVCO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsU0FBUztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0RBQVE7QUFDckI7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRCwyQkFBMkIsNEVBQWlCO0FBQzVDLG1DQUFtQyxlQUFlLEVBQUUsK0JBQStCLGtCQUFrQixPQUFPO0FBQzVHLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxLQUFLLGdDQUFnQyxPQUFPO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdEQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4Q0FBRztBQUNwQztBQUNBLGNBQWMsdURBQXVELElBQUk7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCLGdEQUFLLE9BQU8sd0VBQWM7QUFDM0MsaUJBQWlCLDhDQUFHLE9BQU8sd0VBQWM7QUFDekMsYUFBYTtBQUNiLDJCQUEyQixnREFBSztBQUNoQyw0QkFBNEIsOENBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnREFBSztBQUNoQyx5RUFBeUUsT0FBTztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsOENBQUc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQW9CO0FBQzlDLDhCQUE4QixLQUFLO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywwQkFBMEI7QUFDckU7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOENBQUc7QUFDOUIsdUVBQXVFLE9BQU87QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELEtBQUs7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNEJBQTRCLG9EQUFNO0FBQ3pDLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3RUFBYztBQUMvQyw4QkFBOEIsdURBQVU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNCQUFzQiwwREFBWSxJQUFJLHFCQUFxQix5REFBVyxFQUFFLElBQUkscURBQVU7QUFDdEY7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhDQUFHO0FBQ3ZCLDBCQUEwQixnREFBSztBQUMvQjtBQUNBO0FBQ0EsK0NBQStDLDBEQUFZLElBQUksU0FBUyw4Q0FBRyxTQUFTLHlEQUFXLEVBQUUsSUFBSSxxREFBVTtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdEQUFLLGVBQWUsZ0RBQUs7QUFDL0MsdUJBQXVCLGdEQUFLLElBQUkscURBQU8sYUFBYSxnREFBSyxJQUFJLE9BQU8scURBQVUsR0FBRztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsOENBQUcsR0FBRyw4Q0FBRyxhQUFhLE1BQU0sR0FBRyxLQUFLLEdBQUcsS0FBSztBQUNsRiwyQkFBMkIseURBQVc7QUFDdEM7QUFDQSxhQUFhO0FBQ2IsdUJBQXVCLDBEQUFZLFVBQVUscURBQVU7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOENBQUc7QUFDM0IsOENBQThDLE1BQU0sR0FBRyxLQUFLLEdBQUcsSUFBSTtBQUNuRTtBQUNBLHdCQUF3Qix3RUFBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRUFBYTtBQUN2QztBQUNBLGFBQWEsZ0RBQUs7QUFDbEIsd0JBQXdCLG1DQUFDO0FBQ3pCLGFBQWEsRUFBRSxnREFBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHlEQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhDQUFHLGFBQWEsOENBQUc7QUFDM0MseUJBQXlCLDhDQUFHLG9CQUFvQixRQUFRLG1DQUFDLFFBQVEsRUFBRSw4Q0FBRztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxJQUFJO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlEQUFNO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOENBQUcsR0FBRyw4Q0FBRztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0VBQWE7QUFDdkM7QUFDQSxhQUFhLGdEQUFLO0FBQ2xCLHdCQUF3QixtQ0FBQztBQUN6QixhQUFhLEVBQUUsZ0RBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw2REFBa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOENBQUcsYUFBYSw4Q0FBRztBQUMzQyx5QkFBeUIsOENBQUcsb0JBQW9CLFFBQVEsbUNBQUMsUUFBUSxFQUFFLDhDQUFHO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLElBQUk7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsaURBQU07QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4Q0FBRyxHQUFHLDhDQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixJQUFJO0FBQ3ZCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9ncmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbmltcG9ydCB7IF9jb2VyY2VUb1J1bm5hYmxlLCBSdW5uYWJsZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgR3JhcGggYXMgRHJhd2FibGVHcmFwaCwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy9ncmFwaFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IHZhbGlkYXRlIGFzIGlzVXVpZCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBQcmVnZWxOb2RlIH0gZnJvbSBcIi4uL3ByZWdlbC9yZWFkLmpzXCI7XG5pbXBvcnQgeyBDaGFubmVsLCBQcmVnZWwgfSBmcm9tIFwiLi4vcHJlZ2VsL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBFcGhlbWVyYWxWYWx1ZSB9IGZyb20gXCIuLi9jaGFubmVscy9lcGhlbWVyYWxfdmFsdWUuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSwgUEFTU1RIUk9VR0ggfSBmcm9tIFwiLi4vcHJlZ2VsL3dyaXRlLmpzXCI7XG5pbXBvcnQgeyBfaXNTZW5kLCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgRU5ELCBTVEFSVCwgVEFHX0hJRERFTiwgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBnYXRoZXJJdGVyYXRvciwgZ2F0aGVySXRlcmF0b3JTeW5jLCBSdW5uYWJsZUNhbGxhYmxlLCB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgSW52YWxpZFVwZGF0ZUVycm9yLCBOb2RlSW50ZXJydXB0LCBVbnJlYWNoYWJsZU5vZGVFcnJvciwgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBpc1ByZWdlbExpa2UgfSBmcm9tIFwiLi4vcHJlZ2VsL3V0aWxzL3N1YmdyYXBoLmpzXCI7XG5leHBvcnQgY2xhc3MgQnJhbmNoIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmRpdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKG9wdGlvbnMucGF0aCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uID0gb3B0aW9ucy5wYXRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb25kaXRpb24gPSBfY29lcmNlVG9SdW5uYWJsZShvcHRpb25zLnBhdGgpLndpdGhDb25maWcoe1xuICAgICAgICAgICAgICAgIHJ1bk5hbWU6IGBCcmFuY2hgLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRzID0gQXJyYXkuaXNBcnJheShvcHRpb25zLnBhdGhNYXApXG4gICAgICAgICAgICA/IG9wdGlvbnMucGF0aE1hcC5yZWR1Y2UoKGFjYywgbikgPT4ge1xuICAgICAgICAgICAgICAgIGFjY1tuXSA9IG47XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9KVxuICAgICAgICAgICAgOiBvcHRpb25zLnBhdGhNYXA7XG4gICAgfVxuICAgIHJ1bih3cml0ZXIsIHJlYWRlcikge1xuICAgICAgICByZXR1cm4gQ2hhbm5lbFdyaXRlLnJlZ2lzdGVyV3JpdGVyKG5ldyBSdW5uYWJsZUNhbGxhYmxlKHtcbiAgICAgICAgICAgIHRyYWNlOiBmYWxzZSxcbiAgICAgICAgICAgIGZ1bmM6IGFzeW5jIChpbnB1dCwgY29uZmlnKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JvdXRlKGlucHV0LCBjb25maWcsIHdyaXRlciwgcmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZWN0ICYgd2FybiBpZiBOb2RlSW50ZXJydXB0IGlzIHRocm93biBpbiBhIGNvbmRpdGlvbmFsIGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gTm9kZUludGVycnVwdC51bm1pbmlmaWFibGVfbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW1dBUk5dOiAnTm9kZUludGVycnVwdCcgdGhyb3duIGluIGNvbmRpdGlvbmFsIGVkZ2UuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIHlvdXIgZ3JhcGggaW1wbGVtZW50YXRpb24uXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiTm9kZUludGVycnVwdCBzaG91bGQgb25seSBiZSB0aHJvd24gaW5zaWRlIGEgbm9kZSwgbm90IGluIGVkZ2UgY29uZGl0aW9ucy5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIF9yb3V0ZShpbnB1dCwgY29uZmlnLCB3cml0ZXIsIHJlYWRlclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbmRpdGlvbi5pbnZva2UocmVhZGVyID8gcmVhZGVyKGNvbmZpZykgOiBpbnB1dCwgY29uZmlnKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFtyZXN1bHRdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkZXN0aW5hdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLmVuZHMpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9ucyA9IHJlc3VsdC5tYXAoKHIpID0+IChfaXNTZW5kKHIpID8gciA6IHRoaXMuZW5kc1tyXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb25zID0gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbnMuc29tZSgoZGVzdCkgPT4gIWRlc3QpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCcmFuY2ggY29uZGl0aW9uIHJldHVybmVkIHVua25vd24gb3IgbnVsbCBkZXN0aW5hdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVzdGluYXRpb25zLmZpbHRlcihfaXNTZW5kKS5zb21lKChwYWNrZXQpID0+IHBhY2tldC5ub2RlID09PSBFTkQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKFwiQ2Fubm90IHNlbmQgYSBwYWNrZXQgdG8gdGhlIEVORCBub2RlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyaXRlUmVzdWx0ID0gYXdhaXQgd3JpdGVyKGRlc3RpbmF0aW9ucywgY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHdyaXRlUmVzdWx0ID8/IGlucHV0O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBHcmFwaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5vZGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVkZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJyYW5jaGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVudHJ5UG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29tcGlsZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vZGVzID0ge307XG4gICAgICAgIHRoaXMuZWRnZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuYnJhbmNoZXMgPSB7fTtcbiAgICB9XG4gICAgd2FybklmQ29tcGlsZWQobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy5jb21waWxlZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhbGxFZGdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRnZXM7XG4gICAgfVxuICAgIGFkZE5vZGUoa2V5LCBhY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCByZXNlcnZlZENoYXIgb2YgW1xuICAgICAgICAgICAgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLFxuICAgICAgICAgICAgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5ELFxuICAgICAgICBdKSB7XG4gICAgICAgICAgICBpZiAoa2V5LmluY2x1ZGVzKHJlc2VydmVkQ2hhcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtyZXNlcnZlZENoYXJ9XCIgaXMgYSByZXNlcnZlZCBjaGFyYWN0ZXIgYW5kIGlzIG5vdCBhbGxvd2VkIGluIG5vZGUgbmFtZXMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXJuSWZDb21waWxlZChgQWRkaW5nIGEgbm9kZSB0byBhIGdyYXBoIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBjb21waWxlZC4gVGhpcyB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvbXBpbGVkIGdyYXBoLmApO1xuICAgICAgICBpZiAoa2V5IGluIHRoaXMubm9kZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm9kZSBcXGAke2tleX1cXGAgYWxyZWFkeSBwcmVzZW50LmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09IEVORCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb2RlIFxcYCR7a2V5fVxcYCBpcyByZXNlcnZlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZSA9IF9jb2VyY2VUb1J1bm5hYmxlKFxuICAgICAgICAvLyBBY2NvdW50IGZvciBhcmJpdHJhcnkgc3RhdGUgZHVlIHRvIFNlbmQgQVBJXG4gICAgICAgIGFjdGlvbik7XG4gICAgICAgIHRoaXMubm9kZXNba2V5XSA9IHtcbiAgICAgICAgICAgIHJ1bm5hYmxlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG9wdGlvbnM/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgc3ViZ3JhcGhzOiBpc1ByZWdlbExpa2UocnVubmFibGUpID8gW3J1bm5hYmxlXSA6IG9wdGlvbnM/LnN1YmdyYXBocyxcbiAgICAgICAgICAgIGVuZHM6IG9wdGlvbnM/LmVuZHMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGRFZGdlKHN0YXJ0S2V5LCBlbmRLZXkpIHtcbiAgICAgICAgdGhpcy53YXJuSWZDb21waWxlZChgQWRkaW5nIGFuIGVkZ2UgdG8gYSBncmFwaCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gY29tcGlsZWQuIFRoaXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluIHRoZSBjb21waWxlZCBncmFwaC5gKTtcbiAgICAgICAgaWYgKHN0YXJ0S2V5ID09PSBFTkQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVORCBjYW5ub3QgYmUgYSBzdGFydCBub2RlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRLZXkgPT09IFNUQVJUKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVEFSVCBjYW5ub3QgYmUgYW4gZW5kIG5vZGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmZyb20odGhpcy5lZGdlcykuc29tZSgoW3N0YXJ0XSkgPT4gc3RhcnQgPT09IHN0YXJ0S2V5KSAmJlxuICAgICAgICAgICAgIShcImNoYW5uZWxzXCIgaW4gdGhpcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQWxyZWFkeSBmb3VuZCBwYXRoIGZvciAke3N0YXJ0S2V5fS4gRm9yIG11bHRpcGxlIGVkZ2VzLCB1c2UgU3RhdGVHcmFwaC5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVkZ2VzLmFkZChbc3RhcnRLZXksIGVuZEtleV0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYWRkQ29uZGl0aW9uYWxFZGdlcyhzb3VyY2UsIHBhdGgsIHBhdGhNYXApIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHR5cGVvZiBzb3VyY2UgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gc291cmNlXG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgICBwYXRoTWFwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgdGhpcy53YXJuSWZDb21waWxlZChcIkFkZGluZyBhbiBlZGdlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguXCIpO1xuICAgICAgICBpZiAoIVJ1bm5hYmxlLmlzUnVubmFibGUob3B0aW9ucy5wYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgcGF0aERpc3BsYXlWYWx1ZXMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMucGF0aE1hcClcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMucGF0aE1hcC5qb2luKFwiLFwiKVxuICAgICAgICAgICAgICAgIDogT2JqZWN0LmtleXMob3B0aW9ucy5wYXRoTWFwID8/IHt9KS5qb2luKFwiLFwiKTtcbiAgICAgICAgICAgIG9wdGlvbnMucGF0aCA9IF9jb2VyY2VUb1J1bm5hYmxlKG9wdGlvbnMucGF0aCkud2l0aENvbmZpZyh7XG4gICAgICAgICAgICAgICAgcnVuTmFtZTogYEJyYW5jaDwke29wdGlvbnMuc291cmNlfSR7cGF0aERpc3BsYXlWYWx1ZXMgIT09IFwiXCIgPyBgLCR7cGF0aERpc3BsYXlWYWx1ZXN9YCA6IFwiXCJ9PmAuc2xpY2UoMCwgNjMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmluZCBhIG5hbWUgZm9yIGNvbmRpdGlvblxuICAgICAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5wYXRoLmdldE5hbWUoKSA9PT0gXCJSdW5uYWJsZUxhbWJkYVwiXG4gICAgICAgICAgICA/IFwiY29uZGl0aW9uXCJcbiAgICAgICAgICAgIDogb3B0aW9ucy5wYXRoLmdldE5hbWUoKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgY29uZGl0aW9uXG4gICAgICAgIGlmICh0aGlzLmJyYW5jaGVzW29wdGlvbnMuc291cmNlXSAmJiB0aGlzLmJyYW5jaGVzW29wdGlvbnMuc291cmNlXVtuYW1lXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25kaXRpb24gXFxgJHtuYW1lfVxcYCBhbHJlYWR5IHByZXNlbnQgZm9yIG5vZGUgXFxgJHtzb3VyY2V9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBpdFxuICAgICAgICBpZiAoIXRoaXMuYnJhbmNoZXNbb3B0aW9ucy5zb3VyY2VdKSB7XG4gICAgICAgICAgICB0aGlzLmJyYW5jaGVzW29wdGlvbnMuc291cmNlXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnJhbmNoZXNbb3B0aW9ucy5zb3VyY2VdW25hbWVdID0gbmV3IEJyYW5jaChvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHVzZSBgYWRkRWRnZShTVEFSVCwga2V5KWAgaW5zdGVhZFxuICAgICAqL1xuICAgIHNldEVudHJ5UG9pbnQoa2V5KSB7XG4gICAgICAgIHRoaXMud2FybklmQ29tcGlsZWQoXCJTZXR0aW5nIHRoZSBlbnRyeSBwb2ludCBvZiBhIGdyYXBoIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBjb21waWxlZC4gVGhpcyB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvbXBpbGVkIGdyYXBoLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRWRnZShTVEFSVCwga2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGBhZGRFZGdlKGtleSwgRU5EKWAgaW5zdGVhZFxuICAgICAqL1xuICAgIHNldEZpbmlzaFBvaW50KGtleSkge1xuICAgICAgICB0aGlzLndhcm5JZkNvbXBpbGVkKFwiU2V0dGluZyBhIGZpbmlzaCBwb2ludCBvZiBhIGdyYXBoIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBjb21waWxlZC4gVGhpcyB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvbXBpbGVkIGdyYXBoLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRWRnZShrZXksIEVORCk7XG4gICAgfVxuICAgIGNvbXBpbGUoeyBjaGVja3BvaW50ZXIsIGludGVycnVwdEJlZm9yZSwgaW50ZXJydXB0QWZ0ZXIsIG5hbWUsIH0gPSB7fSkge1xuICAgICAgICAvLyB2YWxpZGF0ZSB0aGUgZ3JhcGhcbiAgICAgICAgdGhpcy52YWxpZGF0ZShbXG4gICAgICAgICAgICAuLi4oQXJyYXkuaXNBcnJheShpbnRlcnJ1cHRCZWZvcmUpID8gaW50ZXJydXB0QmVmb3JlIDogW10pLFxuICAgICAgICAgICAgLi4uKEFycmF5LmlzQXJyYXkoaW50ZXJydXB0QWZ0ZXIpID8gaW50ZXJydXB0QWZ0ZXIgOiBbXSksXG4gICAgICAgIF0pO1xuICAgICAgICAvLyBjcmVhdGUgZW1wdHkgY29tcGlsZWQgZ3JhcGhcbiAgICAgICAgY29uc3QgY29tcGlsZWQgPSBuZXcgQ29tcGlsZWRHcmFwaCh7XG4gICAgICAgICAgICBidWlsZGVyOiB0aGlzLFxuICAgICAgICAgICAgY2hlY2twb2ludGVyLFxuICAgICAgICAgICAgaW50ZXJydXB0QWZ0ZXIsXG4gICAgICAgICAgICBpbnRlcnJ1cHRCZWZvcmUsXG4gICAgICAgICAgICBhdXRvVmFsaWRhdGU6IGZhbHNlLFxuICAgICAgICAgICAgbm9kZXM6IHt9LFxuICAgICAgICAgICAgY2hhbm5lbHM6IHtcbiAgICAgICAgICAgICAgICBbU1RBUlRdOiBuZXcgRXBoZW1lcmFsVmFsdWUoKSxcbiAgICAgICAgICAgICAgICBbRU5EXTogbmV3IEVwaGVtZXJhbFZhbHVlKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRDaGFubmVsczogU1RBUlQsXG4gICAgICAgICAgICBvdXRwdXRDaGFubmVsczogRU5ELFxuICAgICAgICAgICAgc3RyZWFtQ2hhbm5lbHM6IFtdLFxuICAgICAgICAgICAgc3RyZWFtTW9kZTogXCJ2YWx1ZXNcIixcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBhdHRhY2ggbm9kZXMsIGVkZ2VzIGFuZCBicmFuY2hlc1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICBjb21waWxlZC5hdHRhY2hOb2RlKGtleSwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2YgdGhpcy5lZGdlcykge1xuICAgICAgICAgICAgY29tcGlsZWQuYXR0YWNoRWRnZShzdGFydCwgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtzdGFydCwgYnJhbmNoZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnJhbmNoZXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCBicmFuY2hdIG9mIE9iamVjdC5lbnRyaWVzKGJyYW5jaGVzKSkge1xuICAgICAgICAgICAgICAgIGNvbXBpbGVkLmF0dGFjaEJyYW5jaChzdGFydCwgbmFtZSwgYnJhbmNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGlsZWQudmFsaWRhdGUoKTtcbiAgICB9XG4gICAgdmFsaWRhdGUoaW50ZXJydXB0KSB7XG4gICAgICAgIC8vIGFzc2VtYmxlIHNvdXJjZXNcbiAgICAgICAgY29uc3QgYWxsU291cmNlcyA9IG5ldyBTZXQoWy4uLnRoaXMuYWxsRWRnZXNdLm1hcCgoW3NyYywgX10pID0+IHNyYykpO1xuICAgICAgICBmb3IgKGNvbnN0IFtzdGFydF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5icmFuY2hlcykpIHtcbiAgICAgICAgICAgIGFsbFNvdXJjZXMuYWRkKHN0YXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBhbGxTb3VyY2VzKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSBTVEFSVCAmJiAhKHNvdXJjZSBpbiB0aGlzLm5vZGVzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgZWRnZSBzdGFydGluZyBhdCB1bmtub3duIG5vZGUgXFxgJHtzb3VyY2V9XFxgYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXNzZW1ibGUgdGFyZ2V0c1xuICAgICAgICBjb25zdCBhbGxUYXJnZXRzID0gbmV3IFNldChbLi4udGhpcy5hbGxFZGdlc10ubWFwKChbXywgdGFyZ2V0XSkgPT4gdGFyZ2V0KSk7XG4gICAgICAgIGZvciAoY29uc3QgW3N0YXJ0LCBicmFuY2hlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5icmFuY2hlcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYnJhbmNoIG9mIE9iamVjdC52YWx1ZXMoYnJhbmNoZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJyYW5jaC5lbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW5kIG9mIE9iamVjdC52YWx1ZXMoYnJhbmNoLmVuZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxUYXJnZXRzLmFkZChlbmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGxUYXJnZXRzLmFkZChFTkQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgT2JqZWN0LmtleXModGhpcy5ub2RlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlICE9PSBzdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFRhcmdldHMuYWRkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiBub2RlLmVuZHMgPz8gW10pIHtcbiAgICAgICAgICAgICAgICBhbGxUYXJnZXRzLmFkZCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZhbGlkYXRlIHRhcmdldHNcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIE9iamVjdC5rZXlzKHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICBpZiAoIWFsbFRhcmdldHMuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVucmVhY2hhYmxlTm9kZUVycm9yKFtcbiAgICAgICAgICAgICAgICAgICAgYE5vZGUgXFxgJHtub2RlfVxcYCBpcyBub3QgcmVhY2hhYmxlLmAsXG4gICAgICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiSWYgeW91IGFyZSByZXR1cm5pbmcgQ29tbWFuZCBvYmplY3RzIGZyb20geW91ciBub2RlLFwiLFxuICAgICAgICAgICAgICAgICAgICAnbWFrZSBzdXJlIHlvdSBhcmUgcGFzc2luZyBuYW1lcyBvZiBwb3RlbnRpYWwgZGVzdGluYXRpb24gbm9kZXMgYXMgYW4gXCJlbmRzXCIgYXJyYXknLFxuICAgICAgICAgICAgICAgICAgICAnaW50byBcIi5hZGROb2RlKC4uLiwgeyBlbmRzOiBbXCJub2RlMVwiLCBcIm5vZGUyXCJdIH0pXCIuJyxcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCJcXG5cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgbGNfZXJyb3JfY29kZTogXCJVTlJFQUNIQUJMRV9OT0RFXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2YgYWxsVGFyZ2V0cykge1xuICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gRU5EICYmICEodGFyZ2V0IGluIHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBlZGdlIGVuZGluZyBhdCB1bmtub3duIG5vZGUgXFxgJHt0YXJnZXR9XFxgYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmFsaWRhdGUgaW50ZXJydXB0c1xuICAgICAgICBpZiAoaW50ZXJydXB0KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgaW50ZXJydXB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEobm9kZSBpbiB0aGlzLm5vZGVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVycnVwdCBub2RlIFxcYCR7bm9kZX1cXGAgaXMgbm90IHByZXNlbnRgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21waWxlZCA9IHRydWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbXBpbGVkR3JhcGggZXh0ZW5kcyBQcmVnZWwge1xuICAgIGNvbnN0cnVjdG9yKHsgYnVpbGRlciwgLi4ucmVzdCB9KSB7XG4gICAgICAgIHN1cGVyKHJlc3QpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJidWlsZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnVpbGRlciA9IGJ1aWxkZXI7XG4gICAgfVxuICAgIGF0dGFjaE5vZGUoa2V5LCBub2RlKSB7XG4gICAgICAgIHRoaXMuY2hhbm5lbHNba2V5XSA9IG5ldyBFcGhlbWVyYWxWYWx1ZSgpO1xuICAgICAgICB0aGlzLm5vZGVzW2tleV0gPSBuZXcgUHJlZ2VsTm9kZSh7XG4gICAgICAgICAgICBjaGFubmVsczogW10sXG4gICAgICAgICAgICB0cmlnZ2VyczogW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogbm9kZS5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN1YmdyYXBoczogbm9kZS5zdWJncmFwaHMsXG4gICAgICAgICAgICBlbmRzOiBub2RlLmVuZHMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAucGlwZShub2RlLnJ1bm5hYmxlKVxuICAgICAgICAgICAgLnBpcGUobmV3IENoYW5uZWxXcml0ZShbeyBjaGFubmVsOiBrZXksIHZhbHVlOiBQQVNTVEhST1VHSCB9XSwgW1RBR19ISURERU5dKSk7XG4gICAgICAgIHRoaXMuc3RyZWFtQ2hhbm5lbHMucHVzaChrZXkpO1xuICAgIH1cbiAgICBhdHRhY2hFZGdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKGVuZCA9PT0gRU5EKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IFNUQVJUKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgYW4gZWRnZSBmcm9tIFNUQVJUIHRvIEVORFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm9kZXNbc3RhcnRdLndyaXRlcnMucHVzaChuZXcgQ2hhbm5lbFdyaXRlKFt7IGNoYW5uZWw6IEVORCwgdmFsdWU6IFBBU1NUSFJPVUdIIH1dLCBbVEFHX0hJRERFTl0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbZW5kXS50cmlnZ2Vycy5wdXNoKHN0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbZW5kXS5jaGFubmVscy5wdXNoKHN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hCcmFuY2goc3RhcnQsIG5hbWUsIGJyYW5jaCkge1xuICAgICAgICAvLyBhZGQgaGlkZGVuIHN0YXJ0IG5vZGVcbiAgICAgICAgaWYgKHN0YXJ0ID09PSBTVEFSVCAmJiB0aGlzLm5vZGVzW1NUQVJUXSkge1xuICAgICAgICAgICAgdGhpcy5ub2Rlc1tTVEFSVF0gPSBDaGFubmVsLnN1YnNjcmliZVRvKFNUQVJULCB7IHRhZ3M6IFtUQUdfSElEREVOXSB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdHRhY2ggYnJhbmNoIHdyaXRlclxuICAgICAgICB0aGlzLm5vZGVzW3N0YXJ0XS5waXBlKGJyYW5jaC5ydW4oKGRlc3RzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZXMgPSBkZXN0cy5tYXAoKGRlc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoX2lzU2VuZChkZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogZGVzdCA9PT0gRU5EID8gRU5EIDogYGJyYW5jaDoke3N0YXJ0fToke25hbWV9OiR7ZGVzdH1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUEFTU1RIUk9VR0gsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFubmVsV3JpdGUod3JpdGVzLCBbVEFHX0hJRERFTl0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGF0dGFjaCBicmFuY2ggcmVhZGVyc1xuICAgICAgICBjb25zdCBlbmRzID0gYnJhbmNoLmVuZHNcbiAgICAgICAgICAgID8gT2JqZWN0LnZhbHVlcyhicmFuY2guZW5kcylcbiAgICAgICAgICAgIDogT2JqZWN0LmtleXModGhpcy5ub2Rlcyk7XG4gICAgICAgIGZvciAoY29uc3QgZW5kIG9mIGVuZHMpIHtcbiAgICAgICAgICAgIGlmIChlbmQgIT09IEVORCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gYGJyYW5jaDoke3N0YXJ0fToke25hbWV9OiR7ZW5kfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsc1tjaGFubmVsTmFtZV0gPVxuICAgICAgICAgICAgICAgICAgICBuZXcgRXBoZW1lcmFsVmFsdWUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzW2VuZF0udHJpZ2dlcnMucHVzaChjaGFubmVsTmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1tlbmRdLmNoYW5uZWxzLnB1c2goY2hhbm5lbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBkcmF3YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29tcHV0YXRpb24gZ3JhcGguXG4gICAgICovXG4gICAgYXN5bmMgZ2V0R3JhcGhBc3luYyhjb25maWcpIHtcbiAgICAgICAgY29uc3QgeHJheSA9IGNvbmZpZz8ueHJheTtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgRHJhd2FibGVHcmFwaCgpO1xuICAgICAgICBjb25zdCBzdGFydE5vZGVzID0ge1xuICAgICAgICAgICAgW1NUQVJUXTogZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICAgICAgfSwgU1RBUlQpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlbmROb2RlcyA9IHt9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgc3ViZ3JhcGhzID0ge307XG4gICAgICAgIGlmICh4cmF5KSB7XG4gICAgICAgICAgICBzdWJncmFwaHMgPSBPYmplY3QuZnJvbUVudHJpZXMoKGF3YWl0IGdhdGhlckl0ZXJhdG9yKHRoaXMuZ2V0U3ViZ3JhcGhzQXN5bmMoKSkpLmZpbHRlcihcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAoeCkgPT4gaXNDb21waWxlZEdyYXBoKHhbMV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWRkRWRnZShzdGFydCwgZW5kLCBsYWJlbCwgY29uZGl0aW9uYWwgPSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKGVuZCA9PT0gRU5EICYmIGVuZE5vZGVzW0VORF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGVuZE5vZGVzW0VORF0gPSBncmFwaC5hZGROb2RlKHsgc2NoZW1hOiB6LmFueSgpIH0sIEVORCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguYWRkRWRnZShzdGFydE5vZGVzW3N0YXJ0XSwgZW5kTm9kZXNbZW5kXSwgbGFiZWwgIT09IGVuZCA/IGxhYmVsIDogdW5kZWZpbmVkLCBjb25kaXRpb25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBub2RlU3BlY10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5idWlsZGVyLm5vZGVzKSkge1xuICAgICAgICAgICAgY29uc3QgZGlzcGxheUtleSA9IF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2RlU3BlYy5ydW5uYWJsZTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbm9kZVNwZWMubWV0YWRhdGEgPz8ge307XG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcnJ1cHRCZWZvcmU/LmluY2x1ZGVzKGtleSkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdEFmdGVyPy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEuX19pbnRlcnJ1cHQgPSBcImJlZm9yZSxhZnRlclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pbnRlcnJ1cHRCZWZvcmU/LmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5fX2ludGVycnVwdCA9IFwiYmVmb3JlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmludGVycnVwdEFmdGVyPy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEuX19pbnRlcnJ1cHQgPSBcImFmdGVyXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeHJheSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1hyYXlWYWx1ZSA9IHR5cGVvZiB4cmF5ID09PSBcIm51bWJlclwiID8geHJheSAtIDEgOiB4cmF5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyYXdhYmxlU3ViZ3JhcGggPSBzdWJncmFwaHNba2V5XSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgc3ViZ3JhcGhzW2tleV0uZ2V0R3JhcGhBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB4cmF5OiBuZXdYcmF5VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogbm9kZS5nZXRHcmFwaChjb25maWcpO1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlU3ViZ3JhcGgudHJpbUZpcnN0Tm9kZSgpO1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlU3ViZ3JhcGgudHJpbUxhc3ROb2RlKCk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRyYXdhYmxlU3ViZ3JhcGgubm9kZXMpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2UsIHNdID0gZ3JhcGguZXh0ZW5kKGRyYXdhYmxlU3ViZ3JhcGgsIGRpc3BsYXlLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRlbmQgc3ViZ3JhcGggXCIke2tleX1cIiBkdWUgdG8gbWlzc2luZyBlbnRyeXBvaW50LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSBkZWZhdWx0IG5hbWUgb25jZSB3ZSBzdG9wIHN1cHBvcnRpbmcgY29yZSAwLjIuMFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5uZXItZGVjbGFyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9pc1J1bm5hYmxlSW50ZXJmYWNlKFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICB0aGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaW5nID8gdGhpbmcubGNfcnVubmFibGUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5uZXItZGVjbGFyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9ub2RlRGF0YVN0cihpZCwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQgJiYgIWlzVXVpZChpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChfaXNSdW5uYWJsZUludGVyZmFjZShkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhU3RyID0gZGF0YS5nZXROYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdHIgPSBkYXRhU3RyLnN0YXJ0c1dpdGgoXCJSdW5uYWJsZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhU3RyLnNsaWNlKFwiUnVubmFibGVcIi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGFTdHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhU3RyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm5hbWUgPz8gXCJVbmtub3duU2NoZW1hXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3RzIHdoZW4gd2Ugc3RvcCBzdXBwb3J0aW5nIGNvcmUgMC4yLjBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnROb2Rlc1tkaXNwbGF5S2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBfbm9kZURhdGFTdHIocy5pZCwgcy5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbmROb2Rlc1tkaXNwbGF5S2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF9ub2RlRGF0YVN0cihlLmlkLCBlLmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSB3aGVuIHdlIHN0b3Agc3VwcG9ydGluZyBjb3JlIDAuMi4wXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOb2RlID0gZ3JhcGguYWRkTm9kZShub2RlLCBkaXNwbGF5S2V5LCBtZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Tm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICBlbmROb2Rlc1tkaXNwbGF5S2V5XSA9IG5ld05vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gd2Ugc3RvcCBzdXBwb3J0aW5nIGNvcmUgMC4yLjBcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSBncmFwaC5hZGROb2RlKG5vZGUsIGRpc3BsYXlLZXksIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICBzdGFydE5vZGVzW2Rpc3BsYXlLZXldID0gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICBlbmROb2Rlc1tkaXNwbGF5S2V5XSA9IG5ld05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc29ydGVkRWRnZXMgPSBbLi4udGhpcy5idWlsZGVyLmFsbEVkZ2VzXS5zb3J0KChbYV0sIFtiXSkgPT4ge1xuICAgICAgICAgICAgaWYgKGEgPCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYiA+IGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2Ygc29ydGVkRWRnZXMpIHtcbiAgICAgICAgICAgIGFkZEVkZ2UoX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhzdGFydCksIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoZW5kKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGJyYW5jaGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmJ1aWxkZXIuYnJhbmNoZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0RW5kcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXModGhpcy5idWlsZGVyLm5vZGVzKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChrKSA9PiBrICE9PSBzdGFydClcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoaykgPT4gW19lc2NhcGVNZXJtYWlkS2V5d29yZHMoayksIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoayldKSksXG4gICAgICAgICAgICAgICAgW0VORF06IEVORCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJyYW5jaCBvZiBPYmplY3QudmFsdWVzKGJyYW5jaGVzKSkge1xuICAgICAgICAgICAgICAgIGxldCBlbmRzO1xuICAgICAgICAgICAgICAgIGlmIChicmFuY2guZW5kcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZHMgPSBicmFuY2guZW5kcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZHMgPSBkZWZhdWx0RW5kcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbbGFiZWwsIGVuZF0gb2YgT2JqZWN0LmVudHJpZXMoZW5kcykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRWRnZShfZXNjYXBlTWVybWFpZEtleXdvcmRzKHN0YXJ0KSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhlbmQpLCBsYWJlbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5idWlsZGVyLm5vZGVzKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuZW5kcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbmQgb2Ygbm9kZS5lbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVkZ2UoX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrZXkpLCBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGVuZCksIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBncmFwaDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRyYXdhYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb21wdXRhdGlvbiBncmFwaC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBnZXRHcmFwaEFzeW5jIGluc3RlYWQuIFRoZSBhc3luYyBtZXRob2Qgd2lsbCBiZSB0aGUgZGVmYXVsdCBpbiB0aGUgbmV4dCBtaW5vciBjb3JlIHJlbGVhc2UuXG4gICAgICovXG4gICAgZ2V0R3JhcGgoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHhyYXkgPSBjb25maWc/LnhyYXk7XG4gICAgICAgIGNvbnN0IGdyYXBoID0gbmV3IERyYXdhYmxlR3JhcGgoKTtcbiAgICAgICAgY29uc3Qgc3RhcnROb2RlcyA9IHtcbiAgICAgICAgICAgIFtTVEFSVF06IGdyYXBoLmFkZE5vZGUoe1xuICAgICAgICAgICAgICAgIHNjaGVtYTogei5hbnkoKSxcbiAgICAgICAgICAgIH0sIFNUQVJUKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZW5kTm9kZXMgPSB7fTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IHN1YmdyYXBocyA9IHt9O1xuICAgICAgICBpZiAoeHJheSkge1xuICAgICAgICAgICAgc3ViZ3JhcGhzID0gT2JqZWN0LmZyb21FbnRyaWVzKGdhdGhlckl0ZXJhdG9yU3luYyh0aGlzLmdldFN1YmdyYXBocygpKS5maWx0ZXIoXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgKHgpID0+IGlzQ29tcGlsZWRHcmFwaCh4WzFdKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZEVkZ2Uoc3RhcnQsIGVuZCwgbGFiZWwsIGNvbmRpdGlvbmFsID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChlbmQgPT09IEVORCAmJiBlbmROb2Rlc1tFTkRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBlbmROb2Rlc1tFTkRdID0gZ3JhcGguYWRkTm9kZSh7IHNjaGVtYTogei5hbnkoKSB9LCBFTkQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLmFkZEVkZ2Uoc3RhcnROb2Rlc1tzdGFydF0sIGVuZE5vZGVzW2VuZF0sIGxhYmVsICE9PSBlbmQgPyBsYWJlbCA6IHVuZGVmaW5lZCwgY29uZGl0aW9uYWwpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgbm9kZVNwZWNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5ub2RlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlLZXkgPSBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGtleSk7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZVNwZWMucnVubmFibGU7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IG5vZGVTcGVjLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHRBZnRlcj8uaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhLl9faW50ZXJydXB0ID0gXCJiZWZvcmUsYWZ0ZXJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEuX19pbnRlcnJ1cHQgPSBcImJlZm9yZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pbnRlcnJ1cHRBZnRlcj8uaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhLl9faW50ZXJydXB0ID0gXCJhZnRlclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhyYXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdYcmF5VmFsdWUgPSB0eXBlb2YgeHJheSA9PT0gXCJudW1iZXJcIiA/IHhyYXkgLSAxIDogeHJheTtcbiAgICAgICAgICAgICAgICBjb25zdCBkcmF3YWJsZVN1YmdyYXBoID0gc3ViZ3JhcGhzW2tleV0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHN1YmdyYXBoc1trZXldLmdldEdyYXBoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHhyYXk6IG5ld1hyYXlWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgOiBub2RlLmdldEdyYXBoKGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgZHJhd2FibGVTdWJncmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICAgICAgZHJhd2FibGVTdWJncmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZHJhd2FibGVTdWJncmFwaC5ub2RlcykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbZSwgc10gPSBncmFwaC5leHRlbmQoZHJhd2FibGVTdWJncmFwaCwgZGlzcGxheUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dGVuZCBzdWJncmFwaCBcIiR7a2V5fVwiIGR1ZSB0byBtaXNzaW5nIGVudHJ5cG9pbnQuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGRlZmF1bHQgbmFtZSBvbmNlIHdlIHN0b3Agc3VwcG9ydGluZyBjb3JlIDAuMi4wXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbm5lci1kZWNsYXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX2lzUnVubmFibGVJbnRlcmZhY2UoXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIHRoaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpbmcgPyB0aGluZy5sY19ydW5uYWJsZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbm5lci1kZWNsYXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX25vZGVEYXRhU3RyKGlkLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCAmJiAhaXNVdWlkKGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1J1bm5hYmxlSW50ZXJmYWNlKGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFTdHIgPSBkYXRhLmdldE5hbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0ciA9IGRhdGFTdHIuc3RhcnRzV2l0aChcIlJ1bm5hYmxlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGFTdHIuc2xpY2UoXCJSdW5uYWJsZVwiLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGF0YVN0cjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFTdHI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXROYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubmFtZSA/PyBcIlVua25vd25TY2hlbWFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgY2FzdHMgd2hlbiB3ZSBzdG9wIHN1cHBvcnRpbmcgY29yZSAwLjIuMFxuICAgICAgICAgICAgICAgICAgICBpZiAocyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE5vZGVzW2Rpc3BsYXlLZXldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF9ub2RlRGF0YVN0cihzLmlkLCBzLmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVuZE5vZGVzW2Rpc3BsYXlLZXldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogX25vZGVEYXRhU3RyKGUuaWQsIGUuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gd2Ugc3RvcCBzdXBwb3J0aW5nIGNvcmUgMC4yLjBcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSBncmFwaC5hZGROb2RlKG5vZGUsIGRpc3BsYXlLZXksIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnROb2Rlc1tkaXNwbGF5S2V5XSA9IG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgIGVuZE5vZGVzW2Rpc3BsYXlLZXldID0gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgd2hlbiB3ZSBzdG9wIHN1cHBvcnRpbmcgY29yZSAwLjIuMFxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Tm9kZSA9IGdyYXBoLmFkZE5vZGUobm9kZSwgZGlzcGxheUtleSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIHN0YXJ0Tm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuICAgICAgICAgICAgICAgIGVuZE5vZGVzW2Rpc3BsYXlLZXldID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWRFZGdlcyA9IFsuLi50aGlzLmJ1aWxkZXIuYWxsRWRnZXNdLnNvcnQoKFthXSwgW2JdKSA9PiB7XG4gICAgICAgICAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiID4gYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IFtzdGFydCwgZW5kXSBvZiBzb3J0ZWRFZGdlcykge1xuICAgICAgICAgICAgYWRkRWRnZShfZXNjYXBlTWVybWFpZEtleXdvcmRzKHN0YXJ0KSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhlbmQpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtzdGFydCwgYnJhbmNoZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5icmFuY2hlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFbmRzID0ge1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyh0aGlzLmJ1aWxkZXIubm9kZXMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGspID0+IGsgIT09IHN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICAubWFwKChrKSA9PiBbX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrKSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrKV0pKSxcbiAgICAgICAgICAgICAgICBbRU5EXTogRU5ELFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYnJhbmNoIG9mIE9iamVjdC52YWx1ZXMoYnJhbmNoZXMpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZHM7XG4gICAgICAgICAgICAgICAgaWYgKGJyYW5jaC5lbmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kcyA9IGJyYW5jaC5lbmRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kcyA9IGRlZmF1bHRFbmRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtsYWJlbCwgZW5kXSBvZiBPYmplY3QuZW50cmllcyhlbmRzKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRFZGdlKF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoc3RhcnQpLCBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGVuZCksIGxhYmVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBpc0NvbXBpbGVkR3JhcGgoeCkge1xuICAgIHJldHVybiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0eXBlb2YgeC5hdHRhY2hOb2RlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHlwZW9mIHguYXR0YWNoRWRnZSA9PT0gXCJmdW5jdGlvblwiKTtcbn1cbmZ1bmN0aW9uIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gXCJzdWJncmFwaFwiKSB7XG4gICAgICAgIHJldHVybiBgXCIke2tleX1cImA7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/index.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/index.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* reexport safe */ _annotation_js__WEBPACK_IMPORTED_MODULE_0__.Annotation),\n/* harmony export */   AnnotationRoot: () => (/* reexport safe */ _annotation_js__WEBPACK_IMPORTED_MODULE_0__.AnnotationRoot),\n/* harmony export */   CompiledStateGraph: () => (/* reexport safe */ _state_js__WEBPACK_IMPORTED_MODULE_2__.CompiledStateGraph),\n/* harmony export */   Graph: () => (/* reexport safe */ _graph_js__WEBPACK_IMPORTED_MODULE_1__.Graph),\n/* harmony export */   MessageGraph: () => (/* reexport safe */ _message_js__WEBPACK_IMPORTED_MODULE_3__.MessageGraph),\n/* harmony export */   StateGraph: () => (/* reexport safe */ _state_js__WEBPACK_IMPORTED_MODULE_2__.StateGraph),\n/* harmony export */   messagesStateReducer: () => (/* reexport safe */ _message_js__WEBPACK_IMPORTED_MODULE_3__.messagesStateReducer)\n/* harmony export */ });\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./annotation.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/graph.js\");\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./state.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./message.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBQzNCO0FBQzBCO0FBQ00iLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZ3JhcGgvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgQW5ub3RhdGlvbiwgQW5ub3RhdGlvblJvb3QsIH0gZnJvbSBcIi4vYW5ub3RhdGlvbi5qc1wiO1xuZXhwb3J0IHsgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuZXhwb3J0IHsgU3RhdGVHcmFwaCwgQ29tcGlsZWRTdGF0ZUdyYXBoLCB9IGZyb20gXCIuL3N0YXRlLmpzXCI7XG5leHBvcnQgeyBNZXNzYWdlR3JhcGgsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLCB9IGZyb20gXCIuL21lc3NhZ2UuanNcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageGraph: () => (/* binding */ MessageGraph),\n/* harmony export */   messagesStateReducer: () => (/* binding */ messagesStateReducer)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@10.0.0/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js\");\n\n\n\n/**\n * Prebuilt reducer that combines returned messages.\n * Can handle standard messages and special modifiers like {@link RemoveMessage}\n * instances.\n */\nfunction messagesStateReducer(left, right) {\n    const leftArray = Array.isArray(left) ? left : [left];\n    const rightArray = Array.isArray(right) ? right : [right];\n    // coerce to message\n    const leftMessages = leftArray.map(_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage);\n    const rightMessages = rightArray.map(_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage);\n    // assign missing ids\n    for (const m of leftMessages) {\n        if (m.id === null || m.id === undefined) {\n            m.id = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n            m.lc_kwargs.id = m.id;\n        }\n    }\n    for (const m of rightMessages) {\n        if (m.id === null || m.id === undefined) {\n            m.id = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n            m.lc_kwargs.id = m.id;\n        }\n    }\n    // merge\n    const merged = [...leftMessages];\n    const mergedById = new Map(merged.map((m, i) => [m.id, i]));\n    const idsToRemove = new Set();\n    for (const m of rightMessages) {\n        const existingIdx = mergedById.get(m.id);\n        if (existingIdx !== undefined) {\n            if (m._getType() === \"remove\") {\n                idsToRemove.add(m.id);\n            }\n            else {\n                idsToRemove.delete(m.id);\n                merged[existingIdx] = m;\n            }\n        }\n        else {\n            if (m._getType() === \"remove\") {\n                throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${m.id}')`);\n            }\n            mergedById.set(m.id, merged.length);\n            merged.push(m);\n        }\n    }\n    return merged.filter((m) => !idsToRemove.has(m.id));\n}\n/** @ignore */\nclass MessageGraph extends _state_js__WEBPACK_IMPORTED_MODULE_1__.StateGraph {\n    constructor() {\n        super({\n            channels: {\n                __root__: {\n                    reducer: messagesStateReducer,\n                    default: () => [],\n                },\n            },\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL21lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUU7QUFDN0M7QUFDYztBQUN4QztBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxnRkFBMEI7QUFDakUseUNBQXlDLGdGQUEwQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0RBQUU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnREFBRTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHLEtBQUs7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJCQUEyQixpREFBVTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL21lc3NhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgU3RhdGVHcmFwaCB9IGZyb20gXCIuL3N0YXRlLmpzXCI7XG4vKipcbiAqIFByZWJ1aWx0IHJlZHVjZXIgdGhhdCBjb21iaW5lcyByZXR1cm5lZCBtZXNzYWdlcy5cbiAqIENhbiBoYW5kbGUgc3RhbmRhcmQgbWVzc2FnZXMgYW5kIHNwZWNpYWwgbW9kaWZpZXJzIGxpa2Uge0BsaW5rIFJlbW92ZU1lc3NhZ2V9XG4gKiBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXNzYWdlc1N0YXRlUmVkdWNlcihsZWZ0LCByaWdodCkge1xuICAgIGNvbnN0IGxlZnRBcnJheSA9IEFycmF5LmlzQXJyYXkobGVmdCkgPyBsZWZ0IDogW2xlZnRdO1xuICAgIGNvbnN0IHJpZ2h0QXJyYXkgPSBBcnJheS5pc0FycmF5KHJpZ2h0KSA/IHJpZ2h0IDogW3JpZ2h0XTtcbiAgICAvLyBjb2VyY2UgdG8gbWVzc2FnZVxuICAgIGNvbnN0IGxlZnRNZXNzYWdlcyA9IGxlZnRBcnJheS5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpO1xuICAgIGNvbnN0IHJpZ2h0TWVzc2FnZXMgPSByaWdodEFycmF5Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSk7XG4gICAgLy8gYXNzaWduIG1pc3NpbmcgaWRzXG4gICAgZm9yIChjb25zdCBtIG9mIGxlZnRNZXNzYWdlcykge1xuICAgICAgICBpZiAobS5pZCA9PT0gbnVsbCB8fCBtLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG0uaWQgPSB2NCgpO1xuICAgICAgICAgICAgbS5sY19rd2FyZ3MuaWQgPSBtLmlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgbSBvZiByaWdodE1lc3NhZ2VzKSB7XG4gICAgICAgIGlmIChtLmlkID09PSBudWxsIHx8IG0uaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbS5pZCA9IHY0KCk7XG4gICAgICAgICAgICBtLmxjX2t3YXJncy5pZCA9IG0uaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gbWVyZ2VcbiAgICBjb25zdCBtZXJnZWQgPSBbLi4ubGVmdE1lc3NhZ2VzXTtcbiAgICBjb25zdCBtZXJnZWRCeUlkID0gbmV3IE1hcChtZXJnZWQubWFwKChtLCBpKSA9PiBbbS5pZCwgaV0pKTtcbiAgICBjb25zdCBpZHNUb1JlbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IG0gb2YgcmlnaHRNZXNzYWdlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZ0lkeCA9IG1lcmdlZEJ5SWQuZ2V0KG0uaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdJZHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgICAgIGlkc1RvUmVtb3ZlLmFkZChtLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlkc1RvUmVtb3ZlLmRlbGV0ZShtLmlkKTtcbiAgICAgICAgICAgICAgICBtZXJnZWRbZXhpc3RpbmdJZHhdID0gbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtLl9nZXRUeXBlKCkgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRpbmcgdG8gZGVsZXRlIGEgbWVzc2FnZSB3aXRoIGFuIElEIHRoYXQgZG9lc24ndCBleGlzdCAoJyR7bS5pZH0nKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VkQnlJZC5zZXQobS5pZCwgbWVyZ2VkLmxlbmd0aCk7XG4gICAgICAgICAgICBtZXJnZWQucHVzaChtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkLmZpbHRlcigobSkgPT4gIWlkc1RvUmVtb3ZlLmhhcyhtLmlkKSk7XG59XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNsYXNzIE1lc3NhZ2VHcmFwaCBleHRlbmRzIFN0YXRlR3JhcGgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgICAgIF9fcm9vdF9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZHVjZXI6IG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/messages_annotation.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/messages_annotation.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessagesAnnotation: () => (/* binding */ MessagesAnnotation)\n/* harmony export */ });\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./annotation.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./message.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js\");\n/* __LC_ALLOW_ENTRYPOINT_SIDE_EFFECTS__ */\n\n\n/**\n * Prebuilt state annotation that combines returned messages.\n * Can handle standard messages and special modifiers like {@link RemoveMessage}\n * instances.\n *\n * Specifically, importing and using the prebuilt MessagesAnnotation like this:\n *\n * @example\n * ```ts\n * import { MessagesAnnotation, StateGraph } from \"@langchain/langgraph\";\n *\n * const graph = new StateGraph(MessagesAnnotation)\n *   .addNode(...)\n *   ...\n * ```\n *\n * Is equivalent to initializing your state manually like this:\n *\n * @example\n * ```ts\n * import { BaseMessage } from \"@langchain/core/messages\";\n * import { Annotation, StateGraph, messagesStateReducer } from \"@langchain/langgraph\";\n *\n * export const StateAnnotation = Annotation.Root({\n *   messages: Annotation<BaseMessage[]>({\n *     reducer: messagesStateReducer,\n *     default: () => [],\n *   }),\n * });\n *\n * const graph = new StateGraph(StateAnnotation)\n *   .addNode(...)\n *   ...\n * ```\n */\nconst MessagesAnnotation = _annotation_js__WEBPACK_IMPORTED_MODULE_0__.Annotation.Root({\n    messages: (0,_annotation_js__WEBPACK_IMPORTED_MODULE_0__.Annotation)({\n        reducer: _message_js__WEBPACK_IMPORTED_MODULE_1__.messagesStateReducer,\n        default: () => [],\n    }),\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL21lc3NhZ2VzX2Fubm90YXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDNkM7QUFDTztBQUNwRDtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUNBQWlDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCLFlBQVksK0NBQStDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJCQUEyQixzREFBVTtBQUM1QyxjQUFjLDBEQUFVO0FBQ3hCLGlCQUFpQiw2REFBb0I7QUFDckM7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9tZXNzYWdlc19hbm5vdGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIF9fTENfQUxMT1dfRU5UUllQT0lOVF9TSURFX0VGRkVDVFNfXyAqL1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gXCIuL2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IG1lc3NhZ2VzU3RhdGVSZWR1Y2VyIH0gZnJvbSBcIi4vbWVzc2FnZS5qc1wiO1xuLyoqXG4gKiBQcmVidWlsdCBzdGF0ZSBhbm5vdGF0aW9uIHRoYXQgY29tYmluZXMgcmV0dXJuZWQgbWVzc2FnZXMuXG4gKiBDYW4gaGFuZGxlIHN0YW5kYXJkIG1lc3NhZ2VzIGFuZCBzcGVjaWFsIG1vZGlmaWVycyBsaWtlIHtAbGluayBSZW1vdmVNZXNzYWdlfVxuICogaW5zdGFuY2VzLlxuICpcbiAqIFNwZWNpZmljYWxseSwgaW1wb3J0aW5nIGFuZCB1c2luZyB0aGUgcHJlYnVpbHQgTWVzc2FnZXNBbm5vdGF0aW9uIGxpa2UgdGhpczpcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IE1lc3NhZ2VzQW5ub3RhdGlvbiwgU3RhdGVHcmFwaCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuICpcbiAqIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoTWVzc2FnZXNBbm5vdGF0aW9uKVxuICogICAuYWRkTm9kZSguLi4pXG4gKiAgIC4uLlxuICogYGBgXG4gKlxuICogSXMgZXF1aXZhbGVudCB0byBpbml0aWFsaXppbmcgeW91ciBzdGF0ZSBtYW51YWxseSBsaWtlIHRoaXM6XG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBCYXNlTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbiAqIGltcG9ydCB7IEFubm90YXRpb24sIFN0YXRlR3JhcGgsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4gKlxuICogZXhwb3J0IGNvbnN0IFN0YXRlQW5ub3RhdGlvbiA9IEFubm90YXRpb24uUm9vdCh7XG4gKiAgIG1lc3NhZ2VzOiBBbm5vdGF0aW9uPEJhc2VNZXNzYWdlW10+KHtcbiAqICAgICByZWR1Y2VyOiBtZXNzYWdlc1N0YXRlUmVkdWNlcixcbiAqICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAqICAgfSksXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBncmFwaCA9IG5ldyBTdGF0ZUdyYXBoKFN0YXRlQW5ub3RhdGlvbilcbiAqICAgLmFkZE5vZGUoLi4uKVxuICogICAuLi5cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgTWVzc2FnZXNBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiAgICBtZXNzYWdlczogQW5ub3RhdGlvbih7XG4gICAgICAgIHJlZHVjZXI6IG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLFxuICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAgICB9KSxcbn0pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/messages_annotation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompiledStateGraph: () => (/* binding */ CompiledStateGraph),\n/* harmony export */   StateGraph: () => (/* binding */ StateGraph)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/graph.js\");\n/* harmony import */ var _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pregel/write.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pregel/read.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _channels_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../channels/named_barrier_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./annotation.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _managed_base_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../managed/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n/* harmony import */ var _pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../pregel/utils/subgraph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* eslint-disable @typescript-eslint/no-use-before-define */\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ROOT = \"__root__\";\n/**\n * A graph whose nodes communicate by reading and writing to a shared state.\n * Each node takes a defined `State` as input and returns a `Partial<State>`.\n *\n * Each state key can optionally be annotated with a reducer function that\n * will be used to aggregate the values of that key received from multiple nodes.\n * The signature of a reducer function is (left: Value, right: UpdateValue) => Value.\n *\n * See {@link Annotation} for more on defining state.\n *\n * After adding nodes and edges to your graph, you must call `.compile()` on it before\n * you can use it.\n *\n * @example\n * ```ts\n * import {\n *   type BaseMessage,\n *   AIMessage,\n *   HumanMessage,\n * } from \"@langchain/core/messages\";\n * import { StateGraph, Annotation } from \"@langchain/langgraph\";\n *\n * // Define a state with a single key named \"messages\" that will\n * // combine a returned BaseMessage or arrays of BaseMessages\n * const StateAnnotation = Annotation.Root({\n *   sentiment: Annotation<string>,\n *   messages: Annotation<BaseMessage[]>({\n *     reducer: (left: BaseMessage[], right: BaseMessage | BaseMessage[]) => {\n *       if (Array.isArray(right)) {\n *         return left.concat(right);\n *       }\n *       return left.concat([right]);\n *     },\n *     default: () => [],\n *   }),\n * });\n *\n * const graphBuilder = new StateGraph(StateAnnotation);\n *\n * // A node in the graph that returns an object with a \"messages\" key\n * // will update the state by combining the existing value with the returned one.\n * const myNode = (state: typeof StateAnnotation.State) => {\n *   return {\n *     messages: [new AIMessage(\"Some new response\")],\n *     sentiment: \"positive\",\n *   };\n * };\n *\n * const graph = graphBuilder\n *   .addNode(\"myNode\", myNode)\n *   .addEdge(\"__start__\", \"myNode\")\n *   .addEdge(\"myNode\", \"__end__\")\n *   .compile();\n *\n * await graph.invoke({ messages: [new HumanMessage(\"how are you?\")] });\n *\n * // {\n * //   messages: [HumanMessage(\"how are you?\"), AIMessage(\"Some new response\")],\n * //   sentiment: \"positive\",\n * // }\n * ```\n */\nclass StateGraph extends _graph_js__WEBPACK_IMPORTED_MODULE_2__.Graph {\n    constructor(fields, configSchema) {\n        super();\n        Object.defineProperty(this, \"channels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        // TODO: this doesn't dedupe edges as in py, so worth fixing at some point\n        Object.defineProperty(this, \"waitingEdges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Set()\n        });\n        /** @internal */\n        Object.defineProperty(this, \"_schemaDefinition\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @internal */\n        Object.defineProperty(this, \"_inputDefinition\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @internal */\n        Object.defineProperty(this, \"_outputDefinition\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Map schemas to managed values\n         * @internal\n         */\n        Object.defineProperty(this, \"_schemaDefinitions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        /** @internal Used only for typing. */\n        Object.defineProperty(this, \"_configSchema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (isStateGraphArgsWithInputOutputSchemas(fields)) {\n            this._schemaDefinition = fields.input.spec;\n            this._inputDefinition = fields.input.spec;\n            this._outputDefinition = fields.output.spec;\n        }\n        else if (isStateGraphArgsWithStateSchema(fields)) {\n            this._schemaDefinition = fields.stateSchema.spec;\n            this._inputDefinition = (fields.input?.spec ??\n                this._schemaDefinition);\n            this._outputDefinition = (fields.output?.spec ??\n                this._schemaDefinition);\n        }\n        else if (isStateDefinition(fields) || isAnnotationRoot(fields)) {\n            const spec = isAnnotationRoot(fields) ? fields.spec : fields;\n            this._schemaDefinition = spec;\n        }\n        else if (isStateGraphArgs(fields)) {\n            const spec = _getChannels(fields.channels);\n            this._schemaDefinition = spec;\n        }\n        else {\n            throw new Error(\"Invalid StateGraph input.\");\n        }\n        this._inputDefinition = this._inputDefinition ?? this._schemaDefinition;\n        this._outputDefinition = this._outputDefinition ?? this._schemaDefinition;\n        this._addSchema(this._schemaDefinition);\n        this._addSchema(this._inputDefinition);\n        this._addSchema(this._outputDefinition);\n        this._configSchema = configSchema?.spec;\n    }\n    get allEdges() {\n        return new Set([\n            ...this.edges,\n            ...Array.from(this.waitingEdges).flatMap(([starts, end]) => starts.map((start) => [start, end])),\n        ]);\n    }\n    _addSchema(stateDefinition) {\n        if (this._schemaDefinitions.has(stateDefinition)) {\n            return;\n        }\n        // TODO: Support managed values\n        this._schemaDefinitions.set(stateDefinition, stateDefinition);\n        for (const [key, val] of Object.entries(stateDefinition)) {\n            let channel;\n            if (typeof val === \"function\") {\n                channel = val();\n            }\n            else {\n                channel = val;\n            }\n            if (this.channels[key] !== undefined) {\n                if (this.channels[key] !== channel) {\n                    if (!(0,_managed_base_js__WEBPACK_IMPORTED_MODULE_11__.isConfiguredManagedValue)(channel) &&\n                        channel.lc_graph_name !== \"LastValue\") {\n                        throw new Error(`Channel \"${key}\" already exists with a different type.`);\n                    }\n                }\n            }\n            else {\n                this.channels[key] = channel;\n            }\n        }\n    }\n    addNode(key, action, options) {\n        if (key in this.channels) {\n            throw new Error(`${key} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);\n        }\n        for (const reservedChar of [\n            _constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR,\n            _constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_END,\n        ]) {\n            if (key.includes(reservedChar)) {\n                throw new Error(`\"${reservedChar}\" is a reserved character and is not allowed in node names.`);\n            }\n        }\n        this.warnIfCompiled(`Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n        if (key in this.nodes) {\n            throw new Error(`Node \\`${key}\\` already present.`);\n        }\n        if (key === _constants_js__WEBPACK_IMPORTED_MODULE_8__.END || key === _constants_js__WEBPACK_IMPORTED_MODULE_8__.START) {\n            throw new Error(`Node \\`${key}\\` is reserved.`);\n        }\n        if (options?.input !== undefined) {\n            this._addSchema(options.input.spec);\n        }\n        let runnable;\n        if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(action)) {\n            runnable = action;\n        }\n        else if (typeof action === \"function\") {\n            runnable = new _utils_js__WEBPACK_IMPORTED_MODULE_7__.RunnableCallable({\n                func: action,\n                name: key,\n                trace: false,\n            });\n        }\n        else {\n            runnable = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(action);\n        }\n        const nodeSpec = {\n            runnable: runnable,\n            retryPolicy: options?.retryPolicy,\n            metadata: options?.metadata,\n            input: options?.input?.spec ?? this._schemaDefinition,\n            subgraphs: (0,_pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_12__.isPregelLike)(runnable)\n                ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    [runnable]\n                : options?.subgraphs,\n            ends: options?.ends,\n        };\n        this.nodes[key] = nodeSpec;\n        return this;\n    }\n    addEdge(startKey, endKey) {\n        if (typeof startKey === \"string\") {\n            return super.addEdge(startKey, endKey);\n        }\n        if (this.compiled) {\n            console.warn(\"Adding an edge to a graph that has already been compiled. This will \" +\n                \"not be reflected in the compiled graph.\");\n        }\n        for (const start of startKey) {\n            if (start === _constants_js__WEBPACK_IMPORTED_MODULE_8__.END) {\n                throw new Error(\"END cannot be a start node\");\n            }\n            if (!Object.keys(this.nodes).some((node) => node === start)) {\n                throw new Error(`Need to add a node named \"${start}\" first`);\n            }\n        }\n        if (endKey === _constants_js__WEBPACK_IMPORTED_MODULE_8__.END) {\n            throw new Error(\"END cannot be an end node\");\n        }\n        if (!Object.keys(this.nodes).some((node) => node === endKey)) {\n            throw new Error(`Need to add a node named \"${endKey}\" first`);\n        }\n        this.waitingEdges.add([startKey, endKey]);\n        return this;\n    }\n    compile({ checkpointer, store, interruptBefore, interruptAfter, name, } = {}) {\n        // validate the graph\n        this.validate([\n            ...(Array.isArray(interruptBefore) ? interruptBefore : []),\n            ...(Array.isArray(interruptAfter) ? interruptAfter : []),\n        ]);\n        // prepare output channels\n        const outputKeys = Object.keys(this._schemaDefinitions.get(this._outputDefinition));\n        const outputChannels = outputKeys.length === 1 && outputKeys[0] === ROOT ? ROOT : outputKeys;\n        const streamKeys = Object.keys(this.channels);\n        const streamChannels = streamKeys.length === 1 && streamKeys[0] === ROOT ? ROOT : streamKeys;\n        // create empty compiled graph\n        const compiled = new CompiledStateGraph({\n            builder: this,\n            checkpointer,\n            interruptAfter,\n            interruptBefore,\n            autoValidate: false,\n            nodes: {},\n            channels: {\n                ...this.channels,\n                [_constants_js__WEBPACK_IMPORTED_MODULE_8__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_6__.EphemeralValue(),\n            },\n            inputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_8__.START,\n            outputChannels,\n            streamChannels,\n            streamMode: \"updates\",\n            store,\n            name,\n        });\n        // attach nodes, edges and branches\n        compiled.attachNode(_constants_js__WEBPACK_IMPORTED_MODULE_8__.START);\n        for (const [key, node] of Object.entries(this.nodes)) {\n            compiled.attachNode(key, node);\n        }\n        compiled.attachBranch(_constants_js__WEBPACK_IMPORTED_MODULE_8__.START, _constants_js__WEBPACK_IMPORTED_MODULE_8__.SELF, _getControlBranch(), {\n            withReader: false,\n        });\n        for (const [key] of Object.entries(this.nodes)) {\n            compiled.attachBranch(key, _constants_js__WEBPACK_IMPORTED_MODULE_8__.SELF, _getControlBranch(), {\n                withReader: false,\n            });\n        }\n        for (const [start, end] of this.edges) {\n            compiled.attachEdge(start, end);\n        }\n        for (const [starts, end] of this.waitingEdges) {\n            compiled.attachEdge(starts, end);\n        }\n        for (const [start, branches] of Object.entries(this.branches)) {\n            for (const [name, branch] of Object.entries(branches)) {\n                compiled.attachBranch(start, name, branch);\n            }\n        }\n        return compiled.validate();\n    }\n}\nfunction _getChannels(schema) {\n    const channels = {};\n    for (const [name, val] of Object.entries(schema)) {\n        if (name === ROOT) {\n            channels[name] = (0,_annotation_js__WEBPACK_IMPORTED_MODULE_10__.getChannel)(val);\n        }\n        else {\n            const key = name;\n            channels[name] = (0,_annotation_js__WEBPACK_IMPORTED_MODULE_10__.getChannel)(val);\n        }\n    }\n    return channels;\n}\n/**\n * Final result from building and compiling a {@link StateGraph}.\n * Should not be instantiated directly, only using the StateGraph `.compile()`\n * instance method.\n */\nclass CompiledStateGraph extends _graph_js__WEBPACK_IMPORTED_MODULE_2__.CompiledGraph {\n    attachNode(key, node) {\n        let outputKeys;\n        if (key === _constants_js__WEBPACK_IMPORTED_MODULE_8__.START) {\n            // Get input schema keys excluding managed values\n            outputKeys = Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition))\n                .filter(([_, v]) => !(0,_managed_base_js__WEBPACK_IMPORTED_MODULE_11__.isConfiguredManagedValue)(v))\n                .map(([k]) => k);\n        }\n        else {\n            outputKeys = Object.keys(this.builder.channels);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function _getRoot(input) {\n            if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(input)) {\n                if (input.graph === _constants_js__WEBPACK_IMPORTED_MODULE_8__.Command.PARENT) {\n                    return null;\n                }\n                return input._updateAsTuples();\n            }\n            else if (Array.isArray(input) &&\n                input.length > 0 &&\n                input.some((i) => (0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(i))) {\n                const updates = [];\n                for (const i of input) {\n                    if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(i)) {\n                        if (i.graph === _constants_js__WEBPACK_IMPORTED_MODULE_8__.Command.PARENT) {\n                            continue;\n                        }\n                        updates.push(...i._updateAsTuples());\n                    }\n                    else {\n                        updates.push([ROOT, i]);\n                    }\n                }\n                return updates;\n            }\n            else if (input != null) {\n                return [[ROOT, input]];\n            }\n            return null;\n        }\n        // to avoid name collision below\n        const nodeKey = key;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function _getUpdates(input) {\n            if (!input) {\n                return null;\n            }\n            else if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(input)) {\n                if (input.graph === _constants_js__WEBPACK_IMPORTED_MODULE_8__.Command.PARENT) {\n                    return null;\n                }\n                return input._updateAsTuples();\n            }\n            else if (Array.isArray(input) &&\n                input.length > 0 &&\n                input.some(_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)) {\n                const updates = [];\n                for (const item of input) {\n                    if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(item)) {\n                        if (item.graph === _constants_js__WEBPACK_IMPORTED_MODULE_8__.Command.PARENT) {\n                            continue;\n                        }\n                        updates.push(...item._updateAsTuples());\n                    }\n                    else {\n                        const itemUpdates = _getUpdates(item);\n                        if (itemUpdates) {\n                            updates.push(...(itemUpdates ?? []));\n                        }\n                    }\n                }\n                return updates;\n            }\n            else if (typeof input === \"object\" && !Array.isArray(input)) {\n                return Object.entries(input).filter(([k]) => outputKeys.includes(k));\n            }\n            else {\n                const typeofInput = Array.isArray(input) ? \"array\" : typeof input;\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.InvalidUpdateError(`Expected node \"${nodeKey.toString()}\" to return an object or an array containing at least one Command object, received ${typeofInput}`, {\n                    lc_error_code: \"INVALID_GRAPH_NODE_RETURN_VALUE\",\n                });\n            }\n        }\n        const stateWriteEntries = [\n            {\n                value: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH,\n                mapper: new _utils_js__WEBPACK_IMPORTED_MODULE_7__.RunnableCallable({\n                    func: outputKeys.length && outputKeys[0] === ROOT\n                        ? _getRoot\n                        : _getUpdates,\n                    trace: false,\n                    recurse: false,\n                }),\n            },\n        ];\n        // add node and output channel\n        if (key === _constants_js__WEBPACK_IMPORTED_MODULE_8__.START) {\n            this.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__.PregelNode({\n                tags: [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN],\n                triggers: [_constants_js__WEBPACK_IMPORTED_MODULE_8__.START],\n                channels: [_constants_js__WEBPACK_IMPORTED_MODULE_8__.START],\n                writers: [new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite(stateWriteEntries, [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN])],\n            });\n        }\n        else {\n            const inputDefinition = node?.input ?? this.builder._schemaDefinition;\n            const inputValues = Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(inputDefinition)).map((k) => [k, k]));\n            const isSingleInput = Object.keys(inputValues).length === 1 && ROOT in inputValues;\n            this.channels[key] = new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_6__.EphemeralValue(false);\n            this.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__.PregelNode({\n                triggers: [],\n                // read state keys\n                channels: isSingleInput ? Object.keys(inputValues) : inputValues,\n                // publish to this channel and state keys\n                writers: [\n                    new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite(stateWriteEntries.concat({ channel: key, value: key }), [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN]),\n                ],\n                mapper: isSingleInput\n                    ? undefined\n                    : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        (input) => {\n                            return Object.fromEntries(Object.entries(input).filter(([k]) => k in inputValues));\n                        },\n                bound: node?.runnable,\n                metadata: node?.metadata,\n                retryPolicy: node?.retryPolicy,\n                subgraphs: node?.subgraphs,\n                ends: node?.ends,\n            });\n        }\n    }\n    attachEdge(start, end) {\n        if (end === _constants_js__WEBPACK_IMPORTED_MODULE_8__.END) {\n            return;\n        }\n        if (Array.isArray(start)) {\n            const channelName = `join:${start.join(\"+\")}:${end}`;\n            // register channel\n            this.channels[channelName] =\n                new _channels_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_5__.NamedBarrierValue(new Set(start));\n            // subscribe to channel\n            this.nodes[end].triggers.push(channelName);\n            // publish to channel\n            for (const s of start) {\n                this.nodes[s].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{ channel: channelName, value: s }], [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN]));\n            }\n        }\n        else if (start === _constants_js__WEBPACK_IMPORTED_MODULE_8__.START) {\n            const channelName = `${_constants_js__WEBPACK_IMPORTED_MODULE_8__.START}:${end}`;\n            // register channel\n            this.channels[channelName] =\n                new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_6__.EphemeralValue();\n            // subscribe to channel\n            this.nodes[end].triggers.push(channelName);\n            // publish to channel\n            this.nodes[_constants_js__WEBPACK_IMPORTED_MODULE_8__.START].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{ channel: channelName, value: _constants_js__WEBPACK_IMPORTED_MODULE_8__.START }], [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN]));\n        }\n        else {\n            this.nodes[end].triggers.push(start);\n        }\n    }\n    attachBranch(start, name, branch, options = { withReader: true }) {\n        const branchWriter = async (packets, config) => {\n            const filteredPackets = packets.filter((p) => p !== _constants_js__WEBPACK_IMPORTED_MODULE_8__.END);\n            if (!filteredPackets.length) {\n                return;\n            }\n            const writes = filteredPackets.map((p) => {\n                if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__._isSend)(p)) {\n                    return p;\n                }\n                return {\n                    channel: `branch:${start}:${name}:${p}`,\n                    value: start,\n                };\n            });\n            await _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite.doWrite({ ...config, tags: (config.tags ?? []).concat([_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN]) }, writes);\n        };\n        // attach branch publisher\n        this.nodes[start].writers.push(branch.run(branchWriter, \n        // reader\n        options.withReader\n            ? (config) => _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__.ChannelRead.doRead(config, this.streamChannels ?? this.outputChannels, true)\n            : undefined));\n        // attach branch subscribers\n        const ends = branch.ends\n            ? Object.values(branch.ends)\n            : Object.keys(this.builder.nodes);\n        for (const end of ends) {\n            if (end === _constants_js__WEBPACK_IMPORTED_MODULE_8__.END) {\n                continue;\n            }\n            const channelName = `branch:${start}:${name}:${end}`;\n            this.channels[channelName] =\n                new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_6__.EphemeralValue(false);\n            this.nodes[end].triggers.push(channelName);\n        }\n    }\n}\nfunction isStateDefinition(obj) {\n    return (typeof obj === \"object\" &&\n        obj !== null &&\n        !Array.isArray(obj) &&\n        Object.keys(obj).length > 0 &&\n        Object.values(obj).every((v) => typeof v === \"function\" || (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseChannel)(v)));\n}\nfunction isAnnotationRoot(obj) {\n    return (typeof obj === \"object\" &&\n        obj !== null &&\n        \"lc_graph_name\" in obj &&\n        obj.lc_graph_name === \"AnnotationRoot\");\n}\nfunction isStateGraphArgs(obj) {\n    return (typeof obj === \"object\" &&\n        obj !== null &&\n        obj.channels !== undefined);\n}\nfunction isStateGraphArgsWithStateSchema(obj) {\n    return (typeof obj === \"object\" &&\n        obj !== null &&\n        obj.stateSchema !== undefined);\n}\nfunction isStateGraphArgsWithInputOutputSchemas(obj) {\n    return (typeof obj === \"object\" &&\n        obj !== null &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        obj.stateSchema === undefined &&\n        obj.input !== undefined &&\n        obj.output !== undefined);\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _controlBranch(value) {\n    if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__._isSend)(value)) {\n        return [value];\n    }\n    const commands = [];\n    if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)(value)) {\n        commands.push(value);\n    }\n    else if (Array.isArray(value) && value.every(_constants_js__WEBPACK_IMPORTED_MODULE_8__.isCommand)) {\n        commands.push(...value);\n    }\n    else {\n        return [];\n    }\n    const destinations = [];\n    for (const command of commands) {\n        if (command.graph === _constants_js__WEBPACK_IMPORTED_MODULE_8__.Command.PARENT) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.ParentCommand(command);\n        }\n        if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_8__._isSend)(command.goto) || typeof command.goto === \"string\") {\n            destinations.push(command.goto);\n        }\n        else {\n            destinations.push(...command.goto);\n        }\n    }\n    return destinations;\n}\nfunction _getControlBranch() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONTROL_BRANCH_PATH = new _utils_js__WEBPACK_IMPORTED_MODULE_7__.RunnableCallable({\n        func: _controlBranch,\n        tags: [_constants_js__WEBPACK_IMPORTED_MODULE_8__.TAG_HIDDEN],\n        trace: false,\n        recurse: false,\n    });\n    return new _graph_js__WEBPACK_IMPORTED_MODULE_2__.Branch({\n        path: CONTROL_BRANCH_PATH,\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL3N0YXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3lFO0FBQ3JCO0FBQ087QUFDSztBQUNKO0FBQ1c7QUFDUDtBQUNqQjtBQUN3RztBQUN0RjtBQUNuQjtBQUNnQjtBQUNIO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0JBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVkseUJBQXlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ04sSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBOEM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyx5QkFBeUIsNENBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkVBQXdCO0FBQ2pEO0FBQ0Esb0RBQW9ELElBQUk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSztBQUNwQztBQUNBO0FBQ0EsWUFBWSx5RUFBOEI7QUFDMUMsWUFBWSxtRUFBd0I7QUFDcEM7QUFDQTtBQUNBLG9DQUFvQyxhQUFhO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLElBQUk7QUFDMUM7QUFDQSxvQkFBb0IsOENBQUcsWUFBWSxnREFBSztBQUN4QyxzQ0FBc0MsSUFBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrREFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsdURBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0VBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw4Q0FBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsTUFBTTtBQUNuRTtBQUNBO0FBQ0EsdUJBQXVCLDhDQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxPQUFPO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw4REFBOEQsSUFBSTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUIsZ0RBQUssT0FBTyx3RUFBYztBQUMzQyxhQUFhO0FBQ2IsMkJBQTJCLGdEQUFLO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEIsZ0RBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdEQUFLLEVBQUUsK0NBQUk7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx1Q0FBdUMsK0NBQUk7QUFDM0M7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkRBQVU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJEQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNPLGlDQUFpQyxvREFBYTtBQUNyRDtBQUNBO0FBQ0Esb0JBQW9CLGdEQUFLO0FBQ3pCO0FBQ0E7QUFDQSxxQ0FBcUMsMkVBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdEQUFTO0FBQ3pCLG9DQUFvQyxrREFBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msd0RBQVM7QUFDM0M7QUFDQTtBQUNBLHdCQUF3Qix3REFBUztBQUNqQyx3Q0FBd0Msa0RBQU87QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQVM7QUFDOUIsb0NBQW9DLGtEQUFPO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvREFBUztBQUNwQztBQUNBO0FBQ0Esd0JBQXdCLHdEQUFTO0FBQ2pDLDJDQUEyQyxrREFBTztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMERBQWtCLG1CQUFtQixtQkFBbUIscUZBQXFGLFlBQVk7QUFDbkw7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseURBQVc7QUFDbEMsNEJBQTRCLHVEQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLGdEQUFLO0FBQ3pCLGtDQUFrQyx1REFBVTtBQUM1Qyx1QkFBdUIscURBQVU7QUFDakMsMkJBQTJCLGdEQUFLO0FBQ2hDLDJCQUEyQixnREFBSztBQUNoQyw4QkFBOEIsMERBQVkscUJBQXFCLHFEQUFVO0FBQ3pFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHdFQUFjO0FBQ25ELGtDQUFrQyx1REFBVTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFZLDRCQUE0QiwwQkFBMEIsSUFBSSxxREFBVTtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOENBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGdCQUFnQixHQUFHLElBQUk7QUFDL0Q7QUFDQTtBQUNBLG9CQUFvQiwrRUFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMERBQVksSUFBSSxnQ0FBZ0MsSUFBSSxxREFBVTtBQUM3RztBQUNBO0FBQ0EsMkJBQTJCLGdEQUFLO0FBQ2hDLG1DQUFtQyxnREFBSyxDQUFDLEdBQUcsSUFBSTtBQUNoRDtBQUNBO0FBQ0Esb0JBQW9CLHdFQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnREFBSyxtQkFBbUIsMERBQVksSUFBSSw2QkFBNkIsZ0RBQUssRUFBRSxJQUFJLHFEQUFVO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsa0JBQWtCO0FBQ3BFO0FBQ0EsZ0VBQWdFLDhDQUFHO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxNQUFNLEdBQUcsS0FBSyxHQUFHLEVBQUU7QUFDMUQ7QUFDQTtBQUNBLGFBQWE7QUFDYixrQkFBa0IsMERBQVksV0FBVyw2Q0FBNkMscURBQVUsSUFBSTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBRztBQUMzQjtBQUNBO0FBQ0EsMENBQTBDLE1BQU0sR0FBRyxLQUFLLEdBQUcsSUFBSTtBQUMvRDtBQUNBLG9CQUFvQix3RUFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsZ0VBQWE7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBTztBQUNmO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0RBQVM7QUFDakI7QUFDQTtBQUNBLGlEQUFpRCxvREFBUztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrREFBTztBQUNyQyxzQkFBc0IscURBQWE7QUFDbkM7QUFDQSxZQUFZLHNEQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHVEQUFnQjtBQUNwRDtBQUNBLGVBQWUscURBQVU7QUFDekI7QUFDQTtBQUNBLEtBQUs7QUFDTCxlQUFlLDZDQUFNO0FBQ3JCO0FBQ0EsS0FBSztBQUNMIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL3N0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZSAqL1xuaW1wb3J0IHsgX2NvZXJjZVRvUnVubmFibGUsIFJ1bm5hYmxlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5pbXBvcnQgeyBpc0Jhc2VDaGFubmVsIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IENvbXBpbGVkR3JhcGgsIEdyYXBoLCBCcmFuY2gsIH0gZnJvbSBcIi4vZ3JhcGguanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSwgUEFTU1RIUk9VR0gsIH0gZnJvbSBcIi4uL3ByZWdlbC93cml0ZS5qc1wiO1xuaW1wb3J0IHsgQ2hhbm5lbFJlYWQsIFByZWdlbE5vZGUgfSBmcm9tIFwiLi4vcHJlZ2VsL3JlYWQuanNcIjtcbmltcG9ydCB7IE5hbWVkQmFycmllclZhbHVlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL25hbWVkX2JhcnJpZXJfdmFsdWUuanNcIjtcbmltcG9ydCB7IEVwaGVtZXJhbFZhbHVlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2VwaGVtZXJhbF92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVDYWxsYWJsZSB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgaXNDb21tYW5kLCBfaXNTZW5kLCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ29tbWFuZCwgRU5ELCBTRUxGLCBTVEFSVCwgVEFHX0hJRERFTiwgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBJbnZhbGlkVXBkYXRlRXJyb3IsIFBhcmVudENvbW1hbmQgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBnZXRDaGFubmVsLCB9IGZyb20gXCIuL2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IGlzQ29uZmlndXJlZE1hbmFnZWRWYWx1ZSB9IGZyb20gXCIuLi9tYW5hZ2VkL2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzUHJlZ2VsTGlrZSB9IGZyb20gXCIuLi9wcmVnZWwvdXRpbHMvc3ViZ3JhcGguanNcIjtcbmNvbnN0IFJPT1QgPSBcIl9fcm9vdF9fXCI7XG4vKipcbiAqIEEgZ3JhcGggd2hvc2Ugbm9kZXMgY29tbXVuaWNhdGUgYnkgcmVhZGluZyBhbmQgd3JpdGluZyB0byBhIHNoYXJlZCBzdGF0ZS5cbiAqIEVhY2ggbm9kZSB0YWtlcyBhIGRlZmluZWQgYFN0YXRlYCBhcyBpbnB1dCBhbmQgcmV0dXJucyBhIGBQYXJ0aWFsPFN0YXRlPmAuXG4gKlxuICogRWFjaCBzdGF0ZSBrZXkgY2FuIG9wdGlvbmFsbHkgYmUgYW5ub3RhdGVkIHdpdGggYSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXRcbiAqIHdpbGwgYmUgdXNlZCB0byBhZ2dyZWdhdGUgdGhlIHZhbHVlcyBvZiB0aGF0IGtleSByZWNlaXZlZCBmcm9tIG11bHRpcGxlIG5vZGVzLlxuICogVGhlIHNpZ25hdHVyZSBvZiBhIHJlZHVjZXIgZnVuY3Rpb24gaXMgKGxlZnQ6IFZhbHVlLCByaWdodDogVXBkYXRlVmFsdWUpID0+IFZhbHVlLlxuICpcbiAqIFNlZSB7QGxpbmsgQW5ub3RhdGlvbn0gZm9yIG1vcmUgb24gZGVmaW5pbmcgc3RhdGUuXG4gKlxuICogQWZ0ZXIgYWRkaW5nIG5vZGVzIGFuZCBlZGdlcyB0byB5b3VyIGdyYXBoLCB5b3UgbXVzdCBjYWxsIGAuY29tcGlsZSgpYCBvbiBpdCBiZWZvcmVcbiAqIHlvdSBjYW4gdXNlIGl0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHtcbiAqICAgdHlwZSBCYXNlTWVzc2FnZSxcbiAqICAgQUlNZXNzYWdlLFxuICogICBIdW1hbk1lc3NhZ2UsXG4gKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbiAqIGltcG9ydCB7IFN0YXRlR3JhcGgsIEFubm90YXRpb24gfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiAqXG4gKiAvLyBEZWZpbmUgYSBzdGF0ZSB3aXRoIGEgc2luZ2xlIGtleSBuYW1lZCBcIm1lc3NhZ2VzXCIgdGhhdCB3aWxsXG4gKiAvLyBjb21iaW5lIGEgcmV0dXJuZWQgQmFzZU1lc3NhZ2Ugb3IgYXJyYXlzIG9mIEJhc2VNZXNzYWdlc1xuICogY29uc3QgU3RhdGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiAqICAgc2VudGltZW50OiBBbm5vdGF0aW9uPHN0cmluZz4sXG4gKiAgIG1lc3NhZ2VzOiBBbm5vdGF0aW9uPEJhc2VNZXNzYWdlW10+KHtcbiAqICAgICByZWR1Y2VyOiAobGVmdDogQmFzZU1lc3NhZ2VbXSwgcmlnaHQ6IEJhc2VNZXNzYWdlIHwgQmFzZU1lc3NhZ2VbXSkgPT4ge1xuICogICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmlnaHQpKSB7XG4gKiAgICAgICAgIHJldHVybiBsZWZ0LmNvbmNhdChyaWdodCk7XG4gKiAgICAgICB9XG4gKiAgICAgICByZXR1cm4gbGVmdC5jb25jYXQoW3JpZ2h0XSk7XG4gKiAgICAgfSxcbiAqICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAqICAgfSksXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBncmFwaEJ1aWxkZXIgPSBuZXcgU3RhdGVHcmFwaChTdGF0ZUFubm90YXRpb24pO1xuICpcbiAqIC8vIEEgbm9kZSBpbiB0aGUgZ3JhcGggdGhhdCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgXCJtZXNzYWdlc1wiIGtleVxuICogLy8gd2lsbCB1cGRhdGUgdGhlIHN0YXRlIGJ5IGNvbWJpbmluZyB0aGUgZXhpc3RpbmcgdmFsdWUgd2l0aCB0aGUgcmV0dXJuZWQgb25lLlxuICogY29uc3QgbXlOb2RlID0gKHN0YXRlOiB0eXBlb2YgU3RhdGVBbm5vdGF0aW9uLlN0YXRlKSA9PiB7XG4gKiAgIHJldHVybiB7XG4gKiAgICAgbWVzc2FnZXM6IFtuZXcgQUlNZXNzYWdlKFwiU29tZSBuZXcgcmVzcG9uc2VcIildLFxuICogICAgIHNlbnRpbWVudDogXCJwb3NpdGl2ZVwiLFxuICogICB9O1xuICogfTtcbiAqXG4gKiBjb25zdCBncmFwaCA9IGdyYXBoQnVpbGRlclxuICogICAuYWRkTm9kZShcIm15Tm9kZVwiLCBteU5vZGUpXG4gKiAgIC5hZGRFZGdlKFwiX19zdGFydF9fXCIsIFwibXlOb2RlXCIpXG4gKiAgIC5hZGRFZGdlKFwibXlOb2RlXCIsIFwiX19lbmRfX1wiKVxuICogICAuY29tcGlsZSgpO1xuICpcbiAqIGF3YWl0IGdyYXBoLmludm9rZSh7IG1lc3NhZ2VzOiBbbmV3IEh1bWFuTWVzc2FnZShcImhvdyBhcmUgeW91P1wiKV0gfSk7XG4gKlxuICogLy8ge1xuICogLy8gICBtZXNzYWdlczogW0h1bWFuTWVzc2FnZShcImhvdyBhcmUgeW91P1wiKSwgQUlNZXNzYWdlKFwiU29tZSBuZXcgcmVzcG9uc2VcIildLFxuICogLy8gICBzZW50aW1lbnQ6IFwicG9zaXRpdmVcIixcbiAqIC8vIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU3RhdGVHcmFwaCBleHRlbmRzIEdyYXBoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIGNvbmZpZ1NjaGVtYSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGFubmVsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRPRE86IHRoaXMgZG9lc24ndCBkZWR1cGUgZWRnZXMgYXMgaW4gcHksIHNvIHdvcnRoIGZpeGluZyBhdCBzb21lIHBvaW50XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhaXRpbmdFZGdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IFNldCgpXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9zY2hlbWFEZWZpbml0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2lucHV0RGVmaW5pdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9vdXRwdXREZWZpbml0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgc2NoZW1hcyB0byBtYW5hZ2VkIHZhbHVlc1xuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9zY2hlbWFEZWZpbml0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGludGVybmFsIFVzZWQgb25seSBmb3IgdHlwaW5nLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfY29uZmlnU2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc1N0YXRlR3JhcGhBcmdzV2l0aElucHV0T3V0cHV0U2NoZW1hcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gZmllbGRzLmlucHV0LnNwZWM7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dERlZmluaXRpb24gPSBmaWVsZHMuaW5wdXQuc3BlYztcbiAgICAgICAgICAgIHRoaXMuX291dHB1dERlZmluaXRpb24gPSBmaWVsZHMub3V0cHV0LnNwZWM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdGF0ZUdyYXBoQXJnc1dpdGhTdGF0ZVNjaGVtYShmaWVsZHMpKSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gZmllbGRzLnN0YXRlU2NoZW1hLnNwZWM7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dERlZmluaXRpb24gPSAoZmllbGRzLmlucHV0Py5zcGVjID8/XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NoZW1hRGVmaW5pdGlvbik7XG4gICAgICAgICAgICB0aGlzLl9vdXRwdXREZWZpbml0aW9uID0gKGZpZWxkcy5vdXRwdXQ/LnNwZWMgPz9cbiAgICAgICAgICAgICAgICB0aGlzLl9zY2hlbWFEZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1N0YXRlRGVmaW5pdGlvbihmaWVsZHMpIHx8IGlzQW5ub3RhdGlvblJvb3QoZmllbGRzKSkge1xuICAgICAgICAgICAgY29uc3Qgc3BlYyA9IGlzQW5ub3RhdGlvblJvb3QoZmllbGRzKSA/IGZpZWxkcy5zcGVjIDogZmllbGRzO1xuICAgICAgICAgICAgdGhpcy5fc2NoZW1hRGVmaW5pdGlvbiA9IHNwZWM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdGF0ZUdyYXBoQXJncyhmaWVsZHMpKSB7XG4gICAgICAgICAgICBjb25zdCBzcGVjID0gX2dldENoYW5uZWxzKGZpZWxkcy5jaGFubmVscyk7XG4gICAgICAgICAgICB0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gc3BlYztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgU3RhdGVHcmFwaCBpbnB1dC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5wdXREZWZpbml0aW9uID0gdGhpcy5faW5wdXREZWZpbml0aW9uID8/IHRoaXMuX3NjaGVtYURlZmluaXRpb247XG4gICAgICAgIHRoaXMuX291dHB1dERlZmluaXRpb24gPSB0aGlzLl9vdXRwdXREZWZpbml0aW9uID8/IHRoaXMuX3NjaGVtYURlZmluaXRpb247XG4gICAgICAgIHRoaXMuX2FkZFNjaGVtYSh0aGlzLl9zY2hlbWFEZWZpbml0aW9uKTtcbiAgICAgICAgdGhpcy5fYWRkU2NoZW1hKHRoaXMuX2lucHV0RGVmaW5pdGlvbik7XG4gICAgICAgIHRoaXMuX2FkZFNjaGVtYSh0aGlzLl9vdXRwdXREZWZpbml0aW9uKTtcbiAgICAgICAgdGhpcy5fY29uZmlnU2NoZW1hID0gY29uZmlnU2NoZW1hPy5zcGVjO1xuICAgIH1cbiAgICBnZXQgYWxsRWRnZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KFtcbiAgICAgICAgICAgIC4uLnRoaXMuZWRnZXMsXG4gICAgICAgICAgICAuLi5BcnJheS5mcm9tKHRoaXMud2FpdGluZ0VkZ2VzKS5mbGF0TWFwKChbc3RhcnRzLCBlbmRdKSA9PiBzdGFydHMubWFwKChzdGFydCkgPT4gW3N0YXJ0LCBlbmRdKSksXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBfYWRkU2NoZW1hKHN0YXRlRGVmaW5pdGlvbikge1xuICAgICAgICBpZiAodGhpcy5fc2NoZW1hRGVmaW5pdGlvbnMuaGFzKHN0YXRlRGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBTdXBwb3J0IG1hbmFnZWQgdmFsdWVzXG4gICAgICAgIHRoaXMuX3NjaGVtYURlZmluaXRpb25zLnNldChzdGF0ZURlZmluaXRpb24sIHN0YXRlRGVmaW5pdGlvbik7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZURlZmluaXRpb24pKSB7XG4gICAgICAgICAgICBsZXQgY2hhbm5lbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjaGFubmVsID0gdmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGFubmVsID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbm5lbHNba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhbm5lbHNba2V5XSAhPT0gY2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ29uZmlndXJlZE1hbmFnZWRWYWx1ZShjaGFubmVsKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5sY19ncmFwaF9uYW1lICE9PSBcIkxhc3RWYWx1ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgXCIke2tleX1cIiBhbHJlYWR5IGV4aXN0cyB3aXRoIGEgZGlmZmVyZW50IHR5cGUuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWxzW2tleV0gPSBjaGFubmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZE5vZGUoa2V5LCBhY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGtleSBpbiB0aGlzLmNoYW5uZWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7a2V5fSBpcyBhbHJlYWR5IGJlaW5nIHVzZWQgYXMgYSBzdGF0ZSBhdHRyaWJ1dGUgKGEuay5hLiBhIGNoYW5uZWwpLCBjYW5ub3QgYWxzbyBiZSB1c2VkIGFzIGEgbm9kZSBuYW1lLmApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcmVzZXJ2ZWRDaGFyIG9mIFtcbiAgICAgICAgICAgIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUixcbiAgICAgICAgICAgIENIRUNLUE9JTlRfTkFNRVNQQUNFX0VORCxcbiAgICAgICAgXSkge1xuICAgICAgICAgICAgaWYgKGtleS5pbmNsdWRlcyhyZXNlcnZlZENoYXIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7cmVzZXJ2ZWRDaGFyfVwiIGlzIGEgcmVzZXJ2ZWQgY2hhcmFjdGVyIGFuZCBpcyBub3QgYWxsb3dlZCBpbiBub2RlIG5hbWVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FybklmQ29tcGlsZWQoYEFkZGluZyBhIG5vZGUgdG8gYSBncmFwaCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gY29tcGlsZWQuIFRoaXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluIHRoZSBjb21waWxlZCBncmFwaC5gKTtcbiAgICAgICAgaWYgKGtleSBpbiB0aGlzLm5vZGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgXFxgJHtrZXl9XFxgIGFscmVhZHkgcHJlc2VudC5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBFTkQgfHwga2V5ID09PSBTVEFSVCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb2RlIFxcYCR7a2V5fVxcYCBpcyByZXNlcnZlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uaW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fYWRkU2NoZW1hKG9wdGlvbnMuaW5wdXQuc3BlYyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJ1bm5hYmxlO1xuICAgICAgICBpZiAoUnVubmFibGUuaXNSdW5uYWJsZShhY3Rpb24pKSB7XG4gICAgICAgICAgICBydW5uYWJsZSA9IGFjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgYWN0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlID0gbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuICAgICAgICAgICAgICAgIGZ1bmM6IGFjdGlvbixcbiAgICAgICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICAgICAgdHJhY2U6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBydW5uYWJsZSA9IF9jb2VyY2VUb1J1bm5hYmxlKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZVNwZWMgPSB7XG4gICAgICAgICAgICBydW5uYWJsZTogcnVubmFibGUsXG4gICAgICAgICAgICByZXRyeVBvbGljeTogb3B0aW9ucz8ucmV0cnlQb2xpY3ksXG4gICAgICAgICAgICBtZXRhZGF0YTogb3B0aW9ucz8ubWV0YWRhdGEsXG4gICAgICAgICAgICBpbnB1dDogb3B0aW9ucz8uaW5wdXQ/LnNwZWMgPz8gdGhpcy5fc2NoZW1hRGVmaW5pdGlvbixcbiAgICAgICAgICAgIHN1YmdyYXBoczogaXNQcmVnZWxMaWtlKHJ1bm5hYmxlKVxuICAgICAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgW3J1bm5hYmxlXVxuICAgICAgICAgICAgICAgIDogb3B0aW9ucz8uc3ViZ3JhcGhzLFxuICAgICAgICAgICAgZW5kczogb3B0aW9ucz8uZW5kcyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ub2Rlc1trZXldID0gbm9kZVNwZWM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGRFZGdlKHN0YXJ0S2V5LCBlbmRLZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdGFydEtleSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFkZEVkZ2Uoc3RhcnRLZXksIGVuZEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29tcGlsZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFkZGluZyBhbiBlZGdlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgXCIgK1xuICAgICAgICAgICAgICAgIFwibm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgc3RhcnQgb2Ygc3RhcnRLZXkpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCA9PT0gRU5EKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRU5EIGNhbm5vdCBiZSBhIHN0YXJ0IG5vZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHRoaXMubm9kZXMpLnNvbWUoKG5vZGUpID0+IG5vZGUgPT09IHN0YXJ0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTmVlZCB0byBhZGQgYSBub2RlIG5hbWVkIFwiJHtzdGFydH1cIiBmaXJzdGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRLZXkgPT09IEVORCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRU5EIGNhbm5vdCBiZSBhbiBlbmQgbm9kZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHRoaXMubm9kZXMpLnNvbWUoKG5vZGUpID0+IG5vZGUgPT09IGVuZEtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTmVlZCB0byBhZGQgYSBub2RlIG5hbWVkIFwiJHtlbmRLZXl9XCIgZmlyc3RgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhaXRpbmdFZGdlcy5hZGQoW3N0YXJ0S2V5LCBlbmRLZXldKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbXBpbGUoeyBjaGVja3BvaW50ZXIsIHN0b3JlLCBpbnRlcnJ1cHRCZWZvcmUsIGludGVycnVwdEFmdGVyLCBuYW1lLCB9ID0ge30pIHtcbiAgICAgICAgLy8gdmFsaWRhdGUgdGhlIGdyYXBoXG4gICAgICAgIHRoaXMudmFsaWRhdGUoW1xuICAgICAgICAgICAgLi4uKEFycmF5LmlzQXJyYXkoaW50ZXJydXB0QmVmb3JlKSA/IGludGVycnVwdEJlZm9yZSA6IFtdKSxcbiAgICAgICAgICAgIC4uLihBcnJheS5pc0FycmF5KGludGVycnVwdEFmdGVyKSA/IGludGVycnVwdEFmdGVyIDogW10pLFxuICAgICAgICBdKTtcbiAgICAgICAgLy8gcHJlcGFyZSBvdXRwdXQgY2hhbm5lbHNcbiAgICAgICAgY29uc3Qgb3V0cHV0S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX3NjaGVtYURlZmluaXRpb25zLmdldCh0aGlzLl9vdXRwdXREZWZpbml0aW9uKSk7XG4gICAgICAgIGNvbnN0IG91dHB1dENoYW5uZWxzID0gb3V0cHV0S2V5cy5sZW5ndGggPT09IDEgJiYgb3V0cHV0S2V5c1swXSA9PT0gUk9PVCA/IFJPT1QgOiBvdXRwdXRLZXlzO1xuICAgICAgICBjb25zdCBzdHJlYW1LZXlzID0gT2JqZWN0LmtleXModGhpcy5jaGFubmVscyk7XG4gICAgICAgIGNvbnN0IHN0cmVhbUNoYW5uZWxzID0gc3RyZWFtS2V5cy5sZW5ndGggPT09IDEgJiYgc3RyZWFtS2V5c1swXSA9PT0gUk9PVCA/IFJPT1QgOiBzdHJlYW1LZXlzO1xuICAgICAgICAvLyBjcmVhdGUgZW1wdHkgY29tcGlsZWQgZ3JhcGhcbiAgICAgICAgY29uc3QgY29tcGlsZWQgPSBuZXcgQ29tcGlsZWRTdGF0ZUdyYXBoKHtcbiAgICAgICAgICAgIGJ1aWxkZXI6IHRoaXMsXG4gICAgICAgICAgICBjaGVja3BvaW50ZXIsXG4gICAgICAgICAgICBpbnRlcnJ1cHRBZnRlcixcbiAgICAgICAgICAgIGludGVycnVwdEJlZm9yZSxcbiAgICAgICAgICAgIGF1dG9WYWxpZGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBub2Rlczoge30sXG4gICAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgW1NUQVJUXTogbmV3IEVwaGVtZXJhbFZhbHVlKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRDaGFubmVsczogU1RBUlQsXG4gICAgICAgICAgICBvdXRwdXRDaGFubmVscyxcbiAgICAgICAgICAgIHN0cmVhbUNoYW5uZWxzLFxuICAgICAgICAgICAgc3RyZWFtTW9kZTogXCJ1cGRhdGVzXCIsXG4gICAgICAgICAgICBzdG9yZSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBhdHRhY2ggbm9kZXMsIGVkZ2VzIGFuZCBicmFuY2hlc1xuICAgICAgICBjb21waWxlZC5hdHRhY2hOb2RlKFNUQVJUKTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBub2RlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLm5vZGVzKSkge1xuICAgICAgICAgICAgY29tcGlsZWQuYXR0YWNoTm9kZShrZXksIG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBpbGVkLmF0dGFjaEJyYW5jaChTVEFSVCwgU0VMRiwgX2dldENvbnRyb2xCcmFuY2goKSwge1xuICAgICAgICAgICAgd2l0aFJlYWRlcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICBjb21waWxlZC5hdHRhY2hCcmFuY2goa2V5LCBTRUxGLCBfZ2V0Q29udHJvbEJyYW5jaCgpLCB7XG4gICAgICAgICAgICAgICAgd2l0aFJlYWRlcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtzdGFydCwgZW5kXSBvZiB0aGlzLmVkZ2VzKSB7XG4gICAgICAgICAgICBjb21waWxlZC5hdHRhY2hFZGdlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW3N0YXJ0cywgZW5kXSBvZiB0aGlzLndhaXRpbmdFZGdlcykge1xuICAgICAgICAgICAgY29tcGlsZWQuYXR0YWNoRWRnZShzdGFydHMsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGJyYW5jaGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmJyYW5jaGVzKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgYnJhbmNoXSBvZiBPYmplY3QuZW50cmllcyhicmFuY2hlcykpIHtcbiAgICAgICAgICAgICAgICBjb21waWxlZC5hdHRhY2hCcmFuY2goc3RhcnQsIG5hbWUsIGJyYW5jaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBpbGVkLnZhbGlkYXRlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gX2dldENoYW5uZWxzKHNjaGVtYSkge1xuICAgIGNvbnN0IGNoYW5uZWxzID0ge307XG4gICAgZm9yIChjb25zdCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEpKSB7XG4gICAgICAgIGlmIChuYW1lID09PSBST09UKSB7XG4gICAgICAgICAgICBjaGFubmVsc1tuYW1lXSA9IGdldENoYW5uZWwodmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IG5hbWU7XG4gICAgICAgICAgICBjaGFubmVsc1tuYW1lXSA9IGdldENoYW5uZWwodmFsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhbm5lbHM7XG59XG4vKipcbiAqIEZpbmFsIHJlc3VsdCBmcm9tIGJ1aWxkaW5nIGFuZCBjb21waWxpbmcgYSB7QGxpbmsgU3RhdGVHcmFwaH0uXG4gKiBTaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseSwgb25seSB1c2luZyB0aGUgU3RhdGVHcmFwaCBgLmNvbXBpbGUoKWBcbiAqIGluc3RhbmNlIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBpbGVkU3RhdGVHcmFwaCBleHRlbmRzIENvbXBpbGVkR3JhcGgge1xuICAgIGF0dGFjaE5vZGUoa2V5LCBub2RlKSB7XG4gICAgICAgIGxldCBvdXRwdXRLZXlzO1xuICAgICAgICBpZiAoa2V5ID09PSBTVEFSVCkge1xuICAgICAgICAgICAgLy8gR2V0IGlucHV0IHNjaGVtYSBrZXlzIGV4Y2x1ZGluZyBtYW5hZ2VkIHZhbHVlc1xuICAgICAgICAgICAgb3V0cHV0S2V5cyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5fc2NoZW1hRGVmaW5pdGlvbnMuZ2V0KHRoaXMuYnVpbGRlci5faW5wdXREZWZpbml0aW9uKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChbXywgdl0pID0+ICFpc0NvbmZpZ3VyZWRNYW5hZ2VkVmFsdWUodikpXG4gICAgICAgICAgICAgICAgLm1hcCgoW2tdKSA9PiBrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmJ1aWxkZXIuY2hhbm5lbHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGZ1bmN0aW9uIF9nZXRSb290KGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoaXNDb21tYW5kKGlucHV0KSkge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5ncmFwaCA9PT0gQ29tbWFuZC5QQVJFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC5fdXBkYXRlQXNUdXBsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpICYmXG4gICAgICAgICAgICAgICAgaW5wdXQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgIGlucHV0LnNvbWUoKGkpID0+IGlzQ29tbWFuZChpKSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0NvbW1hbmQoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpLmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcy5wdXNoKC4uLmkuX3VwZGF0ZUFzVHVwbGVzKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcy5wdXNoKFtST09ULCBpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbUk9PVCwgaW5wdXRdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRvIGF2b2lkIG5hbWUgY29sbGlzaW9uIGJlbG93XG4gICAgICAgIGNvbnN0IG5vZGVLZXkgPSBrZXk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGZ1bmN0aW9uIF9nZXRVcGRhdGVzKGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoIWlucHV0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0NvbW1hbmQoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0Ll91cGRhdGVBc1R1cGxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkgJiZcbiAgICAgICAgICAgICAgICBpbnB1dC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgaW5wdXQuc29tZShpc0NvbW1hbmQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb21tYW5kKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5ncmFwaCA9PT0gQ29tbWFuZC5QQVJFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZXMucHVzaCguLi5pdGVtLl91cGRhdGVBc1R1cGxlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1VcGRhdGVzID0gX2dldFVwZGF0ZXMoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVVwZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVzLnB1c2goLi4uKGl0ZW1VcGRhdGVzID8/IFtdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGlucHV0KS5maWx0ZXIoKFtrXSkgPT4gb3V0cHV0S2V5cy5pbmNsdWRlcyhrKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlb2ZJbnB1dCA9IEFycmF5LmlzQXJyYXkoaW5wdXQpID8gXCJhcnJheVwiIDogdHlwZW9mIGlucHV0O1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEV4cGVjdGVkIG5vZGUgXCIke25vZGVLZXkudG9TdHJpbmcoKX1cIiB0byByZXR1cm4gYW4gb2JqZWN0IG9yIGFuIGFycmF5IGNvbnRhaW5pbmcgYXQgbGVhc3Qgb25lIENvbW1hbmQgb2JqZWN0LCByZWNlaXZlZCAke3R5cGVvZklucHV0fWAsIHtcbiAgICAgICAgICAgICAgICAgICAgbGNfZXJyb3JfY29kZTogXCJJTlZBTElEX0dSQVBIX05PREVfUkVUVVJOX1ZBTFVFXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGVXcml0ZUVudHJpZXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IFBBU1NUSFJPVUdILFxuICAgICAgICAgICAgICAgIG1hcHBlcjogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuICAgICAgICAgICAgICAgICAgICBmdW5jOiBvdXRwdXRLZXlzLmxlbmd0aCAmJiBvdXRwdXRLZXlzWzBdID09PSBST09UXG4gICAgICAgICAgICAgICAgICAgICAgICA/IF9nZXRSb290XG4gICAgICAgICAgICAgICAgICAgICAgICA6IF9nZXRVcGRhdGVzLFxuICAgICAgICAgICAgICAgICAgICB0cmFjZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgLy8gYWRkIG5vZGUgYW5kIG91dHB1dCBjaGFubmVsXG4gICAgICAgIGlmIChrZXkgPT09IFNUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW2tleV0gPSBuZXcgUHJlZ2VsTm9kZSh7XG4gICAgICAgICAgICAgICAgdGFnczogW1RBR19ISURERU5dLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJzOiBbU1RBUlRdLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxzOiBbU1RBUlRdLFxuICAgICAgICAgICAgICAgIHdyaXRlcnM6IFtuZXcgQ2hhbm5lbFdyaXRlKHN0YXRlV3JpdGVFbnRyaWVzLCBbVEFHX0hJRERFTl0pXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5wdXREZWZpbml0aW9uID0gbm9kZT8uaW5wdXQgPz8gdGhpcy5idWlsZGVyLl9zY2hlbWFEZWZpbml0aW9uO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXModGhpcy5idWlsZGVyLl9zY2hlbWFEZWZpbml0aW9ucy5nZXQoaW5wdXREZWZpbml0aW9uKSkubWFwKChrKSA9PiBbaywga10pKTtcbiAgICAgICAgICAgIGNvbnN0IGlzU2luZ2xlSW5wdXQgPSBPYmplY3Qua2V5cyhpbnB1dFZhbHVlcykubGVuZ3RoID09PSAxICYmIFJPT1QgaW4gaW5wdXRWYWx1ZXM7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWxzW2tleV0gPSBuZXcgRXBoZW1lcmFsVmFsdWUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlc1trZXldID0gbmV3IFByZWdlbE5vZGUoe1xuICAgICAgICAgICAgICAgIHRyaWdnZXJzOiBbXSxcbiAgICAgICAgICAgICAgICAvLyByZWFkIHN0YXRlIGtleXNcbiAgICAgICAgICAgICAgICBjaGFubmVsczogaXNTaW5nbGVJbnB1dCA/IE9iamVjdC5rZXlzKGlucHV0VmFsdWVzKSA6IGlucHV0VmFsdWVzLFxuICAgICAgICAgICAgICAgIC8vIHB1Ymxpc2ggdG8gdGhpcyBjaGFubmVsIGFuZCBzdGF0ZSBrZXlzXG4gICAgICAgICAgICAgICAgd3JpdGVyczogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ2hhbm5lbFdyaXRlKHN0YXRlV3JpdGVFbnRyaWVzLmNvbmNhdCh7IGNoYW5uZWw6IGtleSwgdmFsdWU6IGtleSB9KSwgW1RBR19ISURERU5dKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG1hcHBlcjogaXNTaW5nbGVJbnB1dFxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGlucHV0KS5maWx0ZXIoKFtrXSkgPT4gayBpbiBpbnB1dFZhbHVlcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3VuZDogbm9kZT8ucnVubmFibGUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG5vZGU/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHJldHJ5UG9saWN5OiBub2RlPy5yZXRyeVBvbGljeSxcbiAgICAgICAgICAgICAgICBzdWJncmFwaHM6IG5vZGU/LnN1YmdyYXBocyxcbiAgICAgICAgICAgICAgICBlbmRzOiBub2RlPy5lbmRzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0YWNoRWRnZShzdGFydCwgZW5kKSB7XG4gICAgICAgIGlmIChlbmQgPT09IEVORCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0YXJ0KSkge1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbE5hbWUgPSBgam9pbjoke3N0YXJ0LmpvaW4oXCIrXCIpfToke2VuZH1gO1xuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgY2hhbm5lbFxuICAgICAgICAgICAgdGhpcy5jaGFubmVsc1tjaGFubmVsTmFtZV0gPVxuICAgICAgICAgICAgICAgIG5ldyBOYW1lZEJhcnJpZXJWYWx1ZShuZXcgU2V0KHN0YXJ0KSk7XG4gICAgICAgICAgICAvLyBzdWJzY3JpYmUgdG8gY2hhbm5lbFxuICAgICAgICAgICAgdGhpcy5ub2Rlc1tlbmRdLnRyaWdnZXJzLnB1c2goY2hhbm5lbE5hbWUpO1xuICAgICAgICAgICAgLy8gcHVibGlzaCB0byBjaGFubmVsXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzW3NdLndyaXRlcnMucHVzaChuZXcgQ2hhbm5lbFdyaXRlKFt7IGNoYW5uZWw6IGNoYW5uZWxOYW1lLCB2YWx1ZTogcyB9XSwgW1RBR19ISURERU5dKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhcnQgPT09IFNUQVJUKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsTmFtZSA9IGAke1NUQVJUfToke2VuZH1gO1xuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgY2hhbm5lbFxuICAgICAgICAgICAgdGhpcy5jaGFubmVsc1tjaGFubmVsTmFtZV0gPVxuICAgICAgICAgICAgICAgIG5ldyBFcGhlbWVyYWxWYWx1ZSgpO1xuICAgICAgICAgICAgLy8gc3Vic2NyaWJlIHRvIGNoYW5uZWxcbiAgICAgICAgICAgIHRoaXMubm9kZXNbZW5kXS50cmlnZ2Vycy5wdXNoKGNoYW5uZWxOYW1lKTtcbiAgICAgICAgICAgIC8vIHB1Ymxpc2ggdG8gY2hhbm5lbFxuICAgICAgICAgICAgdGhpcy5ub2Rlc1tTVEFSVF0ud3JpdGVycy5wdXNoKG5ldyBDaGFubmVsV3JpdGUoW3sgY2hhbm5lbDogY2hhbm5lbE5hbWUsIHZhbHVlOiBTVEFSVCB9XSwgW1RBR19ISURERU5dKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW2VuZF0udHJpZ2dlcnMucHVzaChzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0YWNoQnJhbmNoKHN0YXJ0LCBuYW1lLCBicmFuY2gsIG9wdGlvbnMgPSB7IHdpdGhSZWFkZXI6IHRydWUgfSkge1xuICAgICAgICBjb25zdCBicmFuY2hXcml0ZXIgPSBhc3luYyAocGFja2V0cywgY29uZmlnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFBhY2tldHMgPSBwYWNrZXRzLmZpbHRlcigocCkgPT4gcCAhPT0gRU5EKTtcbiAgICAgICAgICAgIGlmICghZmlsdGVyZWRQYWNrZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdyaXRlcyA9IGZpbHRlcmVkUGFja2V0cy5tYXAoKHApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoX2lzU2VuZChwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogYGJyYW5jaDoke3N0YXJ0fToke25hbWV9OiR7cH1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhcnQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgQ2hhbm5lbFdyaXRlLmRvV3JpdGUoeyAuLi5jb25maWcsIHRhZ3M6IChjb25maWcudGFncyA/PyBbXSkuY29uY2F0KFtUQUdfSElEREVOXSkgfSwgd3JpdGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gYXR0YWNoIGJyYW5jaCBwdWJsaXNoZXJcbiAgICAgICAgdGhpcy5ub2Rlc1tzdGFydF0ud3JpdGVycy5wdXNoKGJyYW5jaC5ydW4oYnJhbmNoV3JpdGVyLCBcbiAgICAgICAgLy8gcmVhZGVyXG4gICAgICAgIG9wdGlvbnMud2l0aFJlYWRlclxuICAgICAgICAgICAgPyAoY29uZmlnKSA9PiBDaGFubmVsUmVhZC5kb1JlYWQoY29uZmlnLCB0aGlzLnN0cmVhbUNoYW5uZWxzID8/IHRoaXMub3V0cHV0Q2hhbm5lbHMsIHRydWUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCkpO1xuICAgICAgICAvLyBhdHRhY2ggYnJhbmNoIHN1YnNjcmliZXJzXG4gICAgICAgIGNvbnN0IGVuZHMgPSBicmFuY2guZW5kc1xuICAgICAgICAgICAgPyBPYmplY3QudmFsdWVzKGJyYW5jaC5lbmRzKVxuICAgICAgICAgICAgOiBPYmplY3Qua2V5cyh0aGlzLmJ1aWxkZXIubm9kZXMpO1xuICAgICAgICBmb3IgKGNvbnN0IGVuZCBvZiBlbmRzKSB7XG4gICAgICAgICAgICBpZiAoZW5kID09PSBFTkQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gYGJyYW5jaDoke3N0YXJ0fToke25hbWV9OiR7ZW5kfWA7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWxzW2NoYW5uZWxOYW1lXSA9XG4gICAgICAgICAgICAgICAgbmV3IEVwaGVtZXJhbFZhbHVlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbZW5kXS50cmlnZ2Vycy5wdXNoKGNoYW5uZWxOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzU3RhdGVEZWZpbml0aW9uKG9iaikge1xuICAgIHJldHVybiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBvYmogIT09IG51bGwgJiZcbiAgICAgICAgIUFycmF5LmlzQXJyYXkob2JqKSAmJlxuICAgICAgICBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmopLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiIHx8IGlzQmFzZUNoYW5uZWwodikpKTtcbn1cbmZ1bmN0aW9uIGlzQW5ub3RhdGlvblJvb3Qob2JqKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICAgICBcImxjX2dyYXBoX25hbWVcIiBpbiBvYmogJiZcbiAgICAgICAgb2JqLmxjX2dyYXBoX25hbWUgPT09IFwiQW5ub3RhdGlvblJvb3RcIik7XG59XG5mdW5jdGlvbiBpc1N0YXRlR3JhcGhBcmdzKG9iaikge1xuICAgIHJldHVybiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBvYmogIT09IG51bGwgJiZcbiAgICAgICAgb2JqLmNoYW5uZWxzICE9PSB1bmRlZmluZWQpO1xufVxuZnVuY3Rpb24gaXNTdGF0ZUdyYXBoQXJnc1dpdGhTdGF0ZVNjaGVtYShvYmopIHtcbiAgICByZXR1cm4gKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgb2JqICE9PSBudWxsICYmXG4gICAgICAgIG9iai5zdGF0ZVNjaGVtYSAhPT0gdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIGlzU3RhdGVHcmFwaEFyZ3NXaXRoSW5wdXRPdXRwdXRTY2hlbWFzKG9iaikge1xuICAgIHJldHVybiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBvYmogIT09IG51bGwgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgb2JqLnN0YXRlU2NoZW1hID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgb2JqLmlucHV0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgb2JqLm91dHB1dCAhPT0gdW5kZWZpbmVkKTtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfY29udHJvbEJyYW5jaCh2YWx1ZSkge1xuICAgIGlmIChfaXNTZW5kKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gW3ZhbHVlXTtcbiAgICB9XG4gICAgY29uc3QgY29tbWFuZHMgPSBbXTtcbiAgICBpZiAoaXNDb21tYW5kKHZhbHVlKSkge1xuICAgICAgICBjb21tYW5kcy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkoaXNDb21tYW5kKSkge1xuICAgICAgICBjb21tYW5kcy5wdXNoKC4uLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgZGVzdGluYXRpb25zID0gW107XG4gICAgZm9yIChjb25zdCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XG4gICAgICAgIGlmIChjb21tYW5kLmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBhcmVudENvbW1hbmQoY29tbWFuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pc1NlbmQoY29tbWFuZC5nb3RvKSB8fCB0eXBlb2YgY29tbWFuZC5nb3RvID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbnMucHVzaChjb21tYW5kLmdvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb25zLnB1c2goLi4uY29tbWFuZC5nb3RvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzdGluYXRpb25zO1xufVxuZnVuY3Rpb24gX2dldENvbnRyb2xCcmFuY2goKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBDT05UUk9MX0JSQU5DSF9QQVRIID0gbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuICAgICAgICBmdW5jOiBfY29udHJvbEJyYW5jaCxcbiAgICAgICAgdGFnczogW1RBR19ISURERU5dLFxuICAgICAgICB0cmFjZTogZmFsc2UsXG4gICAgICAgIHJlY3Vyc2U6IGZhbHNlLFxuICAgIH0pO1xuICAgIHJldHVybiBuZXcgQnJhbmNoKHtcbiAgICAgICAgcGF0aDogQ09OVFJPTF9CUkFOQ0hfUEFUSCxcbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/index.js":
/*!*****************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/index.js ***!
  \*****************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.Annotation),\n/* harmony export */   AsyncBatchedStore: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.AsyncBatchedStore),\n/* harmony export */   BaseChannel: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel),\n/* harmony export */   BaseCheckpointSaver: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.BaseCheckpointSaver),\n/* harmony export */   BaseLangGraphError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.BaseLangGraphError),\n/* harmony export */   BaseStore: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.BaseStore),\n/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.BinaryOperatorAggregate),\n/* harmony export */   ChannelKeyPlaceholder: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.ChannelKeyPlaceholder),\n/* harmony export */   Command: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.Command),\n/* harmony export */   CompiledStateGraph: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.CompiledStateGraph),\n/* harmony export */   END: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.END),\n/* harmony export */   EmptyChannelError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError),\n/* harmony export */   EmptyInputError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.EmptyInputError),\n/* harmony export */   Graph: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.Graph),\n/* harmony export */   GraphBubbleUp: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.GraphBubbleUp),\n/* harmony export */   GraphInterrupt: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.GraphInterrupt),\n/* harmony export */   GraphRecursionError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.GraphRecursionError),\n/* harmony export */   GraphValueError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.GraphValueError),\n/* harmony export */   InMemoryStore: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.InMemoryStore),\n/* harmony export */   InvalidUpdateError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.InvalidUpdateError),\n/* harmony export */   IsLastStepManager: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.IsLastStepManager),\n/* harmony export */   ManagedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.ManagedValue),\n/* harmony export */   ManagedValueMapping: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.ManagedValueMapping),\n/* harmony export */   MemorySaver: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.MemorySaver),\n/* harmony export */   MessageGraph: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.MessageGraph),\n/* harmony export */   MessagesAnnotation: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.MessagesAnnotation),\n/* harmony export */   MultipleSubgraphsError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.MultipleSubgraphsError),\n/* harmony export */   NodeInterrupt: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.NodeInterrupt),\n/* harmony export */   NoopManagedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.NoopManagedValue),\n/* harmony export */   ParentCommand: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.ParentCommand),\n/* harmony export */   RemoteException: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.RemoteException),\n/* harmony export */   START: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.START),\n/* harmony export */   Send: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.Send),\n/* harmony export */   SharedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.SharedValue),\n/* harmony export */   StateGraph: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.StateGraph),\n/* harmony export */   UnreachableNodeError: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.UnreachableNodeError),\n/* harmony export */   WritableManagedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.WritableManagedValue),\n/* harmony export */   addMessages: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.addMessages),\n/* harmony export */   copyCheckpoint: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.copyCheckpoint),\n/* harmony export */   emptyCheckpoint: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.emptyCheckpoint),\n/* harmony export */   entrypoint: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.entrypoint),\n/* harmony export */   getPreviousState: () => (/* reexport safe */ _func_index_js__WEBPACK_IMPORTED_MODULE_4__.getPreviousState),\n/* harmony export */   getStore: () => (/* reexport safe */ _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.getStore),\n/* harmony export */   getSubgraphsSeenSet: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.getSubgraphsSeenSet),\n/* harmony export */   getWriter: () => (/* reexport safe */ _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.getWriter),\n/* harmony export */   interrupt: () => (/* reexport safe */ _interrupt_js__WEBPACK_IMPORTED_MODULE_2__.interrupt),\n/* harmony export */   isCommand: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isCommand),\n/* harmony export */   isConfiguredManagedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isConfiguredManagedValue),\n/* harmony export */   isGraphBubbleUp: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isGraphBubbleUp),\n/* harmony export */   isGraphInterrupt: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isGraphInterrupt),\n/* harmony export */   isManagedValue: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isManagedValue),\n/* harmony export */   isParentCommand: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.isParentCommand),\n/* harmony export */   messagesStateReducer: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.messagesStateReducer),\n/* harmony export */   task: () => (/* reexport safe */ _web_js__WEBPACK_IMPORTED_MODULE_1__.task)\n/* harmony export */ });\n/* harmony import */ var _setup_async_local_storage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setup/async_local_storage.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/setup/async_local_storage.js\");\n/* harmony import */ var _web_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./web.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/web.js\");\n/* harmony import */ var _interrupt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interrupt.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/interrupt.js\");\n/* harmony import */ var _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pregel/utils/config.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _func_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./func/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/index.js\");\n/* __LC_ALLOW_ENTRYPOINT_SIDE_EFFECTS__ */\n\n// Initialize global async local storage instance for tracing\n(0,_setup_async_local_storage_js__WEBPACK_IMPORTED_MODULE_0__.initializeAsyncLocalStorageSingleton)();\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0Y7QUFDdEY7QUFDQSxtR0FBb0M7QUFDWDtBQUNrQjtBQUNvQjtBQUNaIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIF9fTENfQUxMT1dfRU5UUllQT0lOVF9TSURFX0VGRkVDVFNfXyAqL1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUFzeW5jTG9jYWxTdG9yYWdlU2luZ2xldG9uIH0gZnJvbSBcIi4vc2V0dXAvYXN5bmNfbG9jYWxfc3RvcmFnZS5qc1wiO1xuLy8gSW5pdGlhbGl6ZSBnbG9iYWwgYXN5bmMgbG9jYWwgc3RvcmFnZSBpbnN0YW5jZSBmb3IgdHJhY2luZ1xuaW5pdGlhbGl6ZUFzeW5jTG9jYWxTdG9yYWdlU2luZ2xldG9uKCk7XG5leHBvcnQgKiBmcm9tIFwiLi93ZWIuanNcIjtcbmV4cG9ydCB7IGludGVycnVwdCB9IGZyb20gXCIuL2ludGVycnVwdC5qc1wiO1xuZXhwb3J0IHsgZ2V0U3RvcmUsIGdldFdyaXRlciB9IGZyb20gXCIuL3ByZWdlbC91dGlscy9jb25maWcuanNcIjtcbmV4cG9ydCB7IGdldFByZXZpb3VzU3RhdGUgfSBmcm9tIFwiLi9mdW5jL2luZGV4LmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/interrupt.js":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/interrupt.js ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   interrupt: () => (/* binding */ interrupt)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\n/**\n * Interrupts the execution of a graph node.\n * This function can be used to pause execution of a node, and return the value of the `resume`\n * input when the graph is re-invoked using `Command`.\n * Multiple interrupts can be called within a single node, and each will be handled sequentially.\n *\n * When an interrupt is called:\n * 1. If there's a `resume` value available (from a previous `Command`), it returns that value.\n * 2. Otherwise, it throws a `GraphInterrupt` with the provided value\n * 3. The graph can be resumed by passing a `Command` with a `resume` value\n *\n * @param value - The value to include in the interrupt. This will be available in task.interrupts[].value\n * @returns The `resume` value provided when the graph is re-invoked with a Command\n *\n * @example\n * ```typescript\n * // Define a node that uses multiple interrupts\n * const nodeWithInterrupts = () => {\n *   // First interrupt - will pause execution and include {value: 1} in task values\n *   const answer1 = interrupt({ value: 1 });\n *\n *   // Second interrupt - only called after first interrupt is resumed\n *   const answer2 = interrupt({ value: 2 });\n *\n *   // Use the resume values\n *   return { myKey: answer1 + \" \" + answer2 };\n * };\n *\n * // Resume the graph after first interrupt\n * await graph.stream(new Command({ resume: \"answer 1\" }));\n *\n * // Resume the graph after second interrupt\n * await graph.stream(new Command({ resume: \"answer 2\" }));\n * // Final result: { myKey: \"answer 1 answer 2\" }\n * ```\n *\n * @throws {Error} If called outside the context of a graph\n * @throws {GraphInterrupt} When no resume value is available\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction interrupt(value) {\n    const config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    if (!config) {\n        throw new Error(\"Called interrupt() outside the context of a graph.\");\n    }\n    const conf = config.configurable;\n    if (!conf) {\n        throw new Error(\"No configurable found in config\");\n    }\n    // Track interrupt index\n    const scratchpad = conf[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD];\n    scratchpad.interruptCounter += 1;\n    const idx = scratchpad.interruptCounter;\n    // Find previous resume values\n    if (scratchpad.resume.length > 0 && idx < scratchpad.resume.length) {\n        return scratchpad.resume[idx];\n    }\n    // Find current resume value\n    if (scratchpad.nullResume !== undefined) {\n        if (scratchpad.resume.length !== idx) {\n            throw new Error(`Resume length mismatch: ${scratchpad.resume.length} !== ${idx}`);\n        }\n        const v = scratchpad.nullResume;\n        delete scratchpad.nullResume;\n        scratchpad.resume.push(v);\n        const send = conf[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SEND];\n        if (send) {\n            send([[_constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME, scratchpad.resume]]);\n        }\n        return v;\n    }\n    // No resume value found\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.GraphInterrupt([\n        {\n            value,\n            when: \"during\",\n            resumable: true,\n            ns: conf[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS]?.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR),\n        },\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2ludGVycnVwdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdGO0FBQ25DO0FBQzhGO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxVQUFVO0FBQ3RFLGlDQUFpQyxVQUFVO0FBQzNDO0FBQ0E7QUFDQSxpQ0FBaUMsVUFBVTtBQUMzQztBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxvQkFBb0I7QUFDeEQ7QUFDQTtBQUNBLG9DQUFvQyxvQkFBb0I7QUFDeEQsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNPO0FBQ1AsbUJBQW1CLDBGQUFrQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsMEJBQTBCLE1BQU0sSUFBSTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwREFBZTtBQUN6QztBQUNBLG1CQUFtQixpREFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0RBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUVBQXdCLFNBQVMseUVBQThCO0FBQ3BGLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2ludGVycnVwdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9zaW5nbGV0b25zXCI7XG5pbXBvcnQgeyBHcmFwaEludGVycnVwdCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQ09ORklHX0tFWV9DSEVDS1BPSU5UX05TLCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQsIENPTkZJR19LRVlfU0VORCwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBSRVNVTUUsIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG4vKipcbiAqIEludGVycnVwdHMgdGhlIGV4ZWN1dGlvbiBvZiBhIGdyYXBoIG5vZGUuXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHBhdXNlIGV4ZWN1dGlvbiBvZiBhIG5vZGUsIGFuZCByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBgcmVzdW1lYFxuICogaW5wdXQgd2hlbiB0aGUgZ3JhcGggaXMgcmUtaW52b2tlZCB1c2luZyBgQ29tbWFuZGAuXG4gKiBNdWx0aXBsZSBpbnRlcnJ1cHRzIGNhbiBiZSBjYWxsZWQgd2l0aGluIGEgc2luZ2xlIG5vZGUsIGFuZCBlYWNoIHdpbGwgYmUgaGFuZGxlZCBzZXF1ZW50aWFsbHkuXG4gKlxuICogV2hlbiBhbiBpbnRlcnJ1cHQgaXMgY2FsbGVkOlxuICogMS4gSWYgdGhlcmUncyBhIGByZXN1bWVgIHZhbHVlIGF2YWlsYWJsZSAoZnJvbSBhIHByZXZpb3VzIGBDb21tYW5kYCksIGl0IHJldHVybnMgdGhhdCB2YWx1ZS5cbiAqIDIuIE90aGVyd2lzZSwgaXQgdGhyb3dzIGEgYEdyYXBoSW50ZXJydXB0YCB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZVxuICogMy4gVGhlIGdyYXBoIGNhbiBiZSByZXN1bWVkIGJ5IHBhc3NpbmcgYSBgQ29tbWFuZGAgd2l0aCBhIGByZXN1bWVgIHZhbHVlXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGluY2x1ZGUgaW4gdGhlIGludGVycnVwdC4gVGhpcyB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0YXNrLmludGVycnVwdHNbXS52YWx1ZVxuICogQHJldHVybnMgVGhlIGByZXN1bWVgIHZhbHVlIHByb3ZpZGVkIHdoZW4gdGhlIGdyYXBoIGlzIHJlLWludm9rZWQgd2l0aCBhIENvbW1hbmRcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gRGVmaW5lIGEgbm9kZSB0aGF0IHVzZXMgbXVsdGlwbGUgaW50ZXJydXB0c1xuICogY29uc3Qgbm9kZVdpdGhJbnRlcnJ1cHRzID0gKCkgPT4ge1xuICogICAvLyBGaXJzdCBpbnRlcnJ1cHQgLSB3aWxsIHBhdXNlIGV4ZWN1dGlvbiBhbmQgaW5jbHVkZSB7dmFsdWU6IDF9IGluIHRhc2sgdmFsdWVzXG4gKiAgIGNvbnN0IGFuc3dlcjEgPSBpbnRlcnJ1cHQoeyB2YWx1ZTogMSB9KTtcbiAqXG4gKiAgIC8vIFNlY29uZCBpbnRlcnJ1cHQgLSBvbmx5IGNhbGxlZCBhZnRlciBmaXJzdCBpbnRlcnJ1cHQgaXMgcmVzdW1lZFxuICogICBjb25zdCBhbnN3ZXIyID0gaW50ZXJydXB0KHsgdmFsdWU6IDIgfSk7XG4gKlxuICogICAvLyBVc2UgdGhlIHJlc3VtZSB2YWx1ZXNcbiAqICAgcmV0dXJuIHsgbXlLZXk6IGFuc3dlcjEgKyBcIiBcIiArIGFuc3dlcjIgfTtcbiAqIH07XG4gKlxuICogLy8gUmVzdW1lIHRoZSBncmFwaCBhZnRlciBmaXJzdCBpbnRlcnJ1cHRcbiAqIGF3YWl0IGdyYXBoLnN0cmVhbShuZXcgQ29tbWFuZCh7IHJlc3VtZTogXCJhbnN3ZXIgMVwiIH0pKTtcbiAqXG4gKiAvLyBSZXN1bWUgdGhlIGdyYXBoIGFmdGVyIHNlY29uZCBpbnRlcnJ1cHRcbiAqIGF3YWl0IGdyYXBoLnN0cmVhbShuZXcgQ29tbWFuZCh7IHJlc3VtZTogXCJhbnN3ZXIgMlwiIH0pKTtcbiAqIC8vIEZpbmFsIHJlc3VsdDogeyBteUtleTogXCJhbnN3ZXIgMSBhbnN3ZXIgMlwiIH1cbiAqIGBgYFxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBjYWxsZWQgb3V0c2lkZSB0aGUgY29udGV4dCBvZiBhIGdyYXBoXG4gKiBAdGhyb3dzIHtHcmFwaEludGVycnVwdH0gV2hlbiBubyByZXN1bWUgdmFsdWUgaXMgYXZhaWxhYmxlXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaW50ZXJydXB0KHZhbHVlKSB7XG4gICAgY29uc3QgY29uZmlnID0gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbGxlZCBpbnRlcnJ1cHQoKSBvdXRzaWRlIHRoZSBjb250ZXh0IG9mIGEgZ3JhcGguXCIpO1xuICAgIH1cbiAgICBjb25zdCBjb25mID0gY29uZmlnLmNvbmZpZ3VyYWJsZTtcbiAgICBpZiAoIWNvbmYpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29uZmlndXJhYmxlIGZvdW5kIGluIGNvbmZpZ1wiKTtcbiAgICB9XG4gICAgLy8gVHJhY2sgaW50ZXJydXB0IGluZGV4XG4gICAgY29uc3Qgc2NyYXRjaHBhZCA9IGNvbmZbQ09ORklHX0tFWV9TQ1JBVENIUEFEXTtcbiAgICBzY3JhdGNocGFkLmludGVycnVwdENvdW50ZXIgKz0gMTtcbiAgICBjb25zdCBpZHggPSBzY3JhdGNocGFkLmludGVycnVwdENvdW50ZXI7XG4gICAgLy8gRmluZCBwcmV2aW91cyByZXN1bWUgdmFsdWVzXG4gICAgaWYgKHNjcmF0Y2hwYWQucmVzdW1lLmxlbmd0aCA+IDAgJiYgaWR4IDwgc2NyYXRjaHBhZC5yZXN1bWUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzY3JhdGNocGFkLnJlc3VtZVtpZHhdO1xuICAgIH1cbiAgICAvLyBGaW5kIGN1cnJlbnQgcmVzdW1lIHZhbHVlXG4gICAgaWYgKHNjcmF0Y2hwYWQubnVsbFJlc3VtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChzY3JhdGNocGFkLnJlc3VtZS5sZW5ndGggIT09IGlkeCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXN1bWUgbGVuZ3RoIG1pc21hdGNoOiAke3NjcmF0Y2hwYWQucmVzdW1lLmxlbmd0aH0gIT09ICR7aWR4fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHYgPSBzY3JhdGNocGFkLm51bGxSZXN1bWU7XG4gICAgICAgIGRlbGV0ZSBzY3JhdGNocGFkLm51bGxSZXN1bWU7XG4gICAgICAgIHNjcmF0Y2hwYWQucmVzdW1lLnB1c2godik7XG4gICAgICAgIGNvbnN0IHNlbmQgPSBjb25mW0NPTkZJR19LRVlfU0VORF07XG4gICAgICAgIGlmIChzZW5kKSB7XG4gICAgICAgICAgICBzZW5kKFtbUkVTVU1FLCBzY3JhdGNocGFkLnJlc3VtZV1dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdjtcbiAgICB9XG4gICAgLy8gTm8gcmVzdW1lIHZhbHVlIGZvdW5kXG4gICAgdGhyb3cgbmV3IEdyYXBoSW50ZXJydXB0KFtcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB3aGVuOiBcImR1cmluZ1wiLFxuICAgICAgICAgICAgcmVzdW1hYmxlOiB0cnVlLFxuICAgICAgICAgICAgbnM6IGNvbmZbQ09ORklHX0tFWV9DSEVDS1BPSU5UX05TXT8uc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKSxcbiAgICAgICAgfSxcbiAgICBdKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/interrupt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelKeyPlaceholder: () => (/* binding */ ChannelKeyPlaceholder),\n/* harmony export */   ManagedValue: () => (/* binding */ ManagedValue),\n/* harmony export */   ManagedValueMapping: () => (/* binding */ ManagedValueMapping),\n/* harmony export */   NoopManagedValue: () => (/* binding */ NoopManagedValue),\n/* harmony export */   WritableManagedValue: () => (/* binding */ WritableManagedValue),\n/* harmony export */   isConfiguredManagedValue: () => (/* binding */ isConfiguredManagedValue),\n/* harmony export */   isManagedValue: () => (/* binding */ isManagedValue)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ManagedValue {\n    constructor(config, _params) {\n        Object.defineProperty(this, \"runtime\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_promises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"lg_is_managed_value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.config = config;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static async initialize(_config, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _args) {\n        throw new Error(\"Not implemented\");\n    }\n    async promises() {\n        return Promise.all(this._promises);\n    }\n    addPromise(promise) {\n        this._promises.push(promise);\n    }\n}\nclass WritableManagedValue extends ManagedValue {\n}\nconst ChannelKeyPlaceholder = \"__channel_key_placeholder__\";\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ManagedValueMapping extends Map {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(entries) {\n        super(entries ? Array.from(entries) : undefined);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    replaceRuntimeValues(step, values) {\n        if (this.size === 0 || !values) {\n            return;\n        }\n        if (Array.from(this.values()).every((mv) => !mv.runtime)) {\n            return;\n        }\n        if (typeof values === \"object\" && !Array.isArray(values)) {\n            for (const [key, value] of Object.entries(values)) {\n                for (const [chan, mv] of this.entries()) {\n                    if (mv.runtime && mv.call(step) === value) {\n                        // eslint-disable-next-line no-param-reassign\n                        values[key] = { [_constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER]: chan };\n                    }\n                }\n            }\n        }\n        else if (typeof values === \"object\" && \"constructor\" in values) {\n            for (const key of Object.getOwnPropertyNames(Object.getPrototypeOf(values))) {\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const value = values[key];\n                    for (const [chan, mv] of this.entries()) {\n                        if (mv.runtime && mv.call(step) === value) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any, no-param-reassign\n                            values[key] = { [_constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER]: chan };\n                        }\n                    }\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                catch (error) {\n                    // Ignore if TypeError\n                    if (error.name !== TypeError.name) {\n                        throw error;\n                    }\n                }\n            }\n        }\n    }\n    replaceRuntimePlaceholders(step, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    values) {\n        if (this.size === 0 || !values) {\n            return;\n        }\n        if (Array.from(this.values()).every((mv) => !mv.runtime)) {\n            return;\n        }\n        if (typeof values === \"object\" && !Array.isArray(values)) {\n            for (const [key, value] of Object.entries(values)) {\n                if (typeof value === \"object\" &&\n                    value !== null &&\n                    _constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER in value) {\n                    const placeholder = value[_constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER];\n                    if (typeof placeholder === \"string\") {\n                        // eslint-disable-next-line no-param-reassign\n                        values[key] = this.get(placeholder)?.call(step);\n                    }\n                }\n            }\n        }\n        else if (typeof values === \"object\" && \"constructor\" in values) {\n            for (const key of Object.getOwnPropertyNames(Object.getPrototypeOf(values))) {\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const value = values[key];\n                    if (typeof value === \"object\" &&\n                        value !== null &&\n                        _constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER in value) {\n                        const managedValue = this.get(value[_constants_js__WEBPACK_IMPORTED_MODULE_0__.RUNTIME_PLACEHOLDER]);\n                        if (managedValue) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any, no-param-reassign\n                            values[key] = managedValue.call(step);\n                        }\n                    }\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                catch (error) {\n                    // Ignore if TypeError\n                    if (error.name !== TypeError.name) {\n                        throw error;\n                    }\n                }\n            }\n        }\n    }\n}\nfunction isManagedValue(value) {\n    if (typeof value === \"object\" && value && \"lg_is_managed_value\" in value) {\n        return true;\n    }\n    return false;\n}\nfunction isConfiguredManagedValue(value) {\n    if (typeof value === \"object\" &&\n        value &&\n        \"cls\" in value &&\n        \"params\" in value) {\n        return true;\n    }\n    return false;\n}\n/**\n * No-op class used when getting state values, as managed values should never be returned\n * in get state calls.\n */\nclass NoopManagedValue extends ManagedValue {\n    call() { }\n    static async initialize(config, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _args) {\n        return Promise.resolve(new NoopManagedValue(config));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L21hbmFnZWQvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRDtBQUN0RDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLENBQUMsOERBQW1CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxDQUFDLDhEQUFtQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFtQjtBQUN2Qyw4Q0FBOEMsOERBQW1CO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQW1CO0FBQzNDLDREQUE0RCw4REFBbUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9tYW5hZ2VkL2Jhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUlVOVElNRV9QTEFDRUhPTERFUiB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgY2xhc3MgTWFuYWdlZFZhbHVlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIF9wYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVudGltZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcHJvbWlzZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZ19pc19tYW5hZ2VkX3ZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgYXN5bmMgaW5pdGlhbGl6ZShfY29uZmlnLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9hcmdzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gICAgYXN5bmMgcHJvbWlzZXMoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLl9wcm9taXNlcyk7XG4gICAgfVxuICAgIGFkZFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLl9wcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBXcml0YWJsZU1hbmFnZWRWYWx1ZSBleHRlbmRzIE1hbmFnZWRWYWx1ZSB7XG59XG5leHBvcnQgY29uc3QgQ2hhbm5lbEtleVBsYWNlaG9sZGVyID0gXCJfX2NoYW5uZWxfa2V5X3BsYWNlaG9sZGVyX19cIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgY2xhc3MgTWFuYWdlZFZhbHVlTWFwcGluZyBleHRlbmRzIE1hcCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG4gICAgICAgIHN1cGVyKGVudHJpZXMgPyBBcnJheS5mcm9tKGVudHJpZXMpIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXBsYWNlUnVudGltZVZhbHVlcyhzdGVwLCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCB8fCAhdmFsdWVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmZyb20odGhpcy52YWx1ZXMoKSkuZXZlcnkoKG12KSA9PiAhbXYucnVudGltZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbY2hhbiwgbXZdIG9mIHRoaXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtdi5ydW50aW1lICYmIG12LmNhbGwoc3RlcCkgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc1trZXldID0geyBbUlVOVElNRV9QTEFDRUhPTERFUl06IGNoYW4gfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVzID09PSBcIm9iamVjdFwiICYmIFwiY29uc3RydWN0b3JcIiBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZXMpKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2NoYW4sIG12XSBvZiB0aGlzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG12LnJ1bnRpbWUgJiYgbXYuY2FsbChzdGVwKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHsgW1JVTlRJTUVfUExBQ0VIT0xERVJdOiBjaGFuIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpZiBUeXBlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09IFR5cGVFcnJvci5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlUnVudGltZVBsYWNlaG9sZGVycyhzdGVwLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHZhbHVlcykge1xuICAgICAgICBpZiAodGhpcy5zaXplID09PSAwIHx8ICF2YWx1ZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuZnJvbSh0aGlzLnZhbHVlcygpKS5ldmVyeSgobXYpID0+ICFtdi5ydW50aW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWVzID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIFJVTlRJTUVfUExBQ0VIT0xERVIgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB2YWx1ZVtSVU5USU1FX1BMQUNFSE9MREVSXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGFjZWhvbGRlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHRoaXMuZ2V0KHBsYWNlaG9sZGVyKT8uY2FsbChzdGVwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVzID09PSBcIm9iamVjdFwiICYmIFwiY29uc3RydWN0b3JcIiBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZXMpKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBSVU5USU1FX1BMQUNFSE9MREVSIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VkVmFsdWUgPSB0aGlzLmdldCh2YWx1ZVtSVU5USU1FX1BMQUNFSE9MREVSXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFuYWdlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnksIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzW2tleV0gPSBtYW5hZ2VkVmFsdWUuY2FsbChzdGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGlmIFR5cGVFcnJvclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gVHlwZUVycm9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFuYWdlZFZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAmJiBcImxnX2lzX21hbmFnZWRfdmFsdWVcIiBpbiB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29uZmlndXJlZE1hbmFnZWRWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdmFsdWUgJiZcbiAgICAgICAgXCJjbHNcIiBpbiB2YWx1ZSAmJlxuICAgICAgICBcInBhcmFtc1wiIGluIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIE5vLW9wIGNsYXNzIHVzZWQgd2hlbiBnZXR0aW5nIHN0YXRlIHZhbHVlcywgYXMgbWFuYWdlZCB2YWx1ZXMgc2hvdWxkIG5ldmVyIGJlIHJldHVybmVkXG4gKiBpbiBnZXQgc3RhdGUgY2FsbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb29wTWFuYWdlZFZhbHVlIGV4dGVuZHMgTWFuYWdlZFZhbHVlIHtcbiAgICBjYWxsKCkgeyB9XG4gICAgc3RhdGljIGFzeW5jIGluaXRpYWxpemUoY29uZmlnLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9hcmdzKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IE5vb3BNYW5hZ2VkVmFsdWUoY29uZmlnKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/index.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/index.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelKeyPlaceholder: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.ChannelKeyPlaceholder),\n/* harmony export */   IsLastStepManager: () => (/* reexport safe */ _is_last_step_js__WEBPACK_IMPORTED_MODULE_1__.IsLastStepManager),\n/* harmony export */   ManagedValue: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.ManagedValue),\n/* harmony export */   ManagedValueMapping: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.ManagedValueMapping),\n/* harmony export */   NoopManagedValue: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.NoopManagedValue),\n/* harmony export */   SharedValue: () => (/* reexport safe */ _shared_value_js__WEBPACK_IMPORTED_MODULE_2__.SharedValue),\n/* harmony export */   WritableManagedValue: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.WritableManagedValue),\n/* harmony export */   isConfiguredManagedValue: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.isConfiguredManagedValue),\n/* harmony export */   isManagedValue: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.isManagedValue)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n/* harmony import */ var _is_last_step_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./is_last_step.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/is_last_step.js\");\n/* harmony import */ var _shared_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared_value.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/shared_value.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L21hbmFnZWQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQ1E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9tYW5hZ2VkL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2lzX2xhc3Rfc3RlcC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2hhcmVkX3ZhbHVlLmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/is_last_step.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/is_last_step.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IsLastStepManager: () => (/* binding */ IsLastStepManager)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n\n\nclass IsLastStepManager extends _base_js__WEBPACK_IMPORTED_MODULE_1__.ManagedValue {\n    call(step) {\n        return step === (this.config.recursionLimit ?? _constants_js__WEBPACK_IMPORTED_MODULE_0__.RECURSION_LIMIT_DEFAULT) - 1;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L21hbmFnZWQvaXNfbGFzdF9zdGVwLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwRDtBQUNqQjtBQUNsQyxnQ0FBZ0Msa0RBQVk7QUFDbkQ7QUFDQSx1REFBdUQsa0VBQXVCO0FBQzlFO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvbWFuYWdlZC9pc19sYXN0X3N0ZXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUkVDVVJTSU9OX0xJTUlUX0RFRkFVTFQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VkVmFsdWUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgSXNMYXN0U3RlcE1hbmFnZXIgZXh0ZW5kcyBNYW5hZ2VkVmFsdWUge1xuICAgIGNhbGwoc3RlcCkge1xuICAgICAgICByZXR1cm4gc3RlcCA9PT0gKHRoaXMuY29uZmlnLnJlY3Vyc2lvbkxpbWl0ID8/IFJFQ1VSU0lPTl9MSU1JVF9ERUZBVUxUKSAtIDE7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/is_last_step.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/shared_value.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/shared_value.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SharedValue: () => (/* binding */ SharedValue)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nclass SharedValue extends _base_js__WEBPACK_IMPORTED_MODULE_0__.WritableManagedValue {\n    constructor(config, params) {\n        super(config, params);\n        Object.defineProperty(this, \"scope\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"store\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ns\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        this.scope = params.scope;\n        this.store = config.store || null;\n        if (!this.store) {\n            this.ns = null;\n        }\n        else if (config.configurable?.[this.scope]) {\n            const scopeValue = config.configurable[this.scope];\n            const scopedValueString = typeof scopeValue === \"string\"\n                ? scopeValue\n                : JSON.stringify(scopeValue);\n            this.ns = [\"scoped\", this.scope, params.key, scopedValueString];\n        }\n        else {\n            throw new Error(`Required scope \"${this.scope}\" for shared state key was not passed in \"config.configurable\".`);\n        }\n    }\n    static async initialize(config, args) {\n        const instance = new this(config, args);\n        await instance.loadStore();\n        return instance;\n    }\n    static on(scope) {\n        return {\n            cls: SharedValue,\n            params: {\n                scope,\n                key: _base_js__WEBPACK_IMPORTED_MODULE_0__.ChannelKeyPlaceholder,\n            },\n        };\n    }\n    call(_step) {\n        return { ...this.value };\n    }\n    processUpdate(values) {\n        const writes = [];\n        for (const vv of values) {\n            for (const [k, v] of Object.entries(vv)) {\n                if (v === null) {\n                    if (k in this.value) {\n                        delete this.value[k];\n                        if (this.ns) {\n                            writes.push({ namespace: this.ns, key: k, value: null });\n                        }\n                    }\n                }\n                else if (typeof v !== \"object\" || v === null) {\n                    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidUpdateError(\"Received a non-object value\");\n                }\n                else {\n                    this.value[k] = v;\n                    if (this.ns) {\n                        writes.push({ namespace: this.ns, key: k, value: v });\n                    }\n                }\n            }\n        }\n        return writes;\n    }\n    async update(values) {\n        if (!this.store) {\n            this.processUpdate(values);\n        }\n        else {\n            await this.store.batch(this.processUpdate(values));\n        }\n    }\n    async loadStore() {\n        if (this.store && this.ns) {\n            const saved = await this.store.search(this.ns);\n            this.value = saved.reduce((acc, item) => {\n                acc[item.key] = item.value;\n                return acc;\n            }, {});\n        }\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L21hbmFnZWQvc2hhcmVkX3ZhbHVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ3lFO0FBQ3ZCO0FBQzNDLDBCQUEwQiwwREFBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsV0FBVztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQXFCO0FBQzFDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlDQUF5QztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwwREFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0NBQXNDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUk7QUFDakI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvbWFuYWdlZC9zaGFyZWRfdmFsdWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IHsgQ2hhbm5lbEtleVBsYWNlaG9sZGVyLCBXcml0YWJsZU1hbmFnZWRWYWx1ZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5leHBvcnQgY2xhc3MgU2hhcmVkVmFsdWUgZXh0ZW5kcyBXcml0YWJsZU1hbmFnZWRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnLCBwYXJhbXMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzY29wZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9yZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBwYXJhbXMuc2NvcGU7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBjb25maWcuc3RvcmUgfHwgbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLnN0b3JlKSB7XG4gICAgICAgICAgICB0aGlzLm5zID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcuY29uZmlndXJhYmxlPy5bdGhpcy5zY29wZV0pIHtcbiAgICAgICAgICAgIGNvbnN0IHNjb3BlVmFsdWUgPSBjb25maWcuY29uZmlndXJhYmxlW3RoaXMuc2NvcGVdO1xuICAgICAgICAgICAgY29uc3Qgc2NvcGVkVmFsdWVTdHJpbmcgPSB0eXBlb2Ygc2NvcGVWYWx1ZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gc2NvcGVWYWx1ZVxuICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoc2NvcGVWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLm5zID0gW1wic2NvcGVkXCIsIHRoaXMuc2NvcGUsIHBhcmFtcy5rZXksIHNjb3BlZFZhbHVlU3RyaW5nXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWlyZWQgc2NvcGUgXCIke3RoaXMuc2NvcGV9XCIgZm9yIHNoYXJlZCBzdGF0ZSBrZXkgd2FzIG5vdCBwYXNzZWQgaW4gXCJjb25maWcuY29uZmlndXJhYmxlXCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGluaXRpYWxpemUoY29uZmlnLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IHRoaXMoY29uZmlnLCBhcmdzKTtcbiAgICAgICAgYXdhaXQgaW5zdGFuY2UubG9hZFN0b3JlKCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgc3RhdGljIG9uKHNjb3BlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbHM6IFNoYXJlZFZhbHVlLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgc2NvcGUsXG4gICAgICAgICAgICAgICAga2V5OiBDaGFubmVsS2V5UGxhY2Vob2xkZXIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYWxsKF9zdGVwKSB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMudmFsdWUgfTtcbiAgICB9XG4gICAgcHJvY2Vzc1VwZGF0ZSh2YWx1ZXMpIHtcbiAgICAgICAgY29uc3Qgd3JpdGVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgdnYgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh2dikpIHtcbiAgICAgICAgICAgICAgICBpZiAodiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoayBpbiB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzLnB1c2goeyBuYW1lc3BhY2U6IHRoaXMubnMsIGtleTogaywgdmFsdWU6IG51bGwgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgIT09IFwib2JqZWN0XCIgfHwgdiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKFwiUmVjZWl2ZWQgYSBub24tb2JqZWN0IHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZVtrXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXMucHVzaCh7IG5hbWVzcGFjZTogdGhpcy5ucywga2V5OiBrLCB2YWx1ZTogdiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVzO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgIGlmICghdGhpcy5zdG9yZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXBkYXRlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0b3JlLmJhdGNoKHRoaXMucHJvY2Vzc1VwZGF0ZSh2YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBsb2FkU3RvcmUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3JlICYmIHRoaXMubnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gYXdhaXQgdGhpcy5zdG9yZS5zZWFyY2godGhpcy5ucyk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gc2F2ZWQucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBhY2NbaXRlbS5rZXldID0gaXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/shared_value.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/agent_executor.js":
/*!***********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/agent_executor.js ***!
  \***********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAgentExecutor: () => (/* binding */ createAgentExecutor)\n/* harmony export */ });\n/* harmony import */ var _tool_executor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tool_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js\");\n/* harmony import */ var _graph_state_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graph/state.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\n/** @ignore */\nfunction createAgentExecutor({ agentRunnable, tools, }) {\n    let toolExecutor;\n    if (!Array.isArray(tools)) {\n        toolExecutor = tools;\n    }\n    else {\n        toolExecutor = new _tool_executor_js__WEBPACK_IMPORTED_MODULE_0__.ToolExecutor({\n            tools,\n        });\n    }\n    // Define logic that will be used to determine which conditional edge to go down\n    const shouldContinue = (data) => {\n        if (data.agentOutcome && \"returnValues\" in data.agentOutcome) {\n            return \"end\";\n        }\n        return \"continue\";\n    };\n    const runAgent = async (data, config) => {\n        const agentOutcome = await agentRunnable.invoke(data, config);\n        return {\n            agentOutcome,\n        };\n    };\n    const executeTools = async (data, config) => {\n        const agentAction = data.agentOutcome;\n        if (!agentAction || \"returnValues\" in agentAction) {\n            throw new Error(\"Agent has not been run yet\");\n        }\n        const output = await toolExecutor.invoke(agentAction, config);\n        return {\n            steps: [{ action: agentAction, observation: output }],\n        };\n    };\n    // Define a new graph\n    const workflow = new _graph_state_js__WEBPACK_IMPORTED_MODULE_1__.StateGraph({\n        channels: {\n            input: null,\n            agentOutcome: null,\n            steps: {\n                reducer: (x, y) => x.concat(y),\n                default: () => [],\n            },\n        },\n    })\n        // Define the two nodes we will cycle between\n        .addNode(\"agent\", runAgent)\n        .addNode(\"action\", executeTools)\n        // Set the entrypoint as `agent`\n        // This means that this node is the first one called\n        .addEdge(_constants_js__WEBPACK_IMPORTED_MODULE_2__.START, \"agent\")\n        // We now add a conditional edge\n        .addConditionalEdges(\n    // First, we define the start node. We use `agent`.\n    // This means these are the edges taken after the `agent` node is called.\n    \"agent\", \n    // Next, we pass in the function that will determine which node is called next.\n    shouldContinue, \n    // Finally we pass in a mapping.\n    // The keys are strings, and the values are other nodes.\n    // END is a special node marking that the graph should finish.\n    // What will happen is we will call `should_continue`, and then the output of that\n    // will be matched against the keys in this mapping.\n    // Based on which one it matches, that node will then be called.\n    {\n        // If `tools`, then we call the tool node.\n        continue: \"action\",\n        // Otherwise we finish.\n        end: _constants_js__WEBPACK_IMPORTED_MODULE_2__.END,\n    })\n        // We now add a normal edge from `tools` to `agent`.\n        // This means that after `tools` is called, `agent` node is called next.\n        .addEdge(\"action\", \"agent\");\n    return workflow.compile();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L2FnZW50X2V4ZWN1dG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Q7QUFDSDtBQUNGO0FBQzdDO0FBQ08sK0JBQStCLHVCQUF1QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJEQUFZO0FBQ3ZDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwQ0FBMEM7QUFDaEU7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0RBQUs7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOENBQUc7QUFDaEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlYnVpbHQvYWdlbnRfZXhlY3V0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9vbEV4ZWN1dG9yIH0gZnJvbSBcIi4vdG9vbF9leGVjdXRvci5qc1wiO1xuaW1wb3J0IHsgU3RhdGVHcmFwaCB9IGZyb20gXCIuLi9ncmFwaC9zdGF0ZS5qc1wiO1xuaW1wb3J0IHsgRU5ELCBTVEFSVCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbi8qKiBAaWdub3JlICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRFeGVjdXRvcih7IGFnZW50UnVubmFibGUsIHRvb2xzLCB9KSB7XG4gICAgbGV0IHRvb2xFeGVjdXRvcjtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodG9vbHMpKSB7XG4gICAgICAgIHRvb2xFeGVjdXRvciA9IHRvb2xzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdG9vbEV4ZWN1dG9yID0gbmV3IFRvb2xFeGVjdXRvcih7XG4gICAgICAgICAgICB0b29scyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIERlZmluZSBsb2dpYyB0aGF0IHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggY29uZGl0aW9uYWwgZWRnZSB0byBnbyBkb3duXG4gICAgY29uc3Qgc2hvdWxkQ29udGludWUgPSAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5hZ2VudE91dGNvbWUgJiYgXCJyZXR1cm5WYWx1ZXNcIiBpbiBkYXRhLmFnZW50T3V0Y29tZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiZW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICB9O1xuICAgIGNvbnN0IHJ1bkFnZW50ID0gYXN5bmMgKGRhdGEsIGNvbmZpZykgPT4ge1xuICAgICAgICBjb25zdCBhZ2VudE91dGNvbWUgPSBhd2FpdCBhZ2VudFJ1bm5hYmxlLmludm9rZShkYXRhLCBjb25maWcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWdlbnRPdXRjb21lLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgZXhlY3V0ZVRvb2xzID0gYXN5bmMgKGRhdGEsIGNvbmZpZykgPT4ge1xuICAgICAgICBjb25zdCBhZ2VudEFjdGlvbiA9IGRhdGEuYWdlbnRPdXRjb21lO1xuICAgICAgICBpZiAoIWFnZW50QWN0aW9uIHx8IFwicmV0dXJuVmFsdWVzXCIgaW4gYWdlbnRBY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFnZW50IGhhcyBub3QgYmVlbiBydW4geWV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHRvb2xFeGVjdXRvci5pbnZva2UoYWdlbnRBY3Rpb24sIGNvbmZpZyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGVwczogW3sgYWN0aW9uOiBhZ2VudEFjdGlvbiwgb2JzZXJ2YXRpb246IG91dHB1dCB9XSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8vIERlZmluZSBhIG5ldyBncmFwaFxuICAgIGNvbnN0IHdvcmtmbG93ID0gbmV3IFN0YXRlR3JhcGgoe1xuICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgaW5wdXQ6IG51bGwsXG4gICAgICAgICAgICBhZ2VudE91dGNvbWU6IG51bGwsXG4gICAgICAgICAgICBzdGVwczoge1xuICAgICAgICAgICAgICAgIHJlZHVjZXI6ICh4LCB5KSA9PiB4LmNvbmNhdCh5KSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSlcbiAgICAgICAgLy8gRGVmaW5lIHRoZSB0d28gbm9kZXMgd2Ugd2lsbCBjeWNsZSBiZXR3ZWVuXG4gICAgICAgIC5hZGROb2RlKFwiYWdlbnRcIiwgcnVuQWdlbnQpXG4gICAgICAgIC5hZGROb2RlKFwiYWN0aW9uXCIsIGV4ZWN1dGVUb29scylcbiAgICAgICAgLy8gU2V0IHRoZSBlbnRyeXBvaW50IGFzIGBhZ2VudGBcbiAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoaXMgbm9kZSBpcyB0aGUgZmlyc3Qgb25lIGNhbGxlZFxuICAgICAgICAuYWRkRWRnZShTVEFSVCwgXCJhZ2VudFwiKVxuICAgICAgICAvLyBXZSBub3cgYWRkIGEgY29uZGl0aW9uYWwgZWRnZVxuICAgICAgICAuYWRkQ29uZGl0aW9uYWxFZGdlcyhcbiAgICAvLyBGaXJzdCwgd2UgZGVmaW5lIHRoZSBzdGFydCBub2RlLiBXZSB1c2UgYGFnZW50YC5cbiAgICAvLyBUaGlzIG1lYW5zIHRoZXNlIGFyZSB0aGUgZWRnZXMgdGFrZW4gYWZ0ZXIgdGhlIGBhZ2VudGAgbm9kZSBpcyBjYWxsZWQuXG4gICAgXCJhZ2VudFwiLCBcbiAgICAvLyBOZXh0LCB3ZSBwYXNzIGluIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZGV0ZXJtaW5lIHdoaWNoIG5vZGUgaXMgY2FsbGVkIG5leHQuXG4gICAgc2hvdWxkQ29udGludWUsIFxuICAgIC8vIEZpbmFsbHkgd2UgcGFzcyBpbiBhIG1hcHBpbmcuXG4gICAgLy8gVGhlIGtleXMgYXJlIHN0cmluZ3MsIGFuZCB0aGUgdmFsdWVzIGFyZSBvdGhlciBub2Rlcy5cbiAgICAvLyBFTkQgaXMgYSBzcGVjaWFsIG5vZGUgbWFya2luZyB0aGF0IHRoZSBncmFwaCBzaG91bGQgZmluaXNoLlxuICAgIC8vIFdoYXQgd2lsbCBoYXBwZW4gaXMgd2Ugd2lsbCBjYWxsIGBzaG91bGRfY29udGludWVgLCBhbmQgdGhlbiB0aGUgb3V0cHV0IG9mIHRoYXRcbiAgICAvLyB3aWxsIGJlIG1hdGNoZWQgYWdhaW5zdCB0aGUga2V5cyBpbiB0aGlzIG1hcHBpbmcuXG4gICAgLy8gQmFzZWQgb24gd2hpY2ggb25lIGl0IG1hdGNoZXMsIHRoYXQgbm9kZSB3aWxsIHRoZW4gYmUgY2FsbGVkLlxuICAgIHtcbiAgICAgICAgLy8gSWYgYHRvb2xzYCwgdGhlbiB3ZSBjYWxsIHRoZSB0b29sIG5vZGUuXG4gICAgICAgIGNvbnRpbnVlOiBcImFjdGlvblwiLFxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgZmluaXNoLlxuICAgICAgICBlbmQ6IEVORCxcbiAgICB9KVxuICAgICAgICAvLyBXZSBub3cgYWRkIGEgbm9ybWFsIGVkZ2UgZnJvbSBgdG9vbHNgIHRvIGBhZ2VudGAuXG4gICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBhZnRlciBgdG9vbHNgIGlzIGNhbGxlZCwgYGFnZW50YCBub2RlIGlzIGNhbGxlZCBuZXh0LlxuICAgICAgICAuYWRkRWRnZShcImFjdGlvblwiLCBcImFnZW50XCIpO1xuICAgIHJldHVybiB3b3JrZmxvdy5jb21waWxlKCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/agent_executor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/chat_agent_executor.js":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/chat_agent_executor.js ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFunctionCallingExecutor: () => (/* binding */ createFunctionCallingExecutor)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _tool_executor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tool_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js\");\n/* harmony import */ var _graph_state_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../graph/state.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\n\n\n\n/** @deprecated Use {@link createReactAgent} instead with tool calling. */\nfunction createFunctionCallingExecutor({ model, tools, }) {\n    let toolExecutor;\n    let toolClasses;\n    if (!Array.isArray(tools)) {\n        toolExecutor = tools;\n        toolClasses = tools.tools;\n    }\n    else {\n        toolExecutor = new _tool_executor_js__WEBPACK_IMPORTED_MODULE_3__.ToolExecutor({\n            tools,\n        });\n        toolClasses = tools;\n    }\n    if (!(\"bind\" in model) || typeof model.bind !== \"function\") {\n        throw new Error(\"Model must be bindable\");\n    }\n    const toolsAsOpenAIFunctions = toolClasses.map((tool) => (0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIFunction)(tool));\n    const newModel = model.bind({\n        functions: toolsAsOpenAIFunctions,\n    });\n    // Define the function that determines whether to continue or not\n    const shouldContinue = (state) => {\n        const { messages } = state;\n        const lastMessage = messages[messages.length - 1];\n        // If there is no function call, then we finish\n        if (!(\"function_call\" in lastMessage.additional_kwargs) ||\n            !lastMessage.additional_kwargs.function_call) {\n            return \"end\";\n        }\n        // Otherwise if there is, we continue\n        return \"continue\";\n    };\n    // Define the function that calls the model\n    const callModel = async (state, config) => {\n        const { messages } = state;\n        const response = await newModel.invoke(messages, config);\n        // We return a list, because this will get added to the existing list\n        return {\n            messages: [response],\n        };\n    };\n    // Define the function to execute tools\n    const _getAction = (state) => {\n        const { messages } = state;\n        // Based on the continue condition\n        // we know the last message involves a function call\n        const lastMessage = messages[messages.length - 1];\n        if (!lastMessage) {\n            throw new Error(\"No messages found.\");\n        }\n        if (!lastMessage.additional_kwargs.function_call) {\n            throw new Error(\"No function call found in message.\");\n        }\n        // We construct an AgentAction from the function_call\n        return {\n            tool: lastMessage.additional_kwargs.function_call.name,\n            toolInput: JSON.stringify(lastMessage.additional_kwargs.function_call.arguments),\n            log: \"\",\n        };\n    };\n    const callTool = async (state, config) => {\n        const action = _getAction(state);\n        // We call the tool_executor and get back a response\n        const response = await toolExecutor.invoke(action, config);\n        // We use the response to create a FunctionMessage\n        const functionMessage = new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.FunctionMessage({\n            content: response,\n            name: action.tool,\n        });\n        // We return a list, because this will get added to the existing list\n        return { messages: [functionMessage] };\n    };\n    // We create the AgentState that we will pass around\n    // This simply involves a list of messages\n    // We want steps to return messages to append to the list\n    // So we annotate the messages attribute with operator.add\n    const schema = {\n        messages: {\n            value: (x, y) => x.concat(y),\n            default: () => [],\n        },\n    };\n    // Define a new graph\n    const workflow = new _graph_state_js__WEBPACK_IMPORTED_MODULE_4__.StateGraph({\n        channels: schema,\n    })\n        // Define the two nodes we will cycle between\n        .addNode(\"agent\", new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.RunnableLambda({ func: callModel }))\n        .addNode(\"action\", new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.RunnableLambda({ func: callTool }))\n        // Set the entrypoint as `agent`\n        // This means that this node is the first one called\n        .addEdge(_constants_js__WEBPACK_IMPORTED_MODULE_5__.START, \"agent\")\n        // We now add a conditional edge\n        .addConditionalEdges(\n    // First, we define the start node. We use `agent`.\n    // This means these are the edges taken after the `agent` node is called.\n    \"agent\", \n    // Next, we pass in the function that will determine which node is called next.\n    shouldContinue, \n    // Finally we pass in a mapping.\n    // The keys are strings, and the values are other nodes.\n    // END is a special node marking that the graph should finish.\n    // What will happen is we will call `should_continue`, and then the output of that\n    // will be matched against the keys in this mapping.\n    // Based on which one it matches, that node will then be called.\n    {\n        // If `tools`, then we call the tool node.\n        continue: \"action\",\n        // Otherwise we finish.\n        end: _constants_js__WEBPACK_IMPORTED_MODULE_5__.END,\n    })\n        // We now add a normal edge from `tools` to `agent`.\n        // This means that after `tools` is called, `agent` node is called next.\n        .addEdge(\"action\", \"agent\");\n    // Finally, we compile it!\n    // This compiles it into a LangChain Runnable,\n    // meaning you can use it as you would any other runnable\n    return workflow.compile();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L2NoYXRfYWdlbnRfZXhlY3V0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRjtBQUN0QjtBQUNDO0FBQ1Y7QUFDRjtBQUNIO0FBQzdDLHFCQUFxQix3QkFBd0I7QUFDdEMseUNBQXlDLGVBQWU7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQVk7QUFDdkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCwrRkFBdUI7QUFDcEY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscUVBQWU7QUFDbkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5Qix1REFBVTtBQUNuQztBQUNBLEtBQUs7QUFDTDtBQUNBLDhCQUE4QixxRUFBYyxHQUFHLGlCQUFpQjtBQUNoRSwrQkFBK0IscUVBQWMsR0FBRyxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBLGlCQUFpQixnREFBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4Q0FBRztBQUNoQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVidWlsdC9jaGF0X2FnZW50X2V4ZWN1dG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nXCI7XG5pbXBvcnQgeyBGdW5jdGlvbk1lc3NhZ2UgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgVG9vbEV4ZWN1dG9yIH0gZnJvbSBcIi4vdG9vbF9leGVjdXRvci5qc1wiO1xuaW1wb3J0IHsgU3RhdGVHcmFwaCwgfSBmcm9tIFwiLi4vZ3JhcGgvc3RhdGUuanNcIjtcbmltcG9ydCB7IEVORCwgU1RBUlQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG4vKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBjcmVhdGVSZWFjdEFnZW50fSBpbnN0ZWFkIHdpdGggdG9vbCBjYWxsaW5nLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uQ2FsbGluZ0V4ZWN1dG9yKHsgbW9kZWwsIHRvb2xzLCB9KSB7XG4gICAgbGV0IHRvb2xFeGVjdXRvcjtcbiAgICBsZXQgdG9vbENsYXNzZXM7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRvb2xzKSkge1xuICAgICAgICB0b29sRXhlY3V0b3IgPSB0b29scztcbiAgICAgICAgdG9vbENsYXNzZXMgPSB0b29scy50b29scztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRvb2xFeGVjdXRvciA9IG5ldyBUb29sRXhlY3V0b3Ioe1xuICAgICAgICAgICAgdG9vbHMsXG4gICAgICAgIH0pO1xuICAgICAgICB0b29sQ2xhc3NlcyA9IHRvb2xzO1xuICAgIH1cbiAgICBpZiAoIShcImJpbmRcIiBpbiBtb2RlbCkgfHwgdHlwZW9mIG1vZGVsLmJpbmQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb2RlbCBtdXN0IGJlIGJpbmRhYmxlXCIpO1xuICAgIH1cbiAgICBjb25zdCB0b29sc0FzT3BlbkFJRnVuY3Rpb25zID0gdG9vbENsYXNzZXMubWFwKCh0b29sKSA9PiBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbih0b29sKSk7XG4gICAgY29uc3QgbmV3TW9kZWwgPSBtb2RlbC5iaW5kKHtcbiAgICAgICAgZnVuY3Rpb25zOiB0b29sc0FzT3BlbkFJRnVuY3Rpb25zLFxuICAgIH0pO1xuICAgIC8vIERlZmluZSB0aGUgZnVuY3Rpb24gdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gY29udGludWUgb3Igbm90XG4gICAgY29uc3Qgc2hvdWxkQ29udGludWUgPSAoc3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlcyB9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGZ1bmN0aW9uIGNhbGwsIHRoZW4gd2UgZmluaXNoXG4gICAgICAgIGlmICghKFwiZnVuY3Rpb25fY2FsbFwiIGluIGxhc3RNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzKSB8fFxuICAgICAgICAgICAgIWxhc3RNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGwpIHtcbiAgICAgICAgICAgIHJldHVybiBcImVuZFwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGVyZSBpcywgd2UgY29udGludWVcbiAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICB9O1xuICAgIC8vIERlZmluZSB0aGUgZnVuY3Rpb24gdGhhdCBjYWxscyB0aGUgbW9kZWxcbiAgICBjb25zdCBjYWxsTW9kZWwgPSBhc3luYyAoc3RhdGUsIGNvbmZpZykgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2VzIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXdNb2RlbC5pbnZva2UobWVzc2FnZXMsIGNvbmZpZyk7XG4gICAgICAgIC8vIFdlIHJldHVybiBhIGxpc3QsIGJlY2F1c2UgdGhpcyB3aWxsIGdldCBhZGRlZCB0byB0aGUgZXhpc3RpbmcgbGlzdFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZXM6IFtyZXNwb25zZV0sXG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvLyBEZWZpbmUgdGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgdG9vbHNcbiAgICBjb25zdCBfZ2V0QWN0aW9uID0gKHN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZXMgfSA9IHN0YXRlO1xuICAgICAgICAvLyBCYXNlZCBvbiB0aGUgY29udGludWUgY29uZGl0aW9uXG4gICAgICAgIC8vIHdlIGtub3cgdGhlIGxhc3QgbWVzc2FnZSBpbnZvbHZlcyBhIGZ1bmN0aW9uIGNhbGxcbiAgICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCFsYXN0TWVzc2FnZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbWVzc2FnZXMgZm91bmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbGFzdE1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZnVuY3Rpb24gY2FsbCBmb3VuZCBpbiBtZXNzYWdlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBjb25zdHJ1Y3QgYW4gQWdlbnRBY3Rpb24gZnJvbSB0aGUgZnVuY3Rpb25fY2FsbFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9vbDogbGFzdE1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbC5uYW1lLFxuICAgICAgICAgICAgdG9vbElucHV0OiBKU09OLnN0cmluZ2lmeShsYXN0TWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5mdW5jdGlvbl9jYWxsLmFyZ3VtZW50cyksXG4gICAgICAgICAgICBsb2c6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBjYWxsVG9vbCA9IGFzeW5jIChzdGF0ZSwgY29uZmlnKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IF9nZXRBY3Rpb24oc3RhdGUpO1xuICAgICAgICAvLyBXZSBjYWxsIHRoZSB0b29sX2V4ZWN1dG9yIGFuZCBnZXQgYmFjayBhIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdG9vbEV4ZWN1dG9yLmludm9rZShhY3Rpb24sIGNvbmZpZyk7XG4gICAgICAgIC8vIFdlIHVzZSB0aGUgcmVzcG9uc2UgdG8gY3JlYXRlIGEgRnVuY3Rpb25NZXNzYWdlXG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uTWVzc2FnZSA9IG5ldyBGdW5jdGlvbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2UsXG4gICAgICAgICAgICBuYW1lOiBhY3Rpb24udG9vbCxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFdlIHJldHVybiBhIGxpc3QsIGJlY2F1c2UgdGhpcyB3aWxsIGdldCBhZGRlZCB0byB0aGUgZXhpc3RpbmcgbGlzdFxuICAgICAgICByZXR1cm4geyBtZXNzYWdlczogW2Z1bmN0aW9uTWVzc2FnZV0gfTtcbiAgICB9O1xuICAgIC8vIFdlIGNyZWF0ZSB0aGUgQWdlbnRTdGF0ZSB0aGF0IHdlIHdpbGwgcGFzcyBhcm91bmRcbiAgICAvLyBUaGlzIHNpbXBseSBpbnZvbHZlcyBhIGxpc3Qgb2YgbWVzc2FnZXNcbiAgICAvLyBXZSB3YW50IHN0ZXBzIHRvIHJldHVybiBtZXNzYWdlcyB0byBhcHBlbmQgdG8gdGhlIGxpc3RcbiAgICAvLyBTbyB3ZSBhbm5vdGF0ZSB0aGUgbWVzc2FnZXMgYXR0cmlidXRlIHdpdGggb3BlcmF0b3IuYWRkXG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgdmFsdWU6ICh4LCB5KSA9PiB4LmNvbmNhdCh5KSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgLy8gRGVmaW5lIGEgbmV3IGdyYXBoXG4gICAgY29uc3Qgd29ya2Zsb3cgPSBuZXcgU3RhdGVHcmFwaCh7XG4gICAgICAgIGNoYW5uZWxzOiBzY2hlbWEsXG4gICAgfSlcbiAgICAgICAgLy8gRGVmaW5lIHRoZSB0d28gbm9kZXMgd2Ugd2lsbCBjeWNsZSBiZXR3ZWVuXG4gICAgICAgIC5hZGROb2RlKFwiYWdlbnRcIiwgbmV3IFJ1bm5hYmxlTGFtYmRhKHsgZnVuYzogY2FsbE1vZGVsIH0pKVxuICAgICAgICAuYWRkTm9kZShcImFjdGlvblwiLCBuZXcgUnVubmFibGVMYW1iZGEoeyBmdW5jOiBjYWxsVG9vbCB9KSlcbiAgICAgICAgLy8gU2V0IHRoZSBlbnRyeXBvaW50IGFzIGBhZ2VudGBcbiAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoaXMgbm9kZSBpcyB0aGUgZmlyc3Qgb25lIGNhbGxlZFxuICAgICAgICAuYWRkRWRnZShTVEFSVCwgXCJhZ2VudFwiKVxuICAgICAgICAvLyBXZSBub3cgYWRkIGEgY29uZGl0aW9uYWwgZWRnZVxuICAgICAgICAuYWRkQ29uZGl0aW9uYWxFZGdlcyhcbiAgICAvLyBGaXJzdCwgd2UgZGVmaW5lIHRoZSBzdGFydCBub2RlLiBXZSB1c2UgYGFnZW50YC5cbiAgICAvLyBUaGlzIG1lYW5zIHRoZXNlIGFyZSB0aGUgZWRnZXMgdGFrZW4gYWZ0ZXIgdGhlIGBhZ2VudGAgbm9kZSBpcyBjYWxsZWQuXG4gICAgXCJhZ2VudFwiLCBcbiAgICAvLyBOZXh0LCB3ZSBwYXNzIGluIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZGV0ZXJtaW5lIHdoaWNoIG5vZGUgaXMgY2FsbGVkIG5leHQuXG4gICAgc2hvdWxkQ29udGludWUsIFxuICAgIC8vIEZpbmFsbHkgd2UgcGFzcyBpbiBhIG1hcHBpbmcuXG4gICAgLy8gVGhlIGtleXMgYXJlIHN0cmluZ3MsIGFuZCB0aGUgdmFsdWVzIGFyZSBvdGhlciBub2Rlcy5cbiAgICAvLyBFTkQgaXMgYSBzcGVjaWFsIG5vZGUgbWFya2luZyB0aGF0IHRoZSBncmFwaCBzaG91bGQgZmluaXNoLlxuICAgIC8vIFdoYXQgd2lsbCBoYXBwZW4gaXMgd2Ugd2lsbCBjYWxsIGBzaG91bGRfY29udGludWVgLCBhbmQgdGhlbiB0aGUgb3V0cHV0IG9mIHRoYXRcbiAgICAvLyB3aWxsIGJlIG1hdGNoZWQgYWdhaW5zdCB0aGUga2V5cyBpbiB0aGlzIG1hcHBpbmcuXG4gICAgLy8gQmFzZWQgb24gd2hpY2ggb25lIGl0IG1hdGNoZXMsIHRoYXQgbm9kZSB3aWxsIHRoZW4gYmUgY2FsbGVkLlxuICAgIHtcbiAgICAgICAgLy8gSWYgYHRvb2xzYCwgdGhlbiB3ZSBjYWxsIHRoZSB0b29sIG5vZGUuXG4gICAgICAgIGNvbnRpbnVlOiBcImFjdGlvblwiLFxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgZmluaXNoLlxuICAgICAgICBlbmQ6IEVORCxcbiAgICB9KVxuICAgICAgICAvLyBXZSBub3cgYWRkIGEgbm9ybWFsIGVkZ2UgZnJvbSBgdG9vbHNgIHRvIGBhZ2VudGAuXG4gICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBhZnRlciBgdG9vbHNgIGlzIGNhbGxlZCwgYGFnZW50YCBub2RlIGlzIGNhbGxlZCBuZXh0LlxuICAgICAgICAuYWRkRWRnZShcImFjdGlvblwiLCBcImFnZW50XCIpO1xuICAgIC8vIEZpbmFsbHksIHdlIGNvbXBpbGUgaXQhXG4gICAgLy8gVGhpcyBjb21waWxlcyBpdCBpbnRvIGEgTGFuZ0NoYWluIFJ1bm5hYmxlLFxuICAgIC8vIG1lYW5pbmcgeW91IGNhbiB1c2UgaXQgYXMgeW91IHdvdWxkIGFueSBvdGhlciBydW5uYWJsZVxuICAgIHJldHVybiB3b3JrZmxvdy5jb21waWxlKCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/chat_agent_executor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/index.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/index.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolExecutor: () => (/* reexport safe */ _tool_executor_js__WEBPACK_IMPORTED_MODULE_3__.ToolExecutor),\n/* harmony export */   ToolNode: () => (/* reexport safe */ _tool_node_js__WEBPACK_IMPORTED_MODULE_4__.ToolNode),\n/* harmony export */   createAgentExecutor: () => (/* reexport safe */ _agent_executor_js__WEBPACK_IMPORTED_MODULE_0__.createAgentExecutor),\n/* harmony export */   createFunctionCallingExecutor: () => (/* reexport safe */ _chat_agent_executor_js__WEBPACK_IMPORTED_MODULE_1__.createFunctionCallingExecutor),\n/* harmony export */   createReactAgent: () => (/* reexport safe */ _react_agent_executor_js__WEBPACK_IMPORTED_MODULE_2__.createReactAgent),\n/* harmony export */   toolsCondition: () => (/* reexport safe */ _tool_node_js__WEBPACK_IMPORTED_MODULE_4__.toolsCondition)\n/* harmony export */ });\n/* harmony import */ var _agent_executor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./agent_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/agent_executor.js\");\n/* harmony import */ var _chat_agent_executor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat_agent_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/chat_agent_executor.js\");\n/* harmony import */ var _react_agent_executor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react_agent_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/react_agent_executor.js\");\n/* harmony import */ var _tool_executor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tool_executor.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js\");\n/* harmony import */ var _tool_node_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tool_node.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_node.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ2U7QUFDWjtBQUNYO0FBQ08iLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlYnVpbHQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgY3JlYXRlQWdlbnRFeGVjdXRvciwgfSBmcm9tIFwiLi9hZ2VudF9leGVjdXRvci5qc1wiO1xuZXhwb3J0IHsgY3JlYXRlRnVuY3Rpb25DYWxsaW5nRXhlY3V0b3IsIH0gZnJvbSBcIi4vY2hhdF9hZ2VudF9leGVjdXRvci5qc1wiO1xuZXhwb3J0IHsgY3JlYXRlUmVhY3RBZ2VudCwgfSBmcm9tIFwiLi9yZWFjdF9hZ2VudF9leGVjdXRvci5qc1wiO1xuZXhwb3J0IHsgVG9vbEV4ZWN1dG9yLCB9IGZyb20gXCIuL3Rvb2xfZXhlY3V0b3IuanNcIjtcbmV4cG9ydCB7IFRvb2xOb2RlLCB0b29sc0NvbmRpdGlvbiB9IGZyb20gXCIuL3Rvb2xfbm9kZS5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/react_agent_executor.js":
/*!*****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/react_agent_executor.js ***!
  \*****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createReactAgent: () => (/* binding */ createReactAgent),\n/* harmony export */   createReactAgentAnnotation: () => (/* binding */ createReactAgentAnnotation)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _graph_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graph/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/index.js\");\n/* harmony import */ var _tool_node_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tool_node.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_node.js\");\n/* harmony import */ var _graph_annotation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../graph/annotation.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _graph_message_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../graph/message.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/message.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\n\n\n\n\nfunction _convertMessageModifierToPrompt(messageModifier) {\n    // Handle string or SystemMessage\n    if (typeof messageModifier === \"string\" ||\n        ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messageModifier) && messageModifier._getType() === \"system\")) {\n        return messageModifier;\n    }\n    // Handle callable function\n    if (typeof messageModifier === \"function\") {\n        return async (state) => messageModifier(state.messages);\n    }\n    // Handle Runnable\n    if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(messageModifier)) {\n        return _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((state) => state.messages).pipe(messageModifier);\n    }\n    throw new Error(`Unexpected type for messageModifier: ${typeof messageModifier}`);\n}\nconst PROMPT_RUNNABLE_NAME = \"prompt\";\nfunction _getPromptRunnable(prompt) {\n    let promptRunnable;\n    if (prompt == null) {\n        promptRunnable = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((state) => state.messages).withConfig({ runName: PROMPT_RUNNABLE_NAME });\n    }\n    else if (typeof prompt === \"string\") {\n        const systemMessage = new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessage(prompt);\n        promptRunnable = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((state) => {\n            return [systemMessage, ...(state.messages ?? [])];\n        }).withConfig({ runName: PROMPT_RUNNABLE_NAME });\n    }\n    else if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(prompt) && prompt._getType() === \"system\") {\n        promptRunnable = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((state) => [prompt, ...state.messages]).withConfig({ runName: PROMPT_RUNNABLE_NAME });\n    }\n    else if (typeof prompt === \"function\") {\n        promptRunnable = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from(prompt).withConfig({\n            runName: PROMPT_RUNNABLE_NAME,\n        });\n    }\n    else if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(prompt)) {\n        promptRunnable = prompt;\n    }\n    else {\n        throw new Error(`Got unexpected type for 'prompt': ${typeof prompt}`);\n    }\n    return promptRunnable;\n}\nfunction _getPrompt(prompt, stateModifier, messageModifier) {\n    // Check if multiple modifiers exist\n    const definedCount = [prompt, stateModifier, messageModifier].filter((x) => x != null).length;\n    if (definedCount > 1) {\n        throw new Error(\"Expected only one of prompt, stateModifier, or messageModifier, got multiple values\");\n    }\n    let finalPrompt = prompt;\n    if (stateModifier != null) {\n        finalPrompt = stateModifier;\n    }\n    else if (messageModifier != null) {\n        finalPrompt = _convertMessageModifierToPrompt(messageModifier);\n    }\n    return _getPromptRunnable(finalPrompt);\n}\nfunction _shouldBindTools(llm, tools) {\n    if (!_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(llm) || !(\"kwargs\" in llm)) {\n        return true;\n    }\n    if (!llm.kwargs ||\n        typeof llm.kwargs !== \"object\" ||\n        !(\"tools\" in llm.kwargs)) {\n        return true;\n    }\n    const boundTools = llm.kwargs.tools;\n    if (tools.length !== boundTools.length) {\n        throw new Error(\"Number of tools in the model.bindTools() and tools passed to createReactAgent must match\");\n    }\n    const toolNames = new Set(tools.map((tool) => tool.name));\n    const boundToolNames = new Set();\n    for (const boundTool of boundTools) {\n        let boundToolName;\n        // OpenAI-style tool\n        if (\"type\" in boundTool && boundTool.type === \"function\") {\n            boundToolName = boundTool.function.name;\n        }\n        // Anthropic-style tool\n        else if (\"name\" in boundTool) {\n            boundToolName = boundTool.name;\n        }\n        // unknown tool type so we'll ignore it\n        else {\n            continue;\n        }\n        boundToolNames.add(boundToolName);\n    }\n    const missingTools = [...toolNames].filter((x) => !boundToolNames.has(x));\n    if (missingTools.length > 0) {\n        throw new Error(`Missing tools '${missingTools}' in the model.bindTools().` +\n            `Tools in the model.bindTools() must match the tools passed to createReactAgent.`);\n    }\n    return false;\n}\nfunction _getModel(llm) {\n    // Get the underlying model from a RunnableBinding or return the model itself\n    let model = llm;\n    if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(llm) && \"bound\" in llm) {\n        model = llm.bound;\n    }\n    if (!(\"invoke\" in model &&\n        typeof model.invoke === \"function\" &&\n        \"_modelType\" in model)) {\n        throw new Error(`Expected \\`llm\\` to be a ChatModel or RunnableBinding (e.g. llm.bind_tools(...)) with invoke() and generate() methods, got ${model.constructor.name}`);\n    }\n    return model;\n}\nconst createReactAgentAnnotation = () => _graph_annotation_js__WEBPACK_IMPORTED_MODULE_4__.Annotation.Root({\n    messages: (0,_graph_annotation_js__WEBPACK_IMPORTED_MODULE_4__.Annotation)({\n        reducer: _graph_message_js__WEBPACK_IMPORTED_MODULE_5__.messagesStateReducer,\n        default: () => [],\n    }),\n    structuredResponse: (_graph_annotation_js__WEBPACK_IMPORTED_MODULE_4__.Annotation),\n});\n/**\n * Creates a StateGraph agent that relies on a chat model utilizing tool calling.\n *\n * @example\n * ```ts\n * import { ChatOpenAI } from \"@langchain/openai\";\n * import { tool } from \"@langchain/core/tools\";\n * import { z } from \"zod\";\n * import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n *\n * const model = new ChatOpenAI({\n *   model: \"gpt-4o\",\n * });\n *\n * const getWeather = tool((input) => {\n *   if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n *     return \"It's 60 degrees and foggy.\";\n *   } else {\n *     return \"It's 90 degrees and sunny.\";\n *   }\n * }, {\n *   name: \"get_weather\",\n *   description: \"Call to get the current weather.\",\n *   schema: z.object({\n *     location: z.string().describe(\"Location to get the weather for.\"),\n *   })\n * })\n *\n * const agent = createReactAgent({ llm: model, tools: [getWeather] });\n *\n * const inputs = {\n *   messages: [{ role: \"user\", content: \"what is the weather in SF?\" }],\n * };\n *\n * const stream = await agent.stream(inputs, { streamMode: \"values\" });\n *\n * for await (const { messages } of stream) {\n *   console.log(messages);\n * }\n * // Returns the messages in the state at each step of execution\n * ```\n */\nfunction createReactAgent(params) {\n    const { llm, tools, messageModifier, stateModifier, prompt, stateSchema, checkpointSaver, checkpointer, interruptBefore, interruptAfter, store, responseFormat, name, } = params;\n    let toolClasses;\n    if (!Array.isArray(tools)) {\n        toolClasses = tools.tools;\n    }\n    else {\n        toolClasses = tools;\n    }\n    let modelWithTools;\n    if (_shouldBindTools(llm, toolClasses)) {\n        if (!(\"bindTools\" in llm) || typeof llm.bindTools !== \"function\") {\n            throw new Error(`llm ${llm} must define bindTools method.`);\n        }\n        modelWithTools = llm.bindTools(toolClasses);\n    }\n    else {\n        modelWithTools = llm;\n    }\n    const modelRunnable = _getPrompt(prompt, stateModifier, messageModifier).pipe(modelWithTools);\n    // If any of the tools are configured to return_directly after running,\n    // our graph needs to check if these were called\n    const shouldReturnDirect = new Set(toolClasses\n        .filter((tool) => \"returnDirect\" in tool && tool.returnDirect)\n        .map((tool) => tool.name));\n    const shouldContinue = (state) => {\n        const { messages } = state;\n        const lastMessage = messages[messages.length - 1];\n        if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(lastMessage) &&\n            (!lastMessage.tool_calls || lastMessage.tool_calls.length === 0)) {\n            return responseFormat != null ? \"generate_structured_response\" : _constants_js__WEBPACK_IMPORTED_MODULE_6__.END;\n        }\n        else {\n            return \"continue\";\n        }\n    };\n    const generateStructuredResponse = async (state, config) => {\n        if (responseFormat == null) {\n            throw new Error(\"Attempted to generate structured output with no passed response schema. Please contact us for help.\");\n        }\n        // Exclude the last message as there's enough information\n        // for the LLM to generate the structured response\n        const messages = state.messages.slice(0, -1);\n        let modelWithStructuredOutput;\n        if (typeof responseFormat === \"object\" &&\n            \"prompt\" in responseFormat &&\n            \"schema\" in responseFormat) {\n            const { prompt, schema } = responseFormat;\n            modelWithStructuredOutput = _getModel(llm).withStructuredOutput(schema);\n            messages.unshift(new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessage({ content: prompt }));\n        }\n        else {\n            modelWithStructuredOutput =\n                _getModel(llm).withStructuredOutput(responseFormat);\n        }\n        const response = await modelWithStructuredOutput.invoke(messages, config);\n        return { structuredResponse: response };\n    };\n    const callModel = async (state, config) => {\n        // TODO: Auto-promote streaming.\n        return { messages: [await modelRunnable.invoke(state, config)] };\n    };\n    const workflow = new _graph_index_js__WEBPACK_IMPORTED_MODULE_2__.StateGraph(stateSchema ?? createReactAgentAnnotation())\n        .addNode(\"agent\", callModel)\n        .addNode(\"tools\", new _tool_node_js__WEBPACK_IMPORTED_MODULE_3__.ToolNode(toolClasses))\n        .addEdge(_constants_js__WEBPACK_IMPORTED_MODULE_6__.START, \"agent\");\n    if (responseFormat !== undefined) {\n        workflow\n            .addNode(\"generate_structured_response\", generateStructuredResponse)\n            .addEdge(\"generate_structured_response\", _constants_js__WEBPACK_IMPORTED_MODULE_6__.END)\n            .addConditionalEdges(\"agent\", shouldContinue, {\n            continue: \"tools\",\n            [_constants_js__WEBPACK_IMPORTED_MODULE_6__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END,\n            generate_structured_response: \"generate_structured_response\",\n        });\n    }\n    else {\n        workflow.addConditionalEdges(\"agent\", shouldContinue, {\n            continue: \"tools\",\n            [_constants_js__WEBPACK_IMPORTED_MODULE_6__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_6__.END,\n        });\n    }\n    const routeToolResponses = (state) => {\n        // Check the last consecutive tool calls\n        for (let i = state.messages.length - 1; i >= 0; i -= 1) {\n            const message = state.messages[i];\n            if (!(0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isToolMessage)(message)) {\n                break;\n            }\n            // Check if this tool is configured to return directly\n            if (message.name !== undefined && shouldReturnDirect.has(message.name)) {\n                return _constants_js__WEBPACK_IMPORTED_MODULE_6__.END;\n            }\n        }\n        return \"agent\";\n    };\n    if (shouldReturnDirect.size > 0) {\n        workflow.addConditionalEdges(\"tools\", routeToolResponses, [\"agent\", _constants_js__WEBPACK_IMPORTED_MODULE_6__.END]);\n    }\n    else {\n        workflow.addEdge(\"tools\", \"agent\");\n    }\n    return workflow.compile({\n        checkpointer: checkpointer ?? checkpointSaver,\n        interruptBefore,\n        interruptAfter,\n        store,\n        name,\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L3JlYWN0X2FnZW50X2V4ZWN1dG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxRztBQUMvQjtBQUN0QjtBQUNOO0FBQ1U7QUFDTztBQUNkO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFRO0FBQ2hCLGVBQWUscUVBQWM7QUFDN0I7QUFDQSw0REFBNEQsdUJBQXVCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscUVBQWMsOENBQThDLCtCQUErQjtBQUNwSDtBQUNBO0FBQ0Esa0NBQWtDLG1FQUFhO0FBQy9DLHlCQUF5QixxRUFBYztBQUN2QztBQUNBLFNBQVMsZUFBZSwrQkFBK0I7QUFDdkQ7QUFDQSxhQUFhLHVFQUFhO0FBQzFCLHlCQUF5QixxRUFBYywyREFBMkQsK0JBQStCO0FBQ2pJO0FBQ0E7QUFDQSx5QkFBeUIscUVBQWM7QUFDdkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxhQUFhLCtEQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxjQUFjO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrREFBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxhQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0pBQXNKLHVCQUF1QjtBQUM3SztBQUNBO0FBQ0E7QUFDTyx5Q0FBeUMsNERBQVU7QUFDMUQsY0FBYyxnRUFBVTtBQUN4QixpQkFBaUIsbUVBQW9CO0FBQ3JDO0FBQ0EsS0FBSztBQUNMLHlCQUF5Qiw0REFBVTtBQUNuQyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixZQUFZLE9BQU87QUFDbkIsWUFBWSxJQUFJO0FBQ2hCLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLElBQUk7QUFDSjtBQUNBLG9DQUFvQyxpQ0FBaUM7QUFDckU7QUFDQTtBQUNBLGtCQUFrQixxREFBcUQ7QUFDdkU7QUFDQTtBQUNBLCtDQUErQyxzQkFBc0I7QUFDckU7QUFDQSxzQkFBc0IsV0FBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLGdLQUFnSztBQUM1SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxLQUFLO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQSxZQUFZLHFFQUFXO0FBQ3ZCO0FBQ0EsNkVBQTZFLDhDQUFHO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBLGlDQUFpQyxtRUFBYSxHQUFHLGlCQUFpQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0EsOEJBQThCLG1EQUFRO0FBQ3RDLGlCQUFpQixnREFBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsOENBQUc7QUFDeEQ7QUFDQTtBQUNBLGFBQWEsOENBQUcsR0FBRyw4Q0FBRztBQUN0QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOENBQUcsR0FBRyw4Q0FBRztBQUN0QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFFBQVE7QUFDeEQ7QUFDQSxpQkFBaUIsdUVBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsOENBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSw4Q0FBRztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVidWlsdC9yZWFjdF9hZ2VudF9leGVjdXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0FJTWVzc2FnZSwgaXNCYXNlTWVzc2FnZSwgaXNUb29sTWVzc2FnZSwgU3lzdGVtTWVzc2FnZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSwgUnVubmFibGVMYW1iZGEsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbmltcG9ydCB7IFN0YXRlR3JhcGgsIH0gZnJvbSBcIi4uL2dyYXBoL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBUb29sTm9kZSB9IGZyb20gXCIuL3Rvb2xfbm9kZS5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gXCIuLi9ncmFwaC9hbm5vdGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBtZXNzYWdlc1N0YXRlUmVkdWNlciB9IGZyb20gXCIuLi9ncmFwaC9tZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyBFTkQsIFNUQVJUIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuZnVuY3Rpb24gX2NvbnZlcnRNZXNzYWdlTW9kaWZpZXJUb1Byb21wdChtZXNzYWdlTW9kaWZpZXIpIHtcbiAgICAvLyBIYW5kbGUgc3RyaW5nIG9yIFN5c3RlbU1lc3NhZ2VcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VNb2RpZmllciA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICAoaXNCYXNlTWVzc2FnZShtZXNzYWdlTW9kaWZpZXIpICYmIG1lc3NhZ2VNb2RpZmllci5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZU1vZGlmaWVyO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgY2FsbGFibGUgZnVuY3Rpb25cbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VNb2RpZmllciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhc3luYyAoc3RhdGUpID0+IG1lc3NhZ2VNb2RpZmllcihzdGF0ZS5tZXNzYWdlcyk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBSdW5uYWJsZVxuICAgIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKG1lc3NhZ2VNb2RpZmllcikpIHtcbiAgICAgICAgcmV0dXJuIFJ1bm5hYmxlTGFtYmRhLmZyb20oKHN0YXRlKSA9PiBzdGF0ZS5tZXNzYWdlcykucGlwZShtZXNzYWdlTW9kaWZpZXIpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdHlwZSBmb3IgbWVzc2FnZU1vZGlmaWVyOiAke3R5cGVvZiBtZXNzYWdlTW9kaWZpZXJ9YCk7XG59XG5jb25zdCBQUk9NUFRfUlVOTkFCTEVfTkFNRSA9IFwicHJvbXB0XCI7XG5mdW5jdGlvbiBfZ2V0UHJvbXB0UnVubmFibGUocHJvbXB0KSB7XG4gICAgbGV0IHByb21wdFJ1bm5hYmxlO1xuICAgIGlmIChwcm9tcHQgPT0gbnVsbCkge1xuICAgICAgICBwcm9tcHRSdW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKHN0YXRlKSA9PiBzdGF0ZS5tZXNzYWdlcykud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFBST01QVF9SVU5OQUJMRV9OQU1FIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcHJvbXB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSBuZXcgU3lzdGVtTWVzc2FnZShwcm9tcHQpO1xuICAgICAgICBwcm9tcHRSdW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW3N5c3RlbU1lc3NhZ2UsIC4uLihzdGF0ZS5tZXNzYWdlcyA/PyBbXSldO1xuICAgICAgICB9KS53aXRoQ29uZmlnKHsgcnVuTmFtZTogUFJPTVBUX1JVTk5BQkxFX05BTUUgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UocHJvbXB0KSAmJiBwcm9tcHQuX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICBwcm9tcHRSdW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKHN0YXRlKSA9PiBbcHJvbXB0LCAuLi5zdGF0ZS5tZXNzYWdlc10pLndpdGhDb25maWcoeyBydW5OYW1lOiBQUk9NUFRfUlVOTkFCTEVfTkFNRSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHByb21wdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHByb21wdFJ1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShwcm9tcHQpLndpdGhDb25maWcoe1xuICAgICAgICAgICAgcnVuTmFtZTogUFJPTVBUX1JVTk5BQkxFX05BTUUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKHByb21wdCkpIHtcbiAgICAgICAgcHJvbXB0UnVubmFibGUgPSBwcm9tcHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmV4cGVjdGVkIHR5cGUgZm9yICdwcm9tcHQnOiAke3R5cGVvZiBwcm9tcHR9YCk7XG4gICAgfVxuICAgIHJldHVybiBwcm9tcHRSdW5uYWJsZTtcbn1cbmZ1bmN0aW9uIF9nZXRQcm9tcHQocHJvbXB0LCBzdGF0ZU1vZGlmaWVyLCBtZXNzYWdlTW9kaWZpZXIpIHtcbiAgICAvLyBDaGVjayBpZiBtdWx0aXBsZSBtb2RpZmllcnMgZXhpc3RcbiAgICBjb25zdCBkZWZpbmVkQ291bnQgPSBbcHJvbXB0LCBzdGF0ZU1vZGlmaWVyLCBtZXNzYWdlTW9kaWZpZXJdLmZpbHRlcigoeCkgPT4geCAhPSBudWxsKS5sZW5ndGg7XG4gICAgaWYgKGRlZmluZWRDb3VudCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgb25seSBvbmUgb2YgcHJvbXB0LCBzdGF0ZU1vZGlmaWVyLCBvciBtZXNzYWdlTW9kaWZpZXIsIGdvdCBtdWx0aXBsZSB2YWx1ZXNcIik7XG4gICAgfVxuICAgIGxldCBmaW5hbFByb21wdCA9IHByb21wdDtcbiAgICBpZiAoc3RhdGVNb2RpZmllciAhPSBudWxsKSB7XG4gICAgICAgIGZpbmFsUHJvbXB0ID0gc3RhdGVNb2RpZmllcjtcbiAgICB9XG4gICAgZWxzZSBpZiAobWVzc2FnZU1vZGlmaWVyICE9IG51bGwpIHtcbiAgICAgICAgZmluYWxQcm9tcHQgPSBfY29udmVydE1lc3NhZ2VNb2RpZmllclRvUHJvbXB0KG1lc3NhZ2VNb2RpZmllcik7XG4gICAgfVxuICAgIHJldHVybiBfZ2V0UHJvbXB0UnVubmFibGUoZmluYWxQcm9tcHQpO1xufVxuZnVuY3Rpb24gX3Nob3VsZEJpbmRUb29scyhsbG0sIHRvb2xzKSB7XG4gICAgaWYgKCFSdW5uYWJsZS5pc1J1bm5hYmxlKGxsbSkgfHwgIShcImt3YXJnc1wiIGluIGxsbSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghbGxtLmt3YXJncyB8fFxuICAgICAgICB0eXBlb2YgbGxtLmt3YXJncyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAhKFwidG9vbHNcIiBpbiBsbG0ua3dhcmdzKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgYm91bmRUb29scyA9IGxsbS5rd2FyZ3MudG9vbHM7XG4gICAgaWYgKHRvb2xzLmxlbmd0aCAhPT0gYm91bmRUb29scy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTnVtYmVyIG9mIHRvb2xzIGluIHRoZSBtb2RlbC5iaW5kVG9vbHMoKSBhbmQgdG9vbHMgcGFzc2VkIHRvIGNyZWF0ZVJlYWN0QWdlbnQgbXVzdCBtYXRjaFwiKTtcbiAgICB9XG4gICAgY29uc3QgdG9vbE5hbWVzID0gbmV3IFNldCh0b29scy5tYXAoKHRvb2wpID0+IHRvb2wubmFtZSkpO1xuICAgIGNvbnN0IGJvdW5kVG9vbE5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgYm91bmRUb29sIG9mIGJvdW5kVG9vbHMpIHtcbiAgICAgICAgbGV0IGJvdW5kVG9vbE5hbWU7XG4gICAgICAgIC8vIE9wZW5BSS1zdHlsZSB0b29sXG4gICAgICAgIGlmIChcInR5cGVcIiBpbiBib3VuZFRvb2wgJiYgYm91bmRUb29sLnR5cGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgYm91bmRUb29sTmFtZSA9IGJvdW5kVG9vbC5mdW5jdGlvbi5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFudGhyb3BpYy1zdHlsZSB0b29sXG4gICAgICAgIGVsc2UgaWYgKFwibmFtZVwiIGluIGJvdW5kVG9vbCkge1xuICAgICAgICAgICAgYm91bmRUb29sTmFtZSA9IGJvdW5kVG9vbC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVua25vd24gdG9vbCB0eXBlIHNvIHdlJ2xsIGlnbm9yZSBpdFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGJvdW5kVG9vbE5hbWVzLmFkZChib3VuZFRvb2xOYW1lKTtcbiAgICB9XG4gICAgY29uc3QgbWlzc2luZ1Rvb2xzID0gWy4uLnRvb2xOYW1lc10uZmlsdGVyKCh4KSA9PiAhYm91bmRUb29sTmFtZXMuaGFzKHgpKTtcbiAgICBpZiAobWlzc2luZ1Rvb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHRvb2xzICcke21pc3NpbmdUb29sc30nIGluIHRoZSBtb2RlbC5iaW5kVG9vbHMoKS5gICtcbiAgICAgICAgICAgIGBUb29scyBpbiB0aGUgbW9kZWwuYmluZFRvb2xzKCkgbXVzdCBtYXRjaCB0aGUgdG9vbHMgcGFzc2VkIHRvIGNyZWF0ZVJlYWN0QWdlbnQuYCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIF9nZXRNb2RlbChsbG0pIHtcbiAgICAvLyBHZXQgdGhlIHVuZGVybHlpbmcgbW9kZWwgZnJvbSBhIFJ1bm5hYmxlQmluZGluZyBvciByZXR1cm4gdGhlIG1vZGVsIGl0c2VsZlxuICAgIGxldCBtb2RlbCA9IGxsbTtcbiAgICBpZiAoUnVubmFibGUuaXNSdW5uYWJsZShsbG0pICYmIFwiYm91bmRcIiBpbiBsbG0pIHtcbiAgICAgICAgbW9kZWwgPSBsbG0uYm91bmQ7XG4gICAgfVxuICAgIGlmICghKFwiaW52b2tlXCIgaW4gbW9kZWwgJiZcbiAgICAgICAgdHlwZW9mIG1vZGVsLmludm9rZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIFwiX21vZGVsVHlwZVwiIGluIG1vZGVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFxcYGxsbVxcYCB0byBiZSBhIENoYXRNb2RlbCBvciBSdW5uYWJsZUJpbmRpbmcgKGUuZy4gbGxtLmJpbmRfdG9vbHMoLi4uKSkgd2l0aCBpbnZva2UoKSBhbmQgZ2VuZXJhdGUoKSBtZXRob2RzLCBnb3QgJHttb2RlbC5jb25zdHJ1Y3Rvci5uYW1lfWApO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWw7XG59XG5leHBvcnQgY29uc3QgY3JlYXRlUmVhY3RBZ2VudEFubm90YXRpb24gPSAoKSA9PiBBbm5vdGF0aW9uLlJvb3Qoe1xuICAgIG1lc3NhZ2VzOiBBbm5vdGF0aW9uKHtcbiAgICAgICAgcmVkdWNlcjogbWVzc2FnZXNTdGF0ZVJlZHVjZXIsXG4gICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLFxuICAgIH0pLFxuICAgIHN0cnVjdHVyZWRSZXNwb25zZTogKEFubm90YXRpb24pLFxufSk7XG4vKipcbiAqIENyZWF0ZXMgYSBTdGF0ZUdyYXBoIGFnZW50IHRoYXQgcmVsaWVzIG9uIGEgY2hhdCBtb2RlbCB1dGlsaXppbmcgdG9vbCBjYWxsaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ2hhdE9wZW5BSSB9IGZyb20gXCJAbGFuZ2NoYWluL29wZW5haVwiO1xuICogaW1wb3J0IHsgdG9vbCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdG9vbHNcIjtcbiAqIGltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG4gKiBpbXBvcnQgeyBjcmVhdGVSZWFjdEFnZW50IH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoL3ByZWJ1aWx0XCI7XG4gKlxuICogY29uc3QgbW9kZWwgPSBuZXcgQ2hhdE9wZW5BSSh7XG4gKiAgIG1vZGVsOiBcImdwdC00b1wiLFxuICogfSk7XG4gKlxuICogY29uc3QgZ2V0V2VhdGhlciA9IHRvb2woKGlucHV0KSA9PiB7XG4gKiAgIGlmIChbXCJzZlwiLCBcInNhbiBmcmFuY2lzY29cIl0uaW5jbHVkZXMoaW5wdXQubG9jYXRpb24udG9Mb3dlckNhc2UoKSkpIHtcbiAqICAgICByZXR1cm4gXCJJdCdzIDYwIGRlZ3JlZXMgYW5kIGZvZ2d5LlwiO1xuICogICB9IGVsc2Uge1xuICogICAgIHJldHVybiBcIkl0J3MgOTAgZGVncmVlcyBhbmQgc3VubnkuXCI7XG4gKiAgIH1cbiAqIH0sIHtcbiAqICAgbmFtZTogXCJnZXRfd2VhdGhlclwiLFxuICogICBkZXNjcmlwdGlvbjogXCJDYWxsIHRvIGdldCB0aGUgY3VycmVudCB3ZWF0aGVyLlwiLFxuICogICBzY2hlbWE6IHoub2JqZWN0KHtcbiAqICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIkxvY2F0aW9uIHRvIGdldCB0aGUgd2VhdGhlciBmb3IuXCIpLFxuICogICB9KVxuICogfSlcbiAqXG4gKiBjb25zdCBhZ2VudCA9IGNyZWF0ZVJlYWN0QWdlbnQoeyBsbG06IG1vZGVsLCB0b29sczogW2dldFdlYXRoZXJdIH0pO1xuICpcbiAqIGNvbnN0IGlucHV0cyA9IHtcbiAqICAgbWVzc2FnZXM6IFt7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBcIndoYXQgaXMgdGhlIHdlYXRoZXIgaW4gU0Y/XCIgfV0sXG4gKiB9O1xuICpcbiAqIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGFnZW50LnN0cmVhbShpbnB1dHMsIHsgc3RyZWFtTW9kZTogXCJ2YWx1ZXNcIiB9KTtcbiAqXG4gKiBmb3IgYXdhaXQgKGNvbnN0IHsgbWVzc2FnZXMgfSBvZiBzdHJlYW0pIHtcbiAqICAgY29uc29sZS5sb2cobWVzc2FnZXMpO1xuICogfVxuICogLy8gUmV0dXJucyB0aGUgbWVzc2FnZXMgaW4gdGhlIHN0YXRlIGF0IGVhY2ggc3RlcCBvZiBleGVjdXRpb25cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVhY3RBZ2VudChwYXJhbXMpIHtcbiAgICBjb25zdCB7IGxsbSwgdG9vbHMsIG1lc3NhZ2VNb2RpZmllciwgc3RhdGVNb2RpZmllciwgcHJvbXB0LCBzdGF0ZVNjaGVtYSwgY2hlY2twb2ludFNhdmVyLCBjaGVja3BvaW50ZXIsIGludGVycnVwdEJlZm9yZSwgaW50ZXJydXB0QWZ0ZXIsIHN0b3JlLCByZXNwb25zZUZvcm1hdCwgbmFtZSwgfSA9IHBhcmFtcztcbiAgICBsZXQgdG9vbENsYXNzZXM7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRvb2xzKSkge1xuICAgICAgICB0b29sQ2xhc3NlcyA9IHRvb2xzLnRvb2xzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdG9vbENsYXNzZXMgPSB0b29scztcbiAgICB9XG4gICAgbGV0IG1vZGVsV2l0aFRvb2xzO1xuICAgIGlmIChfc2hvdWxkQmluZFRvb2xzKGxsbSwgdG9vbENsYXNzZXMpKSB7XG4gICAgICAgIGlmICghKFwiYmluZFRvb2xzXCIgaW4gbGxtKSB8fCB0eXBlb2YgbGxtLmJpbmRUb29scyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGxsbSAke2xsbX0gbXVzdCBkZWZpbmUgYmluZFRvb2xzIG1ldGhvZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBtb2RlbFdpdGhUb29scyA9IGxsbS5iaW5kVG9vbHModG9vbENsYXNzZXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbW9kZWxXaXRoVG9vbHMgPSBsbG07XG4gICAgfVxuICAgIGNvbnN0IG1vZGVsUnVubmFibGUgPSBfZ2V0UHJvbXB0KHByb21wdCwgc3RhdGVNb2RpZmllciwgbWVzc2FnZU1vZGlmaWVyKS5waXBlKG1vZGVsV2l0aFRvb2xzKTtcbiAgICAvLyBJZiBhbnkgb2YgdGhlIHRvb2xzIGFyZSBjb25maWd1cmVkIHRvIHJldHVybl9kaXJlY3RseSBhZnRlciBydW5uaW5nLFxuICAgIC8vIG91ciBncmFwaCBuZWVkcyB0byBjaGVjayBpZiB0aGVzZSB3ZXJlIGNhbGxlZFxuICAgIGNvbnN0IHNob3VsZFJldHVybkRpcmVjdCA9IG5ldyBTZXQodG9vbENsYXNzZXNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gXCJyZXR1cm5EaXJlY3RcIiBpbiB0b29sICYmIHRvb2wucmV0dXJuRGlyZWN0KVxuICAgICAgICAubWFwKCh0b29sKSA9PiB0b29sLm5hbWUpKTtcbiAgICBjb25zdCBzaG91bGRDb250aW51ZSA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2VzIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGlzQUlNZXNzYWdlKGxhc3RNZXNzYWdlKSAmJlxuICAgICAgICAgICAgKCFsYXN0TWVzc2FnZS50b29sX2NhbGxzIHx8IGxhc3RNZXNzYWdlLnRvb2xfY2FsbHMubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlRm9ybWF0ICE9IG51bGwgPyBcImdlbmVyYXRlX3N0cnVjdHVyZWRfcmVzcG9uc2VcIiA6IEVORDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdlbmVyYXRlU3RydWN0dXJlZFJlc3BvbnNlID0gYXN5bmMgKHN0YXRlLCBjb25maWcpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlRm9ybWF0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBnZW5lcmF0ZSBzdHJ1Y3R1cmVkIG91dHB1dCB3aXRoIG5vIHBhc3NlZCByZXNwb25zZSBzY2hlbWEuIFBsZWFzZSBjb250YWN0IHVzIGZvciBoZWxwLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeGNsdWRlIHRoZSBsYXN0IG1lc3NhZ2UgYXMgdGhlcmUncyBlbm91Z2ggaW5mb3JtYXRpb25cbiAgICAgICAgLy8gZm9yIHRoZSBMTE0gdG8gZ2VuZXJhdGUgdGhlIHN0cnVjdHVyZWQgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBzdGF0ZS5tZXNzYWdlcy5zbGljZSgwLCAtMSk7XG4gICAgICAgIGxldCBtb2RlbFdpdGhTdHJ1Y3R1cmVkT3V0cHV0O1xuICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlRm9ybWF0ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBcInByb21wdFwiIGluIHJlc3BvbnNlRm9ybWF0ICYmXG4gICAgICAgICAgICBcInNjaGVtYVwiIGluIHJlc3BvbnNlRm9ybWF0KSB7XG4gICAgICAgICAgICBjb25zdCB7IHByb21wdCwgc2NoZW1hIH0gPSByZXNwb25zZUZvcm1hdDtcbiAgICAgICAgICAgIG1vZGVsV2l0aFN0cnVjdHVyZWRPdXRwdXQgPSBfZ2V0TW9kZWwobGxtKS53aXRoU3RydWN0dXJlZE91dHB1dChzY2hlbWEpO1xuICAgICAgICAgICAgbWVzc2FnZXMudW5zaGlmdChuZXcgU3lzdGVtTWVzc2FnZSh7IGNvbnRlbnQ6IHByb21wdCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtb2RlbFdpdGhTdHJ1Y3R1cmVkT3V0cHV0ID1cbiAgICAgICAgICAgICAgICBfZ2V0TW9kZWwobGxtKS53aXRoU3RydWN0dXJlZE91dHB1dChyZXNwb25zZUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtb2RlbFdpdGhTdHJ1Y3R1cmVkT3V0cHV0Lmludm9rZShtZXNzYWdlcywgY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHsgc3RydWN0dXJlZFJlc3BvbnNlOiByZXNwb25zZSB9O1xuICAgIH07XG4gICAgY29uc3QgY2FsbE1vZGVsID0gYXN5bmMgKHN0YXRlLCBjb25maWcpID0+IHtcbiAgICAgICAgLy8gVE9ETzogQXV0by1wcm9tb3RlIHN0cmVhbWluZy5cbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZXM6IFthd2FpdCBtb2RlbFJ1bm5hYmxlLmludm9rZShzdGF0ZSwgY29uZmlnKV0gfTtcbiAgICB9O1xuICAgIGNvbnN0IHdvcmtmbG93ID0gbmV3IFN0YXRlR3JhcGgoc3RhdGVTY2hlbWEgPz8gY3JlYXRlUmVhY3RBZ2VudEFubm90YXRpb24oKSlcbiAgICAgICAgLmFkZE5vZGUoXCJhZ2VudFwiLCBjYWxsTW9kZWwpXG4gICAgICAgIC5hZGROb2RlKFwidG9vbHNcIiwgbmV3IFRvb2xOb2RlKHRvb2xDbGFzc2VzKSlcbiAgICAgICAgLmFkZEVkZ2UoU1RBUlQsIFwiYWdlbnRcIik7XG4gICAgaWYgKHJlc3BvbnNlRm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd29ya2Zsb3dcbiAgICAgICAgICAgIC5hZGROb2RlKFwiZ2VuZXJhdGVfc3RydWN0dXJlZF9yZXNwb25zZVwiLCBnZW5lcmF0ZVN0cnVjdHVyZWRSZXNwb25zZSlcbiAgICAgICAgICAgIC5hZGRFZGdlKFwiZ2VuZXJhdGVfc3RydWN0dXJlZF9yZXNwb25zZVwiLCBFTkQpXG4gICAgICAgICAgICAuYWRkQ29uZGl0aW9uYWxFZGdlcyhcImFnZW50XCIsIHNob3VsZENvbnRpbnVlLCB7XG4gICAgICAgICAgICBjb250aW51ZTogXCJ0b29sc1wiLFxuICAgICAgICAgICAgW0VORF06IEVORCxcbiAgICAgICAgICAgIGdlbmVyYXRlX3N0cnVjdHVyZWRfcmVzcG9uc2U6IFwiZ2VuZXJhdGVfc3RydWN0dXJlZF9yZXNwb25zZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdvcmtmbG93LmFkZENvbmRpdGlvbmFsRWRnZXMoXCJhZ2VudFwiLCBzaG91bGRDb250aW51ZSwge1xuICAgICAgICAgICAgY29udGludWU6IFwidG9vbHNcIixcbiAgICAgICAgICAgIFtFTkRdOiBFTkQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByb3V0ZVRvb2xSZXNwb25zZXMgPSAoc3RhdGUpID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGxhc3QgY29uc2VjdXRpdmUgdG9vbCBjYWxsc1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUubWVzc2FnZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdGF0ZS5tZXNzYWdlc1tpXTtcbiAgICAgICAgICAgIGlmICghaXNUb29sTWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyB0b29sIGlzIGNvbmZpZ3VyZWQgdG8gcmV0dXJuIGRpcmVjdGx5XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgc2hvdWxkUmV0dXJuRGlyZWN0LmhhcyhtZXNzYWdlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVORDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJhZ2VudFwiO1xuICAgIH07XG4gICAgaWYgKHNob3VsZFJldHVybkRpcmVjdC5zaXplID4gMCkge1xuICAgICAgICB3b3JrZmxvdy5hZGRDb25kaXRpb25hbEVkZ2VzKFwidG9vbHNcIiwgcm91dGVUb29sUmVzcG9uc2VzLCBbXCJhZ2VudFwiLCBFTkRdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdvcmtmbG93LmFkZEVkZ2UoXCJ0b29sc1wiLCBcImFnZW50XCIpO1xuICAgIH1cbiAgICByZXR1cm4gd29ya2Zsb3cuY29tcGlsZSh7XG4gICAgICAgIGNoZWNrcG9pbnRlcjogY2hlY2twb2ludGVyID8/IGNoZWNrcG9pbnRTYXZlcixcbiAgICAgICAgaW50ZXJydXB0QmVmb3JlLFxuICAgICAgICBpbnRlcnJ1cHRBZnRlcixcbiAgICAgICAgc3RvcmUsXG4gICAgICAgIG5hbWUsXG4gICAgfSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/react_agent_executor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolExecutor: () => (/* binding */ ToolExecutor)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n\nconst INVALID_TOOL_MSG_TEMPLATE = `{requestedToolName} is not a valid tool, try one of {availableToolNamesString}.`;\n/** @deprecated Use {@link ToolNode} instead. */\nclass ToolExecutor extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding {\n    constructor(fields) {\n        const fieldsWithDefaults = {\n            invalidToolMsgTemplate: INVALID_TOOL_MSG_TEMPLATE,\n            ...fields,\n        };\n        const bound = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from(async (input, config) => this._execute(input, config));\n        super({\n            bound,\n            config: {},\n        });\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"ToolExecutor\"\n        });\n        Object.defineProperty(this, \"tools\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"toolMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"invalidToolMsgTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tools = fieldsWithDefaults.tools;\n        this.invalidToolMsgTemplate = fieldsWithDefaults.invalidToolMsgTemplate;\n        this.toolMap = this.tools.reduce((acc, tool) => {\n            acc[tool.name] = tool;\n            return acc;\n        }, {});\n    }\n    /**\n     * Execute a tool invocation\n     *\n     * @param {ToolInvocationInterface} toolInvocation The tool to invoke and the input to pass to it.\n     * @param {RunnableConfig | undefined} config Optional configuration to pass to the tool when invoked.\n     * @returns Either the result of the tool invocation (`string` or `ToolMessage`, set by the `ToolOutput` generic) or a string error message.\n     */\n    async _execute(toolInvocation, config) {\n        if (!(toolInvocation.tool in this.toolMap)) {\n            return this.invalidToolMsgTemplate\n                .replace(\"{requestedToolName}\", toolInvocation.tool)\n                .replace(\"{availableToolNamesString}\", Object.keys(this.toolMap).join(\", \"));\n        }\n        else {\n            const tool = this.toolMap[toolInvocation.tool];\n            const output = await tool.invoke(toolInvocation.toolInput, config);\n            return output;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L3Rvb2xfZXhlY3V0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkU7QUFDN0Usb0NBQW9DLG1CQUFtQixpQ0FBaUMseUJBQXlCO0FBQ2pILHFCQUFxQixnQkFBZ0I7QUFDOUIsMkJBQTJCLHNFQUFlO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUVBQWM7QUFDcEM7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlCQUF5QjtBQUN4QyxlQUFlLDRCQUE0QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtCQUFrQjtBQUM3QywyQkFBMkIseUJBQXlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlYnVpbHQvdG9vbF9leGVjdXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZUJpbmRpbmcsIFJ1bm5hYmxlTGFtYmRhLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5jb25zdCBJTlZBTElEX1RPT0xfTVNHX1RFTVBMQVRFID0gYHtyZXF1ZXN0ZWRUb29sTmFtZX0gaXMgbm90IGEgdmFsaWQgdG9vbCwgdHJ5IG9uZSBvZiB7YXZhaWxhYmxlVG9vbE5hbWVzU3RyaW5nfS5gO1xuLyoqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVG9vbE5vZGV9IGluc3RlYWQuICovXG5leHBvcnQgY2xhc3MgVG9vbEV4ZWN1dG9yIGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgZmllbGRzV2l0aERlZmF1bHRzID0ge1xuICAgICAgICAgICAgaW52YWxpZFRvb2xNc2dUZW1wbGF0ZTogSU5WQUxJRF9UT09MX01TR19URU1QTEFURSxcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYm91bmQgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFzeW5jIChpbnB1dCwgY29uZmlnKSA9PiB0aGlzLl9leGVjdXRlKGlucHV0LCBjb25maWcpKTtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgYm91bmQsXG4gICAgICAgICAgICBjb25maWc6IHt9LFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJUb29sRXhlY3V0b3JcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbE1hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkVG9vbE1zZ1RlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBmaWVsZHNXaXRoRGVmYXVsdHMudG9vbHM7XG4gICAgICAgIHRoaXMuaW52YWxpZFRvb2xNc2dUZW1wbGF0ZSA9IGZpZWxkc1dpdGhEZWZhdWx0cy5pbnZhbGlkVG9vbE1zZ1RlbXBsYXRlO1xuICAgICAgICB0aGlzLnRvb2xNYXAgPSB0aGlzLnRvb2xzLnJlZHVjZSgoYWNjLCB0b29sKSA9PiB7XG4gICAgICAgICAgICBhY2NbdG9vbC5uYW1lXSA9IHRvb2w7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgYSB0b29sIGludm9jYXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9vbEludm9jYXRpb25JbnRlcmZhY2V9IHRvb2xJbnZvY2F0aW9uIFRoZSB0b29sIHRvIGludm9rZSBhbmQgdGhlIGlucHV0IHRvIHBhc3MgdG8gaXQuXG4gICAgICogQHBhcmFtIHtSdW5uYWJsZUNvbmZpZyB8IHVuZGVmaW5lZH0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gdG8gcGFzcyB0byB0aGUgdG9vbCB3aGVuIGludm9rZWQuXG4gICAgICogQHJldHVybnMgRWl0aGVyIHRoZSByZXN1bHQgb2YgdGhlIHRvb2wgaW52b2NhdGlvbiAoYHN0cmluZ2Agb3IgYFRvb2xNZXNzYWdlYCwgc2V0IGJ5IHRoZSBgVG9vbE91dHB1dGAgZ2VuZXJpYykgb3IgYSBzdHJpbmcgZXJyb3IgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBfZXhlY3V0ZSh0b29sSW52b2NhdGlvbiwgY29uZmlnKSB7XG4gICAgICAgIGlmICghKHRvb2xJbnZvY2F0aW9uLnRvb2wgaW4gdGhpcy50b29sTWFwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZFRvb2xNc2dUZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwie3JlcXVlc3RlZFRvb2xOYW1lfVwiLCB0b29sSW52b2NhdGlvbi50b29sKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwie2F2YWlsYWJsZVRvb2xOYW1lc1N0cmluZ31cIiwgT2JqZWN0LmtleXModGhpcy50b29sTWFwKS5qb2luKFwiLCBcIikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMudG9vbE1hcFt0b29sSW52b2NhdGlvbi50b29sXTtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHRvb2wuaW52b2tlKHRvb2xJbnZvY2F0aW9uLnRvb2xJbnB1dCwgY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_executor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_node.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_node.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolNode: () => (/* binding */ ToolNode),\n/* harmony export */   toolsCondition: () => (/* binding */ toolsCondition)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\n\n/**\n * A node that runs the tools requested in the last AIMessage. It can be used\n * either in StateGraph with a \"messages\" key or in MessageGraph. If multiple\n * tool calls are requested, they will be run in parallel. The output will be\n * a list of ToolMessages, one for each tool call.\n *\n * @example\n * ```ts\n * import { ToolNode } from \"@langchain/langgraph/prebuilt\";\n * import { tool } from \"@langchain/core/tools\";\n * import { z } from \"zod\";\n * import { AIMessage } from \"@langchain/core/messages\";\n *\n * const getWeather = tool((input) => {\n *   if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n *     return \"It's 60 degrees and foggy.\";\n *   } else {\n *     return \"It's 90 degrees and sunny.\";\n *   }\n * }, {\n *   name: \"get_weather\",\n *   description: \"Call to get the current weather.\",\n *   schema: z.object({\n *     location: z.string().describe(\"Location to get the weather for.\"),\n *   }),\n * });\n *\n * const tools = [getWeather];\n * const toolNode = new ToolNode(tools);\n *\n * const messageWithSingleToolCall = new AIMessage({\n *   content: \"\",\n *   tool_calls: [\n *     {\n *       name: \"get_weather\",\n *       args: { location: \"sf\" },\n *       id: \"tool_call_id\",\n *       type: \"tool_call\",\n *     }\n *   ]\n * })\n *\n * await toolNode.invoke({ messages: [messageWithSingleToolCall] });\n * // Returns tool invocation responses as:\n * // { messages: ToolMessage[] }\n * ```\n *\n * @example\n * ```ts\n * import {\n *   StateGraph,\n *   MessagesAnnotation,\n * } from \"@langchain/langgraph\";\n * import { ToolNode } from \"@langchain/langgraph/prebuilt\";\n * import { tool } from \"@langchain/core/tools\";\n * import { z } from \"zod\";\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n *\n * const getWeather = tool((input) => {\n *   if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n *     return \"It's 60 degrees and foggy.\";\n *   } else {\n *     return \"It's 90 degrees and sunny.\";\n *   }\n * }, {\n *   name: \"get_weather\",\n *   description: \"Call to get the current weather.\",\n *   schema: z.object({\n *     location: z.string().describe(\"Location to get the weather for.\"),\n *   }),\n * });\n *\n * const tools = [getWeather];\n * const modelWithTools = new ChatAnthropic({\n *   model: \"claude-3-haiku-20240307\",\n *   temperature: 0\n * }).bindTools(tools);\n *\n * const toolNodeForGraph = new ToolNode(tools)\n *\n * const shouldContinue = (state: typeof MessagesAnnotation.State) => {\n *   const { messages } = state;\n *   const lastMessage = messages[messages.length - 1];\n *   if (\"tool_calls\" in lastMessage && Array.isArray(lastMessage.tool_calls) && lastMessage.tool_calls?.length) {\n *     return \"tools\";\n *   }\n *   return \"__end__\";\n * }\n *\n * const callModel = async (state: typeof MessagesAnnotation.State) => {\n *   const { messages } = state;\n *   const response = await modelWithTools.invoke(messages);\n *   return { messages: response };\n * }\n *\n * const graph = new StateGraph(MessagesAnnotation)\n *   .addNode(\"agent\", callModel)\n *   .addNode(\"tools\", toolNodeForGraph)\n *   .addEdge(\"__start__\", \"agent\")\n *   .addConditionalEdges(\"agent\", shouldContinue)\n *   .addEdge(\"tools\", \"agent\")\n *   .compile();\n *\n * const inputs = {\n *   messages: [{ role: \"user\", content: \"what is the weather in SF?\" }],\n * };\n *\n * const stream = await graph.stream(inputs, {\n *   streamMode: \"values\",\n * });\n *\n * for await (const { messages } of stream) {\n *   console.log(messages);\n * }\n * // Returns the messages in the state at each step of execution\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ToolNode extends _utils_js__WEBPACK_IMPORTED_MODULE_1__.RunnableCallable {\n    constructor(tools, options) {\n        const { name, tags, handleToolErrors } = options ?? {};\n        super({ name, tags, func: (input, config) => this.run(input, config) });\n        Object.defineProperty(this, \"tools\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"handleToolErrors\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"trace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.tools = tools;\n        this.handleToolErrors = handleToolErrors ?? this.handleToolErrors;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async run(input, config) {\n        const message = Array.isArray(input)\n            ? input[input.length - 1]\n            : input.messages[input.messages.length - 1];\n        if (message?._getType() !== \"ai\") {\n            throw new Error(\"ToolNode only accepts AIMessages as input.\");\n        }\n        const outputs = await Promise.all(message.tool_calls?.map(async (call) => {\n            const tool = this.tools.find((tool) => tool.name === call.name);\n            try {\n                if (tool === undefined) {\n                    throw new Error(`Tool \"${call.name}\" not found.`);\n                }\n                const output = await tool.invoke({ ...call, type: \"tool_call\" }, config);\n                if (((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(output) && output._getType() === \"tool\") ||\n                    (0,_constants_js__WEBPACK_IMPORTED_MODULE_3__.isCommand)(output)) {\n                    return output;\n                }\n                else {\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ToolMessage({\n                        name: tool.name,\n                        content: typeof output === \"string\" ? output : JSON.stringify(output),\n                        tool_call_id: call.id,\n                    });\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (e) {\n                if (!this.handleToolErrors) {\n                    throw e;\n                }\n                if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.isGraphInterrupt)(e.name)) {\n                    // `NodeInterrupt` errors are a breakpoint to bring a human into the loop.\n                    // As such, they are not recoverable by the agent and shouldn't be fed\n                    // back. Instead, re-throw these errors even when `handleToolErrors = true`.\n                    throw e;\n                }\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ToolMessage({\n                    content: `Error: ${e.message}\\n Please fix your mistakes.`,\n                    name: call.name,\n                    tool_call_id: call.id ?? \"\",\n                });\n            }\n        }) ?? []);\n        // Preserve existing behavior for non-command tool outputs for backwards compatibility\n        if (!outputs.some(_constants_js__WEBPACK_IMPORTED_MODULE_3__.isCommand)) {\n            return (Array.isArray(input) ? outputs : { messages: outputs });\n        }\n        // Handle mixed Command and non-Command outputs\n        const combinedOutputs = outputs.map((output) => {\n            if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_3__.isCommand)(output)) {\n                return output;\n            }\n            return Array.isArray(input) ? [output] : { messages: [output] };\n        });\n        return combinedOutputs;\n    }\n}\nfunction toolsCondition(state) {\n    const message = Array.isArray(state)\n        ? state[state.length - 1]\n        : state.messages[state.messages.length - 1];\n    if (\"tool_calls\" in message &&\n        (message.tool_calls?.length ?? 0) > 0) {\n        return \"tools\";\n    }\n    else {\n        return _constants_js__WEBPACK_IMPORTED_MODULE_3__.END;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L3Rvb2xfbm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUU7QUFDeEI7QUFDQztBQUNDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkIsWUFBWSxPQUFPO0FBQ25CLFlBQVksSUFBSTtBQUNoQixZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDJCQUEyQix1Q0FBdUM7QUFDbEU7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxXQUFXO0FBQ3ZCLFlBQVksT0FBTztBQUNuQixZQUFZLElBQUk7QUFDaEIsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsV0FBVztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscURBQXFEO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esc0JBQXNCLFdBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sdUJBQXVCLHVEQUFnQjtBQUM5QztBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0MsZ0JBQWdCLDhEQUE4RDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBLG1EQUFtRCw0QkFBNEI7QUFDL0UscUJBQXFCLHVFQUFhO0FBQ2xDLG9CQUFvQix3REFBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDREQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlFQUFXO0FBQ3RDLHVDQUF1QyxVQUFVO0FBQ2pEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSwwQkFBMEIsb0RBQVM7QUFDbkMsdURBQXVELG1CQUFtQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0RBQVM7QUFDekI7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4Q0FBRztBQUNsQjtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWJ1aWx0L3Rvb2xfbm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUb29sTWVzc2FnZSwgaXNCYXNlTWVzc2FnZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBpc0dyYXBoSW50ZXJydXB0IH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgRU5ELCBpc0NvbW1hbmQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG4vKipcbiAqIEEgbm9kZSB0aGF0IHJ1bnMgdGhlIHRvb2xzIHJlcXVlc3RlZCBpbiB0aGUgbGFzdCBBSU1lc3NhZ2UuIEl0IGNhbiBiZSB1c2VkXG4gKiBlaXRoZXIgaW4gU3RhdGVHcmFwaCB3aXRoIGEgXCJtZXNzYWdlc1wiIGtleSBvciBpbiBNZXNzYWdlR3JhcGguIElmIG11bHRpcGxlXG4gKiB0b29sIGNhbGxzIGFyZSByZXF1ZXN0ZWQsIHRoZXkgd2lsbCBiZSBydW4gaW4gcGFyYWxsZWwuIFRoZSBvdXRwdXQgd2lsbCBiZVxuICogYSBsaXN0IG9mIFRvb2xNZXNzYWdlcywgb25lIGZvciBlYWNoIHRvb2wgY2FsbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IFRvb2xOb2RlIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoL3ByZWJ1aWx0XCI7XG4gKiBpbXBvcnQgeyB0b29sIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS90b29sc1wiO1xuICogaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbiAqIGltcG9ydCB7IEFJTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbiAqXG4gKiBjb25zdCBnZXRXZWF0aGVyID0gdG9vbCgoaW5wdXQpID0+IHtcbiAqICAgaWYgKFtcInNmXCIsIFwic2FuIGZyYW5jaXNjb1wiXS5pbmNsdWRlcyhpbnB1dC5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpKSkge1xuICogICAgIHJldHVybiBcIkl0J3MgNjAgZGVncmVlcyBhbmQgZm9nZ3kuXCI7XG4gKiAgIH0gZWxzZSB7XG4gKiAgICAgcmV0dXJuIFwiSXQncyA5MCBkZWdyZWVzIGFuZCBzdW5ueS5cIjtcbiAqICAgfVxuICogfSwge1xuICogICBuYW1lOiBcImdldF93ZWF0aGVyXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkNhbGwgdG8gZ2V0IHRoZSBjdXJyZW50IHdlYXRoZXIuXCIsXG4gKiAgIHNjaGVtYTogei5vYmplY3Qoe1xuICogICAgIGxvY2F0aW9uOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiTG9jYXRpb24gdG8gZ2V0IHRoZSB3ZWF0aGVyIGZvci5cIiksXG4gKiAgIH0pLFxuICogfSk7XG4gKlxuICogY29uc3QgdG9vbHMgPSBbZ2V0V2VhdGhlcl07XG4gKiBjb25zdCB0b29sTm9kZSA9IG5ldyBUb29sTm9kZSh0b29scyk7XG4gKlxuICogY29uc3QgbWVzc2FnZVdpdGhTaW5nbGVUb29sQ2FsbCA9IG5ldyBBSU1lc3NhZ2Uoe1xuICogICBjb250ZW50OiBcIlwiLFxuICogICB0b29sX2NhbGxzOiBbXG4gKiAgICAge1xuICogICAgICAgbmFtZTogXCJnZXRfd2VhdGhlclwiLFxuICogICAgICAgYXJnczogeyBsb2NhdGlvbjogXCJzZlwiIH0sXG4gKiAgICAgICBpZDogXCJ0b29sX2NhbGxfaWRcIixcbiAqICAgICAgIHR5cGU6IFwidG9vbF9jYWxsXCIsXG4gKiAgICAgfVxuICogICBdXG4gKiB9KVxuICpcbiAqIGF3YWl0IHRvb2xOb2RlLmludm9rZSh7IG1lc3NhZ2VzOiBbbWVzc2FnZVdpdGhTaW5nbGVUb29sQ2FsbF0gfSk7XG4gKiAvLyBSZXR1cm5zIHRvb2wgaW52b2NhdGlvbiByZXNwb25zZXMgYXM6XG4gKiAvLyB7IG1lc3NhZ2VzOiBUb29sTWVzc2FnZVtdIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHtcbiAqICAgU3RhdGVHcmFwaCxcbiAqICAgTWVzc2FnZXNBbm5vdGF0aW9uLFxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiAqIGltcG9ydCB7IFRvb2xOb2RlIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoL3ByZWJ1aWx0XCI7XG4gKiBpbXBvcnQgeyB0b29sIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS90b29sc1wiO1xuICogaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbiAqIGltcG9ydCB7IENoYXRBbnRocm9waWMgfSBmcm9tIFwiQGxhbmdjaGFpbi9hbnRocm9waWNcIjtcbiAqXG4gKiBjb25zdCBnZXRXZWF0aGVyID0gdG9vbCgoaW5wdXQpID0+IHtcbiAqICAgaWYgKFtcInNmXCIsIFwic2FuIGZyYW5jaXNjb1wiXS5pbmNsdWRlcyhpbnB1dC5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpKSkge1xuICogICAgIHJldHVybiBcIkl0J3MgNjAgZGVncmVlcyBhbmQgZm9nZ3kuXCI7XG4gKiAgIH0gZWxzZSB7XG4gKiAgICAgcmV0dXJuIFwiSXQncyA5MCBkZWdyZWVzIGFuZCBzdW5ueS5cIjtcbiAqICAgfVxuICogfSwge1xuICogICBuYW1lOiBcImdldF93ZWF0aGVyXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkNhbGwgdG8gZ2V0IHRoZSBjdXJyZW50IHdlYXRoZXIuXCIsXG4gKiAgIHNjaGVtYTogei5vYmplY3Qoe1xuICogICAgIGxvY2F0aW9uOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiTG9jYXRpb24gdG8gZ2V0IHRoZSB3ZWF0aGVyIGZvci5cIiksXG4gKiAgIH0pLFxuICogfSk7XG4gKlxuICogY29uc3QgdG9vbHMgPSBbZ2V0V2VhdGhlcl07XG4gKiBjb25zdCBtb2RlbFdpdGhUb29scyA9IG5ldyBDaGF0QW50aHJvcGljKHtcbiAqICAgbW9kZWw6IFwiY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDdcIixcbiAqICAgdGVtcGVyYXR1cmU6IDBcbiAqIH0pLmJpbmRUb29scyh0b29scyk7XG4gKlxuICogY29uc3QgdG9vbE5vZGVGb3JHcmFwaCA9IG5ldyBUb29sTm9kZSh0b29scylcbiAqXG4gKiBjb25zdCBzaG91bGRDb250aW51ZSA9IChzdGF0ZTogdHlwZW9mIE1lc3NhZ2VzQW5ub3RhdGlvbi5TdGF0ZSkgPT4ge1xuICogICBjb25zdCB7IG1lc3NhZ2VzIH0gPSBzdGF0ZTtcbiAqICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAqICAgaWYgKFwidG9vbF9jYWxsc1wiIGluIGxhc3RNZXNzYWdlICYmIEFycmF5LmlzQXJyYXkobGFzdE1lc3NhZ2UudG9vbF9jYWxscykgJiYgbGFzdE1lc3NhZ2UudG9vbF9jYWxscz8ubGVuZ3RoKSB7XG4gKiAgICAgcmV0dXJuIFwidG9vbHNcIjtcbiAqICAgfVxuICogICByZXR1cm4gXCJfX2VuZF9fXCI7XG4gKiB9XG4gKlxuICogY29uc3QgY2FsbE1vZGVsID0gYXN5bmMgKHN0YXRlOiB0eXBlb2YgTWVzc2FnZXNBbm5vdGF0aW9uLlN0YXRlKSA9PiB7XG4gKiAgIGNvbnN0IHsgbWVzc2FnZXMgfSA9IHN0YXRlO1xuICogICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1vZGVsV2l0aFRvb2xzLmludm9rZShtZXNzYWdlcyk7XG4gKiAgIHJldHVybiB7IG1lc3NhZ2VzOiByZXNwb25zZSB9O1xuICogfVxuICpcbiAqIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoTWVzc2FnZXNBbm5vdGF0aW9uKVxuICogICAuYWRkTm9kZShcImFnZW50XCIsIGNhbGxNb2RlbClcbiAqICAgLmFkZE5vZGUoXCJ0b29sc1wiLCB0b29sTm9kZUZvckdyYXBoKVxuICogICAuYWRkRWRnZShcIl9fc3RhcnRfX1wiLCBcImFnZW50XCIpXG4gKiAgIC5hZGRDb25kaXRpb25hbEVkZ2VzKFwiYWdlbnRcIiwgc2hvdWxkQ29udGludWUpXG4gKiAgIC5hZGRFZGdlKFwidG9vbHNcIiwgXCJhZ2VudFwiKVxuICogICAuY29tcGlsZSgpO1xuICpcbiAqIGNvbnN0IGlucHV0cyA9IHtcbiAqICAgbWVzc2FnZXM6IFt7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBcIndoYXQgaXMgdGhlIHdlYXRoZXIgaW4gU0Y/XCIgfV0sXG4gKiB9O1xuICpcbiAqIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGdyYXBoLnN0cmVhbShpbnB1dHMsIHtcbiAqICAgc3RyZWFtTW9kZTogXCJ2YWx1ZXNcIixcbiAqIH0pO1xuICpcbiAqIGZvciBhd2FpdCAoY29uc3QgeyBtZXNzYWdlcyB9IG9mIHN0cmVhbSkge1xuICogICBjb25zb2xlLmxvZyhtZXNzYWdlcyk7XG4gKiB9XG4gKiAvLyBSZXR1cm5zIHRoZSBtZXNzYWdlcyBpbiB0aGUgc3RhdGUgYXQgZWFjaCBzdGVwIG9mIGV4ZWN1dGlvblxuICogYGBgXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgY2xhc3MgVG9vbE5vZGUgZXh0ZW5kcyBSdW5uYWJsZUNhbGxhYmxlIHtcbiAgICBjb25zdHJ1Y3Rvcih0b29scywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHRhZ3MsIGhhbmRsZVRvb2xFcnJvcnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHN1cGVyKHsgbmFtZSwgdGFncywgZnVuYzogKGlucHV0LCBjb25maWcpID0+IHRoaXMucnVuKGlucHV0LCBjb25maWcpIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb29sRXJyb3JzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbHMgPSB0b29scztcbiAgICAgICAgdGhpcy5oYW5kbGVUb29sRXJyb3JzID0gaGFuZGxlVG9vbEVycm9ycyA/PyB0aGlzLmhhbmRsZVRvb2xFcnJvcnM7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgcnVuKGlucHV0LCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEFycmF5LmlzQXJyYXkoaW5wdXQpXG4gICAgICAgICAgICA/IGlucHV0W2lucHV0Lmxlbmd0aCAtIDFdXG4gICAgICAgICAgICA6IGlucHV0Lm1lc3NhZ2VzW2lucHV0Lm1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobWVzc2FnZT8uX2dldFR5cGUoKSAhPT0gXCJhaVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb29sTm9kZSBvbmx5IGFjY2VwdHMgQUlNZXNzYWdlcyBhcyBpbnB1dC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IFByb21pc2UuYWxsKG1lc3NhZ2UudG9vbF9jYWxscz8ubWFwKGFzeW5jIChjYWxsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sID0gdGhpcy50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGNhbGwubmFtZSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0b29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb29sIFwiJHtjYWxsLm5hbWV9XCIgbm90IGZvdW5kLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCB0b29sLmludm9rZSh7IC4uLmNhbGwsIHR5cGU6IFwidG9vbF9jYWxsXCIgfSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBpZiAoKGlzQmFzZU1lc3NhZ2Uob3V0cHV0KSAmJiBvdXRwdXQuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIGlzQ29tbWFuZChvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHR5cGVvZiBvdXRwdXQgPT09IFwic3RyaW5nXCIgPyBvdXRwdXQgOiBKU09OLnN0cmluZ2lmeShvdXRwdXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiBjYWxsLmlkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsZVRvb2xFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzR3JhcGhJbnRlcnJ1cHQoZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBgTm9kZUludGVycnVwdGAgZXJyb3JzIGFyZSBhIGJyZWFrcG9pbnQgdG8gYnJpbmcgYSBodW1hbiBpbnRvIHRoZSBsb29wLlxuICAgICAgICAgICAgICAgICAgICAvLyBBcyBzdWNoLCB0aGV5IGFyZSBub3QgcmVjb3ZlcmFibGUgYnkgdGhlIGFnZW50IGFuZCBzaG91bGRuJ3QgYmUgZmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2suIEluc3RlYWQsIHJlLXRocm93IHRoZXNlIGVycm9ycyBldmVuIHdoZW4gYGhhbmRsZVRvb2xFcnJvcnMgPSB0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBFcnJvcjogJHtlLm1lc3NhZ2V9XFxuIFBsZWFzZSBmaXggeW91ciBtaXN0YWtlcy5gLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogY2FsbC5pZCA/PyBcIlwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSA/PyBbXSk7XG4gICAgICAgIC8vIFByZXNlcnZlIGV4aXN0aW5nIGJlaGF2aW9yIGZvciBub24tY29tbWFuZCB0b29sIG91dHB1dHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgIGlmICghb3V0cHV0cy5zb21lKGlzQ29tbWFuZCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoQXJyYXkuaXNBcnJheShpbnB1dCkgPyBvdXRwdXRzIDogeyBtZXNzYWdlczogb3V0cHV0cyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgbWl4ZWQgQ29tbWFuZCBhbmQgbm9uLUNvbW1hbmQgb3V0cHV0c1xuICAgICAgICBjb25zdCBjb21iaW5lZE91dHB1dHMgPSBvdXRwdXRzLm1hcCgob3V0cHV0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNDb21tYW5kKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoaW5wdXQpID8gW291dHB1dF0gOiB7IG1lc3NhZ2VzOiBbb3V0cHV0XSB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVkT3V0cHV0cztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdG9vbHNDb25kaXRpb24oc3RhdGUpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gQXJyYXkuaXNBcnJheShzdGF0ZSlcbiAgICAgICAgPyBzdGF0ZVtzdGF0ZS5sZW5ndGggLSAxXVxuICAgICAgICA6IHN0YXRlLm1lc3NhZ2VzW3N0YXRlLm1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChcInRvb2xfY2FsbHNcIiBpbiBtZXNzYWdlICYmXG4gICAgICAgIChtZXNzYWdlLnRvb2xfY2FsbHM/Lmxlbmd0aCA/PyAwKSA+IDApIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbHNcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBFTkQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/tool_node.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/algo.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/algo.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _applyWrites: () => (/* binding */ _applyWrites),\n/* harmony export */   _localRead: () => (/* binding */ _localRead),\n/* harmony export */   _localWrite: () => (/* binding */ _localWrite),\n/* harmony export */   _prepareNextTasks: () => (/* binding */ _prepareNextTasks),\n/* harmony export */   _prepareSingleTask: () => (/* binding */ _prepareSingleTask),\n/* harmony export */   increment: () => (/* binding */ increment),\n/* harmony export */   shouldInterrupt: () => (/* binding */ shouldInterrupt)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.15_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferu_wxyqc73w5wk4lx2cfu5zaddqqi/node_modules/@langchain/langgraph-checkpoint/index.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../channels/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./io.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/types.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _call_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./call.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/call.js\");\n/* eslint-disable no-param-reassign */\n\n\n\n\n\n\n\n\n\nconst increment = (current) => {\n    return current !== undefined ? current + 1 : 1;\n};\nfunction shouldInterrupt(checkpoint, interruptNodes, tasks) {\n    const versionValues = Object.values(checkpoint.channel_versions);\n    const versionType = versionValues.length > 0 ? typeof versionValues[0] : undefined;\n    let nullVersion;\n    if (versionType === \"number\") {\n        nullVersion = 0;\n    }\n    else if (versionType === \"string\") {\n        nullVersion = \"\";\n    }\n    const seen = checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_4__.INTERRUPT] ?? {};\n    const anyChannelUpdated = Object.entries(checkpoint.channel_versions).some(([chan, version]) => {\n        return version > (seen[chan] ?? nullVersion);\n    });\n    const anyTriggeredNodeInInterruptNodes = tasks.some((task) => interruptNodes === \"*\"\n        ? !task.config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN)\n        : interruptNodes.includes(task.name));\n    return anyChannelUpdated && anyTriggeredNodeInInterruptNodes;\n}\nfunction _localRead(step, checkpoint, channels, managed, task, select, fresh = false) {\n    let managedKeys = [];\n    let updated = new Set();\n    if (!Array.isArray(select)) {\n        for (const [c] of task.writes) {\n            if (c === select) {\n                updated = new Set([c]);\n                break;\n            }\n        }\n        updated = updated || new Set();\n    }\n    else {\n        managedKeys = select.filter((k) => managed.get(k));\n        select = select.filter((k) => !managed.get(k));\n        updated = new Set(select.filter((c) => task.writes.some(([key, _]) => key === c)));\n    }\n    let values;\n    if (fresh && updated.size > 0) {\n        const localChannels = Object.fromEntries(Object.entries(channels).filter(([k, _]) => updated.has(k)));\n        const newCheckpoint = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.createCheckpoint)(checkpoint, localChannels, -1);\n        const newChannels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.emptyChannels)(localChannels, newCheckpoint);\n        _applyWrites((0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.copyCheckpoint)(newCheckpoint), newChannels, [task]);\n        values = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannels)({ ...channels, ...newChannels }, select);\n    }\n    else {\n        values = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannels)(channels, select);\n    }\n    if (managedKeys.length > 0) {\n        for (const k of managedKeys) {\n            const managedValue = managed.get(k);\n            if (managedValue) {\n                const resultOfManagedCall = managedValue.call(step);\n                values[k] = resultOfManagedCall;\n            }\n        }\n    }\n    return values;\n}\nfunction _localWrite(step, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ncommit, processes, managed, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nwrites) {\n    for (const [chan, value] of writes) {\n        if (chan === _constants_js__WEBPACK_IMPORTED_MODULE_4__.TASKS && value != null) {\n            if (!(0,_constants_js__WEBPACK_IMPORTED_MODULE_4__._isSend)(value)) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.InvalidUpdateError(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(value)}`);\n            }\n            if (!(value.node in processes)) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.InvalidUpdateError(`Invalid node name \"${value.node}\" in Send packet`);\n            }\n            // replace any runtime values with placeholders\n            managed.replaceRuntimeValues(step, value.args);\n        }\n    }\n    commit(writes);\n}\nconst IGNORE = new Set([\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.NO_WRITES,\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH,\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME,\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.INTERRUPT,\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.RETURN,\n    _constants_js__WEBPACK_IMPORTED_MODULE_4__.ERROR,\n]);\nfunction _applyWrites(checkpoint, channels, tasks, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetNextVersion) {\n    // Sort tasks by first 3 path elements for deterministic order\n    // Later path parts (like task IDs) are ignored for sorting\n    tasks.sort((a, b) => {\n        const aPath = a.path?.slice(0, 3) || [];\n        const bPath = b.path?.slice(0, 3) || [];\n        // Compare each path element\n        for (let i = 0; i < Math.min(aPath.length, bPath.length); i += 1) {\n            if (aPath[i] < bPath[i])\n                return -1;\n            if (aPath[i] > bPath[i])\n                return 1;\n        }\n        // If one path is shorter, it comes first\n        return aPath.length - bPath.length;\n    });\n    // if no task has triggers this is applying writes from the null task only\n    // so we don't do anything other than update the channels written to\n    const bumpStep = tasks.some((task) => task.triggers.length > 0);\n    // Filter out non instances of BaseChannel\n    const onlyChannels = Object.fromEntries(Object.entries(channels).filter(([_, value]) => (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseChannel)(value)));\n    // Update seen versions\n    for (const task of tasks) {\n        if (checkpoint.versions_seen[task.name] === undefined) {\n            checkpoint.versions_seen[task.name] = {};\n        }\n        for (const chan of task.triggers) {\n            if (chan in checkpoint.channel_versions) {\n                checkpoint.versions_seen[task.name][chan] =\n                    checkpoint.channel_versions[chan];\n            }\n        }\n    }\n    // Find the highest version of all channels\n    let maxVersion;\n    if (Object.keys(checkpoint.channel_versions).length > 0) {\n        maxVersion = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.maxChannelVersion)(...Object.values(checkpoint.channel_versions));\n    }\n    // Consume all channels that were read\n    const channelsToConsume = new Set(tasks\n        .flatMap((task) => task.triggers)\n        .filter((chan) => !_constants_js__WEBPACK_IMPORTED_MODULE_4__.RESERVED.includes(chan)));\n    for (const chan of channelsToConsume) {\n        if (chan in onlyChannels && onlyChannels[chan].consume()) {\n            if (getNextVersion !== undefined) {\n                checkpoint.channel_versions[chan] = getNextVersion(maxVersion, onlyChannels[chan]);\n            }\n        }\n    }\n    // Clear pending sends\n    if (checkpoint.pending_sends?.length && bumpStep) {\n        checkpoint.pending_sends = [];\n    }\n    // Group writes by channel\n    const pendingWriteValuesByChannel = {};\n    const pendingWritesByManaged = {};\n    for (const task of tasks) {\n        for (const [chan, val] of task.writes) {\n            if (IGNORE.has(chan)) {\n                // do nothing\n            }\n            else if (chan === _constants_js__WEBPACK_IMPORTED_MODULE_4__.TASKS) {\n                // TODO: remove branch in 1.0\n                checkpoint.pending_sends.push({\n                    node: val.node,\n                    args: val.args,\n                });\n            }\n            else if (chan in onlyChannels) {\n                if (chan in pendingWriteValuesByChannel) {\n                    pendingWriteValuesByChannel[chan].push(val);\n                }\n                else {\n                    pendingWriteValuesByChannel[chan] = [val];\n                }\n            }\n            else {\n                if (chan in pendingWritesByManaged) {\n                    pendingWritesByManaged[chan].push(val);\n                }\n                else {\n                    pendingWritesByManaged[chan] = [val];\n                }\n            }\n        }\n    }\n    // find the highest version of all channels\n    maxVersion = undefined;\n    if (Object.keys(checkpoint.channel_versions).length > 0) {\n        maxVersion = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.maxChannelVersion)(...Object.values(checkpoint.channel_versions));\n    }\n    const updatedChannels = new Set();\n    // Apply writes to channels\n    for (const [chan, vals] of Object.entries(pendingWriteValuesByChannel)) {\n        if (chan in onlyChannels) {\n            let updated;\n            try {\n                updated = onlyChannels[chan].update(vals);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (e) {\n                if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_6__.InvalidUpdateError.unminifiable_name) {\n                    const wrappedError = new _errors_js__WEBPACK_IMPORTED_MODULE_6__.InvalidUpdateError(`Invalid update for channel \"${chan}\" with values ${JSON.stringify(vals)}: ${e.message}`);\n                    wrappedError.lc_error_code = e.lc_error_code;\n                    throw wrappedError;\n                }\n                else {\n                    throw e;\n                }\n            }\n            if (updated && getNextVersion !== undefined) {\n                checkpoint.channel_versions[chan] = getNextVersion(maxVersion, onlyChannels[chan]);\n            }\n            updatedChannels.add(chan);\n        }\n    }\n    // Channels that weren't updated in this step are notified of a new step\n    if (bumpStep) {\n        for (const chan of Object.keys(onlyChannels)) {\n            if (!updatedChannels.has(chan)) {\n                const updated = onlyChannels[chan].update([]);\n                if (updated && getNextVersion !== undefined) {\n                    checkpoint.channel_versions[chan] = getNextVersion(maxVersion, onlyChannels[chan]);\n                }\n            }\n        }\n    }\n    // Return managed values writes to be applied externally\n    return pendingWritesByManaged;\n}\n/**\n * Prepare the set of tasks that will make up the next Pregel step.\n * This is the union of all PUSH tasks (Sends) and PULL tasks (nodes triggered\n * by edges).\n */\nfunction _prepareNextTasks(checkpoint, pendingWrites, processes, channels, managed, config, forExecution, extra) {\n    const tasks = {};\n    // Consume pending packets\n    for (let i = 0; i < checkpoint.pending_sends.length; i += 1) {\n        const task = _prepareSingleTask([_constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH, i], checkpoint, pendingWrites, processes, channels, managed, config, forExecution, extra);\n        if (task !== undefined) {\n            tasks[task.id] = task;\n        }\n    }\n    // Check if any processes should be run in next step\n    // If so, prepare the values to be passed to them\n    for (const name of Object.keys(processes)) {\n        const task = _prepareSingleTask([_constants_js__WEBPACK_IMPORTED_MODULE_4__.PULL, name], checkpoint, pendingWrites, processes, channels, managed, config, forExecution, extra);\n        if (task !== undefined) {\n            tasks[task.id] = task;\n        }\n    }\n    return tasks;\n}\n/**\n * Prepares a single task for the next Pregel step, given a task path, which\n * uniquely identifies a PUSH or PULL task within the graph.\n */\nfunction _prepareSingleTask(taskPath, checkpoint, pendingWrites, processes, channels, managed, config, forExecution, extra) {\n    const { step, checkpointer, manager } = extra;\n    const configurable = config.configurable ?? {};\n    const parentNamespace = configurable.checkpoint_ns ?? \"\";\n    if (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH && (0,_types_js__WEBPACK_IMPORTED_MODULE_5__.isCall)(taskPath[taskPath.length - 1])) {\n        const call = taskPath[taskPath.length - 1];\n        const proc = (0,_call_js__WEBPACK_IMPORTED_MODULE_8__.getRunnableForFunc)(call.name, call.func);\n        const triggers = [_constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH];\n        const checkpointNamespace = parentNamespace === \"\"\n            ? call.name\n            : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_SEPARATOR}${call.name}`;\n        const id = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.uuid5)(JSON.stringify([\n            checkpointNamespace,\n            step.toString(),\n            call.name,\n            _constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH,\n            taskPath[1],\n            taskPath[2],\n        ]), checkpoint.id);\n        const taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_END}${id}`;\n        const metadata = {\n            langgraph_step: step,\n            langgraph_node: call.name,\n            langgraph_triggers: triggers,\n            langgraph_path: taskPath.slice(0, 3),\n            langgraph_checkpoint_ns: taskCheckpointNamespace,\n        };\n        if (forExecution) {\n            const writes = [];\n            const task = {\n                name: call.name,\n                input: call.input,\n                proc,\n                writes,\n                config: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(config, {\n                    metadata,\n                    store: extra.store ?? config.store,\n                }), {\n                    runName: call.name,\n                    callbacks: manager?.getChild(`graph:step:${step}`),\n                    configurable: {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_TASK_ID]: id,\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SEND]: (writes_) => _localWrite(step, (items) => writes.push(...items), processes, managed, writes_),\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(step, checkpoint, channels, managed, {\n                            name: call.name,\n                            writes: writes,\n                            triggers,\n                            path: taskPath.slice(0, 3),\n                        }, select_, fresh_),\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER],\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP]: {\n                            ...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP],\n                            [parentNamespace]: checkpoint.id,\n                        },\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]: _scratchpad([\n                            ...(pendingWrites || []),\n                            ...(configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]?.resume || []).map((v) => [id, _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME, v]),\n                        ], id),\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_4__.PREVIOUS],\n                        checkpoint_id: undefined,\n                        checkpoint_ns: taskCheckpointNamespace,\n                    },\n                }),\n                triggers,\n                retry_policy: call.retry,\n                id,\n                path: taskPath.slice(0, 3),\n                writers: [],\n            };\n            return task;\n        }\n        else {\n            return {\n                id,\n                name: call.name,\n                interrupts: [],\n                path: taskPath.slice(0, 3),\n            };\n        }\n    }\n    else if (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH) {\n        const index = typeof taskPath[1] === \"number\"\n            ? taskPath[1]\n            : parseInt(taskPath[1], 10);\n        if (index >= checkpoint.pending_sends.length) {\n            return undefined;\n        }\n        const packet = checkpoint.pending_sends[index];\n        if (!(0,_constants_js__WEBPACK_IMPORTED_MODULE_4__._isSendInterface)(packet)) {\n            console.warn(`Ignoring invalid packet ${JSON.stringify(packet)} in pending sends.`);\n            return undefined;\n        }\n        if (!(packet.node in processes)) {\n            console.warn(`Ignoring unknown node name ${packet.node} in pending sends.`);\n            return undefined;\n        }\n        const triggers = [_constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH];\n        const checkpointNamespace = parentNamespace === \"\"\n            ? packet.node\n            : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_SEPARATOR}${packet.node}`;\n        const taskId = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.uuid5)(JSON.stringify([\n            checkpointNamespace,\n            step.toString(),\n            packet.node,\n            _constants_js__WEBPACK_IMPORTED_MODULE_4__.PUSH,\n            index.toString(),\n        ]), checkpoint.id);\n        const taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_END}${taskId}`;\n        let metadata = {\n            langgraph_step: step,\n            langgraph_node: packet.node,\n            langgraph_triggers: triggers,\n            langgraph_path: taskPath,\n            langgraph_checkpoint_ns: taskCheckpointNamespace,\n        };\n        if (forExecution) {\n            const proc = processes[packet.node];\n            const node = proc.getNode();\n            if (node !== undefined) {\n                managed.replaceRuntimePlaceholders(step, packet.args);\n                if (proc.metadata !== undefined) {\n                    metadata = { ...metadata, ...proc.metadata };\n                }\n                const writes = [];\n                return {\n                    name: packet.node,\n                    input: packet.args,\n                    proc: node,\n                    subgraphs: proc.subgraphs,\n                    writes,\n                    config: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(config, {\n                        metadata,\n                        tags: proc.tags,\n                        store: extra.store ?? config.store,\n                    }), {\n                        runName: packet.node,\n                        callbacks: manager?.getChild(`graph:step:${step}`),\n                        configurable: {\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_TASK_ID]: taskId,\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SEND]: (writes_) => _localWrite(step, (items) => writes.push(...items), processes, managed, writes_),\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(step, checkpoint, channels, managed, {\n                                name: packet.node,\n                                writes: writes,\n                                triggers,\n                                path: taskPath,\n                            }, select_, fresh_),\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER],\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP]: {\n                                ...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP],\n                                [parentNamespace]: checkpoint.id,\n                            },\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]: _scratchpad([\n                                ...(pendingWrites || []),\n                                ...(configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]?.resume || []).map((v) => [\n                                    taskId,\n                                    _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME,\n                                    v,\n                                ]),\n                            ], taskId),\n                            [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_4__.PREVIOUS],\n                            checkpoint_id: undefined,\n                            checkpoint_ns: taskCheckpointNamespace,\n                        },\n                    }),\n                    triggers,\n                    retry_policy: proc.retryPolicy,\n                    id: taskId,\n                    path: taskPath,\n                    writers: proc.getWriters(),\n                };\n            }\n        }\n        else {\n            return {\n                id: taskId,\n                name: packet.node,\n                interrupts: [],\n                path: taskPath,\n            };\n        }\n    }\n    else if (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_4__.PULL) {\n        const name = taskPath[1].toString();\n        const proc = processes[name];\n        if (proc === undefined) {\n            return undefined;\n        }\n        const nullVersion = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.getNullChannelVersion)(checkpoint.channel_versions);\n        if (nullVersion === undefined) {\n            return undefined;\n        }\n        const seen = checkpoint.versions_seen[name] ?? {};\n        const triggers = proc.triggers\n            .filter((chan) => {\n            const result = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannel)(channels, chan, false, true);\n            const isEmptyChannelError = \n            // eslint-disable-next-line no-instanceof/no-instanceof\n            result instanceof Error &&\n                result.name === _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyChannelError.unminifiable_name;\n            return (!isEmptyChannelError &&\n                (checkpoint.channel_versions[chan] ?? nullVersion) >\n                    (seen[chan] ?? nullVersion));\n        })\n            .sort();\n        // If any of the channels read by this process were updated\n        if (triggers.length > 0) {\n            const val = _procInput(step, proc, managed, channels, forExecution);\n            if (val === undefined) {\n                return undefined;\n            }\n            const checkpointNamespace = parentNamespace === \"\"\n                ? name\n                : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_SEPARATOR}${name}`;\n            const taskId = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.uuid5)(JSON.stringify([\n                checkpointNamespace,\n                step.toString(),\n                name,\n                _constants_js__WEBPACK_IMPORTED_MODULE_4__.PULL,\n                triggers,\n            ]), checkpoint.id);\n            const taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_END}${taskId}`;\n            let metadata = {\n                langgraph_step: step,\n                langgraph_node: name,\n                langgraph_triggers: triggers,\n                langgraph_path: taskPath,\n                langgraph_checkpoint_ns: taskCheckpointNamespace,\n            };\n            if (forExecution) {\n                const node = proc.getNode();\n                if (node !== undefined) {\n                    if (proc.metadata !== undefined) {\n                        metadata = { ...metadata, ...proc.metadata };\n                    }\n                    const writes = [];\n                    const taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_END}${taskId}`;\n                    return {\n                        name,\n                        input: val,\n                        proc: node,\n                        subgraphs: proc.subgraphs,\n                        writes,\n                        config: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(config, {\n                            metadata,\n                            tags: proc.tags,\n                            store: extra.store ?? config.store,\n                        }), {\n                            runName: name,\n                            callbacks: manager?.getChild(`graph:step:${step}`),\n                            configurable: {\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_TASK_ID]: taskId,\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SEND]: (writes_) => _localWrite(step, (items) => {\n                                    writes.push(...items);\n                                }, processes, managed, writes_),\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(step, checkpoint, channels, managed, {\n                                    name,\n                                    writes: writes,\n                                    triggers,\n                                    path: taskPath,\n                                }, select_, fresh_),\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINTER],\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP]: {\n                                    ...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_CHECKPOINT_MAP],\n                                    [parentNamespace]: checkpoint.id,\n                                },\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]: _scratchpad([\n                                    ...(pendingWrites || []),\n                                    ...(configurable[_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_SCRATCHPAD]?.resume || []).map((v) => [\n                                        taskId,\n                                        _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME,\n                                        v,\n                                    ]),\n                                ], taskId),\n                                [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_4__.PREVIOUS],\n                                checkpoint_id: undefined,\n                                checkpoint_ns: taskCheckpointNamespace,\n                            },\n                        }),\n                        triggers,\n                        retry_policy: proc.retryPolicy,\n                        id: taskId,\n                        path: taskPath,\n                        writers: proc.getWriters(),\n                    };\n                }\n            }\n            else {\n                return { id: taskId, name, interrupts: [], path: taskPath };\n            }\n        }\n    }\n    return undefined;\n}\nfunction _procInput(step, proc, managed, channels, forExecution) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let val;\n    if (typeof proc.channels === \"object\" && !Array.isArray(proc.channels)) {\n        val = {};\n        for (const [k, chan] of Object.entries(proc.channels)) {\n            if (proc.triggers.includes(chan)) {\n                try {\n                    val[k] = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannel)(channels, chan, false);\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                catch (e) {\n                    if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyChannelError.unminifiable_name) {\n                        return undefined;\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n            else if (chan in channels) {\n                try {\n                    val[k] = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannel)(channels, chan, true);\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                }\n                catch (e) {\n                    if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyChannelError.unminifiable_name) {\n                        continue;\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n            else {\n                val[k] = managed.get(k)?.call(step);\n            }\n        }\n    }\n    else if (Array.isArray(proc.channels)) {\n        let successfulRead = false;\n        for (const chan of proc.channels) {\n            try {\n                val = (0,_io_js__WEBPACK_IMPORTED_MODULE_3__.readChannel)(channels, chan, false);\n                successfulRead = true;\n                break;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (e) {\n                if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyChannelError.unminifiable_name) {\n                    continue;\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        if (!successfulRead) {\n            return undefined;\n        }\n    }\n    else {\n        throw new Error(`Invalid channels type, expected list or dict, got ${proc.channels}`);\n    }\n    // If the process has a mapper, apply it to the value\n    if (forExecution && proc.mapper !== undefined) {\n        val = proc.mapper(val);\n    }\n    return val;\n}\nfunction _scratchpad(pendingWrites, taskId) {\n    return {\n        callCounter: 0,\n        interruptCounter: -1,\n        resume: pendingWrites\n            .filter(([writeTaskId, chan]) => writeTaskId === taskId && chan === _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME)\n            .flatMap(([_writeTaskId, _chan, resume]) => resume),\n        nullResume: pendingWrites.find(([writeTaskId, chan]) => writeTaskId === _constants_js__WEBPACK_IMPORTED_MODULE_4__.NULL_TASK_ID && chan === _constants_js__WEBPACK_IMPORTED_MODULE_4__.RESUME)?.[2],\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9hbGdvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN1RTtBQUNxQjtBQUNOO0FBQ2xDO0FBQzZVO0FBQzVWO0FBQ2dDO0FBQ1o7QUFDVjtBQUN4QztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvREFBUztBQUNuRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUNBQXVDLHFEQUFVO0FBQ2pEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsbUVBQWdCO0FBQzlDLDRCQUE0QixnRUFBYTtBQUN6QyxxQkFBcUIsK0VBQWM7QUFDbkMsaUJBQWlCLG9EQUFZLEdBQUcsNkJBQTZCO0FBQzdEO0FBQ0E7QUFDQSxpQkFBaUIsb0RBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdEQUFLO0FBQzFCLGlCQUFpQixzREFBTztBQUN4QiwwQkFBMEIsMERBQWtCLG9EQUFvRCxzQkFBc0I7QUFDdEg7QUFDQTtBQUNBLDBCQUEwQiwwREFBa0IsdUJBQXVCLFdBQVc7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0RBQVM7QUFDYixJQUFJLCtDQUFJO0FBQ1IsSUFBSSxpREFBTTtBQUNWLElBQUksb0RBQVM7QUFDYixJQUFJLGlEQUFNO0FBQ1YsSUFBSSxnREFBSztBQUNUO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUEwQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0RixnRUFBYTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0ZBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1EQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdEQUFLO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtGQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBEQUFrQjtBQUNqRCw2Q0FBNkMsMERBQWtCLGdDQUFnQyxLQUFLLGdCQUFnQixxQkFBcUIsSUFBSSxVQUFVO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0IscUNBQXFDO0FBQ3pELHlDQUF5QywrQ0FBSTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywrQ0FBSTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSw4QkFBOEI7QUFDMUM7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBSSxJQUFJLGlEQUFNO0FBQ3RDO0FBQ0EscUJBQXFCLDREQUFrQjtBQUN2QywwQkFBMEIsK0NBQUk7QUFDOUI7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0IsRUFBRSx5RUFBOEIsQ0FBQyxFQUFFLFVBQVU7QUFDOUUsbUJBQW1CLHNFQUFLO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG9CQUFvQixFQUFFLG1FQUF3QixDQUFDLEVBQUUsR0FBRztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNFQUFXLENBQUMsdUVBQVk7QUFDaEQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLCtEQUErRCxLQUFLO0FBQ3BFO0FBQ0EseUJBQXlCLDZEQUFrQjtBQUMzQztBQUNBLHlCQUF5QiwwREFBZTtBQUN4Qyx5QkFBeUIsMERBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIseUJBQXlCLGtFQUF1QixnQ0FBZ0Msa0VBQXVCO0FBQ3ZHLHlCQUF5QixvRUFBeUI7QUFDbEQsNENBQTRDLG9FQUF5QjtBQUNyRTtBQUNBLHlCQUF5QjtBQUN6Qix5QkFBeUIsZ0VBQXFCO0FBQzlDO0FBQ0EsNkNBQTZDLGdFQUFxQixpQ0FBaUMsaURBQU07QUFDekc7QUFDQSx5QkFBeUIsb0VBQXlCLDZCQUE2QixtREFBUTtBQUN2RjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLCtDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwrREFBZ0I7QUFDN0Isb0RBQW9ELHdCQUF3QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsYUFBYTtBQUNwRTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFJO0FBQzlCO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCLEVBQUUseUVBQThCLENBQUMsRUFBRSxZQUFZO0FBQ2hGLHVCQUF1QixzRUFBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtDQUFJO0FBQ2hCO0FBQ0E7QUFDQSwyQ0FBMkMsb0JBQW9CLEVBQUUsbUVBQXdCLENBQUMsRUFBRSxPQUFPO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQVcsQ0FBQyx1RUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxtRUFBbUUsS0FBSztBQUN4RTtBQUNBLDZCQUE2Qiw2REFBa0I7QUFDL0M7QUFDQSw2QkFBNkIsMERBQWU7QUFDNUMsNkJBQTZCLDBEQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLDZCQUE2QixrRUFBdUIsZ0NBQWdDLGtFQUF1QjtBQUMzRyw2QkFBNkIsb0VBQXlCO0FBQ3RELGdEQUFnRCxvRUFBeUI7QUFDekU7QUFDQSw2QkFBNkI7QUFDN0IsNkJBQTZCLGdFQUFxQjtBQUNsRDtBQUNBLGlEQUFpRCxnRUFBcUI7QUFDdEU7QUFDQSxvQ0FBb0MsaURBQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9FQUF5Qiw2QkFBNkIsbURBQVE7QUFDM0Y7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQ0FBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbURBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlEQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdCQUFnQixFQUFFLHlFQUE4QixDQUFDLEVBQUUsS0FBSztBQUM3RSwyQkFBMkIsc0VBQUs7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFJO0FBQ3BCO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CLEVBQUUsbUVBQXdCLENBQUMsRUFBRSxPQUFPO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLHVEQUF1RCxvQkFBb0IsRUFBRSxtRUFBd0IsQ0FBQyxFQUFFLE9BQU87QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNFQUFXLENBQUMsdUVBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUVBQXVFLEtBQUs7QUFDNUU7QUFDQSxpQ0FBaUMsNkRBQWtCO0FBQ25EO0FBQ0EsaUNBQWlDLDBEQUFlO0FBQ2hEO0FBQ0EsaUNBQWlDO0FBQ2pDLGlDQUFpQywwREFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxpQ0FBaUMsa0VBQXVCLGdDQUFnQyxrRUFBdUI7QUFDL0csaUNBQWlDLG9FQUF5QjtBQUMxRCxvREFBb0Qsb0VBQXlCO0FBQzdFO0FBQ0EsaUNBQWlDO0FBQ2pDLGlDQUFpQyxnRUFBcUI7QUFDdEQ7QUFDQSxxREFBcUQsZ0VBQXFCO0FBQzFFO0FBQ0Esd0NBQXdDLGlEQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvRUFBeUIsNkJBQTZCLG1EQUFRO0FBQy9GO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQWlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQWlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1EQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseURBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxjQUFjO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRixpREFBTTtBQUN0RjtBQUNBLGdGQUFnRix1REFBWSxhQUFhLGlEQUFNO0FBQy9HO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL2FsZ28uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmltcG9ydCB7IG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbmltcG9ydCB7IGNvcHlDaGVja3BvaW50LCB1dWlkNSwgbWF4Q2hhbm5lbFZlcnNpb24sIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbmltcG9ydCB7IGNyZWF0ZUNoZWNrcG9pbnQsIGVtcHR5Q2hhbm5lbHMsIGlzQmFzZUNoYW5uZWwsIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IHJlYWRDaGFubmVsLCByZWFkQ2hhbm5lbHMgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgX2lzU2VuZCwgX2lzU2VuZEludGVyZmFjZSwgQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUCwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBDT05GSUdfS0VZX0NIRUNLUE9JTlRFUiwgQ09ORklHX0tFWV9SRUFELCBDT05GSUdfS0VZX1RBU0tfSUQsIENPTkZJR19LRVlfU0VORCwgSU5URVJSVVBULCBSRVNFUlZFRCwgVEFHX0hJRERFTiwgVEFTS1MsIENIRUNLUE9JTlRfTkFNRVNQQUNFX0VORCwgUFVTSCwgUFVMTCwgUkVTVU1FLCBOVUxMX1RBU0tfSUQsIENPTkZJR19LRVlfU0NSQVRDSFBBRCwgUkVUVVJOLCBFUlJPUiwgTk9fV1JJVEVTLCBDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFLCBQUkVWSU9VUywgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBpc0NhbGwsIH0gZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBnZXROdWxsQ2hhbm5lbFZlcnNpb24gfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0UnVubmFibGVGb3JGdW5jIH0gZnJvbSBcIi4vY2FsbC5qc1wiO1xuZXhwb3J0IGNvbnN0IGluY3JlbWVudCA9IChjdXJyZW50KSA9PiB7XG4gICAgcmV0dXJuIGN1cnJlbnQgIT09IHVuZGVmaW5lZCA/IGN1cnJlbnQgKyAxIDogMTtcbn07XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSW50ZXJydXB0KGNoZWNrcG9pbnQsIGludGVycnVwdE5vZGVzLCB0YXNrcykge1xuICAgIGNvbnN0IHZlcnNpb25WYWx1ZXMgPSBPYmplY3QudmFsdWVzKGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyk7XG4gICAgY29uc3QgdmVyc2lvblR5cGUgPSB2ZXJzaW9uVmFsdWVzLmxlbmd0aCA+IDAgPyB0eXBlb2YgdmVyc2lvblZhbHVlc1swXSA6IHVuZGVmaW5lZDtcbiAgICBsZXQgbnVsbFZlcnNpb247XG4gICAgaWYgKHZlcnNpb25UeXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIG51bGxWZXJzaW9uID0gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAodmVyc2lvblR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbnVsbFZlcnNpb24gPSBcIlwiO1xuICAgIH1cbiAgICBjb25zdCBzZWVuID0gY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW0lOVEVSUlVQVF0gPz8ge307XG4gICAgY29uc3QgYW55Q2hhbm5lbFVwZGF0ZWQgPSBPYmplY3QuZW50cmllcyhjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpLnNvbWUoKFtjaGFuLCB2ZXJzaW9uXSkgPT4ge1xuICAgICAgICByZXR1cm4gdmVyc2lvbiA+IChzZWVuW2NoYW5dID8/IG51bGxWZXJzaW9uKTtcbiAgICB9KTtcbiAgICBjb25zdCBhbnlUcmlnZ2VyZWROb2RlSW5JbnRlcnJ1cHROb2RlcyA9IHRhc2tzLnNvbWUoKHRhc2spID0+IGludGVycnVwdE5vZGVzID09PSBcIipcIlxuICAgICAgICA/ICF0YXNrLmNvbmZpZz8udGFncz8uaW5jbHVkZXMoVEFHX0hJRERFTilcbiAgICAgICAgOiBpbnRlcnJ1cHROb2Rlcy5pbmNsdWRlcyh0YXNrLm5hbWUpKTtcbiAgICByZXR1cm4gYW55Q2hhbm5lbFVwZGF0ZWQgJiYgYW55VHJpZ2dlcmVkTm9kZUluSW50ZXJydXB0Tm9kZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gX2xvY2FsUmVhZChzdGVwLCBjaGVja3BvaW50LCBjaGFubmVscywgbWFuYWdlZCwgdGFzaywgc2VsZWN0LCBmcmVzaCA9IGZhbHNlKSB7XG4gICAgbGV0IG1hbmFnZWRLZXlzID0gW107XG4gICAgbGV0IHVwZGF0ZWQgPSBuZXcgU2V0KCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlbGVjdCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBbY10gb2YgdGFzay53cml0ZXMpIHtcbiAgICAgICAgICAgIGlmIChjID09PSBzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVkID0gbmV3IFNldChbY10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZWQgPSB1cGRhdGVkIHx8IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hbmFnZWRLZXlzID0gc2VsZWN0LmZpbHRlcigoaykgPT4gbWFuYWdlZC5nZXQoaykpO1xuICAgICAgICBzZWxlY3QgPSBzZWxlY3QuZmlsdGVyKChrKSA9PiAhbWFuYWdlZC5nZXQoaykpO1xuICAgICAgICB1cGRhdGVkID0gbmV3IFNldChzZWxlY3QuZmlsdGVyKChjKSA9PiB0YXNrLndyaXRlcy5zb21lKChba2V5LCBfXSkgPT4ga2V5ID09PSBjKSkpO1xuICAgIH1cbiAgICBsZXQgdmFsdWVzO1xuICAgIGlmIChmcmVzaCAmJiB1cGRhdGVkLnNpemUgPiAwKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsQ2hhbm5lbHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2hhbm5lbHMpLmZpbHRlcigoW2ssIF9dKSA9PiB1cGRhdGVkLmhhcyhrKSkpO1xuICAgICAgICBjb25zdCBuZXdDaGVja3BvaW50ID0gY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCBsb2NhbENoYW5uZWxzLCAtMSk7XG4gICAgICAgIGNvbnN0IG5ld0NoYW5uZWxzID0gZW1wdHlDaGFubmVscyhsb2NhbENoYW5uZWxzLCBuZXdDaGVja3BvaW50KTtcbiAgICAgICAgX2FwcGx5V3JpdGVzKGNvcHlDaGVja3BvaW50KG5ld0NoZWNrcG9pbnQpLCBuZXdDaGFubmVscywgW3Rhc2tdKTtcbiAgICAgICAgdmFsdWVzID0gcmVhZENoYW5uZWxzKHsgLi4uY2hhbm5lbHMsIC4uLm5ld0NoYW5uZWxzIH0sIHNlbGVjdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZXMgPSByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHNlbGVjdCk7XG4gICAgfVxuICAgIGlmIChtYW5hZ2VkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgayBvZiBtYW5hZ2VkS2V5cykge1xuICAgICAgICAgICAgY29uc3QgbWFuYWdlZFZhbHVlID0gbWFuYWdlZC5nZXQoayk7XG4gICAgICAgICAgICBpZiAobWFuYWdlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0T2ZNYW5hZ2VkQ2FsbCA9IG1hbmFnZWRWYWx1ZS5jYWxsKHN0ZXApO1xuICAgICAgICAgICAgICAgIHZhbHVlc1trXSA9IHJlc3VsdE9mTWFuYWdlZENhbGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbG9jYWxXcml0ZShzdGVwLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb21taXQsIHByb2Nlc3NlcywgbWFuYWdlZCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxud3JpdGVzKSB7XG4gICAgZm9yIChjb25zdCBbY2hhbiwgdmFsdWVdIG9mIHdyaXRlcykge1xuICAgICAgICBpZiAoY2hhbiA9PT0gVEFTS1MgJiYgdmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFfaXNTZW5kKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEludmFsaWQgcGFja2V0IHR5cGUsIGV4cGVjdGVkIFNlbmRQcm90b2NvbCwgZ290ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEodmFsdWUubm9kZSBpbiBwcm9jZXNzZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgSW52YWxpZCBub2RlIG5hbWUgXCIke3ZhbHVlLm5vZGV9XCIgaW4gU2VuZCBwYWNrZXRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlcGxhY2UgYW55IHJ1bnRpbWUgdmFsdWVzIHdpdGggcGxhY2Vob2xkZXJzXG4gICAgICAgICAgICBtYW5hZ2VkLnJlcGxhY2VSdW50aW1lVmFsdWVzKHN0ZXAsIHZhbHVlLmFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbW1pdCh3cml0ZXMpO1xufVxuY29uc3QgSUdOT1JFID0gbmV3IFNldChbXG4gICAgTk9fV1JJVEVTLFxuICAgIFBVU0gsXG4gICAgUkVTVU1FLFxuICAgIElOVEVSUlVQVCxcbiAgICBSRVRVUk4sXG4gICAgRVJST1IsXG5dKTtcbmV4cG9ydCBmdW5jdGlvbiBfYXBwbHlXcml0ZXMoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2tzLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5nZXROZXh0VmVyc2lvbikge1xuICAgIC8vIFNvcnQgdGFza3MgYnkgZmlyc3QgMyBwYXRoIGVsZW1lbnRzIGZvciBkZXRlcm1pbmlzdGljIG9yZGVyXG4gICAgLy8gTGF0ZXIgcGF0aCBwYXJ0cyAobGlrZSB0YXNrIElEcykgYXJlIGlnbm9yZWQgZm9yIHNvcnRpbmdcbiAgICB0YXNrcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGFQYXRoID0gYS5wYXRoPy5zbGljZSgwLCAzKSB8fCBbXTtcbiAgICAgICAgY29uc3QgYlBhdGggPSBiLnBhdGg/LnNsaWNlKDAsIDMpIHx8IFtdO1xuICAgICAgICAvLyBDb21wYXJlIGVhY2ggcGF0aCBlbGVtZW50XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4oYVBhdGgubGVuZ3RoLCBiUGF0aC5sZW5ndGgpOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGlmIChhUGF0aFtpXSA8IGJQYXRoW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChhUGF0aFtpXSA+IGJQYXRoW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIG9uZSBwYXRoIGlzIHNob3J0ZXIsIGl0IGNvbWVzIGZpcnN0XG4gICAgICAgIHJldHVybiBhUGF0aC5sZW5ndGggLSBiUGF0aC5sZW5ndGg7XG4gICAgfSk7XG4gICAgLy8gaWYgbm8gdGFzayBoYXMgdHJpZ2dlcnMgdGhpcyBpcyBhcHBseWluZyB3cml0ZXMgZnJvbSB0aGUgbnVsbCB0YXNrIG9ubHlcbiAgICAvLyBzbyB3ZSBkb24ndCBkbyBhbnl0aGluZyBvdGhlciB0aGFuIHVwZGF0ZSB0aGUgY2hhbm5lbHMgd3JpdHRlbiB0b1xuICAgIGNvbnN0IGJ1bXBTdGVwID0gdGFza3Muc29tZSgodGFzaykgPT4gdGFzay50cmlnZ2Vycy5sZW5ndGggPiAwKTtcbiAgICAvLyBGaWx0ZXIgb3V0IG5vbiBpbnN0YW5jZXMgb2YgQmFzZUNoYW5uZWxcbiAgICBjb25zdCBvbmx5Q2hhbm5lbHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2hhbm5lbHMpLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gaXNCYXNlQ2hhbm5lbCh2YWx1ZSkpKTtcbiAgICAvLyBVcGRhdGUgc2VlbiB2ZXJzaW9uc1xuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICBpZiAoY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW3Rhc2submFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW3Rhc2submFtZV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNoYW4gb2YgdGFzay50cmlnZ2Vycykge1xuICAgICAgICAgICAgaWYgKGNoYW4gaW4gY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKSB7XG4gICAgICAgICAgICAgICAgY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW3Rhc2submFtZV1bY2hhbl0gPVxuICAgICAgICAgICAgICAgICAgICBjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnNbY2hhbl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgaGlnaGVzdCB2ZXJzaW9uIG9mIGFsbCBjaGFubmVsc1xuICAgIGxldCBtYXhWZXJzaW9uO1xuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbWF4VmVyc2lvbiA9IG1heENoYW5uZWxWZXJzaW9uKC4uLk9iamVjdC52YWx1ZXMoY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKSk7XG4gICAgfVxuICAgIC8vIENvbnN1bWUgYWxsIGNoYW5uZWxzIHRoYXQgd2VyZSByZWFkXG4gICAgY29uc3QgY2hhbm5lbHNUb0NvbnN1bWUgPSBuZXcgU2V0KHRhc2tzXG4gICAgICAgIC5mbGF0TWFwKCh0YXNrKSA9PiB0YXNrLnRyaWdnZXJzKVxuICAgICAgICAuZmlsdGVyKChjaGFuKSA9PiAhUkVTRVJWRUQuaW5jbHVkZXMoY2hhbikpKTtcbiAgICBmb3IgKGNvbnN0IGNoYW4gb2YgY2hhbm5lbHNUb0NvbnN1bWUpIHtcbiAgICAgICAgaWYgKGNoYW4gaW4gb25seUNoYW5uZWxzICYmIG9ubHlDaGFubmVsc1tjaGFuXS5jb25zdW1lKCkpIHtcbiAgICAgICAgICAgIGlmIChnZXROZXh0VmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dID0gZ2V0TmV4dFZlcnNpb24obWF4VmVyc2lvbiwgb25seUNoYW5uZWxzW2NoYW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDbGVhciBwZW5kaW5nIHNlbmRzXG4gICAgaWYgKGNoZWNrcG9pbnQucGVuZGluZ19zZW5kcz8ubGVuZ3RoICYmIGJ1bXBTdGVwKSB7XG4gICAgICAgIGNoZWNrcG9pbnQucGVuZGluZ19zZW5kcyA9IFtdO1xuICAgIH1cbiAgICAvLyBHcm91cCB3cml0ZXMgYnkgY2hhbm5lbFxuICAgIGNvbnN0IHBlbmRpbmdXcml0ZVZhbHVlc0J5Q2hhbm5lbCA9IHt9O1xuICAgIGNvbnN0IHBlbmRpbmdXcml0ZXNCeU1hbmFnZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBbY2hhbiwgdmFsXSBvZiB0YXNrLndyaXRlcykge1xuICAgICAgICAgICAgaWYgKElHTk9SRS5oYXMoY2hhbikpIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFuID09PSBUQVNLUykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSBicmFuY2ggaW4gMS4wXG4gICAgICAgICAgICAgICAgY2hlY2twb2ludC5wZW5kaW5nX3NlbmRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB2YWwubm9kZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogdmFsLmFyZ3MsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFuIGluIG9ubHlDaGFubmVscykge1xuICAgICAgICAgICAgICAgIGlmIChjaGFuIGluIHBlbmRpbmdXcml0ZVZhbHVlc0J5Q2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVWYWx1ZXNCeUNoYW5uZWxbY2hhbl0ucHVzaCh2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dyaXRlVmFsdWVzQnlDaGFubmVsW2NoYW5dID0gW3ZhbF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW4gaW4gcGVuZGluZ1dyaXRlc0J5TWFuYWdlZCkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVzQnlNYW5hZ2VkW2NoYW5dLnB1c2godmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXcml0ZXNCeU1hbmFnZWRbY2hhbl0gPSBbdmFsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZmluZCB0aGUgaGlnaGVzdCB2ZXJzaW9uIG9mIGFsbCBjaGFubmVsc1xuICAgIG1heFZlcnNpb24gPSB1bmRlZmluZWQ7XG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucykubGVuZ3RoID4gMCkge1xuICAgICAgICBtYXhWZXJzaW9uID0gbWF4Q2hhbm5lbFZlcnNpb24oLi4uT2JqZWN0LnZhbHVlcyhjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpKTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlZENoYW5uZWxzID0gbmV3IFNldCgpO1xuICAgIC8vIEFwcGx5IHdyaXRlcyB0byBjaGFubmVsc1xuICAgIGZvciAoY29uc3QgW2NoYW4sIHZhbHNdIG9mIE9iamVjdC5lbnRyaWVzKHBlbmRpbmdXcml0ZVZhbHVlc0J5Q2hhbm5lbCkpIHtcbiAgICAgICAgaWYgKGNoYW4gaW4gb25seUNoYW5uZWxzKSB7XG4gICAgICAgICAgICBsZXQgdXBkYXRlZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlZCA9IG9ubHlDaGFubmVsc1tjaGFuXS51cGRhdGUodmFscyk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gSW52YWxpZFVwZGF0ZUVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRFcnJvciA9IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEludmFsaWQgdXBkYXRlIGZvciBjaGFubmVsIFwiJHtjaGFufVwiIHdpdGggdmFsdWVzICR7SlNPTi5zdHJpbmdpZnkodmFscyl9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlZEVycm9yLmxjX2Vycm9yX2NvZGUgPSBlLmxjX2Vycm9yX2NvZGU7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHdyYXBwZWRFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVwZGF0ZWQgJiYgZ2V0TmV4dFZlcnNpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tjaGFuXSA9IGdldE5leHRWZXJzaW9uKG1heFZlcnNpb24sIG9ubHlDaGFubmVsc1tjaGFuXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVkQ2hhbm5lbHMuYWRkKGNoYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoYW5uZWxzIHRoYXQgd2VyZW4ndCB1cGRhdGVkIGluIHRoaXMgc3RlcCBhcmUgbm90aWZpZWQgb2YgYSBuZXcgc3RlcFxuICAgIGlmIChidW1wU3RlcCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW4gb2YgT2JqZWN0LmtleXMob25seUNoYW5uZWxzKSkge1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkQ2hhbm5lbHMuaGFzKGNoYW4pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG9ubHlDaGFubmVsc1tjaGFuXS51cGRhdGUoW10pO1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkICYmIGdldE5leHRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dID0gZ2V0TmV4dFZlcnNpb24obWF4VmVyc2lvbiwgb25seUNoYW5uZWxzW2NoYW5dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuIG1hbmFnZWQgdmFsdWVzIHdyaXRlcyB0byBiZSBhcHBsaWVkIGV4dGVybmFsbHlcbiAgICByZXR1cm4gcGVuZGluZ1dyaXRlc0J5TWFuYWdlZDtcbn1cbi8qKlxuICogUHJlcGFyZSB0aGUgc2V0IG9mIHRhc2tzIHRoYXQgd2lsbCBtYWtlIHVwIHRoZSBuZXh0IFByZWdlbCBzdGVwLlxuICogVGhpcyBpcyB0aGUgdW5pb24gb2YgYWxsIFBVU0ggdGFza3MgKFNlbmRzKSBhbmQgUFVMTCB0YXNrcyAobm9kZXMgdHJpZ2dlcmVkXG4gKiBieSBlZGdlcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcHJlcGFyZU5leHRUYXNrcyhjaGVja3BvaW50LCBwZW5kaW5nV3JpdGVzLCBwcm9jZXNzZXMsIGNoYW5uZWxzLCBtYW5hZ2VkLCBjb25maWcsIGZvckV4ZWN1dGlvbiwgZXh0cmEpIHtcbiAgICBjb25zdCB0YXNrcyA9IHt9O1xuICAgIC8vIENvbnN1bWUgcGVuZGluZyBwYWNrZXRzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja3BvaW50LnBlbmRpbmdfc2VuZHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgdGFzayA9IF9wcmVwYXJlU2luZ2xlVGFzayhbUFVTSCwgaV0sIGNoZWNrcG9pbnQsIHBlbmRpbmdXcml0ZXMsIHByb2Nlc3NlcywgY2hhbm5lbHMsIG1hbmFnZWQsIGNvbmZpZywgZm9yRXhlY3V0aW9uLCBleHRyYSk7XG4gICAgICAgIGlmICh0YXNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRhc2tzW3Rhc2suaWRdID0gdGFzaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDaGVjayBpZiBhbnkgcHJvY2Vzc2VzIHNob3VsZCBiZSBydW4gaW4gbmV4dCBzdGVwXG4gICAgLy8gSWYgc28sIHByZXBhcmUgdGhlIHZhbHVlcyB0byBiZSBwYXNzZWQgdG8gdGhlbVxuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhwcm9jZXNzZXMpKSB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBfcHJlcGFyZVNpbmdsZVRhc2soW1BVTEwsIG5hbWVdLCBjaGVja3BvaW50LCBwZW5kaW5nV3JpdGVzLCBwcm9jZXNzZXMsIGNoYW5uZWxzLCBtYW5hZ2VkLCBjb25maWcsIGZvckV4ZWN1dGlvbiwgZXh0cmEpO1xuICAgICAgICBpZiAodGFzayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0YXNrc1t0YXNrLmlkXSA9IHRhc2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhc2tzO1xufVxuLyoqXG4gKiBQcmVwYXJlcyBhIHNpbmdsZSB0YXNrIGZvciB0aGUgbmV4dCBQcmVnZWwgc3RlcCwgZ2l2ZW4gYSB0YXNrIHBhdGgsIHdoaWNoXG4gKiB1bmlxdWVseSBpZGVudGlmaWVzIGEgUFVTSCBvciBQVUxMIHRhc2sgd2l0aGluIHRoZSBncmFwaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9wcmVwYXJlU2luZ2xlVGFzayh0YXNrUGF0aCwgY2hlY2twb2ludCwgcGVuZGluZ1dyaXRlcywgcHJvY2Vzc2VzLCBjaGFubmVscywgbWFuYWdlZCwgY29uZmlnLCBmb3JFeGVjdXRpb24sIGV4dHJhKSB7XG4gICAgY29uc3QgeyBzdGVwLCBjaGVja3BvaW50ZXIsIG1hbmFnZXIgfSA9IGV4dHJhO1xuICAgIGNvbnN0IGNvbmZpZ3VyYWJsZSA9IGNvbmZpZy5jb25maWd1cmFibGUgPz8ge307XG4gICAgY29uc3QgcGFyZW50TmFtZXNwYWNlID0gY29uZmlndXJhYmxlLmNoZWNrcG9pbnRfbnMgPz8gXCJcIjtcbiAgICBpZiAodGFza1BhdGhbMF0gPT09IFBVU0ggJiYgaXNDYWxsKHRhc2tQYXRoW3Rhc2tQYXRoLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICBjb25zdCBjYWxsID0gdGFza1BhdGhbdGFza1BhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHByb2MgPSBnZXRSdW5uYWJsZUZvckZ1bmMoY2FsbC5uYW1lLCBjYWxsLmZ1bmMpO1xuICAgICAgICBjb25zdCB0cmlnZ2VycyA9IFtQVVNIXTtcbiAgICAgICAgY29uc3QgY2hlY2twb2ludE5hbWVzcGFjZSA9IHBhcmVudE5hbWVzcGFjZSA9PT0gXCJcIlxuICAgICAgICAgICAgPyBjYWxsLm5hbWVcbiAgICAgICAgICAgIDogYCR7cGFyZW50TmFtZXNwYWNlfSR7Q0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SfSR7Y2FsbC5uYW1lfWA7XG4gICAgICAgIGNvbnN0IGlkID0gdXVpZDUoSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICAgICAgY2hlY2twb2ludE5hbWVzcGFjZSxcbiAgICAgICAgICAgIHN0ZXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGNhbGwubmFtZSxcbiAgICAgICAgICAgIFBVU0gsXG4gICAgICAgICAgICB0YXNrUGF0aFsxXSxcbiAgICAgICAgICAgIHRhc2tQYXRoWzJdLFxuICAgICAgICBdKSwgY2hlY2twb2ludC5pZCk7XG4gICAgICAgIGNvbnN0IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlID0gYCR7Y2hlY2twb2ludE5hbWVzcGFjZX0ke0NIRUNLUE9JTlRfTkFNRVNQQUNFX0VORH0ke2lkfWA7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgbGFuZ2dyYXBoX3N0ZXA6IHN0ZXAsXG4gICAgICAgICAgICBsYW5nZ3JhcGhfbm9kZTogY2FsbC5uYW1lLFxuICAgICAgICAgICAgbGFuZ2dyYXBoX3RyaWdnZXJzOiB0cmlnZ2VycyxcbiAgICAgICAgICAgIGxhbmdncmFwaF9wYXRoOiB0YXNrUGF0aC5zbGljZSgwLCAzKSxcbiAgICAgICAgICAgIGxhbmdncmFwaF9jaGVja3BvaW50X25zOiB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZvckV4ZWN1dGlvbikge1xuICAgICAgICAgICAgY29uc3Qgd3JpdGVzID0gW107XG4gICAgICAgICAgICBjb25zdCB0YXNrID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGNhbGwubmFtZSxcbiAgICAgICAgICAgICAgICBpbnB1dDogY2FsbC5pbnB1dCxcbiAgICAgICAgICAgICAgICBwcm9jLFxuICAgICAgICAgICAgICAgIHdyaXRlcyxcbiAgICAgICAgICAgICAgICBjb25maWc6IHBhdGNoQ29uZmlnKG1lcmdlQ29uZmlncyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiBleHRyYS5zdG9yZSA/PyBjb25maWcuc3RvcmUsXG4gICAgICAgICAgICAgICAgfSksIHtcbiAgICAgICAgICAgICAgICAgICAgcnVuTmFtZTogY2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IG1hbmFnZXI/LmdldENoaWxkKGBncmFwaDpzdGVwOiR7c3RlcH1gKSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9UQVNLX0lEXTogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfU0VORF06ICh3cml0ZXNfKSA9PiBfbG9jYWxXcml0ZShzdGVwLCAoaXRlbXMpID0+IHdyaXRlcy5wdXNoKC4uLml0ZW1zKSwgcHJvY2Vzc2VzLCBtYW5hZ2VkLCB3cml0ZXNfKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1JFQURdOiAoc2VsZWN0XywgZnJlc2hfID0gZmFsc2UpID0+IF9sb2NhbFJlYWQoc3RlcCwgY2hlY2twb2ludCwgY2hhbm5lbHMsIG1hbmFnZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiB3cml0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogdGFza1BhdGguc2xpY2UoMCwgMyksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBzZWxlY3RfLCBmcmVzaF8pLFxuICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXTogY2hlY2twb2ludGVyID8/IGNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhcmVudE5hbWVzcGFjZV06IGNoZWNrcG9pbnQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfU0NSQVRDSFBBRF06IF9zY3JhdGNocGFkKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocGVuZGluZ1dyaXRlcyB8fCBbXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX1NDUkFUQ0hQQURdPy5yZXN1bWUgfHwgW10pLm1hcCgodikgPT4gW2lkLCBSRVNVTUUsIHZdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sIGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFXTogY2hlY2twb2ludC5jaGFubmVsX3ZhbHVlc1tQUkVWSU9VU10sXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja3BvaW50X2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja3BvaW50X25zOiB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0cmlnZ2VycyxcbiAgICAgICAgICAgICAgICByZXRyeV9wb2xpY3k6IGNhbGwucmV0cnksXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgcGF0aDogdGFza1BhdGguc2xpY2UoMCwgMyksXG4gICAgICAgICAgICAgICAgd3JpdGVyczogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGNhbGwubmFtZSxcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRzOiBbXSxcbiAgICAgICAgICAgICAgICBwYXRoOiB0YXNrUGF0aC5zbGljZSgwLCAzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodGFza1BhdGhbMF0gPT09IFBVU0gpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0eXBlb2YgdGFza1BhdGhbMV0gPT09IFwibnVtYmVyXCJcbiAgICAgICAgICAgID8gdGFza1BhdGhbMV1cbiAgICAgICAgICAgIDogcGFyc2VJbnQodGFza1BhdGhbMV0sIDEwKTtcbiAgICAgICAgaWYgKGluZGV4ID49IGNoZWNrcG9pbnQucGVuZGluZ19zZW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFja2V0ID0gY2hlY2twb2ludC5wZW5kaW5nX3NlbmRzW2luZGV4XTtcbiAgICAgICAgaWYgKCFfaXNTZW5kSW50ZXJmYWNlKHBhY2tldCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgSWdub3JpbmcgaW52YWxpZCBwYWNrZXQgJHtKU09OLnN0cmluZ2lmeShwYWNrZXQpfSBpbiBwZW5kaW5nIHNlbmRzLmApO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShwYWNrZXQubm9kZSBpbiBwcm9jZXNzZXMpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYElnbm9yaW5nIHVua25vd24gbm9kZSBuYW1lICR7cGFja2V0Lm5vZGV9IGluIHBlbmRpbmcgc2VuZHMuYCk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyaWdnZXJzID0gW1BVU0hdO1xuICAgICAgICBjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gcGFyZW50TmFtZXNwYWNlID09PSBcIlwiXG4gICAgICAgICAgICA/IHBhY2tldC5ub2RlXG4gICAgICAgICAgICA6IGAke3BhcmVudE5hbWVzcGFjZX0ke0NIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUn0ke3BhY2tldC5ub2RlfWA7XG4gICAgICAgIGNvbnN0IHRhc2tJZCA9IHV1aWQ1KEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAgICAgIGNoZWNrcG9pbnROYW1lc3BhY2UsXG4gICAgICAgICAgICBzdGVwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBwYWNrZXQubm9kZSxcbiAgICAgICAgICAgIFBVU0gsXG4gICAgICAgICAgICBpbmRleC50b1N0cmluZygpLFxuICAgICAgICBdKSwgY2hlY2twb2ludC5pZCk7XG4gICAgICAgIGNvbnN0IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlID0gYCR7Y2hlY2twb2ludE5hbWVzcGFjZX0ke0NIRUNLUE9JTlRfTkFNRVNQQUNFX0VORH0ke3Rhc2tJZH1gO1xuICAgICAgICBsZXQgbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICBsYW5nZ3JhcGhfc3RlcDogc3RlcCxcbiAgICAgICAgICAgIGxhbmdncmFwaF9ub2RlOiBwYWNrZXQubm9kZSxcbiAgICAgICAgICAgIGxhbmdncmFwaF90cmlnZ2VyczogdHJpZ2dlcnMsXG4gICAgICAgICAgICBsYW5nZ3JhcGhfcGF0aDogdGFza1BhdGgsXG4gICAgICAgICAgICBsYW5nZ3JhcGhfY2hlY2twb2ludF9uczogdGFza0NoZWNrcG9pbnROYW1lc3BhY2UsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmb3JFeGVjdXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2MgPSBwcm9jZXNzZXNbcGFja2V0Lm5vZGVdO1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHByb2MuZ2V0Tm9kZSgpO1xuICAgICAgICAgICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1hbmFnZWQucmVwbGFjZVJ1bnRpbWVQbGFjZWhvbGRlcnMoc3RlcCwgcGFja2V0LmFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChwcm9jLm1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEgPSB7IC4uLm1ldGFkYXRhLCAuLi5wcm9jLm1ldGFkYXRhIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhY2tldC5ub2RlLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogcGFja2V0LmFyZ3MsXG4gICAgICAgICAgICAgICAgICAgIHByb2M6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHN1YmdyYXBoczogcHJvYy5zdWJncmFwaHMsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBwYXRjaENvbmZpZyhtZXJnZUNvbmZpZ3MoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IHByb2MudGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBleHRyYS5zdG9yZSA/PyBjb25maWcuc3RvcmUsXG4gICAgICAgICAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5OYW1lOiBwYWNrZXQubm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogbWFuYWdlcj8uZ2V0Q2hpbGQoYGdyYXBoOnN0ZXA6JHtzdGVwfWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfVEFTS19JRF06IHRhc2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1NFTkRdOiAod3JpdGVzXykgPT4gX2xvY2FsV3JpdGUoc3RlcCwgKGl0ZW1zKSA9PiB3cml0ZXMucHVzaCguLi5pdGVtcyksIHByb2Nlc3NlcywgbWFuYWdlZCwgd3JpdGVzXyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfUkVBRF06IChzZWxlY3RfLCBmcmVzaF8gPSBmYWxzZSkgPT4gX2xvY2FsUmVhZChzdGVwLCBjaGVja3BvaW50LCBjaGFubmVscywgbWFuYWdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYWNrZXQubm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiB3cml0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiB0YXNrUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzZWxlY3RfLCBmcmVzaF8pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlciA/PyBjb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXJlbnROYW1lc3BhY2VdOiBjaGVja3BvaW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfU0NSQVRDSFBBRF06IF9zY3JhdGNocGFkKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHBlbmRpbmdXcml0ZXMgfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29uZmlndXJhYmxlW0NPTkZJR19LRVlfU0NSQVRDSFBBRF0/LnJlc3VtZSB8fCBbXSkubWFwKCh2KSA9PiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTUUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLCB0YXNrSWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFXTogY2hlY2twb2ludC5jaGFubmVsX3ZhbHVlc1tQUkVWSU9VU10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2twb2ludF9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgICAgICAgICByZXRyeV9wb2xpY3k6IHByb2MucmV0cnlQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0YXNrSWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHRhc2tQYXRoLFxuICAgICAgICAgICAgICAgICAgICB3cml0ZXJzOiBwcm9jLmdldFdyaXRlcnMoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogdGFza0lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBhY2tldC5ub2RlLFxuICAgICAgICAgICAgICAgIGludGVycnVwdHM6IFtdLFxuICAgICAgICAgICAgICAgIHBhdGg6IHRhc2tQYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0YXNrUGF0aFswXSA9PT0gUFVMTCkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGFza1BhdGhbMV0udG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcHJvYyA9IHByb2Nlc3Nlc1tuYW1lXTtcbiAgICAgICAgaWYgKHByb2MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudWxsVmVyc2lvbiA9IGdldE51bGxDaGFubmVsVmVyc2lvbihjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpO1xuICAgICAgICBpZiAobnVsbFZlcnNpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWVuID0gY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW25hbWVdID8/IHt9O1xuICAgICAgICBjb25zdCB0cmlnZ2VycyA9IHByb2MudHJpZ2dlcnNcbiAgICAgICAgICAgIC5maWx0ZXIoKGNoYW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRDaGFubmVsKGNoYW5uZWxzLCBjaGFuLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBpc0VtcHR5Q2hhbm5lbEVycm9yID0gXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICByZXN1bHQgaW5zdGFuY2VvZiBFcnJvciAmJlxuICAgICAgICAgICAgICAgIHJlc3VsdC5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZTtcbiAgICAgICAgICAgIHJldHVybiAoIWlzRW1wdHlDaGFubmVsRXJyb3IgJiZcbiAgICAgICAgICAgICAgICAoY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dID8/IG51bGxWZXJzaW9uKSA+XG4gICAgICAgICAgICAgICAgICAgIChzZWVuW2NoYW5dID8/IG51bGxWZXJzaW9uKSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgpO1xuICAgICAgICAvLyBJZiBhbnkgb2YgdGhlIGNoYW5uZWxzIHJlYWQgYnkgdGhpcyBwcm9jZXNzIHdlcmUgdXBkYXRlZFxuICAgICAgICBpZiAodHJpZ2dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdmFsID0gX3Byb2NJbnB1dChzdGVwLCBwcm9jLCBtYW5hZ2VkLCBjaGFubmVscywgZm9yRXhlY3V0aW9uKTtcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gcGFyZW50TmFtZXNwYWNlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgPyBuYW1lXG4gICAgICAgICAgICAgICAgOiBgJHtwYXJlbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHtuYW1lfWA7XG4gICAgICAgICAgICBjb25zdCB0YXNrSWQgPSB1dWlkNShKU09OLnN0cmluZ2lmeShbXG4gICAgICAgICAgICAgICAgY2hlY2twb2ludE5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICBzdGVwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBQVUxMLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgXSksIGNoZWNrcG9pbnQuaWQpO1xuICAgICAgICAgICAgY29uc3QgdGFza0NoZWNrcG9pbnROYW1lc3BhY2UgPSBgJHtjaGVja3BvaW50TmFtZXNwYWNlfSR7Q0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5EfSR7dGFza0lkfWA7XG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgbGFuZ2dyYXBoX3N0ZXA6IHN0ZXAsXG4gICAgICAgICAgICAgICAgbGFuZ2dyYXBoX25vZGU6IG5hbWUsXG4gICAgICAgICAgICAgICAgbGFuZ2dyYXBoX3RyaWdnZXJzOiB0cmlnZ2VycyxcbiAgICAgICAgICAgICAgICBsYW5nZ3JhcGhfcGF0aDogdGFza1BhdGgsXG4gICAgICAgICAgICAgICAgbGFuZ2dyYXBoX2NoZWNrcG9pbnRfbnM6IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChmb3JFeGVjdXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gcHJvYy5nZXROb2RlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvYy5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IHsgLi4ubWV0YWRhdGEsIC4uLnByb2MubWV0YWRhdGEgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3cml0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFza0NoZWNrcG9pbnROYW1lc3BhY2UgPSBgJHtjaGVja3BvaW50TmFtZXNwYWNlfSR7Q0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5EfSR7dGFza0lkfWA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2M6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJncmFwaHM6IHByb2Muc3ViZ3JhcGhzLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBwYXRjaENvbmZpZyhtZXJnZUNvbmZpZ3MoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogcHJvYy50YWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBleHRyYS5zdG9yZSA/PyBjb25maWcuc3RvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bk5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBtYW5hZ2VyPy5nZXRDaGlsZChgZ3JhcGg6c3RlcDoke3N0ZXB9YCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1RBU0tfSURdOiB0YXNrSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1NFTkRdOiAod3JpdGVzXykgPT4gX2xvY2FsV3JpdGUoc3RlcCwgKGl0ZW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXMucHVzaCguLi5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHByb2Nlc3NlcywgbWFuYWdlZCwgd3JpdGVzXyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1JFQURdOiAoc2VsZWN0XywgZnJlc2hfID0gZmFsc2UpID0+IF9sb2NhbFJlYWQoc3RlcCwgY2hlY2twb2ludCwgY2hhbm5lbHMsIG1hbmFnZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IHdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogdGFza1BhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHNlbGVjdF8sIGZyZXNoXyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlciA/PyBjb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXJlbnROYW1lc3BhY2VdOiBjaGVja3BvaW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9TQ1JBVENIUEFEXTogX3NjcmF0Y2hwYWQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHBlbmRpbmdXcml0ZXMgfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX1NDUkFUQ0hQQURdPy5yZXN1bWUgfHwgW10pLm1hcCgodikgPT4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTUUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLCB0YXNrSWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9QUkVWSU9VU19TVEFURV06IGNoZWNrcG9pbnQuY2hhbm5lbF92YWx1ZXNbUFJFVklPVVNdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja3BvaW50X2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlfcG9saWN5OiBwcm9jLnJldHJ5UG9saWN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRhc2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRhc2tQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyczogcHJvYy5nZXRXcml0ZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IHRhc2tJZCwgbmFtZSwgaW50ZXJydXB0czogW10sIHBhdGg6IHRhc2tQYXRoIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9wcm9jSW5wdXQoc3RlcCwgcHJvYywgbWFuYWdlZCwgY2hhbm5lbHMsIGZvckV4ZWN1dGlvbikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IHZhbDtcbiAgICBpZiAodHlwZW9mIHByb2MuY2hhbm5lbHMgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkocHJvYy5jaGFubmVscykpIHtcbiAgICAgICAgdmFsID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2ssIGNoYW5dIG9mIE9iamVjdC5lbnRyaWVzKHByb2MuY2hhbm5lbHMpKSB7XG4gICAgICAgICAgICBpZiAocHJvYy50cmlnZ2Vycy5pbmNsdWRlcyhjaGFuKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbFtrXSA9IHJlYWRDaGFubmVsKGNoYW5uZWxzLCBjaGFuLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYW4gaW4gY2hhbm5lbHMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YWxba10gPSByZWFkQ2hhbm5lbChjaGFubmVscywgY2hhbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxba10gPSBtYW5hZ2VkLmdldChrKT8uY2FsbChzdGVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHByb2MuY2hhbm5lbHMpKSB7XG4gICAgICAgIGxldCBzdWNjZXNzZnVsUmVhZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW4gb2YgcHJvYy5jaGFubmVscykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWwgPSByZWFkQ2hhbm5lbChjaGFubmVscywgY2hhbiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxSZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghc3VjY2Vzc2Z1bFJlYWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFubmVscyB0eXBlLCBleHBlY3RlZCBsaXN0IG9yIGRpY3QsIGdvdCAke3Byb2MuY2hhbm5lbHN9YCk7XG4gICAgfVxuICAgIC8vIElmIHRoZSBwcm9jZXNzIGhhcyBhIG1hcHBlciwgYXBwbHkgaXQgdG8gdGhlIHZhbHVlXG4gICAgaWYgKGZvckV4ZWN1dGlvbiAmJiBwcm9jLm1hcHBlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbCA9IHByb2MubWFwcGVyKHZhbCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5mdW5jdGlvbiBfc2NyYXRjaHBhZChwZW5kaW5nV3JpdGVzLCB0YXNrSWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjYWxsQ291bnRlcjogMCxcbiAgICAgICAgaW50ZXJydXB0Q291bnRlcjogLTEsXG4gICAgICAgIHJlc3VtZTogcGVuZGluZ1dyaXRlc1xuICAgICAgICAgICAgLmZpbHRlcigoW3dyaXRlVGFza0lkLCBjaGFuXSkgPT4gd3JpdGVUYXNrSWQgPT09IHRhc2tJZCAmJiBjaGFuID09PSBSRVNVTUUpXG4gICAgICAgICAgICAuZmxhdE1hcCgoW193cml0ZVRhc2tJZCwgX2NoYW4sIHJlc3VtZV0pID0+IHJlc3VtZSksXG4gICAgICAgIG51bGxSZXN1bWU6IHBlbmRpbmdXcml0ZXMuZmluZCgoW3dyaXRlVGFza0lkLCBjaGFuXSkgPT4gd3JpdGVUYXNrSWQgPT09IE5VTExfVEFTS19JRCAmJiBjaGFuID09PSBSRVNVTUUpPy5bMl0sXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/algo.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/call.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/call.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   call: () => (/* binding */ call),\n/* harmony export */   getRunnableForEntrypoint: () => (/* binding */ getRunnableForEntrypoint),\n/* harmony export */   getRunnableForFunc: () => (/* binding */ getRunnableForFunc)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./write.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _func_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../func/types.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/types.js\");\n\n\n\n\n\n\n/**\n * Wraps a user function in a Runnable that writes the returned value to the RETURN channel.\n */\nfunction getRunnableForFunc(name, func) {\n    const run = new _utils_js__WEBPACK_IMPORTED_MODULE_4__.RunnableCallable({\n        func: (input) => func(...input),\n        name,\n        trace: false,\n        recurse: false,\n    });\n    return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence({\n        name,\n        first: run,\n        last: new _write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{ channel: _constants_js__WEBPACK_IMPORTED_MODULE_2__.RETURN, value: _write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH }], [_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN]),\n    });\n}\nfunction getRunnableForEntrypoint(name, func) {\n    const run = new _utils_js__WEBPACK_IMPORTED_MODULE_4__.RunnableCallable({\n        func: (input, config) => {\n            return func(input, config);\n        },\n        name,\n        trace: false,\n        recurse: false,\n    });\n    return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence({\n        name,\n        first: run,\n        middle: [\n            new _write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([\n                {\n                    channel: _constants_js__WEBPACK_IMPORTED_MODULE_2__.END,\n                    value: _write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH,\n                    mapper: new _utils_js__WEBPACK_IMPORTED_MODULE_4__.RunnableCallable({\n                        func: (value) => ((0,_func_types_js__WEBPACK_IMPORTED_MODULE_5__.isEntrypointFinal)(value) ? value.value : value),\n                    }),\n                },\n            ], [_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN]),\n            new _write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([\n                {\n                    channel: _constants_js__WEBPACK_IMPORTED_MODULE_2__.PREVIOUS,\n                    value: _write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH,\n                    mapper: new _utils_js__WEBPACK_IMPORTED_MODULE_4__.RunnableCallable({\n                        func: (value) => {\n                            return (0,_func_types_js__WEBPACK_IMPORTED_MODULE_5__.isEntrypointFinal)(value) ? value.save : value;\n                        },\n                    }),\n                },\n            ]),\n        ],\n        last: new _utils_js__WEBPACK_IMPORTED_MODULE_4__.RunnableCallable({\n            func: (final) => (0,_func_types_js__WEBPACK_IMPORTED_MODULE_5__.isEntrypointFinal)(final) ? final.value : final,\n        }),\n    });\n}\nfunction call({ func, name, retry }, ...args) {\n    const config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    if (typeof config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CALL] === \"function\") {\n        return config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CALL](func, name, args, {\n            retry,\n            callbacks: config.callbacks,\n        });\n    }\n    throw new Error(\"Async local storage not initialized. Please call initializeAsyncLocalStorageSingleton() before using this function.\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9jYWxsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNrQjtBQUNNO0FBQy9CO0FBQ1I7QUFDTztBQUN0RDtBQUNBO0FBQ0E7QUFDTztBQUNQLG9CQUFvQix1REFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZUFBZSx1RUFBZ0I7QUFDL0I7QUFDQTtBQUNBLGtCQUFrQixtREFBWSxJQUFJLFNBQVMsaURBQU0sU0FBUyxrREFBVyxFQUFFLElBQUkscURBQVU7QUFDckYsS0FBSztBQUNMO0FBQ087QUFDUCxvQkFBb0IsdURBQWdCO0FBQ3BDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGVBQWUsdUVBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtREFBWTtBQUM1QjtBQUNBLDZCQUE2Qiw4Q0FBRztBQUNoQywyQkFBMkIsa0RBQVc7QUFDdEMsZ0NBQWdDLHVEQUFnQjtBQUNoRCwwQ0FBMEMsaUVBQWlCO0FBQzNELHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsZ0JBQWdCLHFEQUFVO0FBQzFCLGdCQUFnQixtREFBWTtBQUM1QjtBQUNBLDZCQUE2QixtREFBUTtBQUNyQywyQkFBMkIsa0RBQVc7QUFDdEMsZ0NBQWdDLHVEQUFnQjtBQUNoRDtBQUNBLG1DQUFtQyxpRUFBaUI7QUFDcEQseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGtCQUFrQix1REFBZ0I7QUFDbEMsNkJBQTZCLGlFQUFpQjtBQUM5QyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ08sZ0JBQWdCLG1CQUFtQjtBQUMxQyxtQkFBbUIsMEZBQWtDO0FBQ3JELHFDQUFxQywwREFBZTtBQUNwRCxtQ0FBbUMsMERBQWU7QUFDbEQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL2NhbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUnVubmFibGVTZXF1ZW5jZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvc2luZ2xldG9uc1wiO1xuaW1wb3J0IHsgQ09ORklHX0tFWV9DQUxMLCBFTkQsIFBSRVZJT1VTLCBSRVRVUk4sIFRBR19ISURERU4sIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgQ2hhbm5lbFdyaXRlLCBQQVNTVEhST1VHSCB9IGZyb20gXCIuL3dyaXRlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBpc0VudHJ5cG9pbnRGaW5hbCwgfSBmcm9tIFwiLi4vZnVuYy90eXBlcy5qc1wiO1xuLyoqXG4gKiBXcmFwcyBhIHVzZXIgZnVuY3Rpb24gaW4gYSBSdW5uYWJsZSB0aGF0IHdyaXRlcyB0aGUgcmV0dXJuZWQgdmFsdWUgdG8gdGhlIFJFVFVSTiBjaGFubmVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UnVubmFibGVGb3JGdW5jKG5hbWUsIGZ1bmMpIHtcbiAgICBjb25zdCBydW4gPSBuZXcgUnVubmFibGVDYWxsYWJsZSh7XG4gICAgICAgIGZ1bmM6IChpbnB1dCkgPT4gZnVuYyguLi5pbnB1dCksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHRyYWNlOiBmYWxzZSxcbiAgICAgICAgcmVjdXJzZTogZmFsc2UsXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZmlyc3Q6IHJ1bixcbiAgICAgICAgbGFzdDogbmV3IENoYW5uZWxXcml0ZShbeyBjaGFubmVsOiBSRVRVUk4sIHZhbHVlOiBQQVNTVEhST1VHSCB9XSwgW1RBR19ISURERU5dKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW5uYWJsZUZvckVudHJ5cG9pbnQobmFtZSwgZnVuYykge1xuICAgIGNvbnN0IHJ1biA9IG5ldyBSdW5uYWJsZUNhbGxhYmxlKHtcbiAgICAgICAgZnVuYzogKGlucHV0LCBjb25maWcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKGlucHV0LCBjb25maWcpO1xuICAgICAgICB9LFxuICAgICAgICBuYW1lLFxuICAgICAgICB0cmFjZTogZmFsc2UsXG4gICAgICAgIHJlY3Vyc2U6IGZhbHNlLFxuICAgIH0pO1xuICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGZpcnN0OiBydW4sXG4gICAgICAgIG1pZGRsZTogW1xuICAgICAgICAgICAgbmV3IENoYW5uZWxXcml0ZShbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBFTkQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBQQVNTVEhST1VHSCxcbiAgICAgICAgICAgICAgICAgICAgbWFwcGVyOiBuZXcgUnVubmFibGVDYWxsYWJsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jOiAodmFsdWUpID0+IChpc0VudHJ5cG9pbnRGaW5hbCh2YWx1ZSkgPyB2YWx1ZS52YWx1ZSA6IHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sIFtUQUdfSElEREVOXSksXG4gICAgICAgICAgICBuZXcgQ2hhbm5lbFdyaXRlKFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IFBSRVZJT1VTLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUEFTU1RIUk9VR0gsXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlcjogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuYzogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRW50cnlwb2ludEZpbmFsKHZhbHVlKSA/IHZhbHVlLnNhdmUgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgXSxcbiAgICAgICAgbGFzdDogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuICAgICAgICAgICAgZnVuYzogKGZpbmFsKSA9PiBpc0VudHJ5cG9pbnRGaW5hbChmaW5hbCkgPyBmaW5hbC52YWx1ZSA6IGZpbmFsLFxuICAgICAgICB9KSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYWxsKHsgZnVuYywgbmFtZSwgcmV0cnkgfSwgLi4uYXJncykge1xuICAgIGNvbnN0IGNvbmZpZyA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NBTExdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DQUxMXShmdW5jLCBuYW1lLCBhcmdzLCB7XG4gICAgICAgICAgICByZXRyeSxcbiAgICAgICAgICAgIGNhbGxiYWNrczogY29uZmlnLmNhbGxiYWNrcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIGxvY2FsIHN0b3JhZ2Ugbm90IGluaXRpYWxpemVkLiBQbGVhc2UgY2FsbCBpbml0aWFsaXplQXN5bmNMb2NhbFN0b3JhZ2VTaW5nbGV0b24oKSBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbi5cIik7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/call.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/debug.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/debug.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mapDebugCheckpoint: () => (/* binding */ mapDebugCheckpoint),\n/* harmony export */   mapDebugTaskResults: () => (/* binding */ mapDebugTaskResults),\n/* harmony export */   mapDebugTasks: () => (/* binding */ mapDebugTasks),\n/* harmony export */   printCheckpoint: () => (/* binding */ printCheckpoint),\n/* harmony export */   printStepCheckpoint: () => (/* binding */ printStepCheckpoint),\n/* harmony export */   printStepTasks: () => (/* binding */ printStepTasks),\n/* harmony export */   printStepWrites: () => (/* binding */ printStepWrites),\n/* harmony export */   tasksWithWrites: () => (/* binding */ tasksWithWrites)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./io.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _utils_subgraph_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/subgraph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n\n\n\n\nconst COLORS_MAP = {\n    blue: {\n        start: \"\\x1b[34m\",\n        end: \"\\x1b[0m\",\n    },\n    green: {\n        start: \"\\x1b[32m\",\n        end: \"\\x1b[0m\",\n    },\n    yellow: {\n        start: \"\\x1b[33;1m\",\n        end: \"\\x1b[0m\",\n    },\n};\n/**\n * Wrap some text in a color for printing to the console.\n */\nconst wrap = (color, text) => `${color.start}${text}${color.end}`;\nfunction printCheckpoint(step, channels) {\n    console.log([\n        `${wrap(COLORS_MAP.blue, \"[langgraph/checkpoint]\")}`,\n        `Finishing step ${step}. Channel values:\\n`,\n        `\\n${JSON.stringify(Object.fromEntries(_readChannels(channels)), null, 2)}`,\n    ].join(\"\"));\n}\nfunction* _readChannels(channels\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    for (const [name, channel] of Object.entries(channels)) {\n        try {\n            yield [name, channel.get()];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        }\n        catch (error) {\n            if (error.name === _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError.unminifiable_name) {\n                // Skip the channel if it's empty\n                continue;\n            }\n            else {\n                throw error; // Re-throw the error if it's not an EmptyChannelError\n            }\n        }\n    }\n}\nfunction* mapDebugTasks(step, tasks) {\n    const ts = new Date().toISOString();\n    for (const { id, name, input, config, triggers, writes } of tasks) {\n        if (config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN))\n            continue;\n        const interrupts = writes\n            .filter(([writeId, n]) => {\n            return writeId === id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT;\n        })\n            .map(([, v]) => {\n            return v;\n        });\n        yield {\n            type: \"task\",\n            timestamp: ts,\n            step,\n            payload: {\n                id,\n                name,\n                input,\n                triggers,\n                interrupts,\n            },\n        };\n    }\n}\nfunction* mapDebugTaskResults(step, tasks, streamChannels) {\n    const ts = new Date().toISOString();\n    for (const [{ id, name, config }, writes] of tasks) {\n        if (config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN))\n            continue;\n        yield {\n            type: \"task_result\",\n            timestamp: ts,\n            step,\n            payload: {\n                id,\n                name,\n                result: writes.filter(([channel]) => {\n                    return Array.isArray(streamChannels)\n                        ? streamChannels.includes(channel)\n                        : channel === streamChannels;\n                }),\n                interrupts: writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT).map((w) => w[1]),\n            },\n        };\n    }\n}\nfunction* mapDebugCheckpoint(step, config, channels, streamChannels, metadata, tasks, pendingWrites, parentConfig) {\n    function formatConfig(config) {\n        // make sure the config is consistent with Python\n        const pyConfig = {};\n        if (config.callbacks != null)\n            pyConfig.callbacks = config.callbacks;\n        if (config.configurable != null)\n            pyConfig.configurable = config.configurable;\n        if (config.maxConcurrency != null)\n            pyConfig.max_concurrency = config.maxConcurrency;\n        if (config.metadata != null)\n            pyConfig.metadata = config.metadata;\n        if (config.recursionLimit != null)\n            pyConfig.recursion_limit = config.recursionLimit;\n        if (config.runId != null)\n            pyConfig.run_id = config.runId;\n        if (config.runName != null)\n            pyConfig.run_name = config.runName;\n        if (config.tags != null)\n            pyConfig.tags = config.tags;\n        return pyConfig;\n    }\n    const parentNs = config.configurable?.checkpoint_ns;\n    const taskStates = {};\n    for (const task of tasks) {\n        const candidates = task.subgraphs?.length ? task.subgraphs : [task.proc];\n        if (!candidates.find(_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_3__.findSubgraphPregel))\n            continue;\n        let taskNs = `${task.name}:${task.id}`;\n        if (parentNs)\n            taskNs = `${parentNs}|${taskNs}`;\n        taskStates[task.id] = {\n            configurable: {\n                thread_id: config.configurable?.thread_id,\n                checkpoint_ns: taskNs,\n            },\n        };\n    }\n    const ts = new Date().toISOString();\n    yield {\n        type: \"checkpoint\",\n        timestamp: ts,\n        step,\n        payload: {\n            config: formatConfig(config),\n            values: (0,_io_js__WEBPACK_IMPORTED_MODULE_2__.readChannels)(channels, streamChannels),\n            metadata,\n            next: tasks.map((task) => task.name),\n            tasks: tasksWithWrites(tasks, pendingWrites, taskStates),\n            parentConfig: parentConfig ? formatConfig(parentConfig) : undefined,\n        },\n    };\n}\nfunction tasksWithWrites(tasks, pendingWrites, states) {\n    return tasks.map((task) => {\n        const error = pendingWrites.find(([id, n]) => id === task.id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.ERROR)?.[2];\n        const interrupts = pendingWrites\n            .filter(([id, n]) => {\n            return id === task.id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT;\n        })\n            .map(([, , v]) => {\n            return v;\n        });\n        if (error) {\n            return {\n                id: task.id,\n                name: task.name,\n                path: task.path,\n                error,\n                interrupts,\n            };\n        }\n        return {\n            id: task.id,\n            name: task.name,\n            path: task.path,\n            interrupts,\n            state: states?.[task.id],\n        };\n    });\n}\nfunction printStepCheckpoint(step, channels, whitelist) {\n    console.log([\n        `${wrap(COLORS_MAP.blue, `[${step}:checkpoint]`)}`,\n        `\\x1b[1m State at the end of step ${step}:\\x1b[0m\\n`,\n        JSON.stringify((0,_io_js__WEBPACK_IMPORTED_MODULE_2__.readChannels)(channels, whitelist), null, 2),\n    ].join(\"\"));\n}\nfunction printStepTasks(step, nextTasks) {\n    const nTasks = nextTasks.length;\n    console.log([\n        `${wrap(COLORS_MAP.blue, `[${step}:tasks]`)}`,\n        `\\x1b[1m Starting step ${step} with ${nTasks} task${nTasks === 1 ? \"\" : \"s\"}:\\x1b[0m\\n`,\n        nextTasks\n            .map((task) => `- ${wrap(COLORS_MAP.green, String(task.name))} -> ${JSON.stringify(task.input, null, 2)}`)\n            .join(\"\\n\"),\n    ].join(\"\"));\n}\nfunction printStepWrites(step, writes, whitelist) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const byChannel = {};\n    for (const [channel, value] of writes) {\n        if (whitelist.includes(channel)) {\n            if (!byChannel[channel]) {\n                byChannel[channel] = [];\n            }\n            byChannel[channel].push(value);\n        }\n    }\n    console.log([\n        `${wrap(COLORS_MAP.blue, `[${step}:writes]`)}`,\n        `\\x1b[1m Finished step ${step} with writes to ${Object.keys(byChannel).length} channel${Object.keys(byChannel).length !== 1 ? \"s\" : \"\"}:\\x1b[0m\\n`,\n        Object.entries(byChannel)\n            .map(([name, vals]) => `- ${wrap(COLORS_MAP.yellow, name)} -> ${vals\n            .map((v) => JSON.stringify(v))\n            .join(\", \")}`)\n            .join(\"\\n\"),\n    ].join(\"\"));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9kZWJ1Zy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDZDtBQUNWO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxZQUFZLEVBQUUsS0FBSyxFQUFFLFVBQVU7QUFDekQ7QUFDUDtBQUNBLFdBQVcsZ0RBQWdEO0FBQzNELDBCQUEwQixLQUFLO0FBQy9CLGFBQWEscUVBQXFFO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseURBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGlCQUFpQiw0Q0FBNEM7QUFDN0QsbUNBQW1DLHFEQUFVO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvREFBUztBQUNwRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQyxtQ0FBbUMscURBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLDBEQUEwRCxvREFBUztBQUNuRSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRUFBa0I7QUFDL0M7QUFDQSx3QkFBd0IsVUFBVSxHQUFHLFFBQVE7QUFDN0M7QUFDQSx3QkFBd0IsU0FBUyxHQUFHLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9EQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0EsOEVBQThFLGdEQUFLO0FBQ25GO0FBQ0E7QUFDQSwyQ0FBMkMsb0RBQVM7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0EsV0FBVywwQkFBMEIsS0FBSyxlQUFlO0FBQ3pELDRDQUE0QyxLQUFLO0FBQ2pELHVCQUF1QixvREFBWTtBQUNuQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsV0FBVywwQkFBMEIsS0FBSyxVQUFVO0FBQ3BELGlDQUFpQyxNQUFNLE9BQU8sUUFBUSxNQUFNLHdCQUF3QjtBQUNwRjtBQUNBLGdDQUFnQywyQ0FBMkMsS0FBSyxvQ0FBb0M7QUFDcEg7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywwQkFBMEIsS0FBSyxXQUFXO0FBQ3JELGlDQUFpQyxNQUFNLGlCQUFpQiwrQkFBK0IsU0FBUywrQ0FBK0M7QUFDL0k7QUFDQSx3Q0FBd0MsK0JBQStCLEtBQUs7QUFDNUU7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9kZWJ1Zy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFUlJPUiwgSU5URVJSVVBULCBUQUdfSElEREVOIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgRW1wdHlDaGFubmVsRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyByZWFkQ2hhbm5lbHMgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgZmluZFN1YmdyYXBoUHJlZ2VsIH0gZnJvbSBcIi4vdXRpbHMvc3ViZ3JhcGguanNcIjtcbmNvbnN0IENPTE9SU19NQVAgPSB7XG4gICAgYmx1ZToge1xuICAgICAgICBzdGFydDogXCJcXHgxYlszNG1cIixcbiAgICAgICAgZW5kOiBcIlxceDFiWzBtXCIsXG4gICAgfSxcbiAgICBncmVlbjoge1xuICAgICAgICBzdGFydDogXCJcXHgxYlszMm1cIixcbiAgICAgICAgZW5kOiBcIlxceDFiWzBtXCIsXG4gICAgfSxcbiAgICB5ZWxsb3c6IHtcbiAgICAgICAgc3RhcnQ6IFwiXFx4MWJbMzM7MW1cIixcbiAgICAgICAgZW5kOiBcIlxceDFiWzBtXCIsXG4gICAgfSxcbn07XG4vKipcbiAqIFdyYXAgc29tZSB0ZXh0IGluIGEgY29sb3IgZm9yIHByaW50aW5nIHRvIHRoZSBjb25zb2xlLlxuICovXG5jb25zdCB3cmFwID0gKGNvbG9yLCB0ZXh0KSA9PiBgJHtjb2xvci5zdGFydH0ke3RleHR9JHtjb2xvci5lbmR9YDtcbmV4cG9ydCBmdW5jdGlvbiBwcmludENoZWNrcG9pbnQoc3RlcCwgY2hhbm5lbHMpIHtcbiAgICBjb25zb2xlLmxvZyhbXG4gICAgICAgIGAke3dyYXAoQ09MT1JTX01BUC5ibHVlLCBcIltsYW5nZ3JhcGgvY2hlY2twb2ludF1cIil9YCxcbiAgICAgICAgYEZpbmlzaGluZyBzdGVwICR7c3RlcH0uIENoYW5uZWwgdmFsdWVzOlxcbmAsXG4gICAgICAgIGBcXG4ke0pTT04uc3RyaW5naWZ5KE9iamVjdC5mcm9tRW50cmllcyhfcmVhZENoYW5uZWxzKGNoYW5uZWxzKSksIG51bGwsIDIpfWAsXG4gICAgXS5qb2luKFwiXCIpKTtcbn1cbmZ1bmN0aW9uKiBfcmVhZENoYW5uZWxzKGNoYW5uZWxzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgY2hhbm5lbF0gb2YgT2JqZWN0LmVudHJpZXMoY2hhbm5lbHMpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB5aWVsZCBbbmFtZSwgY2hhbm5lbC5nZXQoKV07XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB0aGUgY2hhbm5lbCBpZiBpdCdzIGVtcHR5XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGlmIGl0J3Mgbm90IGFuIEVtcHR5Q2hhbm5lbEVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24qIG1hcERlYnVnVGFza3Moc3RlcCwgdGFza3MpIHtcbiAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBmb3IgKGNvbnN0IHsgaWQsIG5hbWUsIGlucHV0LCBjb25maWcsIHRyaWdnZXJzLCB3cml0ZXMgfSBvZiB0YXNrcykge1xuICAgICAgICBpZiAoY29uZmlnPy50YWdzPy5pbmNsdWRlcyhUQUdfSElEREVOKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBpbnRlcnJ1cHRzID0gd3JpdGVzXG4gICAgICAgICAgICAuZmlsdGVyKChbd3JpdGVJZCwgbl0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUlkID09PSBpZCAmJiBuID09PSBJTlRFUlJVUFQ7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAubWFwKChbLCB2XSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICB0eXBlOiBcInRhc2tcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdHMsXG4gICAgICAgICAgICBzdGVwLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcnMsXG4gICAgICAgICAgICAgICAgaW50ZXJydXB0cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uKiBtYXBEZWJ1Z1Rhc2tSZXN1bHRzKHN0ZXAsIHRhc2tzLCBzdHJlYW1DaGFubmVscykge1xuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGZvciAoY29uc3QgW3sgaWQsIG5hbWUsIGNvbmZpZyB9LCB3cml0ZXNdIG9mIHRhc2tzKSB7XG4gICAgICAgIGlmIChjb25maWc/LnRhZ3M/LmluY2x1ZGVzKFRBR19ISURERU4pKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgIHR5cGU6IFwidGFza19yZXN1bHRcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdHMsXG4gICAgICAgICAgICBzdGVwLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiB3cml0ZXMuZmlsdGVyKChbY2hhbm5lbF0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc3RyZWFtQ2hhbm5lbHMpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHN0cmVhbUNoYW5uZWxzLmluY2x1ZGVzKGNoYW5uZWwpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNoYW5uZWwgPT09IHN0cmVhbUNoYW5uZWxzO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGludGVycnVwdHM6IHdyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gPT09IElOVEVSUlVQVCkubWFwKCh3KSA9PiB3WzFdKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uKiBtYXBEZWJ1Z0NoZWNrcG9pbnQoc3RlcCwgY29uZmlnLCBjaGFubmVscywgc3RyZWFtQ2hhbm5lbHMsIG1ldGFkYXRhLCB0YXNrcywgcGVuZGluZ1dyaXRlcywgcGFyZW50Q29uZmlnKSB7XG4gICAgZnVuY3Rpb24gZm9ybWF0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGNvbmZpZyBpcyBjb25zaXN0ZW50IHdpdGggUHl0aG9uXG4gICAgICAgIGNvbnN0IHB5Q29uZmlnID0ge307XG4gICAgICAgIGlmIChjb25maWcuY2FsbGJhY2tzICE9IG51bGwpXG4gICAgICAgICAgICBweUNvbmZpZy5jYWxsYmFja3MgPSBjb25maWcuY2FsbGJhY2tzO1xuICAgICAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYWJsZSAhPSBudWxsKVxuICAgICAgICAgICAgcHlDb25maWcuY29uZmlndXJhYmxlID0gY29uZmlnLmNvbmZpZ3VyYWJsZTtcbiAgICAgICAgaWYgKGNvbmZpZy5tYXhDb25jdXJyZW5jeSAhPSBudWxsKVxuICAgICAgICAgICAgcHlDb25maWcubWF4X2NvbmN1cnJlbmN5ID0gY29uZmlnLm1heENvbmN1cnJlbmN5O1xuICAgICAgICBpZiAoY29uZmlnLm1ldGFkYXRhICE9IG51bGwpXG4gICAgICAgICAgICBweUNvbmZpZy5tZXRhZGF0YSA9IGNvbmZpZy5tZXRhZGF0YTtcbiAgICAgICAgaWYgKGNvbmZpZy5yZWN1cnNpb25MaW1pdCAhPSBudWxsKVxuICAgICAgICAgICAgcHlDb25maWcucmVjdXJzaW9uX2xpbWl0ID0gY29uZmlnLnJlY3Vyc2lvbkxpbWl0O1xuICAgICAgICBpZiAoY29uZmlnLnJ1bklkICE9IG51bGwpXG4gICAgICAgICAgICBweUNvbmZpZy5ydW5faWQgPSBjb25maWcucnVuSWQ7XG4gICAgICAgIGlmIChjb25maWcucnVuTmFtZSAhPSBudWxsKVxuICAgICAgICAgICAgcHlDb25maWcucnVuX25hbWUgPSBjb25maWcucnVuTmFtZTtcbiAgICAgICAgaWYgKGNvbmZpZy50YWdzICE9IG51bGwpXG4gICAgICAgICAgICBweUNvbmZpZy50YWdzID0gY29uZmlnLnRhZ3M7XG4gICAgICAgIHJldHVybiBweUNvbmZpZztcbiAgICB9XG4gICAgY29uc3QgcGFyZW50TnMgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zO1xuICAgIGNvbnN0IHRhc2tTdGF0ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IHRhc2suc3ViZ3JhcGhzPy5sZW5ndGggPyB0YXNrLnN1YmdyYXBocyA6IFt0YXNrLnByb2NdO1xuICAgICAgICBpZiAoIWNhbmRpZGF0ZXMuZmluZChmaW5kU3ViZ3JhcGhQcmVnZWwpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxldCB0YXNrTnMgPSBgJHt0YXNrLm5hbWV9OiR7dGFzay5pZH1gO1xuICAgICAgICBpZiAocGFyZW50TnMpXG4gICAgICAgICAgICB0YXNrTnMgPSBgJHtwYXJlbnROc318JHt0YXNrTnN9YDtcbiAgICAgICAgdGFza1N0YXRlc1t0YXNrLmlkXSA9IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgIHRocmVhZF9pZDogY29uZmlnLmNvbmZpZ3VyYWJsZT8udGhyZWFkX2lkLFxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IHRhc2tOcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIHlpZWxkIHtcbiAgICAgICAgdHlwZTogXCJjaGVja3BvaW50XCIsXG4gICAgICAgIHRpbWVzdGFtcDogdHMsXG4gICAgICAgIHN0ZXAsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIGNvbmZpZzogZm9ybWF0Q29uZmlnKGNvbmZpZyksXG4gICAgICAgICAgICB2YWx1ZXM6IHJlYWRDaGFubmVscyhjaGFubmVscywgc3RyZWFtQ2hhbm5lbHMpLFxuICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICBuZXh0OiB0YXNrcy5tYXAoKHRhc2spID0+IHRhc2submFtZSksXG4gICAgICAgICAgICB0YXNrczogdGFza3NXaXRoV3JpdGVzKHRhc2tzLCBwZW5kaW5nV3JpdGVzLCB0YXNrU3RhdGVzKSxcbiAgICAgICAgICAgIHBhcmVudENvbmZpZzogcGFyZW50Q29uZmlnID8gZm9ybWF0Q29uZmlnKHBhcmVudENvbmZpZykgOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0YXNrc1dpdGhXcml0ZXModGFza3MsIHBlbmRpbmdXcml0ZXMsIHN0YXRlcykge1xuICAgIHJldHVybiB0YXNrcy5tYXAoKHRhc2spID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBwZW5kaW5nV3JpdGVzLmZpbmQoKFtpZCwgbl0pID0+IGlkID09PSB0YXNrLmlkICYmIG4gPT09IEVSUk9SKT8uWzJdO1xuICAgICAgICBjb25zdCBpbnRlcnJ1cHRzID0gcGVuZGluZ1dyaXRlc1xuICAgICAgICAgICAgLmZpbHRlcigoW2lkLCBuXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlkID09PSB0YXNrLmlkICYmIG4gPT09IElOVEVSUlVQVDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5tYXAoKFssICwgdl0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiB0YXNrLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRhc2submFtZSxcbiAgICAgICAgICAgICAgICBwYXRoOiB0YXNrLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgaW50ZXJydXB0cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0YXNrLmlkLFxuICAgICAgICAgICAgbmFtZTogdGFzay5uYW1lLFxuICAgICAgICAgICAgcGF0aDogdGFzay5wYXRoLFxuICAgICAgICAgICAgaW50ZXJydXB0cyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXM/Llt0YXNrLmlkXSxcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcmludFN0ZXBDaGVja3BvaW50KHN0ZXAsIGNoYW5uZWxzLCB3aGl0ZWxpc3QpIHtcbiAgICBjb25zb2xlLmxvZyhbXG4gICAgICAgIGAke3dyYXAoQ09MT1JTX01BUC5ibHVlLCBgWyR7c3RlcH06Y2hlY2twb2ludF1gKX1gLFxuICAgICAgICBgXFx4MWJbMW0gU3RhdGUgYXQgdGhlIGVuZCBvZiBzdGVwICR7c3RlcH06XFx4MWJbMG1cXG5gLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShyZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHdoaXRlbGlzdCksIG51bGwsIDIpLFxuICAgIF0uam9pbihcIlwiKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJpbnRTdGVwVGFza3Moc3RlcCwgbmV4dFRhc2tzKSB7XG4gICAgY29uc3QgblRhc2tzID0gbmV4dFRhc2tzLmxlbmd0aDtcbiAgICBjb25zb2xlLmxvZyhbXG4gICAgICAgIGAke3dyYXAoQ09MT1JTX01BUC5ibHVlLCBgWyR7c3RlcH06dGFza3NdYCl9YCxcbiAgICAgICAgYFxceDFiWzFtIFN0YXJ0aW5nIHN0ZXAgJHtzdGVwfSB3aXRoICR7blRhc2tzfSB0YXNrJHtuVGFza3MgPT09IDEgPyBcIlwiIDogXCJzXCJ9OlxceDFiWzBtXFxuYCxcbiAgICAgICAgbmV4dFRhc2tzXG4gICAgICAgICAgICAubWFwKCh0YXNrKSA9PiBgLSAke3dyYXAoQ09MT1JTX01BUC5ncmVlbiwgU3RyaW5nKHRhc2submFtZSkpfSAtPiAke0pTT04uc3RyaW5naWZ5KHRhc2suaW5wdXQsIG51bGwsIDIpfWApXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKSxcbiAgICBdLmpvaW4oXCJcIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByaW50U3RlcFdyaXRlcyhzdGVwLCB3cml0ZXMsIHdoaXRlbGlzdCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgYnlDaGFubmVsID0ge307XG4gICAgZm9yIChjb25zdCBbY2hhbm5lbCwgdmFsdWVdIG9mIHdyaXRlcykge1xuICAgICAgICBpZiAod2hpdGVsaXN0LmluY2x1ZGVzKGNoYW5uZWwpKSB7XG4gICAgICAgICAgICBpZiAoIWJ5Q2hhbm5lbFtjaGFubmVsXSkge1xuICAgICAgICAgICAgICAgIGJ5Q2hhbm5lbFtjaGFubmVsXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnlDaGFubmVsW2NoYW5uZWxdLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFtcbiAgICAgICAgYCR7d3JhcChDT0xPUlNfTUFQLmJsdWUsIGBbJHtzdGVwfTp3cml0ZXNdYCl9YCxcbiAgICAgICAgYFxceDFiWzFtIEZpbmlzaGVkIHN0ZXAgJHtzdGVwfSB3aXRoIHdyaXRlcyB0byAke09iamVjdC5rZXlzKGJ5Q2hhbm5lbCkubGVuZ3RofSBjaGFubmVsJHtPYmplY3Qua2V5cyhieUNoYW5uZWwpLmxlbmd0aCAhPT0gMSA/IFwic1wiIDogXCJcIn06XFx4MWJbMG1cXG5gLFxuICAgICAgICBPYmplY3QuZW50cmllcyhieUNoYW5uZWwpXG4gICAgICAgICAgICAubWFwKChbbmFtZSwgdmFsc10pID0+IGAtICR7d3JhcChDT0xPUlNfTUFQLnllbGxvdywgbmFtZSl9IC0+ICR7dmFsc1xuICAgICAgICAgICAgLm1hcCgodikgPT4gSlNPTi5zdHJpbmdpZnkodikpXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpfWApXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKSxcbiAgICBdLmpvaW4oXCJcIikpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/debug.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/index.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/index.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Channel: () => (/* binding */ Channel),\n/* harmony export */   Pregel: () => (/* binding */ Pregel)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.15_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferu_wxyqc73w5wk4lx2cfu5zaddqqi/node_modules/@langchain/langgraph-checkpoint/index.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../channels/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _read_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./read.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/validate.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./io.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _debug_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./debug.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/debug.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./write.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _algo_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./algo.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/algo.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _utils_subgraph_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/subgraph.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* harmony import */ var _loop_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./loop.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/loop.js\");\n/* harmony import */ var _managed_base_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../managed/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/base.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _utils_config_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/config.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./messages.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/messages.js\");\n/* harmony import */ var _runner_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./runner.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/runner.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./stream.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/stream.js\");\n/* eslint-disable no-param-reassign */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isString(value) {\n    return typeof value === \"string\";\n}\nclass Channel {\n    static subscribeTo(channels, options) {\n        const { key, tags } = options ?? {};\n        if (Array.isArray(channels) && key !== undefined) {\n            throw new Error(\"Can't specify a key when subscribing to multiple channels\");\n        }\n        let channelMappingOrArray;\n        if (isString(channels)) {\n            if (key) {\n                channelMappingOrArray = { [key]: channels };\n            }\n            else {\n                channelMappingOrArray = [channels];\n            }\n        }\n        else {\n            channelMappingOrArray = Object.fromEntries(channels.map((chan) => [chan, chan]));\n        }\n        const triggers = Array.isArray(channels) ? channels : [channels];\n        return new _read_js__WEBPACK_IMPORTED_MODULE_3__.PregelNode({\n            channels: channelMappingOrArray,\n            triggers,\n            tags,\n        });\n    }\n    static writeTo(channels, kwargs) {\n        const channelWriteEntries = [];\n        for (const channel of channels) {\n            channelWriteEntries.push({\n                channel,\n                value: _write_js__WEBPACK_IMPORTED_MODULE_7__.PASSTHROUGH,\n                skipNone: false,\n            });\n        }\n        for (const [key, value] of Object.entries(kwargs ?? {})) {\n            if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(value) || typeof value === \"function\") {\n                channelWriteEntries.push({\n                    channel: key,\n                    value: _write_js__WEBPACK_IMPORTED_MODULE_7__.PASSTHROUGH,\n                    skipNone: true,\n                    mapper: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(value),\n                });\n            }\n            else {\n                channelWriteEntries.push({\n                    channel: key,\n                    value,\n                    skipNone: false,\n                });\n            }\n        }\n        return new _write_js__WEBPACK_IMPORTED_MODULE_7__.ChannelWrite(channelWriteEntries);\n    }\n}\nclass Pregel extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"LangGraph\";\n    }\n    constructor(fields) {\n        super(fields);\n        // Because Pregel extends `Runnable`.\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langgraph\", \"pregel\"]\n        });\n        Object.defineProperty(this, \"lg_is_pregel\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"channels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputChannels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputChannels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"autoValidate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"streamMode\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"values\"]\n        });\n        Object.defineProperty(this, \"streamChannels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"interruptAfter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"interruptBefore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stepTimeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"debug\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"checkpointer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"retryPolicy\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"store\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        let { streamMode } = fields;\n        if (streamMode != null && !Array.isArray(streamMode)) {\n            streamMode = [streamMode];\n        }\n        this.nodes = fields.nodes;\n        this.channels = fields.channels;\n        this.autoValidate = fields.autoValidate ?? this.autoValidate;\n        this.streamMode = streamMode ?? this.streamMode;\n        this.inputChannels = fields.inputChannels;\n        this.outputChannels = fields.outputChannels;\n        this.streamChannels = fields.streamChannels ?? this.streamChannels;\n        this.interruptAfter = fields.interruptAfter;\n        this.interruptBefore = fields.interruptBefore;\n        this.stepTimeout = fields.stepTimeout ?? this.stepTimeout;\n        this.debug = fields.debug ?? this.debug;\n        this.checkpointer = fields.checkpointer;\n        this.retryPolicy = fields.retryPolicy;\n        this.config = fields.config;\n        this.store = fields.store;\n        this.name = fields.name;\n        if (this.autoValidate) {\n            this.validate();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Remove ignore when we remove support for 0.2 versions of core\n    withConfig(config) {\n        const mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(this.config, config);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({ ...this, config: mergedConfig });\n    }\n    validate() {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateGraph)({\n            nodes: this.nodes,\n            channels: this.channels,\n            outputChannels: this.outputChannels,\n            inputChannels: this.inputChannels,\n            streamChannels: this.streamChannels,\n            interruptAfterNodes: this.interruptAfter,\n            interruptBeforeNodes: this.interruptBefore,\n        });\n        return this;\n    }\n    get streamChannelsList() {\n        if (Array.isArray(this.streamChannels)) {\n            return this.streamChannels;\n        }\n        else if (this.streamChannels) {\n            return [this.streamChannels];\n        }\n        else {\n            return Object.keys(this.channels);\n        }\n    }\n    get streamChannelsAsIs() {\n        if (this.streamChannels) {\n            return this.streamChannels;\n        }\n        else {\n            return Object.keys(this.channels);\n        }\n    }\n    async getGraphAsync(config) {\n        return this.getGraph(config);\n    }\n    /** @deprecated Use getSubgraphsAsync instead. The async method will become the default in the next minor release. */\n    *getSubgraphs(namespace, recurse\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        for (const [name, node] of Object.entries(this.nodes)) {\n            // filter by prefix\n            if (namespace !== undefined) {\n                if (!namespace.startsWith(name)) {\n                    continue;\n                }\n            }\n            const candidates = node.subgraphs?.length ? node.subgraphs : [node.bound];\n            for (const candidate of candidates) {\n                const graph = (0,_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_12__.findSubgraphPregel)(candidate);\n                if (graph !== undefined) {\n                    if (name === namespace) {\n                        yield [name, graph];\n                        return;\n                    }\n                    if (namespace === undefined) {\n                        yield [name, graph];\n                    }\n                    if (recurse) {\n                        let newNamespace = namespace;\n                        if (namespace !== undefined) {\n                            newNamespace = namespace.slice(name.length + 1);\n                        }\n                        for (const [subgraphName, subgraph] of graph.getSubgraphs(newNamespace, recurse)) {\n                            yield [\n                                `${name}${_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR}${subgraphName}`,\n                                subgraph,\n                            ];\n                        }\n                    }\n                }\n            }\n        }\n    }\n    async *getSubgraphsAsync(namespace, recurse\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        yield* this.getSubgraphs(namespace, recurse);\n    }\n    async _prepareStateSnapshot({ config, saved, subgraphCheckpointer, }) {\n        if (saved === undefined) {\n            return {\n                values: {},\n                next: [],\n                config,\n                tasks: [],\n            };\n        }\n        // Pass `skipManaged: true` as managed values should not be returned in get state calls.\n        const { managed } = await this.prepareSpecs(config, { skipManaged: true });\n        const channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.emptyChannels)(this.channels, saved.checkpoint);\n        const nextTasks = Object.values((0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._prepareNextTasks)(saved.checkpoint, saved.pendingWrites, this.nodes, channels, managed, saved.config, false, { step: (saved.metadata?.step ?? -1) + 1 }));\n        const subgraphs = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.gatherIterator)(this.getSubgraphsAsync());\n        const parentNamespace = saved.config.configurable?.checkpoint_ns ?? \"\";\n        const taskStates = {};\n        for (const task of nextTasks) {\n            const matchingSubgraph = subgraphs.find(([name]) => name === task.name);\n            if (!matchingSubgraph) {\n                continue;\n            }\n            // assemble checkpoint_ns for this task\n            let taskNs = `${task.name}${_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_END}${task.id}`;\n            if (parentNamespace) {\n                taskNs = `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR}${taskNs}`;\n            }\n            if (subgraphCheckpointer === undefined) {\n                // set config as signal that subgraph checkpoints exist\n                const config = {\n                    configurable: {\n                        thread_id: saved.config.configurable?.thread_id,\n                        checkpoint_ns: taskNs,\n                    },\n                };\n                taskStates[task.id] = config;\n            }\n            else {\n                // get the state of the subgraph\n                const config = {\n                    configurable: {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER]: subgraphCheckpointer,\n                        thread_id: saved.config.configurable?.thread_id,\n                        checkpoint_ns: taskNs,\n                    },\n                };\n                taskStates[task.id] = await matchingSubgraph[1].getState(config, {\n                    subgraphs: true,\n                });\n            }\n        }\n        // apply pending writes\n        const nullWrites = (saved.pendingWrites ?? [])\n            .filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_8__.NULL_TASK_ID)\n            .map((w) => w.slice(1));\n        if (nullWrites.length > 0) {\n            (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(saved.checkpoint, channels, [\n                {\n                    name: _constants_js__WEBPACK_IMPORTED_MODULE_8__.INPUT,\n                    writes: nullWrites,\n                    triggers: [],\n                },\n            ]);\n        }\n        // assemble the state snapshot\n        return {\n            values: (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.readChannels)(channels, this.streamChannelsAsIs),\n            next: nextTasks.map((task) => task.name),\n            tasks: (0,_debug_js__WEBPACK_IMPORTED_MODULE_6__.tasksWithWrites)(nextTasks, saved?.pendingWrites ?? [], taskStates),\n            metadata: saved.metadata,\n            config: (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.patchCheckpointMap)(saved.config, saved.metadata),\n            createdAt: saved.checkpoint.ts,\n            parentConfig: saved.parentConfig,\n        };\n    }\n    /**\n     * Get the current state of the graph.\n     */\n    async getState(config, options) {\n        const checkpointer = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n        if (!checkpointer) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.GraphValueError(\"No checkpointer set\");\n        }\n        const checkpointNamespace = config.configurable?.checkpoint_ns ?? \"\";\n        if (checkpointNamespace !== \"\" &&\n            config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] === undefined) {\n            // remove task_ids from checkpoint_ns\n            const recastCheckpointNamespace = checkpointNamespace\n                .split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR)\n                .map((part) => part.split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_END)[0])\n                .join(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR);\n            for await (const [name, subgraph] of this.getSubgraphsAsync(recastCheckpointNamespace, true)) {\n                if (name === recastCheckpointNamespace) {\n                    return await subgraph.getState((0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.patchConfigurable)(config, {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER]: checkpointer,\n                    }), { subgraphs: options?.subgraphs });\n                }\n            }\n            throw new Error(`Subgraph with namespace \"${recastCheckpointNamespace}\" not found.`);\n        }\n        const mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(this.config, config);\n        const saved = await checkpointer.getTuple(config);\n        const snapshot = await this._prepareStateSnapshot({\n            config: mergedConfig,\n            saved,\n            subgraphCheckpointer: options?.subgraphs ? checkpointer : undefined,\n        });\n        return snapshot;\n    }\n    /**\n     * Get the history of the state of the graph.\n     */\n    async *getStateHistory(config, options) {\n        const checkpointer = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n        if (!checkpointer) {\n            throw new Error(\"No checkpointer set\");\n        }\n        const checkpointNamespace = config.configurable?.checkpoint_ns ?? \"\";\n        if (checkpointNamespace !== \"\" &&\n            config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] === undefined) {\n            const recastCheckpointNamespace = checkpointNamespace\n                .split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR)\n                .map((part) => part.split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_END)[0])\n                .join(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR);\n            // find the subgraph with the matching name\n            for await (const [name, pregel] of this.getSubgraphsAsync(recastCheckpointNamespace, true)) {\n                if (name === recastCheckpointNamespace) {\n                    yield* pregel.getStateHistory((0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.patchConfigurable)(config, {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER]: checkpointer,\n                    }), options);\n                    return;\n                }\n            }\n            throw new Error(`Subgraph with namespace \"${recastCheckpointNamespace}\" not found.`);\n        }\n        const mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(this.config, config, {\n            configurable: { checkpoint_ns: checkpointNamespace },\n        });\n        for await (const checkpointTuple of checkpointer.list(mergedConfig, options)) {\n            yield this._prepareStateSnapshot({\n                config: checkpointTuple.config,\n                saved: checkpointTuple,\n            });\n        }\n    }\n    /**\n     * Update the state of the graph with the given values, as if they came from\n     * node `as_node`. If `as_node` is not provided, it will be set to the last node\n     * that updated the state, if not ambiguous.\n     */\n    async updateState(inputConfig, values, asNode) {\n        const checkpointer = inputConfig.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n        if (!checkpointer) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.GraphValueError(\"No checkpointer set\");\n        }\n        // delegate to subgraph\n        const checkpointNamespace = inputConfig.configurable?.checkpoint_ns ?? \"\";\n        if (checkpointNamespace !== \"\" &&\n            inputConfig.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] === undefined) {\n            // remove task_ids from checkpoint_ns\n            const recastCheckpointNamespace = checkpointNamespace\n                .split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR)\n                .map((part) => {\n                return part.split(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_END)[0];\n            })\n                .join(_constants_js__WEBPACK_IMPORTED_MODULE_8__.CHECKPOINT_NAMESPACE_SEPARATOR);\n            // find the subgraph with the matching name\n            // eslint-disable-next-line no-unreachable-loop\n            for await (const [, pregel] of this.getSubgraphsAsync(recastCheckpointNamespace, true)) {\n                return await pregel.updateState((0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.patchConfigurable)(inputConfig, {\n                    [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER]: checkpointer,\n                }), values, asNode);\n            }\n            throw new Error(`Subgraph \"${recastCheckpointNamespace}\" not found`);\n        }\n        // get last checkpoint\n        const config = this.config\n            ? (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(this.config, inputConfig)\n            : inputConfig;\n        const saved = await checkpointer.getTuple(config);\n        const checkpoint = saved !== undefined\n            ? (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.copyCheckpoint)(saved.checkpoint)\n            : (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.emptyCheckpoint)();\n        const checkpointPreviousVersions = {\n            ...saved?.checkpoint.channel_versions,\n        };\n        const step = saved?.metadata?.step ?? -1;\n        // merge configurable fields with previous checkpoint config\n        let checkpointConfig = (0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.patchConfigurable)(config, {\n            checkpoint_ns: config.configurable?.checkpoint_ns ?? \"\",\n        });\n        let checkpointMetadata = config.metadata ?? {};\n        if (saved?.config.configurable) {\n            checkpointConfig = (0,_utils_js__WEBPACK_IMPORTED_MODULE_15__.patchConfigurable)(config, saved.config.configurable);\n            checkpointMetadata = {\n                ...saved.metadata,\n                ...checkpointMetadata,\n            };\n        }\n        // Find last node that updated the state, if not provided\n        if (values == null && asNode === undefined) {\n            const nextConfig = await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.createCheckpoint)(checkpoint, undefined, step), {\n                source: \"update\",\n                step: step + 1,\n                writes: {},\n                parents: saved?.metadata?.parents ?? {},\n            }, {});\n            return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.patchCheckpointMap)(nextConfig, saved ? saved.metadata : undefined);\n        }\n        // update channels\n        const channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.emptyChannels)(this.channels, checkpoint);\n        // Pass `skipManaged: true` as managed values are not used/relevant in update state calls.\n        const { managed } = await this.prepareSpecs(config, { skipManaged: true });\n        if (values === null && asNode === \"__end__\") {\n            if (saved) {\n                // tasks for this checkpoint\n                const nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._prepareNextTasks)(checkpoint, saved.pendingWrites || [], this.nodes, channels, managed, saved.config, true, {\n                    step: (saved.metadata?.step ?? -1) + 1,\n                    checkpointer: this.checkpointer || undefined,\n                    store: this.store,\n                });\n                // apply null writes\n                const nullWrites = (saved.pendingWrites || [])\n                    .filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_8__.NULL_TASK_ID)\n                    .map((w) => w.slice(1));\n                if (nullWrites.length > 0) {\n                    (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(saved.checkpoint, channels, [\n                        {\n                            name: _constants_js__WEBPACK_IMPORTED_MODULE_8__.INPUT,\n                            writes: nullWrites,\n                            triggers: [],\n                        },\n                    ]);\n                }\n                // apply writes from tasks that already ran\n                for (const [taskId, k, v] of saved.pendingWrites || []) {\n                    if ([_constants_js__WEBPACK_IMPORTED_MODULE_8__.ERROR, _constants_js__WEBPACK_IMPORTED_MODULE_8__.INTERRUPT, _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.SCHEDULED].includes(k)) {\n                        continue;\n                    }\n                    if (!(taskId in nextTasks)) {\n                        continue;\n                    }\n                    nextTasks[taskId].writes.push([k, v]);\n                }\n                // clear all current tasks\n                (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(checkpoint, channels, Object.values(nextTasks));\n            }\n            // save checkpoint\n            const nextConfig = await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.createCheckpoint)(checkpoint, undefined, step), {\n                ...checkpointMetadata,\n                source: \"update\",\n                step: step + 1,\n                writes: {},\n                parents: saved?.metadata?.parents ?? {},\n            }, {});\n            return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.patchCheckpointMap)(nextConfig, saved ? saved.metadata : undefined);\n        }\n        if (values == null && asNode === \"__copy__\") {\n            const nextConfig = await checkpointer.put(saved?.parentConfig ?? checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.createCheckpoint)(checkpoint, undefined, step), {\n                source: \"fork\",\n                step: step + 1,\n                writes: {},\n                parents: saved?.metadata?.parents ?? {},\n            }, {});\n            return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.patchCheckpointMap)(nextConfig, saved ? saved.metadata : undefined);\n        }\n        // apply pending writes, if not on specific checkpoint\n        if (config.configurable?.checkpoint_id === undefined &&\n            saved?.pendingWrites !== undefined &&\n            saved.pendingWrites.length > 0) {\n            // tasks for this checkpoint\n            const nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._prepareNextTasks)(checkpoint, saved.pendingWrites, this.nodes, channels, managed, saved.config, true, {\n                store: this.store,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                checkpointer: this.checkpointer,\n                step: (saved.metadata?.step ?? -1) + 1,\n            });\n            // apply null writes\n            const nullWrites = (saved.pendingWrites ?? [])\n                .filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_8__.NULL_TASK_ID)\n                .map((w) => w.slice(1));\n            if (nullWrites.length > 0) {\n                (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(saved.checkpoint, channels, [\n                    {\n                        name: _constants_js__WEBPACK_IMPORTED_MODULE_8__.INPUT,\n                        writes: nullWrites,\n                        triggers: [],\n                    },\n                ]);\n            }\n            // apply writes\n            for (const [tid, k, v] of saved.pendingWrites) {\n                if ([_constants_js__WEBPACK_IMPORTED_MODULE_8__.ERROR, _constants_js__WEBPACK_IMPORTED_MODULE_8__.INTERRUPT, _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.SCHEDULED].includes(k) ||\n                    nextTasks[tid] === undefined) {\n                    continue;\n                }\n                nextTasks[tid].writes.push([k, v]);\n            }\n            const tasks = Object.values(nextTasks).filter((task) => {\n                return task.writes.length > 0;\n            });\n            if (tasks.length > 0) {\n                (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(checkpoint, channels, tasks);\n            }\n        }\n        const nonNullVersion = Object.values(checkpoint.versions_seen)\n            .map((seenVersions) => {\n            return Object.values(seenVersions);\n        })\n            .flat()\n            .find((v) => !!v);\n        if (asNode === undefined && nonNullVersion === undefined) {\n            if (typeof this.inputChannels === \"string\" &&\n                this.nodes[this.inputChannels] !== undefined) {\n                asNode = this.inputChannels;\n            }\n        }\n        else if (asNode === undefined) {\n            const lastSeenByNode = Object.entries(checkpoint.versions_seen)\n                .map(([n, seen]) => {\n                return Object.values(seen).map((v) => {\n                    return [v, n];\n                });\n            })\n                .flat()\n                .sort(([aNumber], [bNumber]) => (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.compareChannelVersions)(aNumber, bNumber));\n            // if two nodes updated the state at the same time, it's ambiguous\n            if (lastSeenByNode) {\n                if (lastSeenByNode.length === 1) {\n                    // eslint-disable-next-line prefer-destructuring\n                    asNode = lastSeenByNode[0][1];\n                }\n                else if (lastSeenByNode[lastSeenByNode.length - 1][0] !==\n                    lastSeenByNode[lastSeenByNode.length - 2][0]) {\n                    // eslint-disable-next-line prefer-destructuring\n                    asNode = lastSeenByNode[lastSeenByNode.length - 1][1];\n                }\n            }\n        }\n        if (asNode === undefined) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.InvalidUpdateError(`Ambiguous update, specify \"asNode\"`);\n        }\n        if (this.nodes[asNode] === undefined) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.InvalidUpdateError(`Node \"${asNode.toString()}\" does not exist`);\n        }\n        // run all writers of the chosen node\n        const writers = this.nodes[asNode].getWriters();\n        if (!writers.length) {\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.InvalidUpdateError(`No writers found for node \"${asNode.toString()}\"`);\n        }\n        const task = {\n            name: asNode,\n            input: values,\n            proc: writers.length > 1\n                ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence.from(writers, { omitSequenceTags: true })\n                : writers[0],\n            writes: [],\n            triggers: [_constants_js__WEBPACK_IMPORTED_MODULE_8__.INTERRUPT],\n            id: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.uuid5)(_constants_js__WEBPACK_IMPORTED_MODULE_8__.INTERRUPT, checkpoint.id),\n            writers: [],\n        };\n        // execute task\n        await task.proc.invoke(task.input, (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.patchConfig)({\n            ...config,\n            store: config?.store ?? this.store,\n        }, {\n            runName: config.runName ?? `${this.getName()}UpdateState`,\n            configurable: {\n                [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_SEND]: (items) => task.writes.push(...items),\n                [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_READ]: (select_, fresh_ = false) => (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._localRead)(step, checkpoint, channels, managed, \n                // TODO: Why does keyof StrRecord allow number and symbol?\n                task, select_, fresh_),\n            },\n        }));\n        // save task writes\n        // channel writes are saved to current checkpoint\n        // push writes are saved to next checkpoint\n        const [channelWrites, pushWrites] = [\n            task.writes.filter((w) => w[0] !== _constants_js__WEBPACK_IMPORTED_MODULE_8__.PUSH),\n            task.writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_8__.PUSH),\n        ];\n        // save task writes\n        if (saved !== undefined && channelWrites.length > 0) {\n            await checkpointer.putWrites(checkpointConfig, channelWrites, task.id);\n        }\n        // apply to checkpoint\n        // TODO: Why does keyof StrRecord allow number and symbol?\n        (0,_algo_js__WEBPACK_IMPORTED_MODULE_10__._applyWrites)(checkpoint, channels, [task], checkpointer.getNextVersion.bind(this.checkpointer));\n        const newVersions = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.getNewChannelVersions)(checkpointPreviousVersions, checkpoint.channel_versions);\n        const nextConfig = await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.createCheckpoint)(checkpoint, channels, step + 1), {\n            source: \"update\",\n            step: step + 1,\n            writes: { [asNode]: values },\n            parents: saved?.metadata?.parents ?? {},\n        }, newVersions);\n        if (pushWrites.length > 0) {\n            await checkpointer.putWrites(nextConfig, pushWrites, task.id);\n        }\n        return (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__.patchCheckpointMap)(nextConfig, saved ? saved.metadata : undefined);\n    }\n    _defaults(config) {\n        const { debug, streamMode, inputKeys, outputKeys, interruptAfter, interruptBefore, ...rest } = config;\n        let streamModeSingle = true;\n        const defaultDebug = debug !== undefined ? debug : this.debug;\n        let defaultOutputKeys = outputKeys;\n        if (defaultOutputKeys === undefined) {\n            defaultOutputKeys = this.streamChannelsAsIs;\n        }\n        else {\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateKeys)(defaultOutputKeys, this.channels);\n        }\n        let defaultInputKeys = inputKeys;\n        if (defaultInputKeys === undefined) {\n            defaultInputKeys = this.inputChannels;\n        }\n        else {\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateKeys)(defaultInputKeys, this.channels);\n        }\n        const defaultInterruptBefore = interruptBefore ?? this.interruptBefore ?? [];\n        const defaultInterruptAfter = interruptAfter ?? this.interruptAfter ?? [];\n        let defaultStreamMode;\n        if (streamMode !== undefined) {\n            defaultStreamMode = Array.isArray(streamMode) ? streamMode : [streamMode];\n            streamModeSingle = typeof streamMode === \"string\";\n        }\n        else {\n            defaultStreamMode = this.streamMode;\n            streamModeSingle = true;\n        }\n        // if being called as a node in another graph, always use values mode\n        if (config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_TASK_ID] !== undefined) {\n            defaultStreamMode = [\"values\"];\n        }\n        let defaultCheckpointer;\n        if (this.checkpointer === false) {\n            defaultCheckpointer = undefined;\n        }\n        else if (config !== undefined &&\n            config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER] !== undefined) {\n            defaultCheckpointer = config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_CHECKPOINTER];\n        }\n        else {\n            defaultCheckpointer = this.checkpointer;\n        }\n        const defaultStore = config.store ?? this.store;\n        return [\n            defaultDebug,\n            defaultStreamMode,\n            defaultInputKeys,\n            defaultOutputKeys,\n            rest,\n            defaultInterruptBefore,\n            defaultInterruptAfter,\n            defaultCheckpointer,\n            defaultStore,\n            streamModeSingle,\n        ];\n    }\n    /**\n     * Stream graph steps for a single input.\n     * @param input The input to the graph.\n     * @param options The configuration to use for the run.\n     * @param options.streamMode The mode to stream output. Defaults to value set on initialization.\n     *   Options are \"values\", \"updates\", and \"debug\". Default is \"values\".\n     *     values: Emit the current values of the state for each step.\n     *     updates: Emit only the updates to the state for each step.\n     *         Output is a dict with the node name as key and the updated values as value.\n     *     debug: Emit debug events for each step.\n     * @param options.outputKeys The keys to stream. Defaults to all non-context channels.\n     * @param options.interruptBefore Nodes to interrupt before.\n     * @param options.interruptAfter Nodes to interrupt after.\n     * @param options.debug Whether to print debug information during execution.\n     */\n    async stream(input, options) {\n        // The ensureConfig method called internally defaults recursionLimit to 25 if not\n        // passed directly in `options`.\n        // There is currently no way in _streamIterator to determine whether this was\n        // set by by ensureConfig or manually by the user, so we specify the bound value here\n        // and override if it is passed as an explicit param in `options`.\n        const config = {\n            recursionLimit: this.config?.recursionLimit,\n            ...options,\n        };\n        return super.stream(input, config);\n    }\n    async prepareSpecs(config, options) {\n        const configForManaged = {\n            ...config,\n            store: this.store,\n        };\n        const channelSpecs = {};\n        const managedSpecs = {};\n        for (const [name, spec] of Object.entries(this.channels)) {\n            if ((0,_channels_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseChannel)(spec)) {\n                channelSpecs[name] = spec;\n            }\n            else if (options?.skipManaged) {\n                managedSpecs[name] = {\n                    cls: _managed_base_js__WEBPACK_IMPORTED_MODULE_14__.NoopManagedValue,\n                    params: { config: {} },\n                };\n            }\n            else {\n                managedSpecs[name] = spec;\n            }\n        }\n        const managed = new _managed_base_js__WEBPACK_IMPORTED_MODULE_14__.ManagedValueMapping(await Object.entries(managedSpecs).reduce(async (accPromise, [key, value]) => {\n            const acc = await accPromise;\n            let initializedValue;\n            if ((0,_managed_base_js__WEBPACK_IMPORTED_MODULE_14__.isConfiguredManagedValue)(value)) {\n                if (\"key\" in value.params &&\n                    value.params.key === _managed_base_js__WEBPACK_IMPORTED_MODULE_14__.ChannelKeyPlaceholder) {\n                    value.params.key = key;\n                }\n                initializedValue = await value.cls.initialize(configForManaged, value.params);\n            }\n            else {\n                initializedValue = await value.initialize(configForManaged);\n            }\n            if (initializedValue !== undefined) {\n                acc.push([key, initializedValue]);\n            }\n            return acc;\n        }, Promise.resolve([])));\n        return {\n            channelSpecs,\n            managed,\n        };\n    }\n    async *_streamIterator(input, options) {\n        const streamSubgraphs = options?.subgraphs;\n        const inputConfig = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_16__.ensureLangGraphConfig)(this.config, options);\n        if (inputConfig.recursionLimit === undefined ||\n            inputConfig.recursionLimit < 1) {\n            throw new Error(`Passed \"recursionLimit\" must be at least 1.`);\n        }\n        if (this.checkpointer !== undefined &&\n            this.checkpointer !== false &&\n            inputConfig.configurable === undefined) {\n            throw new Error(`Checkpointer requires one or more of the following \"configurable\" keys: \"thread_id\", \"checkpoint_ns\", \"checkpoint_id\"`);\n        }\n        const { runId, ...restConfig } = inputConfig;\n        // assign defaults\n        const [debug, streamMode, , outputKeys, config, interruptBefore, interruptAfter, checkpointer, store, streamModeSingle,] = this._defaults(restConfig);\n        const stream = new _stream_js__WEBPACK_IMPORTED_MODULE_19__.IterableReadableWritableStream({\n            modes: new Set(streamMode),\n        });\n        // set up messages stream mode\n        if (streamMode.includes(\"messages\")) {\n            const messageStreamer = new _messages_js__WEBPACK_IMPORTED_MODULE_17__.StreamMessagesHandler((chunk) => stream.push(chunk));\n            const { callbacks } = config;\n            if (callbacks === undefined) {\n                config.callbacks = [messageStreamer];\n            }\n            else if (Array.isArray(callbacks)) {\n                config.callbacks = callbacks.concat(messageStreamer);\n            }\n            else {\n                const copiedCallbacks = callbacks.copy();\n                copiedCallbacks.addHandler(messageStreamer, true);\n                config.callbacks = copiedCallbacks;\n            }\n        }\n        // setup custom stream mode\n        if (streamMode.includes(\"custom\")) {\n            config.writer = (chunk) => stream.push([[], \"custom\", chunk]);\n        }\n        const callbackManager = await (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager?.handleChainStart(this.toJSON(), (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_11__._coerceToDict)(input, \"input\"), runId, undefined, undefined, undefined, config?.runName ?? this.getName());\n        const { channelSpecs, managed } = await this.prepareSpecs(config);\n        let loop;\n        let loopError;\n        /**\n         * The PregelLoop will yield events from concurrent tasks as soon as they are\n         * generated. Each task can push multiple events onto the stream in any order.\n         *\n         * We use a separate background method and stream here in order to yield events\n         * from the loop to the main stream and therefore back to the user as soon as\n         * they are available.\n         */\n        const createAndRunLoop = async () => {\n            try {\n                loop = await _loop_js__WEBPACK_IMPORTED_MODULE_13__.PregelLoop.initialize({\n                    input,\n                    config,\n                    checkpointer,\n                    nodes: this.nodes,\n                    channelSpecs,\n                    managed,\n                    outputKeys,\n                    streamKeys: this.streamChannelsAsIs,\n                    store,\n                    stream,\n                    interruptAfter,\n                    interruptBefore,\n                    manager: runManager,\n                    debug: this.debug,\n                });\n                const runner = new _runner_js__WEBPACK_IMPORTED_MODULE_18__.PregelRunner({\n                    loop,\n                    nodeFinished: config.configurable?.nodeFinished,\n                });\n                if (options?.subgraphs) {\n                    loop.config.configurable = {\n                        ...loop.config.configurable,\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_8__.CONFIG_KEY_STREAM]: loop.stream,\n                    };\n                }\n                await this._runLoop({ loop, runner, debug, config });\n            }\n            catch (e) {\n                loopError = e;\n            }\n            finally {\n                try {\n                    // Call `.stop()` again incase it was not called in the loop, e.g due to an error.\n                    if (loop) {\n                        await loop.store?.stop();\n                    }\n                    await Promise.all([\n                        ...(loop?.checkpointerPromises ?? []),\n                        ...Array.from(managed.values()).map((mv) => mv.promises()),\n                    ]);\n                }\n                catch (e) {\n                    loopError = loopError ?? e;\n                }\n                if (loopError) {\n                    // \"Causes any future interactions with the associated stream to error\".\n                    // Wraps ReadableStreamDefaultController#error:\n                    // https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultController/error\n                    stream.error(loopError);\n                }\n                else {\n                    // Will end the iterator outside of this method,\n                    // keeping previously enqueued chunks.\n                    // Wraps ReadableStreamDefaultController#close:\n                    // https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultController/close\n                    stream.close();\n                }\n            }\n        };\n        const runLoopPromise = createAndRunLoop();\n        try {\n            for await (const chunk of stream) {\n                if (chunk === undefined) {\n                    throw new Error(\"Data structure error.\");\n                }\n                const [namespace, mode, payload] = chunk;\n                if (streamMode.includes(mode)) {\n                    if (streamSubgraphs && !streamModeSingle) {\n                        yield [namespace, mode, payload];\n                    }\n                    else if (!streamModeSingle) {\n                        yield [mode, payload];\n                    }\n                    else if (streamSubgraphs) {\n                        yield [namespace, payload];\n                    }\n                    else {\n                        yield payload;\n                    }\n                }\n            }\n        }\n        catch (e) {\n            await runManager?.handleChainError(loopError);\n            throw e;\n        }\n        finally {\n            await runLoopPromise;\n        }\n        await runManager?.handleChainEnd(loop?.output ?? {});\n    }\n    /**\n     * Run the graph with a single input and config.\n     * @param input The input to the graph.\n     * @param options The configuration to use for the run.\n     * @param options.streamMode The mode to stream output. Defaults to value set on initialization.\n     *   Options are \"values\", \"updates\", and \"debug\". Default is \"values\".\n     *     values: Emit the current values of the state for each step.\n     *     updates: Emit only the updates to the state for each step.\n     *         Output is a dict with the node name as key and the updated values as value.\n     *     debug: Emit debug events for each step.\n     * @param options.outputKeys The keys to stream. Defaults to all non-context channels.\n     * @param options.interruptBefore Nodes to interrupt before.\n     * @param options.interruptAfter Nodes to interrupt after.\n     * @param options.debug Whether to print debug information during execution.\n     */\n    async invoke(input, options) {\n        const streamMode = options?.streamMode ?? \"values\";\n        const config = {\n            ...options,\n            outputKeys: options?.outputKeys ?? this.outputChannels,\n            streamMode,\n        };\n        const chunks = [];\n        const stream = await this.stream(input, config);\n        for await (const chunk of stream) {\n            chunks.push(chunk);\n        }\n        if (streamMode === \"values\") {\n            return chunks[chunks.length - 1];\n        }\n        return chunks;\n    }\n    async _runLoop(params) {\n        const { loop, runner, debug, config } = params;\n        let tickError;\n        try {\n            while (await loop.tick({\n                inputKeys: this.inputChannels,\n            })) {\n                if (debug) {\n                    (0,_debug_js__WEBPACK_IMPORTED_MODULE_6__.printStepCheckpoint)(loop.checkpointMetadata.step, loop.channels, this.streamChannelsList);\n                }\n                if (debug) {\n                    (0,_debug_js__WEBPACK_IMPORTED_MODULE_6__.printStepTasks)(loop.step, Object.values(loop.tasks));\n                }\n                await runner.tick({\n                    timeout: this.stepTimeout,\n                    retryPolicy: this.retryPolicy,\n                    onStepWrite: (step, writes) => {\n                        if (debug) {\n                            (0,_debug_js__WEBPACK_IMPORTED_MODULE_6__.printStepWrites)(step, writes, this.streamChannelsList);\n                        }\n                    },\n                    signal: config.signal,\n                });\n            }\n            if (loop.status === \"out_of_steps\") {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_9__.GraphRecursionError([\n                    `Recursion limit of ${config.recursionLimit} reached`,\n                    \"without hitting a stop condition. You can increase the\",\n                    `limit by setting the \"recursionLimit\" config key.`,\n                ].join(\" \"), {\n                    lc_error_code: \"GRAPH_RECURSION_LIMIT\",\n                });\n            }\n        }\n        catch (e) {\n            tickError = e;\n            const suppress = await loop.finishAndHandleError(tickError);\n            if (!suppress) {\n                throw e;\n            }\n        }\n        finally {\n            if (tickError === undefined) {\n                await loop.finishAndHandleError();\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDbUo7QUFDdEI7QUFDdkM7QUFDL0M7QUFDcUI7QUFDckI7QUFDNkQ7QUFDN0M7QUFDb0w7QUFDbEo7QUFDaEI7QUFDb0I7QUFDcEM7QUFDbEI7QUFDc0Y7QUFDN0Q7QUFDTjtBQUNKO0FBQ1g7QUFDa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0RBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBVztBQUNsQztBQUNBLGFBQWE7QUFDYjtBQUNBLDhEQUE4RDtBQUM5RCxnQkFBZ0IsK0RBQVE7QUFDeEI7QUFDQTtBQUNBLDJCQUEyQixrREFBVztBQUN0QztBQUNBLDRCQUE0Qiw0RUFBaUI7QUFDN0MsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUJBQW1CLG1EQUFZO0FBQy9CO0FBQ0E7QUFDTyxxQkFBcUIsK0RBQVE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGNBQWMsYUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVFQUFZO0FBQ3pDO0FBQ0Esc0NBQXNDLCtCQUErQjtBQUNyRTtBQUNBO0FBQ0EsUUFBUSwyREFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix1RUFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLEtBQUssRUFBRSx5RUFBOEIsQ0FBQyxFQUFFLGFBQWE7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0NBQXNDO0FBQ3hFO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVUsb0NBQW9DLG1CQUFtQjtBQUNqRix5QkFBeUIsZ0VBQWE7QUFDdEMsd0NBQXdDLDREQUFpQiw4RkFBOEYsd0NBQXdDO0FBQy9MLGdDQUFnQywwREFBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVUsRUFBRSxtRUFBd0IsQ0FBQyxFQUFFLFFBQVE7QUFDM0U7QUFDQSw0QkFBNEIsZ0JBQWdCLEVBQUUseUVBQThCLENBQUMsRUFBRSxPQUFPO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtFQUF1QjtBQUNoRDtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1REFBWTtBQUNoRDtBQUNBO0FBQ0EsWUFBWSx1REFBWTtBQUN4QjtBQUNBLDBCQUEwQixnREFBSztBQUMvQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9EQUFZO0FBQ2hDO0FBQ0EsbUJBQW1CLDBEQUFlO0FBQ2xDO0FBQ0Esb0JBQW9CLG9FQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGtFQUF1QjtBQUMxRTtBQUNBLHNCQUFzQix1REFBZTtBQUNyQztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0VBQXVCO0FBQ3pEO0FBQ0E7QUFDQSx1QkFBdUIseUVBQThCO0FBQ3JELDBDQUEwQyxtRUFBd0I7QUFDbEUsc0JBQXNCLHlFQUE4QjtBQUNwRDtBQUNBO0FBQ0EsbURBQW1ELDZEQUFpQjtBQUNwRSx5QkFBeUIsa0VBQXVCO0FBQ2hELHFCQUFxQixLQUFLLCtCQUErQjtBQUN6RDtBQUNBO0FBQ0Esd0RBQXdELDBCQUEwQjtBQUNsRjtBQUNBLDZCQUE2Qix1RUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxrRUFBdUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxrRUFBdUI7QUFDekQ7QUFDQSx1QkFBdUIseUVBQThCO0FBQ3JELDBDQUEwQyxtRUFBd0I7QUFDbEUsc0JBQXNCLHlFQUE4QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsNkRBQWlCO0FBQ25FLHlCQUF5QixrRUFBdUI7QUFDaEQscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCwwQkFBMEI7QUFDbEY7QUFDQSw2QkFBNkIsdUVBQVk7QUFDekMsNEJBQTRCLG9DQUFvQztBQUNoRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxrRUFBdUI7QUFDL0U7QUFDQSxzQkFBc0IsdURBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0VBQXVCO0FBQzlEO0FBQ0E7QUFDQSx1QkFBdUIseUVBQThCO0FBQ3JEO0FBQ0Esa0NBQWtDLG1FQUF3QjtBQUMxRCxhQUFhO0FBQ2Isc0JBQXNCLHlFQUE4QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsNkRBQWlCO0FBQ2pFLHFCQUFxQixrRUFBdUI7QUFDNUMsaUJBQWlCO0FBQ2pCO0FBQ0EseUNBQXlDLDBCQUEwQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVFQUFZO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0VBQWM7QUFDNUIsY0FBYyxnRkFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZEQUFpQjtBQUNoRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsK0JBQStCLDZEQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxtRUFBZ0I7QUFDeEY7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQix1REFBdUQ7QUFDdkQsYUFBYSxJQUFJO0FBQ2pCLG1CQUFtQixvRUFBa0I7QUFDckM7QUFDQTtBQUNBLHlCQUF5QixnRUFBYTtBQUN0QztBQUNBLGdCQUFnQixVQUFVLG9DQUFvQyxtQkFBbUI7QUFDakY7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDREQUFpQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLDRDQUE0Qyx1REFBWTtBQUN4RDtBQUNBO0FBQ0Esb0JBQW9CLHVEQUFZO0FBQ2hDO0FBQ0Esa0NBQWtDLGdEQUFLO0FBQ3ZDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQUssRUFBRSxvREFBUyxFQUFFLHNFQUFTO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdURBQVk7QUFDNUI7QUFDQTtBQUNBLHdFQUF3RSxtRUFBZ0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLHVEQUF1RDtBQUN2RCxhQUFhLElBQUk7QUFDakIsbUJBQW1CLG9FQUFrQjtBQUNyQztBQUNBO0FBQ0EsK0ZBQStGLG1FQUFnQjtBQUMvRztBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLHVEQUF1RDtBQUN2RCxhQUFhLElBQUk7QUFDakIsbUJBQW1CLG9FQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNERBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx3Q0FBd0MsdURBQVk7QUFDcEQ7QUFDQTtBQUNBLGdCQUFnQix1REFBWTtBQUM1QjtBQUNBLDhCQUE4QixnREFBSztBQUNuQztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdEQUFLLEVBQUUsb0RBQVMsRUFBRSxzRUFBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGdCQUFnQix1REFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLGdEQUFnRCx1RkFBc0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBa0I7QUFDeEM7QUFDQTtBQUNBLHNCQUFzQiwwREFBa0IsVUFBVSxrQkFBa0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMERBQWtCLCtCQUErQixrQkFBa0I7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVFQUFnQixpQkFBaUIsd0JBQXdCO0FBQzdFO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQVM7QUFDaEMsZ0JBQWdCLHNFQUFLLENBQUMsb0RBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHNFQUFXO0FBQ3REO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMENBQTBDLGVBQWU7QUFDekQ7QUFDQSxpQkFBaUIsMERBQWU7QUFDaEMsaUJBQWlCLDBEQUFlLGdDQUFnQyxxREFBVTtBQUMxRTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywrQ0FBSTtBQUNuRCwrQ0FBK0MsK0NBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFZO0FBQ3BCLDRCQUE0Qix1RUFBcUI7QUFDakQsb0VBQW9FLG1FQUFnQjtBQUNwRjtBQUNBO0FBQ0Esc0JBQXNCLGtCQUFrQjtBQUN4QyxtREFBbUQ7QUFDbkQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0VBQWtCO0FBQ2pDO0FBQ0E7QUFDQSxnQkFBZ0IscUZBQXFGO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBEQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDZEQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxrRUFBdUI7QUFDekQsc0RBQXNELGtFQUF1QjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUFnQjtBQUN6Qyw4QkFBOEIsWUFBWTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQW1CO0FBQy9DO0FBQ0E7QUFDQSxnQkFBZ0IsMkVBQXdCO0FBQ3hDO0FBQ0EseUNBQXlDLG9FQUFxQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDO0FBQ0E7QUFDQSwyQkFBMkIsdUVBQThCO0FBQ3pEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx3Q0FBd0MsZ0VBQXFCO0FBQzdELG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNGQUEyQjtBQUNqRSxrRkFBa0YsK0RBQWE7QUFDL0YsZ0JBQWdCLHdCQUF3QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixtQ0FBbUMscURBQVk7QUFDL0M7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNERBQWlCO0FBQzFDO0FBQ0E7QUFDQSxzQ0FBc0MsNkJBQTZCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4QkFBOEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0IsOERBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSxvQkFBb0IseURBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBEQUFlO0FBQzNDO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQW1CO0FBQzdDLDBDQUEwQyx1QkFBdUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgeyBSdW5uYWJsZSwgUnVubmFibGVTZXF1ZW5jZSwgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnLCBfY29lcmNlVG9SdW5uYWJsZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgY29tcGFyZUNoYW5uZWxWZXJzaW9ucywgY29weUNoZWNrcG9pbnQsIGVtcHR5Q2hlY2twb2ludCwgU0NIRURVTEVELCB1dWlkNSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludFwiO1xuaW1wb3J0IHsgY3JlYXRlQ2hlY2twb2ludCwgZW1wdHlDaGFubmVscywgaXNCYXNlQ2hhbm5lbCwgfSBmcm9tIFwiLi4vY2hhbm5lbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgUHJlZ2VsTm9kZSB9IGZyb20gXCIuL3JlYWQuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlR3JhcGgsIHZhbGlkYXRlS2V5cyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5pbXBvcnQgeyByZWFkQ2hhbm5lbHMgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgcHJpbnRTdGVwQ2hlY2twb2ludCwgcHJpbnRTdGVwVGFza3MsIHByaW50U3RlcFdyaXRlcywgdGFza3NXaXRoV3JpdGVzLCB9IGZyb20gXCIuL2RlYnVnLmpzXCI7XG5pbXBvcnQgeyBDaGFubmVsV3JpdGUsIFBBU1NUSFJPVUdIIH0gZnJvbSBcIi4vd3JpdGUuanNcIjtcbmltcG9ydCB7IENPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSLCBDT05GSUdfS0VZX1JFQUQsIENPTkZJR19LRVlfU0VORCwgRVJST1IsIElOVEVSUlVQVCwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENPTkZJR19LRVlfU1RSRUFNLCBDT05GSUdfS0VZX1RBU0tfSUQsIE5VTExfVEFTS19JRCwgSU5QVVQsIFBVU0gsIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgR3JhcGhSZWN1cnNpb25FcnJvciwgR3JhcGhWYWx1ZUVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IsIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgX3ByZXBhcmVOZXh0VGFza3MsIF9sb2NhbFJlYWQsIF9hcHBseVdyaXRlcywgfSBmcm9tIFwiLi9hbGdvLmpzXCI7XG5pbXBvcnQgeyBfY29lcmNlVG9EaWN0LCBnZXROZXdDaGFubmVsVmVyc2lvbnMsIHBhdGNoQ2hlY2twb2ludE1hcCwgfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZmluZFN1YmdyYXBoUHJlZ2VsIH0gZnJvbSBcIi4vdXRpbHMvc3ViZ3JhcGguanNcIjtcbmltcG9ydCB7IFByZWdlbExvb3AgfSBmcm9tIFwiLi9sb29wLmpzXCI7XG5pbXBvcnQgeyBDaGFubmVsS2V5UGxhY2Vob2xkZXIsIGlzQ29uZmlndXJlZE1hbmFnZWRWYWx1ZSwgTWFuYWdlZFZhbHVlTWFwcGluZywgTm9vcE1hbmFnZWRWYWx1ZSwgfSBmcm9tIFwiLi4vbWFuYWdlZC9iYXNlLmpzXCI7XG5pbXBvcnQgeyBnYXRoZXJJdGVyYXRvciwgcGF0Y2hDb25maWd1cmFibGUgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IGVuc3VyZUxhbmdHcmFwaENvbmZpZyB9IGZyb20gXCIuL3V0aWxzL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtTWVzc2FnZXNIYW5kbGVyIH0gZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFByZWdlbFJ1bm5lciB9IGZyb20gXCIuL3J1bm5lci5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVdyaXRhYmxlU3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtLmpzXCI7XG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCI7XG59XG5leHBvcnQgY2xhc3MgQ2hhbm5lbCB7XG4gICAgc3RhdGljIHN1YnNjcmliZVRvKGNoYW5uZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsga2V5LCB0YWdzIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGFubmVscykgJiYga2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHNwZWNpZnkgYSBrZXkgd2hlbiBzdWJzY3JpYmluZyB0byBtdWx0aXBsZSBjaGFubmVsc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hhbm5lbE1hcHBpbmdPckFycmF5O1xuICAgICAgICBpZiAoaXNTdHJpbmcoY2hhbm5lbHMpKSB7XG4gICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbE1hcHBpbmdPckFycmF5ID0geyBba2V5XTogY2hhbm5lbHMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxNYXBwaW5nT3JBcnJheSA9IFtjaGFubmVsc107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGFubmVsTWFwcGluZ09yQXJyYXkgPSBPYmplY3QuZnJvbUVudHJpZXMoY2hhbm5lbHMubWFwKChjaGFuKSA9PiBbY2hhbiwgY2hhbl0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmlnZ2VycyA9IEFycmF5LmlzQXJyYXkoY2hhbm5lbHMpID8gY2hhbm5lbHMgOiBbY2hhbm5lbHNdO1xuICAgICAgICByZXR1cm4gbmV3IFByZWdlbE5vZGUoe1xuICAgICAgICAgICAgY2hhbm5lbHM6IGNoYW5uZWxNYXBwaW5nT3JBcnJheSxcbiAgICAgICAgICAgIHRyaWdnZXJzLFxuICAgICAgICAgICAgdGFncyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyB3cml0ZVRvKGNoYW5uZWxzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbFdyaXRlRW50cmllcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICAgICAgICAgIGNoYW5uZWxXcml0ZUVudHJpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY2hhbm5lbCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogUEFTU1RIUk9VR0gsXG4gICAgICAgICAgICAgICAgc2tpcE5vbmU6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoa3dhcmdzID8/IHt9KSkge1xuICAgICAgICAgICAgaWYgKFJ1bm5hYmxlLmlzUnVubmFibGUodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbFdyaXRlRW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDoga2V5LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUEFTU1RIUk9VR0gsXG4gICAgICAgICAgICAgICAgICAgIHNraXBOb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtYXBwZXI6IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxXcml0ZUVudHJpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHNraXBOb25lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENoYW5uZWxXcml0ZShjaGFubmVsV3JpdGVFbnRyaWVzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUHJlZ2VsIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJMYW5nR3JhcGhcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIC8vIEJlY2F1c2UgUHJlZ2VsIGV4dGVuZHMgYFJ1bm5hYmxlYC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nZ3JhcGhcIiwgXCJwcmVnZWxcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxnX2lzX3ByZWdlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibm9kZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hhbm5lbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5wdXRDaGFubmVsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRDaGFubmVsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdXRvVmFsaWRhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbU1vZGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcInZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtQ2hhbm5lbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW50ZXJydXB0QWZ0ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW50ZXJydXB0QmVmb3JlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0ZXBUaW1lb3V0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlYnVnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hlY2twb2ludGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHJ5UG9saWN5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9yZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgeyBzdHJlYW1Nb2RlIH0gPSBmaWVsZHM7XG4gICAgICAgIGlmIChzdHJlYW1Nb2RlICE9IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoc3RyZWFtTW9kZSkpIHtcbiAgICAgICAgICAgIHN0cmVhbU1vZGUgPSBbc3RyZWFtTW9kZV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub2RlcyA9IGZpZWxkcy5ub2RlcztcbiAgICAgICAgdGhpcy5jaGFubmVscyA9IGZpZWxkcy5jaGFubmVscztcbiAgICAgICAgdGhpcy5hdXRvVmFsaWRhdGUgPSBmaWVsZHMuYXV0b1ZhbGlkYXRlID8/IHRoaXMuYXV0b1ZhbGlkYXRlO1xuICAgICAgICB0aGlzLnN0cmVhbU1vZGUgPSBzdHJlYW1Nb2RlID8/IHRoaXMuc3RyZWFtTW9kZTtcbiAgICAgICAgdGhpcy5pbnB1dENoYW5uZWxzID0gZmllbGRzLmlucHV0Q2hhbm5lbHM7XG4gICAgICAgIHRoaXMub3V0cHV0Q2hhbm5lbHMgPSBmaWVsZHMub3V0cHV0Q2hhbm5lbHM7XG4gICAgICAgIHRoaXMuc3RyZWFtQ2hhbm5lbHMgPSBmaWVsZHMuc3RyZWFtQ2hhbm5lbHMgPz8gdGhpcy5zdHJlYW1DaGFubmVscztcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRBZnRlciA9IGZpZWxkcy5pbnRlcnJ1cHRBZnRlcjtcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRCZWZvcmUgPSBmaWVsZHMuaW50ZXJydXB0QmVmb3JlO1xuICAgICAgICB0aGlzLnN0ZXBUaW1lb3V0ID0gZmllbGRzLnN0ZXBUaW1lb3V0ID8/IHRoaXMuc3RlcFRpbWVvdXQ7XG4gICAgICAgIHRoaXMuZGVidWcgPSBmaWVsZHMuZGVidWcgPz8gdGhpcy5kZWJ1ZztcbiAgICAgICAgdGhpcy5jaGVja3BvaW50ZXIgPSBmaWVsZHMuY2hlY2twb2ludGVyO1xuICAgICAgICB0aGlzLnJldHJ5UG9saWN5ID0gZmllbGRzLnJldHJ5UG9saWN5O1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGZpZWxkcy5jb25maWc7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBmaWVsZHMuc3RvcmU7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICBpZiAodGhpcy5hdXRvVmFsaWRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgLy8gQHRzLWlnbm9yZSBSZW1vdmUgaWdub3JlIHdoZW4gd2UgcmVtb3ZlIHN1cHBvcnQgZm9yIDAuMiB2ZXJzaW9ucyBvZiBjb3JlXG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkQ29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCBjb25maWcpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoeyAuLi50aGlzLCBjb25maWc6IG1lcmdlZENvbmZpZyB9KTtcbiAgICB9XG4gICAgdmFsaWRhdGUoKSB7XG4gICAgICAgIHZhbGlkYXRlR3JhcGgoe1xuICAgICAgICAgICAgbm9kZXM6IHRoaXMubm9kZXMsXG4gICAgICAgICAgICBjaGFubmVsczogdGhpcy5jaGFubmVscyxcbiAgICAgICAgICAgIG91dHB1dENoYW5uZWxzOiB0aGlzLm91dHB1dENoYW5uZWxzLFxuICAgICAgICAgICAgaW5wdXRDaGFubmVsczogdGhpcy5pbnB1dENoYW5uZWxzLFxuICAgICAgICAgICAgc3RyZWFtQ2hhbm5lbHM6IHRoaXMuc3RyZWFtQ2hhbm5lbHMsXG4gICAgICAgICAgICBpbnRlcnJ1cHRBZnRlck5vZGVzOiB0aGlzLmludGVycnVwdEFmdGVyLFxuICAgICAgICAgICAgaW50ZXJydXB0QmVmb3JlTm9kZXM6IHRoaXMuaW50ZXJydXB0QmVmb3JlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldCBzdHJlYW1DaGFubmVsc0xpc3QoKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc3RyZWFtQ2hhbm5lbHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW1DaGFubmVscztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0cmVhbUNoYW5uZWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RyZWFtQ2hhbm5lbHNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY2hhbm5lbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzdHJlYW1DaGFubmVsc0FzSXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbUNoYW5uZWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW1DaGFubmVscztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNoYW5uZWxzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRHcmFwaEFzeW5jKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRHcmFwaChjb25maWcpO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIGdldFN1YmdyYXBoc0FzeW5jIGluc3RlYWQuIFRoZSBhc3luYyBtZXRob2Qgd2lsbCBiZWNvbWUgdGhlIGRlZmF1bHQgaW4gdGhlIG5leHQgbWlub3IgcmVsZWFzZS4gKi9cbiAgICAqZ2V0U3ViZ3JhcGhzKG5hbWVzcGFjZSwgcmVjdXJzZVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKSB7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpKSB7XG4gICAgICAgICAgICAvLyBmaWx0ZXIgYnkgcHJlZml4XG4gICAgICAgICAgICBpZiAobmFtZXNwYWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZS5zdGFydHNXaXRoKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBub2RlLnN1YmdyYXBocz8ubGVuZ3RoID8gbm9kZS5zdWJncmFwaHMgOiBbbm9kZS5ib3VuZF07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhcGggPSBmaW5kU3ViZ3JhcGhQcmVnZWwoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JhcGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gbmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbbmFtZSwgZ3JhcGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lc3BhY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgW25hbWUsIGdyYXBoXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld05hbWVzcGFjZSA9IG5hbWVzcGFjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lc3BhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05hbWVzcGFjZSA9IG5hbWVzcGFjZS5zbGljZShuYW1lLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbc3ViZ3JhcGhOYW1lLCBzdWJncmFwaF0gb2YgZ3JhcGguZ2V0U3ViZ3JhcGhzKG5ld05hbWVzcGFjZSwgcmVjdXJzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke25hbWV9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHtzdWJncmFwaE5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViZ3JhcGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAqZ2V0U3ViZ3JhcGhzQXN5bmMobmFtZXNwYWNlLCByZWN1cnNlXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgeWllbGQqIHRoaXMuZ2V0U3ViZ3JhcGhzKG5hbWVzcGFjZSwgcmVjdXJzZSk7XG4gICAgfVxuICAgIGFzeW5jIF9wcmVwYXJlU3RhdGVTbmFwc2hvdCh7IGNvbmZpZywgc2F2ZWQsIHN1YmdyYXBoQ2hlY2twb2ludGVyLCB9KSB7XG4gICAgICAgIGlmIChzYXZlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlczoge30sXG4gICAgICAgICAgICAgICAgbmV4dDogW10sXG4gICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgIHRhc2tzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFzcyBgc2tpcE1hbmFnZWQ6IHRydWVgIGFzIG1hbmFnZWQgdmFsdWVzIHNob3VsZCBub3QgYmUgcmV0dXJuZWQgaW4gZ2V0IHN0YXRlIGNhbGxzLlxuICAgICAgICBjb25zdCB7IG1hbmFnZWQgfSA9IGF3YWl0IHRoaXMucHJlcGFyZVNwZWNzKGNvbmZpZywgeyBza2lwTWFuYWdlZDogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBlbXB0eUNoYW5uZWxzKHRoaXMuY2hhbm5lbHMsIHNhdmVkLmNoZWNrcG9pbnQpO1xuICAgICAgICBjb25zdCBuZXh0VGFza3MgPSBPYmplY3QudmFsdWVzKF9wcmVwYXJlTmV4dFRhc2tzKHNhdmVkLmNoZWNrcG9pbnQsIHNhdmVkLnBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIGNoYW5uZWxzLCBtYW5hZ2VkLCBzYXZlZC5jb25maWcsIGZhbHNlLCB7IHN0ZXA6IChzYXZlZC5tZXRhZGF0YT8uc3RlcCA/PyAtMSkgKyAxIH0pKTtcbiAgICAgICAgY29uc3Qgc3ViZ3JhcGhzID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IodGhpcy5nZXRTdWJncmFwaHNBc3luYygpKTtcbiAgICAgICAgY29uc3QgcGFyZW50TmFtZXNwYWNlID0gc2F2ZWQuY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiO1xuICAgICAgICBjb25zdCB0YXNrU3RhdGVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiBuZXh0VGFza3MpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nU3ViZ3JhcGggPSBzdWJncmFwaHMuZmluZCgoW25hbWVdKSA9PiBuYW1lID09PSB0YXNrLm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaGluZ1N1YmdyYXBoKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhc3NlbWJsZSBjaGVja3BvaW50X25zIGZvciB0aGlzIHRhc2tcbiAgICAgICAgICAgIGxldCB0YXNrTnMgPSBgJHt0YXNrLm5hbWV9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkR9JHt0YXNrLmlkfWA7XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgdGFza05zID0gYCR7cGFyZW50TmFtZXNwYWNlfSR7Q0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SfSR7dGFza05zfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ViZ3JhcGhDaGVja3BvaW50ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIHNldCBjb25maWcgYXMgc2lnbmFsIHRoYXQgc3ViZ3JhcGggY2hlY2twb2ludHMgZXhpc3RcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkX2lkOiBzYXZlZC5jb25maWcuY29uZmlndXJhYmxlPy50aHJlYWRfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja3BvaW50X25zOiB0YXNrTnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0YXNrU3RhdGVzW3Rhc2suaWRdID0gY29uZmlnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBzdGF0ZSBvZiB0aGUgc3ViZ3JhcGhcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXTogc3ViZ3JhcGhDaGVja3BvaW50ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWRfaWQ6IHNhdmVkLmNvbmZpZy5jb25maWd1cmFibGU/LnRocmVhZF9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IHRhc2tOcyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRhc2tTdGF0ZXNbdGFzay5pZF0gPSBhd2FpdCBtYXRjaGluZ1N1YmdyYXBoWzFdLmdldFN0YXRlKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBzdWJncmFwaHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwbHkgcGVuZGluZyB3cml0ZXNcbiAgICAgICAgY29uc3QgbnVsbFdyaXRlcyA9IChzYXZlZC5wZW5kaW5nV3JpdGVzID8/IFtdKVxuICAgICAgICAgICAgLmZpbHRlcigodykgPT4gd1swXSA9PT0gTlVMTF9UQVNLX0lEKVxuICAgICAgICAgICAgLm1hcCgodykgPT4gdy5zbGljZSgxKSk7XG4gICAgICAgIGlmIChudWxsV3JpdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIF9hcHBseVdyaXRlcyhzYXZlZC5jaGVja3BvaW50LCBjaGFubmVscywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogSU5QVVQsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlczogbnVsbFdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnM6IFtdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhc3NlbWJsZSB0aGUgc3RhdGUgc25hcHNob3RcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlczogcmVhZENoYW5uZWxzKGNoYW5uZWxzLCB0aGlzLnN0cmVhbUNoYW5uZWxzQXNJcyksXG4gICAgICAgICAgICBuZXh0OiBuZXh0VGFza3MubWFwKCh0YXNrKSA9PiB0YXNrLm5hbWUpLFxuICAgICAgICAgICAgdGFza3M6IHRhc2tzV2l0aFdyaXRlcyhuZXh0VGFza3MsIHNhdmVkPy5wZW5kaW5nV3JpdGVzID8/IFtdLCB0YXNrU3RhdGVzKSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBzYXZlZC5tZXRhZGF0YSxcbiAgICAgICAgICAgIGNvbmZpZzogcGF0Y2hDaGVja3BvaW50TWFwKHNhdmVkLmNvbmZpZywgc2F2ZWQubWV0YWRhdGEpLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBzYXZlZC5jaGVja3BvaW50LnRzLFxuICAgICAgICAgICAgcGFyZW50Q29uZmlnOiBzYXZlZC5wYXJlbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZ3JhcGguXG4gICAgICovXG4gICAgYXN5bmMgZ2V0U3RhdGUoY29uZmlnLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrcG9pbnRlciA9IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPz8gdGhpcy5jaGVja3BvaW50ZXI7XG4gICAgICAgIGlmICghY2hlY2twb2ludGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhWYWx1ZUVycm9yKFwiTm8gY2hlY2twb2ludGVyIHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiO1xuICAgICAgICBpZiAoY2hlY2twb2ludE5hbWVzcGFjZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdGFza19pZHMgZnJvbSBjaGVja3BvaW50X25zXG4gICAgICAgICAgICBjb25zdCByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlID0gY2hlY2twb2ludE5hbWVzcGFjZVxuICAgICAgICAgICAgICAgIC5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpXG4gICAgICAgICAgICAgICAgLm1hcCgocGFydCkgPT4gcGFydC5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQpWzBdKVxuICAgICAgICAgICAgICAgIC5qb2luKENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUik7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IFtuYW1lLCBzdWJncmFwaF0gb2YgdGhpcy5nZXRTdWJncmFwaHNBc3luYyhyZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdWJncmFwaC5nZXRTdGF0ZShwYXRjaENvbmZpZ3VyYWJsZShjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlcixcbiAgICAgICAgICAgICAgICAgICAgfSksIHsgc3ViZ3JhcGhzOiBvcHRpb25zPy5zdWJncmFwaHMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdWJncmFwaCB3aXRoIG5hbWVzcGFjZSBcIiR7cmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZX1cIiBub3QgZm91bmQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVyZ2VkQ29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCBjb25maWcpO1xuICAgICAgICBjb25zdCBzYXZlZCA9IGF3YWl0IGNoZWNrcG9pbnRlci5nZXRUdXBsZShjb25maWcpO1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHRoaXMuX3ByZXBhcmVTdGF0ZVNuYXBzaG90KHtcbiAgICAgICAgICAgIGNvbmZpZzogbWVyZ2VkQ29uZmlnLFxuICAgICAgICAgICAgc2F2ZWQsXG4gICAgICAgICAgICBzdWJncmFwaENoZWNrcG9pbnRlcjogb3B0aW9ucz8uc3ViZ3JhcGhzID8gY2hlY2twb2ludGVyIDogdW5kZWZpbmVkLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIHN0YXRlIG9mIHRoZSBncmFwaC5cbiAgICAgKi9cbiAgICBhc3luYyAqZ2V0U3RhdGVIaXN0b3J5KGNvbmZpZywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjaGVja3BvaW50ZXIgPSBjb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdID8/IHRoaXMuY2hlY2twb2ludGVyO1xuICAgICAgICBpZiAoIWNoZWNrcG9pbnRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hlY2twb2ludGVyIHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiO1xuICAgICAgICBpZiAoY2hlY2twb2ludE5hbWVzcGFjZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlID0gY2hlY2twb2ludE5hbWVzcGFjZVxuICAgICAgICAgICAgICAgIC5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpXG4gICAgICAgICAgICAgICAgLm1hcCgocGFydCkgPT4gcGFydC5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQpWzBdKVxuICAgICAgICAgICAgICAgIC5qb2luKENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUik7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBzdWJncmFwaCB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IFtuYW1lLCBwcmVnZWxdIG9mIHRoaXMuZ2V0U3ViZ3JhcGhzQXN5bmMocmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gcmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCogcHJlZ2VsLmdldFN0YXRlSGlzdG9yeShwYXRjaENvbmZpZ3VyYWJsZShjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlcixcbiAgICAgICAgICAgICAgICAgICAgfSksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdWJncmFwaCB3aXRoIG5hbWVzcGFjZSBcIiR7cmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZX1cIiBub3QgZm91bmQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVyZ2VkQ29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCBjb25maWcsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogeyBjaGVja3BvaW50X25zOiBjaGVja3BvaW50TmFtZXNwYWNlIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNoZWNrcG9pbnRUdXBsZSBvZiBjaGVja3BvaW50ZXIubGlzdChtZXJnZWRDb25maWcsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLl9wcmVwYXJlU3RhdGVTbmFwc2hvdCh7XG4gICAgICAgICAgICAgICAgY29uZmlnOiBjaGVja3BvaW50VHVwbGUuY29uZmlnLFxuICAgICAgICAgICAgICAgIHNhdmVkOiBjaGVja3BvaW50VHVwbGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHN0YXRlIG9mIHRoZSBncmFwaCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMsIGFzIGlmIHRoZXkgY2FtZSBmcm9tXG4gICAgICogbm9kZSBgYXNfbm9kZWAuIElmIGBhc19ub2RlYCBpcyBub3QgcHJvdmlkZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBsYXN0IG5vZGVcbiAgICAgKiB0aGF0IHVwZGF0ZWQgdGhlIHN0YXRlLCBpZiBub3QgYW1iaWd1b3VzLlxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVN0YXRlKGlucHV0Q29uZmlnLCB2YWx1ZXMsIGFzTm9kZSkge1xuICAgICAgICBjb25zdCBjaGVja3BvaW50ZXIgPSBpbnB1dENvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPz8gdGhpcy5jaGVja3BvaW50ZXI7XG4gICAgICAgIGlmICghY2hlY2twb2ludGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhWYWx1ZUVycm9yKFwiTm8gY2hlY2twb2ludGVyIHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZWxlZ2F0ZSB0byBzdWJncmFwaFxuICAgICAgICBjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gaW5wdXRDb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCI7XG4gICAgICAgIGlmIChjaGVja3BvaW50TmFtZXNwYWNlICE9PSBcIlwiICYmXG4gICAgICAgICAgICBpbnB1dENvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRhc2tfaWRzIGZyb20gY2hlY2twb2ludF9uc1xuICAgICAgICAgICAgY29uc3QgcmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZSA9IGNoZWNrcG9pbnROYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAuc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKVxuICAgICAgICAgICAgICAgIC5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydC5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQpWzBdO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuam9pbihDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpO1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgc3ViZ3JhcGggd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVucmVhY2hhYmxlLWxvb3BcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgWywgcHJlZ2VsXSBvZiB0aGlzLmdldFN1YmdyYXBoc0FzeW5jKHJlY2FzdENoZWNrcG9pbnROYW1lc3BhY2UsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHByZWdlbC51cGRhdGVTdGF0ZShwYXRjaENvbmZpZ3VyYWJsZShpbnB1dENvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdOiBjaGVja3BvaW50ZXIsXG4gICAgICAgICAgICAgICAgfSksIHZhbHVlcywgYXNOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU3ViZ3JhcGggXCIke3JlY2FzdENoZWNrcG9pbnROYW1lc3BhY2V9XCIgbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IGxhc3QgY2hlY2twb2ludFxuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZ1xuICAgICAgICAgICAgPyBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIGlucHV0Q29uZmlnKVxuICAgICAgICAgICAgOiBpbnB1dENvbmZpZztcbiAgICAgICAgY29uc3Qgc2F2ZWQgPSBhd2FpdCBjaGVja3BvaW50ZXIuZ2V0VHVwbGUoY29uZmlnKTtcbiAgICAgICAgY29uc3QgY2hlY2twb2ludCA9IHNhdmVkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gY29weUNoZWNrcG9pbnQoc2F2ZWQuY2hlY2twb2ludClcbiAgICAgICAgICAgIDogZW1wdHlDaGVja3BvaW50KCk7XG4gICAgICAgIGNvbnN0IGNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zID0ge1xuICAgICAgICAgICAgLi4uc2F2ZWQ/LmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RlcCA9IHNhdmVkPy5tZXRhZGF0YT8uc3RlcCA/PyAtMTtcbiAgICAgICAgLy8gbWVyZ2UgY29uZmlndXJhYmxlIGZpZWxkcyB3aXRoIHByZXZpb3VzIGNoZWNrcG9pbnQgY29uZmlnXG4gICAgICAgIGxldCBjaGVja3BvaW50Q29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7XG4gICAgICAgICAgICBjaGVja3BvaW50X25zOiBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgY2hlY2twb2ludE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBpZiAoc2F2ZWQ/LmNvbmZpZy5jb25maWd1cmFibGUpIHtcbiAgICAgICAgICAgIGNoZWNrcG9pbnRDb25maWcgPSBwYXRjaENvbmZpZ3VyYWJsZShjb25maWcsIHNhdmVkLmNvbmZpZy5jb25maWd1cmFibGUpO1xuICAgICAgICAgICAgY2hlY2twb2ludE1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgIC4uLnNhdmVkLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIC4uLmNoZWNrcG9pbnRNZXRhZGF0YSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmluZCBsYXN0IG5vZGUgdGhhdCB1cGRhdGVkIHRoZSBzdGF0ZSwgaWYgbm90IHByb3ZpZGVkXG4gICAgICAgIGlmICh2YWx1ZXMgPT0gbnVsbCAmJiBhc05vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgbmV4dENvbmZpZyA9IGF3YWl0IGNoZWNrcG9pbnRlci5wdXQoY2hlY2twb2ludENvbmZpZywgY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCB1bmRlZmluZWQsIHN0ZXApLCB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBcInVwZGF0ZVwiLFxuICAgICAgICAgICAgICAgIHN0ZXA6IHN0ZXAgKyAxLFxuICAgICAgICAgICAgICAgIHdyaXRlczoge30sXG4gICAgICAgICAgICAgICAgcGFyZW50czogc2F2ZWQ/Lm1ldGFkYXRhPy5wYXJlbnRzID8/IHt9LFxuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGNoQ2hlY2twb2ludE1hcChuZXh0Q29uZmlnLCBzYXZlZCA/IHNhdmVkLm1ldGFkYXRhIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgY2hhbm5lbHNcbiAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBlbXB0eUNoYW5uZWxzKHRoaXMuY2hhbm5lbHMsIGNoZWNrcG9pbnQpO1xuICAgICAgICAvLyBQYXNzIGBza2lwTWFuYWdlZDogdHJ1ZWAgYXMgbWFuYWdlZCB2YWx1ZXMgYXJlIG5vdCB1c2VkL3JlbGV2YW50IGluIHVwZGF0ZSBzdGF0ZSBjYWxscy5cbiAgICAgICAgY29uc3QgeyBtYW5hZ2VkIH0gPSBhd2FpdCB0aGlzLnByZXBhcmVTcGVjcyhjb25maWcsIHsgc2tpcE1hbmFnZWQ6IHRydWUgfSk7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IG51bGwgJiYgYXNOb2RlID09PSBcIl9fZW5kX19cIikge1xuICAgICAgICAgICAgaWYgKHNhdmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gdGFza3MgZm9yIHRoaXMgY2hlY2twb2ludFxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUYXNrcyA9IF9wcmVwYXJlTmV4dFRhc2tzKGNoZWNrcG9pbnQsIHNhdmVkLnBlbmRpbmdXcml0ZXMgfHwgW10sIHRoaXMubm9kZXMsIGNoYW5uZWxzLCBtYW5hZ2VkLCBzYXZlZC5jb25maWcsIHRydWUsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcDogKHNhdmVkLm1ldGFkYXRhPy5zdGVwID8/IC0xKSArIDEsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBhcHBseSBudWxsIHdyaXRlc1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bGxXcml0ZXMgPSAoc2F2ZWQucGVuZGluZ1dyaXRlcyB8fCBbXSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodykgPT4gd1swXSA9PT0gTlVMTF9UQVNLX0lEKVxuICAgICAgICAgICAgICAgICAgICAubWFwKCh3KSA9PiB3LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbFdyaXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF9hcHBseVdyaXRlcyhzYXZlZC5jaGVja3BvaW50LCBjaGFubmVscywgW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IElOUFVULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlczogbnVsbFdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYXBwbHkgd3JpdGVzIGZyb20gdGFza3MgdGhhdCBhbHJlYWR5IHJhblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3Rhc2tJZCwgaywgdl0gb2Ygc2F2ZWQucGVuZGluZ1dyaXRlcyB8fCBbXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoW0VSUk9SLCBJTlRFUlJVUFQsIFNDSEVEVUxFRF0uaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHRhc2tJZCBpbiBuZXh0VGFza3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXh0VGFza3NbdGFza0lkXS53cml0ZXMucHVzaChbaywgdl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjbGVhciBhbGwgY3VycmVudCB0YXNrc1xuICAgICAgICAgICAgICAgIF9hcHBseVdyaXRlcyhjaGVja3BvaW50LCBjaGFubmVscywgT2JqZWN0LnZhbHVlcyhuZXh0VGFza3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNhdmUgY2hlY2twb2ludFxuICAgICAgICAgICAgY29uc3QgbmV4dENvbmZpZyA9IGF3YWl0IGNoZWNrcG9pbnRlci5wdXQoY2hlY2twb2ludENvbmZpZywgY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCB1bmRlZmluZWQsIHN0ZXApLCB7XG4gICAgICAgICAgICAgICAgLi4uY2hlY2twb2ludE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJ1cGRhdGVcIixcbiAgICAgICAgICAgICAgICBzdGVwOiBzdGVwICsgMSxcbiAgICAgICAgICAgICAgICB3cml0ZXM6IHt9LFxuICAgICAgICAgICAgICAgIHBhcmVudHM6IHNhdmVkPy5tZXRhZGF0YT8ucGFyZW50cyA/PyB7fSxcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXRjaENoZWNrcG9pbnRNYXAobmV4dENvbmZpZywgc2F2ZWQgPyBzYXZlZC5tZXRhZGF0YSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlcyA9PSBudWxsICYmIGFzTm9kZSA9PT0gXCJfX2NvcHlfX1wiKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0Q29uZmlnID0gYXdhaXQgY2hlY2twb2ludGVyLnB1dChzYXZlZD8ucGFyZW50Q29uZmlnID8/IGNoZWNrcG9pbnRDb25maWcsIGNyZWF0ZUNoZWNrcG9pbnQoY2hlY2twb2ludCwgdW5kZWZpbmVkLCBzdGVwKSwge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJmb3JrXCIsXG4gICAgICAgICAgICAgICAgc3RlcDogc3RlcCArIDEsXG4gICAgICAgICAgICAgICAgd3JpdGVzOiB7fSxcbiAgICAgICAgICAgICAgICBwYXJlbnRzOiBzYXZlZD8ubWV0YWRhdGE/LnBhcmVudHMgPz8ge30sXG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKG5leHRDb25maWcsIHNhdmVkID8gc2F2ZWQubWV0YWRhdGEgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGx5IHBlbmRpbmcgd3JpdGVzLCBpZiBub3Qgb24gc3BlY2lmaWMgY2hlY2twb2ludFxuICAgICAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9pZCA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzYXZlZD8ucGVuZGluZ1dyaXRlcyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzYXZlZC5wZW5kaW5nV3JpdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIHRhc2tzIGZvciB0aGlzIGNoZWNrcG9pbnRcbiAgICAgICAgICAgIGNvbnN0IG5leHRUYXNrcyA9IF9wcmVwYXJlTmV4dFRhc2tzKGNoZWNrcG9pbnQsIHNhdmVkLnBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIGNoYW5uZWxzLCBtYW5hZ2VkLCBzYXZlZC5jb25maWcsIHRydWUsIHtcbiAgICAgICAgICAgICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIsXG4gICAgICAgICAgICAgICAgc3RlcDogKHNhdmVkLm1ldGFkYXRhPy5zdGVwID8/IC0xKSArIDEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGFwcGx5IG51bGwgd3JpdGVzXG4gICAgICAgICAgICBjb25zdCBudWxsV3JpdGVzID0gKHNhdmVkLnBlbmRpbmdXcml0ZXMgPz8gW10pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigodykgPT4gd1swXSA9PT0gTlVMTF9UQVNLX0lEKVxuICAgICAgICAgICAgICAgIC5tYXAoKHcpID0+IHcuc2xpY2UoMSkpO1xuICAgICAgICAgICAgaWYgKG51bGxXcml0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIF9hcHBseVdyaXRlcyhzYXZlZC5jaGVja3BvaW50LCBjaGFubmVscywgW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBJTlBVVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlczogbnVsbFdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFwcGx5IHdyaXRlc1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdGlkLCBrLCB2XSBvZiBzYXZlZC5wZW5kaW5nV3JpdGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKFtFUlJPUiwgSU5URVJSVVBULCBTQ0hFRFVMRURdLmluY2x1ZGVzKGspIHx8XG4gICAgICAgICAgICAgICAgICAgIG5leHRUYXNrc1t0aWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHRUYXNrc1t0aWRdLndyaXRlcy5wdXNoKFtrLCB2XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0YXNrcyA9IE9iamVjdC52YWx1ZXMobmV4dFRhc2tzKS5maWx0ZXIoKHRhc2spID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay53cml0ZXMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBfYXBwbHlXcml0ZXMoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2tzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub25OdWxsVmVyc2lvbiA9IE9iamVjdC52YWx1ZXMoY2hlY2twb2ludC52ZXJzaW9uc19zZWVuKVxuICAgICAgICAgICAgLm1hcCgoc2VlblZlcnNpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzZWVuVmVyc2lvbnMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZsYXQoKVxuICAgICAgICAgICAgLmZpbmQoKHYpID0+ICEhdik7XG4gICAgICAgIGlmIChhc05vZGUgPT09IHVuZGVmaW5lZCAmJiBub25OdWxsVmVyc2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5wdXRDaGFubmVscyA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbdGhpcy5pbnB1dENoYW5uZWxzXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXNOb2RlID0gdGhpcy5pbnB1dENoYW5uZWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFzTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0U2VlbkJ5Tm9kZSA9IE9iamVjdC5lbnRyaWVzKGNoZWNrcG9pbnQudmVyc2lvbnNfc2VlbilcbiAgICAgICAgICAgICAgICAubWFwKChbbiwgc2Vlbl0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzZWVuKS5tYXAoKHYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt2LCBuXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZsYXQoKVxuICAgICAgICAgICAgICAgIC5zb3J0KChbYU51bWJlcl0sIFtiTnVtYmVyXSkgPT4gY29tcGFyZUNoYW5uZWxWZXJzaW9ucyhhTnVtYmVyLCBiTnVtYmVyKSk7XG4gICAgICAgICAgICAvLyBpZiB0d28gbm9kZXMgdXBkYXRlZCB0aGUgc3RhdGUgYXQgdGhlIHNhbWUgdGltZSwgaXQncyBhbWJpZ3VvdXNcbiAgICAgICAgICAgIGlmIChsYXN0U2VlbkJ5Tm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0U2VlbkJ5Tm9kZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgICAgICAgICAgICAgIGFzTm9kZSA9IGxhc3RTZWVuQnlOb2RlWzBdWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXN0U2VlbkJ5Tm9kZVtsYXN0U2VlbkJ5Tm9kZS5sZW5ndGggLSAxXVswXSAhPT1cbiAgICAgICAgICAgICAgICAgICAgbGFzdFNlZW5CeU5vZGVbbGFzdFNlZW5CeU5vZGUubGVuZ3RoIC0gMl1bMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgICAgICAgICAgICAgIGFzTm9kZSA9IGxhc3RTZWVuQnlOb2RlW2xhc3RTZWVuQnlOb2RlLmxlbmd0aCAtIDFdWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXNOb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEFtYmlndW91cyB1cGRhdGUsIHNwZWNpZnkgXCJhc05vZGVcImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGVzW2FzTm9kZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgTm9kZSBcIiR7YXNOb2RlLnRvU3RyaW5nKCl9XCIgZG9lcyBub3QgZXhpc3RgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBydW4gYWxsIHdyaXRlcnMgb2YgdGhlIGNob3NlbiBub2RlXG4gICAgICAgIGNvbnN0IHdyaXRlcnMgPSB0aGlzLm5vZGVzW2FzTm9kZV0uZ2V0V3JpdGVycygpO1xuICAgICAgICBpZiAoIXdyaXRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBObyB3cml0ZXJzIGZvdW5kIGZvciBub2RlIFwiJHthc05vZGUudG9TdHJpbmcoKX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhc2sgPSB7XG4gICAgICAgICAgICBuYW1lOiBhc05vZGUsXG4gICAgICAgICAgICBpbnB1dDogdmFsdWVzLFxuICAgICAgICAgICAgcHJvYzogd3JpdGVycy5sZW5ndGggPiAxXG4gICAgICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICBSdW5uYWJsZVNlcXVlbmNlLmZyb20od3JpdGVycywgeyBvbWl0U2VxdWVuY2VUYWdzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgOiB3cml0ZXJzWzBdLFxuICAgICAgICAgICAgd3JpdGVzOiBbXSxcbiAgICAgICAgICAgIHRyaWdnZXJzOiBbSU5URVJSVVBUXSxcbiAgICAgICAgICAgIGlkOiB1dWlkNShJTlRFUlJVUFQsIGNoZWNrcG9pbnQuaWQpLFxuICAgICAgICAgICAgd3JpdGVyczogW10sXG4gICAgICAgIH07XG4gICAgICAgIC8vIGV4ZWN1dGUgdGFza1xuICAgICAgICBhd2FpdCB0YXNrLnByb2MuaW52b2tlKHRhc2suaW5wdXQsIHBhdGNoQ29uZmlnKHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIHN0b3JlOiBjb25maWc/LnN0b3JlID8/IHRoaXMuc3RvcmUsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHJ1bk5hbWU6IGNvbmZpZy5ydW5OYW1lID8/IGAke3RoaXMuZ2V0TmFtZSgpfVVwZGF0ZVN0YXRlYCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1NFTkRdOiAoaXRlbXMpID0+IHRhc2sud3JpdGVzLnB1c2goLi4uaXRlbXMpLFxuICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1JFQURdOiAoc2VsZWN0XywgZnJlc2hfID0gZmFsc2UpID0+IF9sb2NhbFJlYWQoc3RlcCwgY2hlY2twb2ludCwgY2hhbm5lbHMsIG1hbmFnZWQsIFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFdoeSBkb2VzIGtleW9mIFN0clJlY29yZCBhbGxvdyBudW1iZXIgYW5kIHN5bWJvbD9cbiAgICAgICAgICAgICAgICB0YXNrLCBzZWxlY3RfLCBmcmVzaF8pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBzYXZlIHRhc2sgd3JpdGVzXG4gICAgICAgIC8vIGNoYW5uZWwgd3JpdGVzIGFyZSBzYXZlZCB0byBjdXJyZW50IGNoZWNrcG9pbnRcbiAgICAgICAgLy8gcHVzaCB3cml0ZXMgYXJlIHNhdmVkIHRvIG5leHQgY2hlY2twb2ludFxuICAgICAgICBjb25zdCBbY2hhbm5lbFdyaXRlcywgcHVzaFdyaXRlc10gPSBbXG4gICAgICAgICAgICB0YXNrLndyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gIT09IFBVU0gpLFxuICAgICAgICAgICAgdGFzay53cml0ZXMuZmlsdGVyKCh3KSA9PiB3WzBdID09PSBQVVNIKSxcbiAgICAgICAgXTtcbiAgICAgICAgLy8gc2F2ZSB0YXNrIHdyaXRlc1xuICAgICAgICBpZiAoc2F2ZWQgIT09IHVuZGVmaW5lZCAmJiBjaGFubmVsV3JpdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrcG9pbnRlci5wdXRXcml0ZXMoY2hlY2twb2ludENvbmZpZywgY2hhbm5lbFdyaXRlcywgdGFzay5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwbHkgdG8gY2hlY2twb2ludFxuICAgICAgICAvLyBUT0RPOiBXaHkgZG9lcyBrZXlvZiBTdHJSZWNvcmQgYWxsb3cgbnVtYmVyIGFuZCBzeW1ib2w/XG4gICAgICAgIF9hcHBseVdyaXRlcyhjaGVja3BvaW50LCBjaGFubmVscywgW3Rhc2tdLCBjaGVja3BvaW50ZXIuZ2V0TmV4dFZlcnNpb24uYmluZCh0aGlzLmNoZWNrcG9pbnRlcikpO1xuICAgICAgICBjb25zdCBuZXdWZXJzaW9ucyA9IGdldE5ld0NoYW5uZWxWZXJzaW9ucyhjaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucywgY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKTtcbiAgICAgICAgY29uc3QgbmV4dENvbmZpZyA9IGF3YWl0IGNoZWNrcG9pbnRlci5wdXQoY2hlY2twb2ludENvbmZpZywgY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCBjaGFubmVscywgc3RlcCArIDEpLCB7XG4gICAgICAgICAgICBzb3VyY2U6IFwidXBkYXRlXCIsXG4gICAgICAgICAgICBzdGVwOiBzdGVwICsgMSxcbiAgICAgICAgICAgIHdyaXRlczogeyBbYXNOb2RlXTogdmFsdWVzIH0sXG4gICAgICAgICAgICBwYXJlbnRzOiBzYXZlZD8ubWV0YWRhdGE/LnBhcmVudHMgPz8ge30sXG4gICAgICAgIH0sIG5ld1ZlcnNpb25zKTtcbiAgICAgICAgaWYgKHB1c2hXcml0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgY2hlY2twb2ludGVyLnB1dFdyaXRlcyhuZXh0Q29uZmlnLCBwdXNoV3JpdGVzLCB0YXNrLmlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKG5leHRDb25maWcsIHNhdmVkID8gc2F2ZWQubWV0YWRhdGEgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBfZGVmYXVsdHMoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHsgZGVidWcsIHN0cmVhbU1vZGUsIGlucHV0S2V5cywgb3V0cHV0S2V5cywgaW50ZXJydXB0QWZ0ZXIsIGludGVycnVwdEJlZm9yZSwgLi4ucmVzdCB9ID0gY29uZmlnO1xuICAgICAgICBsZXQgc3RyZWFtTW9kZVNpbmdsZSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGRlZmF1bHREZWJ1ZyA9IGRlYnVnICE9PSB1bmRlZmluZWQgPyBkZWJ1ZyA6IHRoaXMuZGVidWc7XG4gICAgICAgIGxldCBkZWZhdWx0T3V0cHV0S2V5cyA9IG91dHB1dEtleXM7XG4gICAgICAgIGlmIChkZWZhdWx0T3V0cHV0S2V5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWZhdWx0T3V0cHV0S2V5cyA9IHRoaXMuc3RyZWFtQ2hhbm5lbHNBc0lzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVLZXlzKGRlZmF1bHRPdXRwdXRLZXlzLCB0aGlzLmNoYW5uZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVmYXVsdElucHV0S2V5cyA9IGlucHV0S2V5cztcbiAgICAgICAgaWYgKGRlZmF1bHRJbnB1dEtleXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmYXVsdElucHV0S2V5cyA9IHRoaXMuaW5wdXRDaGFubmVscztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRlS2V5cyhkZWZhdWx0SW5wdXRLZXlzLCB0aGlzLmNoYW5uZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZhdWx0SW50ZXJydXB0QmVmb3JlID0gaW50ZXJydXB0QmVmb3JlID8/IHRoaXMuaW50ZXJydXB0QmVmb3JlID8/IFtdO1xuICAgICAgICBjb25zdCBkZWZhdWx0SW50ZXJydXB0QWZ0ZXIgPSBpbnRlcnJ1cHRBZnRlciA/PyB0aGlzLmludGVycnVwdEFmdGVyID8/IFtdO1xuICAgICAgICBsZXQgZGVmYXVsdFN0cmVhbU1vZGU7XG4gICAgICAgIGlmIChzdHJlYW1Nb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlZmF1bHRTdHJlYW1Nb2RlID0gQXJyYXkuaXNBcnJheShzdHJlYW1Nb2RlKSA/IHN0cmVhbU1vZGUgOiBbc3RyZWFtTW9kZV07XG4gICAgICAgICAgICBzdHJlYW1Nb2RlU2luZ2xlID0gdHlwZW9mIHN0cmVhbU1vZGUgPT09IFwic3RyaW5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWZhdWx0U3RyZWFtTW9kZSA9IHRoaXMuc3RyZWFtTW9kZTtcbiAgICAgICAgICAgIHN0cmVhbU1vZGVTaW5nbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGJlaW5nIGNhbGxlZCBhcyBhIG5vZGUgaW4gYW5vdGhlciBncmFwaCwgYWx3YXlzIHVzZSB2YWx1ZXMgbW9kZVxuICAgICAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfVEFTS19JRF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmYXVsdFN0cmVhbU1vZGUgPSBbXCJ2YWx1ZXNcIl07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRlZmF1bHRDaGVja3BvaW50ZXI7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrcG9pbnRlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGRlZmF1bHRDaGVja3BvaW50ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmYXVsdENoZWNrcG9pbnRlciA9IGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmYXVsdENoZWNrcG9pbnRlciA9IHRoaXMuY2hlY2twb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmF1bHRTdG9yZSA9IGNvbmZpZy5zdG9yZSA/PyB0aGlzLnN0b3JlO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZGVmYXVsdERlYnVnLFxuICAgICAgICAgICAgZGVmYXVsdFN0cmVhbU1vZGUsXG4gICAgICAgICAgICBkZWZhdWx0SW5wdXRLZXlzLFxuICAgICAgICAgICAgZGVmYXVsdE91dHB1dEtleXMsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICAgICAgZGVmYXVsdEludGVycnVwdEJlZm9yZSxcbiAgICAgICAgICAgIGRlZmF1bHRJbnRlcnJ1cHRBZnRlcixcbiAgICAgICAgICAgIGRlZmF1bHRDaGVja3BvaW50ZXIsXG4gICAgICAgICAgICBkZWZhdWx0U3RvcmUsXG4gICAgICAgICAgICBzdHJlYW1Nb2RlU2luZ2xlLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gZ3JhcGggc3RlcHMgZm9yIGEgc2luZ2xlIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gdGhlIGdyYXBoLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjb25maWd1cmF0aW9uIHRvIHVzZSBmb3IgdGhlIHJ1bi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5zdHJlYW1Nb2RlIFRoZSBtb2RlIHRvIHN0cmVhbSBvdXRwdXQuIERlZmF1bHRzIHRvIHZhbHVlIHNldCBvbiBpbml0aWFsaXphdGlvbi5cbiAgICAgKiAgIE9wdGlvbnMgYXJlIFwidmFsdWVzXCIsIFwidXBkYXRlc1wiLCBhbmQgXCJkZWJ1Z1wiLiBEZWZhdWx0IGlzIFwidmFsdWVzXCIuXG4gICAgICogICAgIHZhbHVlczogRW1pdCB0aGUgY3VycmVudCB2YWx1ZXMgb2YgdGhlIHN0YXRlIGZvciBlYWNoIHN0ZXAuXG4gICAgICogICAgIHVwZGF0ZXM6IEVtaXQgb25seSB0aGUgdXBkYXRlcyB0byB0aGUgc3RhdGUgZm9yIGVhY2ggc3RlcC5cbiAgICAgKiAgICAgICAgIE91dHB1dCBpcyBhIGRpY3Qgd2l0aCB0aGUgbm9kZSBuYW1lIGFzIGtleSBhbmQgdGhlIHVwZGF0ZWQgdmFsdWVzIGFzIHZhbHVlLlxuICAgICAqICAgICBkZWJ1ZzogRW1pdCBkZWJ1ZyBldmVudHMgZm9yIGVhY2ggc3RlcC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5vdXRwdXRLZXlzIFRoZSBrZXlzIHRvIHN0cmVhbS4gRGVmYXVsdHMgdG8gYWxsIG5vbi1jb250ZXh0IGNoYW5uZWxzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmludGVycnVwdEJlZm9yZSBOb2RlcyB0byBpbnRlcnJ1cHQgYmVmb3JlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmludGVycnVwdEFmdGVyIE5vZGVzIHRvIGludGVycnVwdCBhZnRlci5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kZWJ1ZyBXaGV0aGVyIHRvIHByaW50IGRlYnVnIGluZm9ybWF0aW9uIGR1cmluZyBleGVjdXRpb24uXG4gICAgICovXG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFRoZSBlbnN1cmVDb25maWcgbWV0aG9kIGNhbGxlZCBpbnRlcm5hbGx5IGRlZmF1bHRzIHJlY3Vyc2lvbkxpbWl0IHRvIDI1IGlmIG5vdFxuICAgICAgICAvLyBwYXNzZWQgZGlyZWN0bHkgaW4gYG9wdGlvbnNgLlxuICAgICAgICAvLyBUaGVyZSBpcyBjdXJyZW50bHkgbm8gd2F5IGluIF9zdHJlYW1JdGVyYXRvciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGlzIHdhc1xuICAgICAgICAvLyBzZXQgYnkgYnkgZW5zdXJlQ29uZmlnIG9yIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBzbyB3ZSBzcGVjaWZ5IHRoZSBib3VuZCB2YWx1ZSBoZXJlXG4gICAgICAgIC8vIGFuZCBvdmVycmlkZSBpZiBpdCBpcyBwYXNzZWQgYXMgYW4gZXhwbGljaXQgcGFyYW0gaW4gYG9wdGlvbnNgLlxuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICByZWN1cnNpb25MaW1pdDogdGhpcy5jb25maWc/LnJlY3Vyc2lvbkxpbWl0LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgcHJlcGFyZVNwZWNzKGNvbmZpZywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdGb3JNYW5hZ2VkID0ge1xuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgc3RvcmU6IHRoaXMuc3RvcmUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNoYW5uZWxTcGVjcyA9IHt9O1xuICAgICAgICBjb25zdCBtYW5hZ2VkU3BlY3MgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgc3BlY10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jaGFubmVscykpIHtcbiAgICAgICAgICAgIGlmIChpc0Jhc2VDaGFubmVsKHNwZWMpKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbFNwZWNzW25hbWVdID0gc3BlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnM/LnNraXBNYW5hZ2VkKSB7XG4gICAgICAgICAgICAgICAgbWFuYWdlZFNwZWNzW25hbWVdID0ge1xuICAgICAgICAgICAgICAgICAgICBjbHM6IE5vb3BNYW5hZ2VkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogeyBjb25maWc6IHt9IH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hbmFnZWRTcGVjc1tuYW1lXSA9IHNwZWM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFuYWdlZCA9IG5ldyBNYW5hZ2VkVmFsdWVNYXBwaW5nKGF3YWl0IE9iamVjdC5lbnRyaWVzKG1hbmFnZWRTcGVjcykucmVkdWNlKGFzeW5jIChhY2NQcm9taXNlLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjYyA9IGF3YWl0IGFjY1Byb21pc2U7XG4gICAgICAgICAgICBsZXQgaW5pdGlhbGl6ZWRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChpc0NvbmZpZ3VyZWRNYW5hZ2VkVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwia2V5XCIgaW4gdmFsdWUucGFyYW1zICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnBhcmFtcy5rZXkgPT09IENoYW5uZWxLZXlQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wYXJhbXMua2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZFZhbHVlID0gYXdhaXQgdmFsdWUuY2xzLmluaXRpYWxpemUoY29uZmlnRm9yTWFuYWdlZCwgdmFsdWUucGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkVmFsdWUgPSBhd2FpdCB2YWx1ZS5pbml0aWFsaXplKGNvbmZpZ0Zvck1hbmFnZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluaXRpYWxpemVkVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFjYy5wdXNoKFtrZXksIGluaXRpYWxpemVkVmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIFByb21pc2UucmVzb2x2ZShbXSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5uZWxTcGVjcyxcbiAgICAgICAgICAgIG1hbmFnZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtU3ViZ3JhcGhzID0gb3B0aW9ucz8uc3ViZ3JhcGhzO1xuICAgICAgICBjb25zdCBpbnB1dENvbmZpZyA9IGVuc3VyZUxhbmdHcmFwaENvbmZpZyh0aGlzLmNvbmZpZywgb3B0aW9ucyk7XG4gICAgICAgIGlmIChpbnB1dENvbmZpZy5yZWN1cnNpb25MaW1pdCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBpbnB1dENvbmZpZy5yZWN1cnNpb25MaW1pdCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUGFzc2VkIFwicmVjdXJzaW9uTGltaXRcIiBtdXN0IGJlIGF0IGxlYXN0IDEuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hlY2twb2ludGVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludGVyICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgaW5wdXRDb25maWcuY29uZmlndXJhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hlY2twb2ludGVyIHJlcXVpcmVzIG9uZSBvciBtb3JlIG9mIHRoZSBmb2xsb3dpbmcgXCJjb25maWd1cmFibGVcIiBrZXlzOiBcInRocmVhZF9pZFwiLCBcImNoZWNrcG9pbnRfbnNcIiwgXCJjaGVja3BvaW50X2lkXCJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5yZXN0Q29uZmlnIH0gPSBpbnB1dENvbmZpZztcbiAgICAgICAgLy8gYXNzaWduIGRlZmF1bHRzXG4gICAgICAgIGNvbnN0IFtkZWJ1Zywgc3RyZWFtTW9kZSwgLCBvdXRwdXRLZXlzLCBjb25maWcsIGludGVycnVwdEJlZm9yZSwgaW50ZXJydXB0QWZ0ZXIsIGNoZWNrcG9pbnRlciwgc3RvcmUsIHN0cmVhbU1vZGVTaW5nbGUsXSA9IHRoaXMuX2RlZmF1bHRzKHJlc3RDb25maWcpO1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgSXRlcmFibGVSZWFkYWJsZVdyaXRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIG1vZGVzOiBuZXcgU2V0KHN0cmVhbU1vZGUpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gc2V0IHVwIG1lc3NhZ2VzIHN0cmVhbSBtb2RlXG4gICAgICAgIGlmIChzdHJlYW1Nb2RlLmluY2x1ZGVzKFwibWVzc2FnZXNcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VTdHJlYW1lciA9IG5ldyBTdHJlYW1NZXNzYWdlc0hhbmRsZXIoKGNodW5rKSA9PiBzdHJlYW0ucHVzaChjaHVuaykpO1xuICAgICAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgICAgIGlmIChjYWxsYmFja3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbWVzc2FnZVN0cmVhbWVyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KG1lc3NhZ2VTdHJlYW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3BpZWRDYWxsYmFja3MgPSBjYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKG1lc3NhZ2VTdHJlYW1lciwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXR1cCBjdXN0b20gc3RyZWFtIG1vZGVcbiAgICAgICAgaWYgKHN0cmVhbU1vZGUuaW5jbHVkZXMoXCJjdXN0b21cIikpIHtcbiAgICAgICAgICAgIGNvbmZpZy53cml0ZXIgPSAoY2h1bmspID0+IHN0cmVhbS5wdXNoKFtbXSwgXCJjdXN0b21cIiwgY2h1bmtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgY29uc3QgeyBjaGFubmVsU3BlY3MsIG1hbmFnZWQgfSA9IGF3YWl0IHRoaXMucHJlcGFyZVNwZWNzKGNvbmZpZyk7XG4gICAgICAgIGxldCBsb29wO1xuICAgICAgICBsZXQgbG9vcEVycm9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFByZWdlbExvb3Agd2lsbCB5aWVsZCBldmVudHMgZnJvbSBjb25jdXJyZW50IHRhc2tzIGFzIHNvb24gYXMgdGhleSBhcmVcbiAgICAgICAgICogZ2VuZXJhdGVkLiBFYWNoIHRhc2sgY2FuIHB1c2ggbXVsdGlwbGUgZXZlbnRzIG9udG8gdGhlIHN0cmVhbSBpbiBhbnkgb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdlIHVzZSBhIHNlcGFyYXRlIGJhY2tncm91bmQgbWV0aG9kIGFuZCBzdHJlYW0gaGVyZSBpbiBvcmRlciB0byB5aWVsZCBldmVudHNcbiAgICAgICAgICogZnJvbSB0aGUgbG9vcCB0byB0aGUgbWFpbiBzdHJlYW0gYW5kIHRoZXJlZm9yZSBiYWNrIHRvIHRoZSB1c2VyIGFzIHNvb24gYXNcbiAgICAgICAgICogdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgY3JlYXRlQW5kUnVuTG9vcCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbG9vcCA9IGF3YWl0IFByZWdlbExvb3AuaW5pdGlhbGl6ZSh7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRlcixcbiAgICAgICAgICAgICAgICAgICAgbm9kZXM6IHRoaXMubm9kZXMsXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxTcGVjcyxcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlZCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0S2V5cyxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtS2V5czogdGhpcy5zdHJlYW1DaGFubmVsc0FzSXMsXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIGludGVycnVwdEFmdGVyLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHRCZWZvcmUsXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZXI6IHJ1bk1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0aGlzLmRlYnVnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBQcmVnZWxSdW5uZXIoe1xuICAgICAgICAgICAgICAgICAgICBsb29wLFxuICAgICAgICAgICAgICAgICAgICBub2RlRmluaXNoZWQ6IGNvbmZpZy5jb25maWd1cmFibGU/Lm5vZGVGaW5pc2hlZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucz8uc3ViZ3JhcGhzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvb3AuY29uZmlnLmNvbmZpZ3VyYWJsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmxvb3AuY29uZmlnLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1NUUkVBTV06IGxvb3Auc3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ydW5Mb29wKHsgbG9vcCwgcnVubmVyLCBkZWJ1ZywgY29uZmlnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb29wRXJyb3IgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBgLnN0b3AoKWAgYWdhaW4gaW5jYXNlIGl0IHdhcyBub3QgY2FsbGVkIGluIHRoZSBsb29wLCBlLmcgZHVlIHRvIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9vcC5zdG9yZT8uc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihsb29wPy5jaGVja3BvaW50ZXJQcm9taXNlcyA/PyBbXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5BcnJheS5mcm9tKG1hbmFnZWQudmFsdWVzKCkpLm1hcCgobXYpID0+IG12LnByb21pc2VzKCkpLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9vcEVycm9yID0gbG9vcEVycm9yID8/IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsb29wRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJDYXVzZXMgYW55IGZ1dHVyZSBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgYXNzb2NpYXRlZCBzdHJlYW0gdG8gZXJyb3JcIi5cbiAgICAgICAgICAgICAgICAgICAgLy8gV3JhcHMgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciNlcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1JlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIvZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmVycm9yKGxvb3BFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaWxsIGVuZCB0aGUgaXRlcmF0b3Igb3V0c2lkZSBvZiB0aGlzIG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcGluZyBwcmV2aW91c2x5IGVucXVldWVkIGNodW5rcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gV3JhcHMgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciNjbG9zZTpcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1JlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIvY2xvc2VcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBydW5Mb29wUHJvbWlzZSA9IGNyZWF0ZUFuZFJ1bkxvb3AoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0YSBzdHJ1Y3R1cmUgZXJyb3IuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBbbmFtZXNwYWNlLCBtb2RlLCBwYXlsb2FkXSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIGlmIChzdHJlYW1Nb2RlLmluY2x1ZGVzKG1vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW1TdWJncmFwaHMgJiYgIXN0cmVhbU1vZGVTaW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIFtuYW1lc3BhY2UsIG1vZGUsIHBheWxvYWRdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzdHJlYW1Nb2RlU2luZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbbW9kZSwgcGF5bG9hZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RyZWFtU3ViZ3JhcGhzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbbmFtZXNwYWNlLCBwYXlsb2FkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IobG9vcEVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCBydW5Mb29wUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChsb29wPy5vdXRwdXQgPz8ge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIGdyYXBoIHdpdGggYSBzaW5nbGUgaW5wdXQgYW5kIGNvbmZpZy5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIHRoZSBncmFwaC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY29uZmlndXJhdGlvbiB0byB1c2UgZm9yIHRoZSBydW4uXG4gICAgICogQHBhcmFtIG9wdGlvbnMuc3RyZWFtTW9kZSBUaGUgbW9kZSB0byBzdHJlYW0gb3V0cHV0LiBEZWZhdWx0cyB0byB2YWx1ZSBzZXQgb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICogICBPcHRpb25zIGFyZSBcInZhbHVlc1wiLCBcInVwZGF0ZXNcIiwgYW5kIFwiZGVidWdcIi4gRGVmYXVsdCBpcyBcInZhbHVlc1wiLlxuICAgICAqICAgICB2YWx1ZXM6IEVtaXQgdGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBzdGF0ZSBmb3IgZWFjaCBzdGVwLlxuICAgICAqICAgICB1cGRhdGVzOiBFbWl0IG9ubHkgdGhlIHVwZGF0ZXMgdG8gdGhlIHN0YXRlIGZvciBlYWNoIHN0ZXAuXG4gICAgICogICAgICAgICBPdXRwdXQgaXMgYSBkaWN0IHdpdGggdGhlIG5vZGUgbmFtZSBhcyBrZXkgYW5kIHRoZSB1cGRhdGVkIHZhbHVlcyBhcyB2YWx1ZS5cbiAgICAgKiAgICAgZGVidWc6IEVtaXQgZGVidWcgZXZlbnRzIGZvciBlYWNoIHN0ZXAuXG4gICAgICogQHBhcmFtIG9wdGlvbnMub3V0cHV0S2V5cyBUaGUga2V5cyB0byBzdHJlYW0uIERlZmF1bHRzIHRvIGFsbCBub24tY29udGV4dCBjaGFubmVscy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5pbnRlcnJ1cHRCZWZvcmUgTm9kZXMgdG8gaW50ZXJydXB0IGJlZm9yZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5pbnRlcnJ1cHRBZnRlciBOb2RlcyB0byBpbnRlcnJ1cHQgYWZ0ZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZGVidWcgV2hldGhlciB0byBwcmludCBkZWJ1ZyBpbmZvcm1hdGlvbiBkdXJpbmcgZXhlY3V0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdHJlYW1Nb2RlID0gb3B0aW9ucz8uc3RyZWFtTW9kZSA/PyBcInZhbHVlc1wiO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgb3V0cHV0S2V5czogb3B0aW9ucz8ub3V0cHV0S2V5cyA/PyB0aGlzLm91dHB1dENoYW5uZWxzLFxuICAgICAgICAgICAgc3RyZWFtTW9kZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuc3RyZWFtKGlucHV0LCBjb25maWcpO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJlYW1Nb2RlID09PSBcInZhbHVlc1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2h1bmtzO1xuICAgIH1cbiAgICBhc3luYyBfcnVuTG9vcChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBsb29wLCBydW5uZXIsIGRlYnVnLCBjb25maWcgfSA9IHBhcmFtcztcbiAgICAgICAgbGV0IHRpY2tFcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCBsb29wLnRpY2soe1xuICAgICAgICAgICAgICAgIGlucHV0S2V5czogdGhpcy5pbnB1dENoYW5uZWxzLFxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdGVwQ2hlY2twb2ludChsb29wLmNoZWNrcG9pbnRNZXRhZGF0YS5zdGVwLCBsb29wLmNoYW5uZWxzLCB0aGlzLnN0cmVhbUNoYW5uZWxzTGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBwcmludFN0ZXBUYXNrcyhsb29wLnN0ZXAsIE9iamVjdC52YWx1ZXMobG9vcC50YXNrcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBydW5uZXIudGljayh7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuc3RlcFRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgIHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuICAgICAgICAgICAgICAgICAgICBvblN0ZXBXcml0ZTogKHN0ZXAsIHdyaXRlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRTdGVwV3JpdGVzKHN0ZXAsIHdyaXRlcywgdGhpcy5zdHJlYW1DaGFubmVsc0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGNvbmZpZy5zaWduYWwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9vcC5zdGF0dXMgPT09IFwib3V0X29mX3N0ZXBzXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhSZWN1cnNpb25FcnJvcihbXG4gICAgICAgICAgICAgICAgICAgIGBSZWN1cnNpb24gbGltaXQgb2YgJHtjb25maWcucmVjdXJzaW9uTGltaXR9IHJlYWNoZWRgLFxuICAgICAgICAgICAgICAgICAgICBcIndpdGhvdXQgaGl0dGluZyBhIHN0b3AgY29uZGl0aW9uLiBZb3UgY2FuIGluY3JlYXNlIHRoZVwiLFxuICAgICAgICAgICAgICAgICAgICBgbGltaXQgYnkgc2V0dGluZyB0aGUgXCJyZWN1cnNpb25MaW1pdFwiIGNvbmZpZyBrZXkuYCxcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgIGxjX2Vycm9yX2NvZGU6IFwiR1JBUEhfUkVDVVJTSU9OX0xJTUlUXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRpY2tFcnJvciA9IGU7XG4gICAgICAgICAgICBjb25zdCBzdXBwcmVzcyA9IGF3YWl0IGxvb3AuZmluaXNoQW5kSGFuZGxlRXJyb3IodGlja0Vycm9yKTtcbiAgICAgICAgICAgIGlmICghc3VwcHJlc3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHRpY2tFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbG9vcC5maW5pc2hBbmRIYW5kbGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mapCommand: () => (/* binding */ mapCommand),\n/* harmony export */   mapInput: () => (/* binding */ mapInput),\n/* harmony export */   mapOutputUpdates: () => (/* binding */ mapOutputUpdates),\n/* harmony export */   mapOutputValues: () => (/* binding */ mapOutputValues),\n/* harmony export */   readChannel: () => (/* binding */ readChannel),\n/* harmony export */   readChannels: () => (/* binding */ readChannels),\n/* harmony export */   single: () => (/* binding */ single)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@10.0.0/node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n\n\n\nfunction readChannel(channels, chan, catchErrors = true, returnException = false) {\n    try {\n        return channels[chan].get();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }\n    catch (e) {\n        if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError.unminifiable_name) {\n            if (returnException) {\n                return e;\n            }\n            else if (catchErrors) {\n                return null;\n            }\n        }\n        throw e;\n    }\n}\nfunction readChannels(channels, select, skipEmpty = true\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    if (Array.isArray(select)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const values = {};\n        for (const k of select) {\n            try {\n                values[k] = readChannel(channels, k, !skipEmpty);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (e) {\n                if (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError.unminifiable_name) {\n                    continue;\n                }\n            }\n        }\n        return values;\n    }\n    else {\n        return readChannel(channels, select);\n    }\n}\n/**\n * Map input chunk to a sequence of pending writes in the form (channel, value).\n */\nfunction* mapCommand(cmd, pendingWrites) {\n    if (cmd.graph === _constants_js__WEBPACK_IMPORTED_MODULE_0__.Command.PARENT) {\n        throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidUpdateError(\"There is no parent graph.\");\n    }\n    if (cmd.goto) {\n        let sends;\n        if (Array.isArray(cmd.goto)) {\n            sends = cmd.goto;\n        }\n        else {\n            sends = [cmd.goto];\n        }\n        for (const send of sends) {\n            if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_0__._isSend)(send)) {\n                yield [_constants_js__WEBPACK_IMPORTED_MODULE_0__.NULL_TASK_ID, _constants_js__WEBPACK_IMPORTED_MODULE_0__.TASKS, send];\n            }\n            else if (typeof send === \"string\") {\n                yield [_constants_js__WEBPACK_IMPORTED_MODULE_0__.NULL_TASK_ID, `branch:__start__:${_constants_js__WEBPACK_IMPORTED_MODULE_0__.SELF}:${send}`, \"__start__\"];\n            }\n            else {\n                throw new Error(`In Command.send, expected Send or string, got ${typeof send}`);\n            }\n        }\n    }\n    if (cmd.resume) {\n        if (typeof cmd.resume === \"object\" &&\n            Object.keys(cmd.resume).length &&\n            Object.keys(cmd.resume).every(uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])) {\n            for (const [tid, resume] of Object.entries(cmd.resume)) {\n                const existing = pendingWrites\n                    .filter((w) => w[0] === tid && w[1] === _constants_js__WEBPACK_IMPORTED_MODULE_0__.RESUME)\n                    .map((w) => w[2])\n                    .slice(0, 1) ?? [];\n                existing.push(resume);\n                yield [tid, _constants_js__WEBPACK_IMPORTED_MODULE_0__.RESUME, existing];\n            }\n        }\n        else {\n            yield [_constants_js__WEBPACK_IMPORTED_MODULE_0__.NULL_TASK_ID, _constants_js__WEBPACK_IMPORTED_MODULE_0__.RESUME, cmd.resume];\n        }\n    }\n    if (cmd.update) {\n        if (typeof cmd.update !== \"object\" || !cmd.update) {\n            throw new Error(\"Expected cmd.update to be a dict mapping channel names to update values\");\n        }\n        if (Array.isArray(cmd.update)) {\n            for (const [k, v] of cmd.update) {\n                yield [_constants_js__WEBPACK_IMPORTED_MODULE_0__.NULL_TASK_ID, k, v];\n            }\n        }\n        else {\n            for (const [k, v] of Object.entries(cmd.update)) {\n                yield [_constants_js__WEBPACK_IMPORTED_MODULE_0__.NULL_TASK_ID, k, v];\n            }\n        }\n    }\n}\n/**\n * Map input chunk to a sequence of pending writes in the form [channel, value].\n */\nfunction* mapInput(inputChannels, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nchunk\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    if (chunk !== undefined && chunk !== null) {\n        if (Array.isArray(inputChannels) &&\n            typeof chunk === \"object\" &&\n            !Array.isArray(chunk)) {\n            for (const k in chunk) {\n                if (inputChannels.includes(k)) {\n                    yield [k, chunk[k]];\n                }\n            }\n        }\n        else if (Array.isArray(inputChannels)) {\n            throw new Error(`Input chunk must be an object when \"inputChannels\" is an array`);\n        }\n        else {\n            yield [inputChannels, chunk];\n        }\n    }\n}\n/**\n * Map pending writes (a sequence of tuples (channel, value)) to output chunk.\n */\nfunction* mapOutputValues(outputChannels, pendingWrites, channels\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    if (Array.isArray(outputChannels)) {\n        if (pendingWrites === true ||\n            pendingWrites.find(([chan, _]) => outputChannels.includes(chan))) {\n            yield readChannels(channels, outputChannels);\n        }\n    }\n    else {\n        if (pendingWrites === true ||\n            pendingWrites.some(([chan, _]) => chan === outputChannels)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            yield readChannel(channels, outputChannels);\n        }\n    }\n}\n/**\n * Map pending writes (a sequence of tuples (channel, value)) to output chunk.\n */\nfunction* mapOutputUpdates(outputChannels, tasks, cached\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    const outputTasks = tasks.filter(([task, ww]) => {\n        return ((task.config === undefined || !task.config.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN)) &&\n            ww[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_0__.ERROR &&\n            ww[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT);\n    });\n    if (!outputTasks.length) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let updated;\n    if (outputTasks.some(([task]) => task.writes.some(([chan, _]) => chan === _constants_js__WEBPACK_IMPORTED_MODULE_0__.RETURN))) {\n        updated = outputTasks.flatMap(([task]) => task.writes\n            .filter(([chan, _]) => chan === _constants_js__WEBPACK_IMPORTED_MODULE_0__.RETURN)\n            .map(([_, value]) => [task.name, value]));\n    }\n    else if (!Array.isArray(outputChannels)) {\n        updated = outputTasks.flatMap(([task]) => task.writes\n            .filter(([chan, _]) => chan === outputChannels)\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            .map(([_, value]) => [task.name, value]));\n    }\n    else {\n        updated = outputTasks\n            .filter(([task]) => task.writes.some(([chan]) => outputChannels.includes(chan)))\n            .map(([task]) => [\n            task.name,\n            Object.fromEntries(task.writes.filter(([chan]) => outputChannels.includes(chan))),\n        ]);\n    }\n    const grouped = Object.fromEntries(outputTasks.map(([t]) => [t.name, []])\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    );\n    for (const [node, value] of updated) {\n        grouped[node].push(value);\n    }\n    for (const [node, value] of Object.entries(grouped)) {\n        if (value.length === 0) {\n            delete grouped[node];\n        }\n        else if (value.length === 1) {\n            // TODO: Fix incorrect cast here\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            grouped[node] = value[0];\n        }\n    }\n    if (cached) {\n        grouped[\"__metadata__\"] = { cached };\n    }\n    yield grouped;\n}\nfunction single(iter) {\n    // eslint-disable-next-line no-unreachable-loop\n    for (const value of iter) {\n        return value;\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9pby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQzZGO0FBQ3hEO0FBQzlEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5REFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseURBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxzQkFBc0Isa0RBQU87QUFDN0Isa0JBQWtCLDBEQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBTztBQUN2Qix1QkFBdUIsdURBQVksRUFBRSxnREFBSztBQUMxQztBQUNBO0FBQ0EsdUJBQXVCLHVEQUFZLHNCQUFzQiwrQ0FBSSxDQUFDLEdBQUcsS0FBSztBQUN0RTtBQUNBO0FBQ0EsaUZBQWlGLFlBQVk7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDRDQUFRO0FBQ2xEO0FBQ0E7QUFDQSw0REFBNEQsaURBQU07QUFDbEU7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBWSxFQUFFLGlEQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLHFEQUFVO0FBQ3BGLHlCQUF5QixnREFBSztBQUM5Qix5QkFBeUIsb0RBQVM7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsaURBQU07QUFDcEY7QUFDQSw0Q0FBNEMsaURBQU07QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9pby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBfaXNTZW5kLCBDb21tYW5kLCBFUlJPUiwgSU5URVJSVVBULCBOVUxMX1RBU0tfSUQsIFJFU1VNRSwgUkVUVVJOLCBTRUxGLCBUQUdfSElEREVOLCBUQVNLUywgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRDaGFubmVsKGNoYW5uZWxzLCBjaGFuLCBjYXRjaEVycm9ycyA9IHRydWUsIHJldHVybkV4Y2VwdGlvbiA9IGZhbHNlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNoYW5uZWxzW2NoYW5dLmdldCgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkge1xuICAgICAgICAgICAgaWYgKHJldHVybkV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2F0Y2hFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHNlbGVjdCwgc2tpcEVtcHR5ID0gdHJ1ZVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdCkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiBzZWxlY3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2tdID0gcmVhZENoYW5uZWwoY2hhbm5lbHMsIGssICFza2lwRW1wdHkpO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlYWRDaGFubmVsKGNoYW5uZWxzLCBzZWxlY3QpO1xuICAgIH1cbn1cbi8qKlxuICogTWFwIGlucHV0IGNodW5rIHRvIGEgc2VxdWVuY2Ugb2YgcGVuZGluZyB3cml0ZXMgaW4gdGhlIGZvcm0gKGNoYW5uZWwsIHZhbHVlKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uKiBtYXBDb21tYW5kKGNtZCwgcGVuZGluZ1dyaXRlcykge1xuICAgIGlmIChjbWQuZ3JhcGggPT09IENvbW1hbmQuUEFSRU5UKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJUaGVyZSBpcyBubyBwYXJlbnQgZ3JhcGguXCIpO1xuICAgIH1cbiAgICBpZiAoY21kLmdvdG8pIHtcbiAgICAgICAgbGV0IHNlbmRzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjbWQuZ290bykpIHtcbiAgICAgICAgICAgIHNlbmRzID0gY21kLmdvdG87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZW5kcyA9IFtjbWQuZ290b107XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBzZW5kIG9mIHNlbmRzKSB7XG4gICAgICAgICAgICBpZiAoX2lzU2VuZChzZW5kKSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIFtOVUxMX1RBU0tfSUQsIFRBU0tTLCBzZW5kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzZW5kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgW05VTExfVEFTS19JRCwgYGJyYW5jaDpfX3N0YXJ0X186JHtTRUxGfToke3NlbmR9YCwgXCJfX3N0YXJ0X19cIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluIENvbW1hbmQuc2VuZCwgZXhwZWN0ZWQgU2VuZCBvciBzdHJpbmcsIGdvdCAke3R5cGVvZiBzZW5kfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjbWQucmVzdW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY21kLnJlc3VtZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY21kLnJlc3VtZSkubGVuZ3RoICYmXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhjbWQucmVzdW1lKS5ldmVyeSh2YWxpZGF0ZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3RpZCwgcmVzdW1lXSBvZiBPYmplY3QuZW50cmllcyhjbWQucmVzdW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcGVuZGluZ1dyaXRlc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCh3KSA9PiB3WzBdID09PSB0aWQgJiYgd1sxXSA9PT0gUkVTVU1FKVxuICAgICAgICAgICAgICAgICAgICAubWFwKCh3KSA9PiB3WzJdKVxuICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMSkgPz8gW107XG4gICAgICAgICAgICAgICAgZXhpc3RpbmcucHVzaChyZXN1bWUpO1xuICAgICAgICAgICAgICAgIHlpZWxkIFt0aWQsIFJFU1VNRSwgZXhpc3RpbmddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeWllbGQgW05VTExfVEFTS19JRCwgUkVTVU1FLCBjbWQucmVzdW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY21kLnVwZGF0ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGNtZC51cGRhdGUgIT09IFwib2JqZWN0XCIgfHwgIWNtZC51cGRhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGNtZC51cGRhdGUgdG8gYmUgYSBkaWN0IG1hcHBpbmcgY2hhbm5lbCBuYW1lcyB0byB1cGRhdGUgdmFsdWVzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNtZC51cGRhdGUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBjbWQudXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgW05VTExfVEFTS19JRCwgaywgdl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhjbWQudXBkYXRlKSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIFtOVUxMX1RBU0tfSUQsIGssIHZdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNYXAgaW5wdXQgY2h1bmsgdG8gYSBzZXF1ZW5jZSBvZiBwZW5kaW5nIHdyaXRlcyBpbiB0aGUgZm9ybSBbY2hhbm5lbCwgdmFsdWVdLlxuICovXG5leHBvcnQgZnVuY3Rpb24qIG1hcElucHV0KGlucHV0Q2hhbm5lbHMsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNodW5rXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgaWYgKGNodW5rICE9PSB1bmRlZmluZWQgJiYgY2h1bmsgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRDaGFubmVscykgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjaHVuayA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkoY2h1bmspKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGsgaW4gY2h1bmspIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRDaGFubmVscy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBbaywgY2h1bmtba11dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0Q2hhbm5lbHMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0IGNodW5rIG11c3QgYmUgYW4gb2JqZWN0IHdoZW4gXCJpbnB1dENoYW5uZWxzXCIgaXMgYW4gYXJyYXlgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIFtpbnB1dENoYW5uZWxzLCBjaHVua107XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1hcCBwZW5kaW5nIHdyaXRlcyAoYSBzZXF1ZW5jZSBvZiB0dXBsZXMgKGNoYW5uZWwsIHZhbHVlKSkgdG8gb3V0cHV0IGNodW5rLlxuICovXG5leHBvcnQgZnVuY3Rpb24qIG1hcE91dHB1dFZhbHVlcyhvdXRwdXRDaGFubmVscywgcGVuZGluZ1dyaXRlcywgY2hhbm5lbHNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRDaGFubmVscykpIHtcbiAgICAgICAgaWYgKHBlbmRpbmdXcml0ZXMgPT09IHRydWUgfHxcbiAgICAgICAgICAgIHBlbmRpbmdXcml0ZXMuZmluZCgoW2NoYW4sIF9dKSA9PiBvdXRwdXRDaGFubmVscy5pbmNsdWRlcyhjaGFuKSkpIHtcbiAgICAgICAgICAgIHlpZWxkIHJlYWRDaGFubmVscyhjaGFubmVscywgb3V0cHV0Q2hhbm5lbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAocGVuZGluZ1dyaXRlcyA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgcGVuZGluZ1dyaXRlcy5zb21lKChbY2hhbiwgX10pID0+IGNoYW4gPT09IG91dHB1dENoYW5uZWxzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHlpZWxkIHJlYWRDaGFubmVsKGNoYW5uZWxzLCBvdXRwdXRDaGFubmVscyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1hcCBwZW5kaW5nIHdyaXRlcyAoYSBzZXF1ZW5jZSBvZiB0dXBsZXMgKGNoYW5uZWwsIHZhbHVlKSkgdG8gb3V0cHV0IGNodW5rLlxuICovXG5leHBvcnQgZnVuY3Rpb24qIG1hcE91dHB1dFVwZGF0ZXMob3V0cHV0Q2hhbm5lbHMsIHRhc2tzLCBjYWNoZWRcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4pIHtcbiAgICBjb25zdCBvdXRwdXRUYXNrcyA9IHRhc2tzLmZpbHRlcigoW3Rhc2ssIHd3XSkgPT4ge1xuICAgICAgICByZXR1cm4gKCh0YXNrLmNvbmZpZyA9PT0gdW5kZWZpbmVkIHx8ICF0YXNrLmNvbmZpZy50YWdzPy5pbmNsdWRlcyhUQUdfSElEREVOKSkgJiZcbiAgICAgICAgICAgIHd3WzBdWzBdICE9PSBFUlJPUiAmJlxuICAgICAgICAgICAgd3dbMF1bMF0gIT09IElOVEVSUlVQVCk7XG4gICAgfSk7XG4gICAgaWYgKCFvdXRwdXRUYXNrcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGxldCB1cGRhdGVkO1xuICAgIGlmIChvdXRwdXRUYXNrcy5zb21lKChbdGFza10pID0+IHRhc2sud3JpdGVzLnNvbWUoKFtjaGFuLCBfXSkgPT4gY2hhbiA9PT0gUkVUVVJOKSkpIHtcbiAgICAgICAgdXBkYXRlZCA9IG91dHB1dFRhc2tzLmZsYXRNYXAoKFt0YXNrXSkgPT4gdGFzay53cml0ZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKFtjaGFuLCBfXSkgPT4gY2hhbiA9PT0gUkVUVVJOKVxuICAgICAgICAgICAgLm1hcCgoW18sIHZhbHVlXSkgPT4gW3Rhc2submFtZSwgdmFsdWVdKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KG91dHB1dENoYW5uZWxzKSkge1xuICAgICAgICB1cGRhdGVkID0gb3V0cHV0VGFza3MuZmxhdE1hcCgoW3Rhc2tdKSA9PiB0YXNrLndyaXRlc1xuICAgICAgICAgICAgLmZpbHRlcigoW2NoYW4sIF9dKSA9PiBjaGFuID09PSBvdXRwdXRDaGFubmVscylcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiBbdGFzay5uYW1lLCB2YWx1ZV0pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHVwZGF0ZWQgPSBvdXRwdXRUYXNrc1xuICAgICAgICAgICAgLmZpbHRlcigoW3Rhc2tdKSA9PiB0YXNrLndyaXRlcy5zb21lKChbY2hhbl0pID0+IG91dHB1dENoYW5uZWxzLmluY2x1ZGVzKGNoYW4pKSlcbiAgICAgICAgICAgIC5tYXAoKFt0YXNrXSkgPT4gW1xuICAgICAgICAgICAgdGFzay5uYW1lLFxuICAgICAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKHRhc2sud3JpdGVzLmZpbHRlcigoW2NoYW5dKSA9PiBvdXRwdXRDaGFubmVscy5pbmNsdWRlcyhjaGFuKSkpLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgY29uc3QgZ3JvdXBlZCA9IE9iamVjdC5mcm9tRW50cmllcyhvdXRwdXRUYXNrcy5tYXAoKFt0XSkgPT4gW3QubmFtZSwgW11dKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IFtub2RlLCB2YWx1ZV0gb2YgdXBkYXRlZCkge1xuICAgICAgICBncm91cGVkW25vZGVdLnB1c2godmFsdWUpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtub2RlLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXBlZCkpIHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIGdyb3VwZWRbbm9kZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBGaXggaW5jb3JyZWN0IGNhc3QgaGVyZVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGdyb3VwZWRbbm9kZV0gPSB2YWx1ZVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIGdyb3VwZWRbXCJfX21ldGFkYXRhX19cIl0gPSB7IGNhY2hlZCB9O1xuICAgIH1cbiAgICB5aWVsZCBncm91cGVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNpbmdsZShpdGVyKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVucmVhY2hhYmxlLWxvb3BcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGl0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/loop.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/loop.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PregelLoop: () => (/* binding */ PregelLoop)\n/* harmony export */ });\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.15_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferu_wxyqc73w5wk4lx2cfu5zaddqqi/node_modules/@langchain/langgraph-checkpoint/index.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _algo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./algo.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/algo.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./io.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _debug_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./debug.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/debug.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./stream.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/stream.js\");\n\n\n\n\n\n\n\n\n\n\nconst INPUT_DONE = Symbol.for(\"INPUT_DONE\");\nconst INPUT_RESUMING = Symbol.for(\"INPUT_RESUMING\");\nconst DEFAULT_LOOP_LIMIT = 25;\nfunction createDuplexStream(...streams) {\n    return new _stream_js__WEBPACK_IMPORTED_MODULE_9__.IterableReadableWritableStream({\n        passthroughFn: (value) => {\n            for (const stream of streams) {\n                if (stream.modes.has(value[1])) {\n                    stream.push(value);\n                }\n            }\n        },\n        modes: new Set(streams.flatMap((s) => Array.from(s.modes))),\n    });\n}\nclass PregelLoop {\n    constructor(params) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"input\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointerGetNextVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"channels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"managed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointNamespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointPendingWrites\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"checkpointPreviousVersions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"step\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streamKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"skipDoneTasks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"prevCheckpointConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"pending\"\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"tasks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"stream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"checkpointerPromises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"isNested\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_checkpointerChainedPromise\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: Promise.resolve()\n        });\n        Object.defineProperty(this, \"store\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"manager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"interruptAfter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"interruptBefore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"toInterrupt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"debug\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.input = params.input;\n        this.checkpointer = params.checkpointer;\n        // TODO: if managed values no longer needs graph we can replace with\n        // managed_specs, channel_specs\n        if (this.checkpointer !== undefined) {\n            this.checkpointerGetNextVersion = this.checkpointer.getNextVersion.bind(this.checkpointer);\n        }\n        else {\n            this.checkpointerGetNextVersion = _algo_js__WEBPACK_IMPORTED_MODULE_3__.increment;\n        }\n        this.checkpoint = params.checkpoint;\n        this.checkpointMetadata = params.checkpointMetadata;\n        this.checkpointPreviousVersions = params.checkpointPreviousVersions;\n        this.channels = params.channels;\n        this.managed = params.managed;\n        this.checkpointPendingWrites = params.checkpointPendingWrites;\n        this.step = params.step;\n        this.stop = params.stop;\n        this.config = params.config;\n        this.checkpointConfig = params.checkpointConfig;\n        this.isNested = params.isNested;\n        this.manager = params.manager;\n        this.outputKeys = params.outputKeys;\n        this.streamKeys = params.streamKeys;\n        this.nodes = params.nodes;\n        this.skipDoneTasks = params.skipDoneTasks;\n        this.store = params.store;\n        this.stream = params.stream;\n        this.checkpointNamespace = params.checkpointNamespace;\n        this.prevCheckpointConfig = params.prevCheckpointConfig;\n        this.interruptAfter = params.interruptAfter;\n        this.interruptBefore = params.interruptBefore;\n        this.debug = params.debug;\n    }\n    static async initialize(params) {\n        let { config, stream } = params;\n        const { checkSubgraphs = true } = params;\n        if (stream !== undefined &&\n            config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_STREAM] !== undefined) {\n            stream = createDuplexStream(stream, config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_STREAM]);\n        }\n        const skipDoneTasks = config.configurable\n            ? !(\"checkpoint_id\" in config.configurable)\n            : true;\n        const isNested = _constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ in (config.configurable ?? {});\n        if (!isNested &&\n            config.configurable?.checkpoint_ns !== undefined &&\n            config.configurable?.checkpoint_ns !== \"\") {\n            config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.patchConfigurable)(config, {\n                checkpoint_ns: \"\",\n                checkpoint_id: undefined,\n            });\n        }\n        let checkpointConfig = config;\n        if (config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP] !== undefined &&\n            config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP]?.[config.configurable?.checkpoint_ns]) {\n            checkpointConfig = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.patchConfigurable)(config, {\n                checkpoint_id: config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP][config.configurable?.checkpoint_ns],\n            });\n        }\n        const checkpointNamespace = config.configurable?.checkpoint_ns?.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR) ?? [];\n        const saved = (await params.checkpointer?.getTuple(checkpointConfig)) ?? {\n            config,\n            checkpoint: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.emptyCheckpoint)(),\n            metadata: {\n                source: \"input\",\n                step: -2,\n                writes: null,\n                parents: {},\n            },\n            pendingWrites: [],\n        };\n        checkpointConfig = {\n            ...config,\n            ...saved.config,\n            configurable: {\n                checkpoint_ns: \"\",\n                ...config.configurable,\n                ...saved.config.configurable,\n            },\n        };\n        const prevCheckpointConfig = saved.parentConfig;\n        const checkpoint = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.copyCheckpoint)(saved.checkpoint);\n        const checkpointMetadata = { ...saved.metadata };\n        const checkpointPendingWrites = saved.pendingWrites ?? [];\n        const channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.emptyChannels)(params.channelSpecs, checkpoint);\n        const step = (checkpointMetadata.step ?? 0) + 1;\n        const stop = step + (config.recursionLimit ?? DEFAULT_LOOP_LIMIT) + 1;\n        const checkpointPreviousVersions = { ...checkpoint.channel_versions };\n        const store = params.store\n            ? new _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.AsyncBatchedStore(params.store)\n            : undefined;\n        if (store) {\n            // Start the store. This is a batch store, so it will run continuously\n            store.start();\n        }\n        if (checkSubgraphs && isNested && params.checkpointer !== undefined) {\n            if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_6__.getSubgraphsSeenSet)().has(config.configurable?.checkpoint_ns)) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.MultipleSubgraphsError([\n                    \"Detected the same subgraph called multiple times by the same node.\",\n                    \"This is not allowed if checkpointing is enabled.\",\n                    \"\",\n                    `You can disable checkpointing for a subgraph by compiling it with \".compile({ checkpointer: false });\"`,\n                ].join(\"\\n\"), {\n                    lc_error_code: \"MULTIPLE_SUBGRAPHS\",\n                });\n            }\n            else {\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_6__.getSubgraphsSeenSet)().add(config.configurable?.checkpoint_ns);\n            }\n        }\n        return new PregelLoop({\n            input: params.input,\n            config,\n            checkpointer: params.checkpointer,\n            checkpoint,\n            checkpointMetadata,\n            checkpointConfig,\n            prevCheckpointConfig,\n            checkpointNamespace,\n            channels,\n            managed: params.managed,\n            isNested,\n            manager: params.manager,\n            skipDoneTasks,\n            step,\n            stop,\n            checkpointPreviousVersions,\n            checkpointPendingWrites,\n            outputKeys: params.outputKeys ?? [],\n            streamKeys: params.streamKeys ?? [],\n            nodes: params.nodes,\n            stream,\n            store,\n            interruptAfter: params.interruptAfter,\n            interruptBefore: params.interruptBefore,\n            debug: params.debug,\n        });\n    }\n    _checkpointerPutAfterPrevious(input) {\n        this._checkpointerChainedPromise = this._checkpointerChainedPromise.then(() => {\n            return this.checkpointer?.put(input.config, input.checkpoint, input.metadata, input.newVersions);\n        });\n        this.checkpointerPromises.push(this._checkpointerChainedPromise);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async updateManagedValues(key, values) {\n        const mv = this.managed.get(key);\n        if (mv && \"update\" in mv && typeof mv.update === \"function\") {\n            await mv.update(values);\n        }\n    }\n    /**\n     * Put writes for a task, to be read by the next tick.\n     * @param taskId\n     * @param writes\n     */\n    putWrites(taskId, writes) {\n        let writesCopy = writes;\n        if (writesCopy.length === 0) {\n            return;\n        }\n        // deduplicate writes to special channels, last write wins\n        if (writesCopy.every(([key]) => key in _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.WRITES_IDX_MAP)) {\n            writesCopy = Array.from(new Map(writesCopy.map((w) => [w[0], w])).values());\n        }\n        // save writes\n        for (const [c, v] of writesCopy) {\n            const idx = this.checkpointPendingWrites.findIndex((w) => w[0] === taskId && w[1] === c);\n            if (c in _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.WRITES_IDX_MAP && idx !== -1) {\n                this.checkpointPendingWrites[idx] = [taskId, c, v];\n            }\n            else {\n                this.checkpointPendingWrites.push([taskId, c, v]);\n            }\n        }\n        const putWritePromise = this.checkpointer?.putWrites({\n            ...this.checkpointConfig,\n            configurable: {\n                ...this.checkpointConfig.configurable,\n                checkpoint_ns: this.config.configurable?.checkpoint_ns ?? \"\",\n                checkpoint_id: this.checkpoint.id,\n            },\n        }, writesCopy, taskId);\n        if (putWritePromise !== undefined) {\n            this.checkpointerPromises.push(putWritePromise);\n        }\n        if (this.tasks) {\n            this._outputWrites(taskId, writesCopy);\n        }\n    }\n    _outputWrites(taskId, writes, cached = false) {\n        const task = this.tasks[taskId];\n        if (task !== undefined) {\n            if (task.config !== undefined &&\n                (task.config.tags ?? []).includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN)) {\n                return;\n            }\n            if (writes.length > 0 &&\n                writes[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR &&\n                writes[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT) {\n                this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputUpdates)(this.outputKeys, [[task, writes]], cached), \"updates\")));\n            }\n            if (!cached) {\n                this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTaskResults)(this.step, [[task, writes]], this.streamKeys), \"debug\")));\n            }\n        }\n    }\n    /**\n     * Execute a single iteration of the Pregel loop.\n     * Returns true if more iterations are needed.\n     * @param params\n     */\n    async tick(params) {\n        if (this.store && !this.store.isRunning) {\n            this.store?.start();\n        }\n        const { inputKeys = [] } = params;\n        if (this.status !== \"pending\") {\n            throw new Error(`Cannot tick when status is no longer \"pending\". Current status: \"${this.status}\"`);\n        }\n        if (![INPUT_DONE, INPUT_RESUMING].includes(this.input)) {\n            await this._first(inputKeys);\n        }\n        else if (Object.values(this.tasks).every((task) => task.writes.filter(([c]) => !(c in _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.WRITES_IDX_MAP)).length > 0)) {\n            const writes = Object.values(this.tasks).flatMap((t) => t.writes);\n            // All tasks have finished\n            const managedValueWrites = (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._applyWrites)(this.checkpoint, this.channels, Object.values(this.tasks), this.checkpointerGetNextVersion);\n            for (const [key, values] of Object.entries(managedValueWrites)) {\n                await this.updateManagedValues(key, values);\n            }\n            // produce values output\n            const valuesOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, writes, this.channels), \"values\"));\n            this._emit(valuesOutput);\n            // clear pending writes\n            this.checkpointPendingWrites = [];\n            await this._putCheckpoint({\n                source: \"loop\",\n                writes: (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputUpdates)(this.outputKeys, Object.values(this.tasks).map((task) => [task, task.writes])).next().value ?? null,\n            });\n            // after execution, check if we should interrupt\n            if ((0,_algo_js__WEBPACK_IMPORTED_MODULE_3__.shouldInterrupt)(this.checkpoint, this.interruptAfter, Object.values(this.tasks))) {\n                this.status = \"interrupt_after\";\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.GraphInterrupt();\n            }\n        }\n        else {\n            return false;\n        }\n        if (this.step > this.stop) {\n            this.status = \"out_of_steps\";\n            return false;\n        }\n        const nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._prepareNextTasks)(this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, this.managed, this.config, true, {\n            step: this.step,\n            checkpointer: this.checkpointer,\n            isResuming: this.input === INPUT_RESUMING,\n            manager: this.manager,\n            store: this.store,\n            stream: this.stream,\n        });\n        this.tasks = nextTasks;\n        // Produce debug output\n        if (this.checkpointer) {\n            this._emit(await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugCheckpoint)(this.step - 1, // printing checkpoint for previous step\n            this.checkpointConfig, this.channels, this.streamKeys, this.checkpointMetadata, Object.values(this.tasks), this.checkpointPendingWrites, this.prevCheckpointConfig), \"debug\")));\n        }\n        if (Object.values(this.tasks).length === 0) {\n            this.status = \"done\";\n            return false;\n        }\n        // if there are pending writes from a previous loop, apply them\n        if (this.skipDoneTasks && this.checkpointPendingWrites.length > 0) {\n            for (const [tid, k, v] of this.checkpointPendingWrites) {\n                if (k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME) {\n                    continue;\n                }\n                const task = Object.values(this.tasks).find((t) => t.id === tid);\n                if (task) {\n                    task.writes.push([k, v]);\n                }\n            }\n            for (const task of Object.values(this.tasks)) {\n                if (task.writes.length > 0) {\n                    this._outputWrites(task.id, task.writes, true);\n                }\n            }\n        }\n        // if all tasks have finished, re-tick\n        if (Object.values(this.tasks).every((task) => task.writes.length > 0)) {\n            return this.tick({ inputKeys });\n        }\n        // Before execution, check if we should interrupt\n        if ((0,_algo_js__WEBPACK_IMPORTED_MODULE_3__.shouldInterrupt)(this.checkpoint, this.interruptBefore, Object.values(this.tasks))) {\n            this.status = \"interrupt_before\";\n            throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.GraphInterrupt();\n        }\n        // Produce debug output\n        const debugOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTasks)(this.step, Object.values(this.tasks)), \"debug\"));\n        this._emit(debugOutput);\n        return true;\n    }\n    async finishAndHandleError(error) {\n        const suppress = this._suppressInterrupt(error);\n        if (suppress || error === undefined) {\n            this.output = (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.readChannels)(this.channels, this.outputKeys);\n        }\n        if (suppress) {\n            // emit one last \"values\" event, with pending writes applied\n            if (this.tasks !== undefined &&\n                this.checkpointPendingWrites.length > 0 &&\n                Object.values(this.tasks).some((task) => task.writes.length > 0)) {\n                const managedValueWrites = (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._applyWrites)(this.checkpoint, this.channels, Object.values(this.tasks), this.checkpointerGetNextVersion);\n                for (const [key, values] of Object.entries(managedValueWrites)) {\n                    await this.updateManagedValues(key, values);\n                }\n                this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, Object.values(this.tasks).flatMap((t) => t.writes), this.channels), \"values\")));\n            }\n            // Emit INTERRUPT event\n            this._emit([\n                [\n                    \"updates\",\n                    {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: error.interrupts,\n                    },\n                ],\n            ]);\n        }\n        return suppress;\n    }\n    acceptPush(task, writeIdx, call) {\n        if (this.interruptAfter?.length > 0 &&\n            (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__.shouldInterrupt)(this.checkpoint, this.interruptAfter, [task])) {\n            this.toInterrupt.push(task);\n            return;\n        }\n        const pushed = (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._prepareSingleTask)([_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH, task.path ?? [], writeIdx, task.id, call], this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, this.managed, this.config, true, {\n            step: this.step,\n            checkpointer: this.checkpointer,\n            manager: this.manager,\n            store: this.store,\n            stream: this.stream,\n        });\n        if (pushed) {\n            if (this.interruptBefore?.length > 0 &&\n                (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__.shouldInterrupt)(this.checkpoint, this.interruptBefore, [pushed])) {\n                this.toInterrupt.push(pushed);\n                return;\n            }\n            this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTasks)(this.step, [pushed]), \"debug\")));\n            if (this.debug) {\n                (0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.printStepTasks)(this.step, [pushed]);\n            }\n            this.tasks[pushed.id] = pushed;\n            if (this.skipDoneTasks) {\n                this._matchWrites({ [pushed.id]: pushed });\n            }\n            return pushed;\n        }\n    }\n    _suppressInterrupt(e) {\n        return (0,_errors_js__WEBPACK_IMPORTED_MODULE_6__.isGraphInterrupt)(e) && !this.isNested;\n    }\n    async _first(inputKeys) {\n        /*\n         * Resuming from previous checkpoint requires\n         * - finding a previous checkpoint\n         * - receiving null input (outer graph) or RESUMING flag (subgraph)\n         */\n        const { configurable } = this.config;\n        const isResuming = Object.keys(this.checkpoint.channel_versions).length !== 0 &&\n            (this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING] !== undefined ||\n                this.input === null ||\n                (0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isCommand)(this.input));\n        // take resume value from parent\n        const scratchpad = configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD];\n        if (scratchpad && scratchpad.nullResume !== undefined) {\n            this.putWrites(_constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID, [[_constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME, scratchpad.nullResume]]);\n        }\n        if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isCommand)(this.input)) {\n            if (this.input.resume != null && this.checkpointer == null) {\n                throw new Error(\"Cannot use Command(resume=...) without checkpointer\");\n            }\n            const writes = {};\n            // group writes by task id\n            for (const [tid, key, value] of (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapCommand)(this.input, this.checkpointPendingWrites)) {\n                if (writes[tid] === undefined) {\n                    writes[tid] = [];\n                }\n                writes[tid].push([key, value]);\n            }\n            if (Object.keys(writes).length === 0) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyInputError(\"Received empty Command input\");\n            }\n            // save writes\n            for (const [tid, ws] of Object.entries(writes)) {\n                this.putWrites(tid, ws);\n            }\n        }\n        // apply null writes\n        const nullWrites = (this.checkpointPendingWrites ?? [])\n            .filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID)\n            .map((w) => w.slice(1));\n        if (nullWrites.length > 0) {\n            (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._applyWrites)(this.checkpoint, this.channels, [\n                {\n                    name: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n                    writes: nullWrites,\n                    triggers: [],\n                },\n            ], this.checkpointerGetNextVersion);\n        }\n        if (isResuming) {\n            for (const channelName of Object.keys(this.channels)) {\n                if (this.checkpoint.channel_versions[channelName] !== undefined) {\n                    const version = this.checkpoint.channel_versions[channelName];\n                    this.checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT] = {\n                        ...this.checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT],\n                        [channelName]: version,\n                    };\n                }\n            }\n            // produce values output\n            const valuesOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, true, this.channels), \"values\"));\n            this._emit(valuesOutput);\n        }\n        else {\n            // map inputs to channel updates\n            const inputWrites = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapInput)(inputKeys, this.input));\n            if (inputWrites.length === 0) {\n                throw new _errors_js__WEBPACK_IMPORTED_MODULE_6__.EmptyInputError(`Received no input writes for ${JSON.stringify(inputKeys, null, 2)}`);\n            }\n            const discardTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._prepareNextTasks)(this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, this.managed, this.config, true, { step: this.step });\n            (0,_algo_js__WEBPACK_IMPORTED_MODULE_3__._applyWrites)(this.checkpoint, this.channels, Object.values(discardTasks).concat([\n                {\n                    name: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n                    writes: inputWrites,\n                    triggers: [],\n                },\n            ]), this.checkpointerGetNextVersion);\n            // save input checkpoint\n            await this._putCheckpoint({\n                source: \"input\",\n                writes: Object.fromEntries(inputWrites),\n            });\n        }\n        // done with input\n        this.input = this.input === INPUT_RESUMING ? INPUT_RESUMING : INPUT_DONE;\n        if (!this.isNested) {\n            this.config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.patchConfigurable)(this.config, {\n                [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING]: this.input === INPUT_RESUMING,\n            });\n        }\n    }\n    _emit(values) {\n        for (const chunk of values) {\n            if (this.stream.modes.has(chunk[0])) {\n                this.stream.push([this.checkpointNamespace, ...chunk]);\n            }\n        }\n    }\n    async _putCheckpoint(inputMetadata) {\n        // Assign step\n        const metadata = {\n            ...inputMetadata,\n            step: this.step,\n            parents: this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP] ?? {},\n        };\n        // Bail if no checkpointer\n        if (this.checkpointer !== undefined) {\n            // store the previous checkpoint config for debug events\n            this.prevCheckpointConfig = this.checkpointConfig?.configurable\n                ?.checkpoint_id\n                ? this.checkpointConfig\n                : undefined;\n            // create new checkpoint\n            this.checkpointMetadata = metadata;\n            // child graphs keep at most one checkpoint per parent checkpoint\n            // this is achieved by writing child checkpoints as progress is made\n            // (so that error recovery / resuming from interrupt don't lose work)\n            // but doing so always with an id equal to that of the parent checkpoint\n            this.checkpoint = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(this.checkpoint, this.channels, this.step);\n            this.checkpointConfig = {\n                ...this.checkpointConfig,\n                configurable: {\n                    ...this.checkpointConfig.configurable,\n                    checkpoint_ns: this.config.configurable?.checkpoint_ns ?? \"\",\n                },\n            };\n            const channelVersions = { ...this.checkpoint.channel_versions };\n            const newVersions = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_7__.getNewChannelVersions)(this.checkpointPreviousVersions, channelVersions);\n            this.checkpointPreviousVersions = channelVersions;\n            // save it, without blocking\n            // if there's a previous checkpoint save in progress, wait for it\n            // ensuring checkpointers receive checkpoints in order\n            void this._checkpointerPutAfterPrevious({\n                config: { ...this.checkpointConfig },\n                checkpoint: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_0__.copyCheckpoint)(this.checkpoint),\n                metadata: { ...this.checkpointMetadata },\n                newVersions,\n            });\n            this.checkpointConfig = {\n                ...this.checkpointConfig,\n                configurable: {\n                    ...this.checkpointConfig.configurable,\n                    checkpoint_id: this.checkpoint.id,\n                },\n            };\n        }\n        this.step += 1;\n    }\n    _matchWrites(tasks) {\n        for (const [tid, k, v] of this.checkpointPendingWrites) {\n            if (k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME) {\n                continue;\n            }\n            const task = Object.values(tasks).find((t) => t.id === tid);\n            if (task) {\n                task.writes.push([k, v]);\n            }\n        }\n        for (const task of Object.values(tasks)) {\n            if (task.writes.length > 0) {\n                this._outputWrites(task.id, task.writes, true);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9sb29wLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNIO0FBQy9DO0FBQ2tMO0FBQzVJO0FBQzFCO0FBQ2M7QUFDOEI7QUFDbkQ7QUFDeUI7QUFDeEM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNFQUE4QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywrQ0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0IsZ0JBQWdCLHdCQUF3QjtBQUN4QztBQUNBLGtDQUFrQyw0REFBaUI7QUFDbkQsb0VBQW9FLDREQUFpQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwREFBZSw4QkFBOEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtFQUFpQjtBQUN0QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxrQ0FBa0Msb0VBQXlCO0FBQzNELGtDQUFrQyxvRUFBeUI7QUFDM0QsK0JBQStCLGtFQUFpQjtBQUNoRCxtREFBbUQsb0VBQXlCO0FBQzVFLGFBQWE7QUFDYjtBQUNBLDhFQUE4RSx5RUFBOEI7QUFDNUc7QUFDQTtBQUNBLHdCQUF3QixnRkFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsK0VBQWM7QUFDekMscUNBQXFDO0FBQ3JDO0FBQ0EseUJBQXlCLGdFQUFhO0FBQ3RDO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSxrQkFBa0IsOEVBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrREFBbUI7QUFDbkMsMEJBQTBCLDhEQUFzQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcscUJBQXFCLEVBQUU7QUFDMUg7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZ0JBQWdCLCtEQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDJFQUFjO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkVBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHFEQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnREFBSztBQUN0QyxpQ0FBaUMsb0RBQVM7QUFDMUMsMkJBQTJCLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsd0RBQWdCO0FBQzlFO0FBQ0E7QUFDQSwyQkFBMkIsNkRBQWtCLENBQUMsMERBQWUsQ0FBQyw4REFBbUI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQztBQUNBLGdHQUFnRyxZQUFZO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLDJFQUFjO0FBQzVHO0FBQ0E7QUFDQSx1Q0FBdUMsc0RBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMseURBQWMsQ0FBQywwREFBZSxDQUFDLHVEQUFlO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQWdCO0FBQ3hDLGFBQWE7QUFDYjtBQUNBLGdCQUFnQix5REFBZTtBQUMvQjtBQUNBLDBCQUEwQixzREFBYztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseURBQWMsQ0FBQywwREFBZSxDQUFDLDZEQUFrQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0RBQUssVUFBVSxvREFBUyxVQUFVLGlEQUFNO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQSxZQUFZLHlEQUFlO0FBQzNCO0FBQ0Esc0JBQXNCLHNEQUFjO0FBQ3BDO0FBQ0E7QUFDQSxrQ0FBa0MseURBQWMsQ0FBQywwREFBZSxDQUFDLHdEQUFhO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvREFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsc0RBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsdURBQWU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFTO0FBQ2xDLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDREQUFrQixFQUFFLCtDQUFJO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdCQUFnQix5REFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQWtCLENBQUMsMERBQWUsQ0FBQyx3REFBYTtBQUN2RTtBQUNBLGdCQUFnQix5REFBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscUJBQXFCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CO0FBQ0Esd0NBQXdDLDhEQUFtQjtBQUMzRDtBQUNBLGdCQUFnQix3REFBUztBQUN6QjtBQUNBLDBDQUEwQyxnRUFBcUI7QUFDL0Q7QUFDQSwyQkFBMkIsdURBQVksSUFBSSxpREFBTTtBQUNqRDtBQUNBLFlBQVksd0RBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxrREFBVTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdURBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1REFBWTtBQUNoRDtBQUNBO0FBQ0EsWUFBWSxzREFBWTtBQUN4QjtBQUNBLDBCQUEwQixnREFBSztBQUMvQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxvREFBUztBQUMzRCx5REFBeUQsb0RBQVM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx5REFBYyxDQUFDLDBEQUFlLENBQUMsdURBQWU7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MseURBQWMsQ0FBQyxnREFBUTtBQUM3RDtBQUNBLDBCQUEwQix1REFBZSxpQ0FBaUMsbUNBQW1DO0FBQzdHO0FBQ0EsaUNBQWlDLDJEQUFpQiw4R0FBOEcsaUJBQWlCO0FBQ2pMLFlBQVksc0RBQVk7QUFDeEI7QUFDQSwwQkFBMEIsZ0RBQUs7QUFDL0I7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtFQUFpQjtBQUMzQyxpQkFBaUIsOERBQW1CO0FBQ3BDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELG9FQUF5QixPQUFPO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsbUVBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxzQ0FBc0M7QUFDdEMsZ0NBQWdDLHNFQUFxQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBCQUEwQjtBQUNwRCw0QkFBNEIsK0VBQWM7QUFDMUMsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBSyxVQUFVLG9EQUFTLFVBQVUsaURBQU07QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvbG9vcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3B5Q2hlY2twb2ludCwgZW1wdHlDaGVja3BvaW50LCBBc3luY0JhdGNoZWRTdG9yZSwgV1JJVEVTX0lEWF9NQVAsIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbmltcG9ydCB7IGNyZWF0ZUNoZWNrcG9pbnQsIGVtcHR5Q2hhbm5lbHMsIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzQ29tbWFuZCwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQLCBDT05GSUdfS0VZX1JFQUQsIENPTkZJR19LRVlfUkVTVU1JTkcsIENPTkZJR19LRVlfU1RSRUFNLCBFUlJPUiwgSU5QVVQsIElOVEVSUlVQVCwgTlVMTF9UQVNLX0lELCBSRVNVTUUsIFRBR19ISURERU4sIFBVU0gsIENPTkZJR19LRVlfU0NSQVRDSFBBRCwgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBfYXBwbHlXcml0ZXMsIF9wcmVwYXJlTmV4dFRhc2tzLCBfcHJlcGFyZVNpbmdsZVRhc2ssIGluY3JlbWVudCwgc2hvdWxkSW50ZXJydXB0LCB9IGZyb20gXCIuL2FsZ28uanNcIjtcbmltcG9ydCB7IGdhdGhlckl0ZXJhdG9yLCBnYXRoZXJJdGVyYXRvclN5bmMsIHByZWZpeEdlbmVyYXRvciwgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IG1hcENvbW1hbmQsIG1hcElucHV0LCBtYXBPdXRwdXRVcGRhdGVzLCBtYXBPdXRwdXRWYWx1ZXMsIHJlYWRDaGFubmVscywgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgZ2V0U3ViZ3JhcGhzU2VlblNldCwgRW1wdHlJbnB1dEVycm9yLCBHcmFwaEludGVycnVwdCwgaXNHcmFwaEludGVycnVwdCwgTXVsdGlwbGVTdWJncmFwaHNFcnJvciwgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBnZXROZXdDaGFubmVsVmVyc2lvbnMsIHBhdGNoQ29uZmlndXJhYmxlIH0gZnJvbSBcIi4vdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IG1hcERlYnVnVGFza3MsIG1hcERlYnVnQ2hlY2twb2ludCwgbWFwRGVidWdUYXNrUmVzdWx0cywgcHJpbnRTdGVwVGFza3MsIH0gZnJvbSBcIi4vZGVidWcuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVXcml0YWJsZVN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbS5qc1wiO1xuY29uc3QgSU5QVVRfRE9ORSA9IFN5bWJvbC5mb3IoXCJJTlBVVF9ET05FXCIpO1xuY29uc3QgSU5QVVRfUkVTVU1JTkcgPSBTeW1ib2wuZm9yKFwiSU5QVVRfUkVTVU1JTkdcIik7XG5jb25zdCBERUZBVUxUX0xPT1BfTElNSVQgPSAyNTtcbmZ1bmN0aW9uIGNyZWF0ZUR1cGxleFN0cmVhbSguLi5zdHJlYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlV3JpdGFibGVTdHJlYW0oe1xuICAgICAgICBwYXNzdGhyb3VnaEZuOiAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3RyZWFtIG9mIHN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLm1vZGVzLmhhcyh2YWx1ZVsxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbW9kZXM6IG5ldyBTZXQoc3RyZWFtcy5mbGF0TWFwKChzKSA9PiBBcnJheS5mcm9tKHMubW9kZXMpKSksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgUHJlZ2VsTG9vcCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hlY2twb2ludGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoZWNrcG9pbnRlckdldE5leHRWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoYW5uZWxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hbmFnZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hlY2twb2ludFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGVja3BvaW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoZWNrcG9pbnRNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGVja3BvaW50TmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RlcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9wXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dEtleXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtS2V5c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2Rlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJza2lwRG9uZVRhc2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZXZDaGVja3BvaW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJwZW5kaW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhc2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNoZWNrcG9pbnRlclByb21pc2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNOZXN0ZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2NoZWNrcG9pbnRlckNoYWluZWRQcm9taXNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWFuYWdlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnRlcnJ1cHRBZnRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnRlcnJ1cHRCZWZvcmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9JbnRlcnJ1cHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWJ1Z1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBwYXJhbXMuaW5wdXQ7XG4gICAgICAgIHRoaXMuY2hlY2twb2ludGVyID0gcGFyYW1zLmNoZWNrcG9pbnRlcjtcbiAgICAgICAgLy8gVE9ETzogaWYgbWFuYWdlZCB2YWx1ZXMgbm8gbG9uZ2VyIG5lZWRzIGdyYXBoIHdlIGNhbiByZXBsYWNlIHdpdGhcbiAgICAgICAgLy8gbWFuYWdlZF9zcGVjcywgY2hhbm5lbF9zcGVjc1xuICAgICAgICBpZiAodGhpcy5jaGVja3BvaW50ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbiA9IHRoaXMuY2hlY2twb2ludGVyLmdldE5leHRWZXJzaW9uLmJpbmQodGhpcy5jaGVja3BvaW50ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbiA9IGluY3JlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrcG9pbnQgPSBwYXJhbXMuY2hlY2twb2ludDtcbiAgICAgICAgdGhpcy5jaGVja3BvaW50TWV0YWRhdGEgPSBwYXJhbXMuY2hlY2twb2ludE1ldGFkYXRhO1xuICAgICAgICB0aGlzLmNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zID0gcGFyYW1zLmNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zO1xuICAgICAgICB0aGlzLmNoYW5uZWxzID0gcGFyYW1zLmNoYW5uZWxzO1xuICAgICAgICB0aGlzLm1hbmFnZWQgPSBwYXJhbXMubWFuYWdlZDtcbiAgICAgICAgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcyA9IHBhcmFtcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcztcbiAgICAgICAgdGhpcy5zdGVwID0gcGFyYW1zLnN0ZXA7XG4gICAgICAgIHRoaXMuc3RvcCA9IHBhcmFtcy5zdG9wO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHBhcmFtcy5jb25maWc7XG4gICAgICAgIHRoaXMuY2hlY2twb2ludENvbmZpZyA9IHBhcmFtcy5jaGVja3BvaW50Q29uZmlnO1xuICAgICAgICB0aGlzLmlzTmVzdGVkID0gcGFyYW1zLmlzTmVzdGVkO1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBwYXJhbXMubWFuYWdlcjtcbiAgICAgICAgdGhpcy5vdXRwdXRLZXlzID0gcGFyYW1zLm91dHB1dEtleXM7XG4gICAgICAgIHRoaXMuc3RyZWFtS2V5cyA9IHBhcmFtcy5zdHJlYW1LZXlzO1xuICAgICAgICB0aGlzLm5vZGVzID0gcGFyYW1zLm5vZGVzO1xuICAgICAgICB0aGlzLnNraXBEb25lVGFza3MgPSBwYXJhbXMuc2tpcERvbmVUYXNrcztcbiAgICAgICAgdGhpcy5zdG9yZSA9IHBhcmFtcy5zdG9yZTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBwYXJhbXMuc3RyZWFtO1xuICAgICAgICB0aGlzLmNoZWNrcG9pbnROYW1lc3BhY2UgPSBwYXJhbXMuY2hlY2twb2ludE5hbWVzcGFjZTtcbiAgICAgICAgdGhpcy5wcmV2Q2hlY2twb2ludENvbmZpZyA9IHBhcmFtcy5wcmV2Q2hlY2twb2ludENvbmZpZztcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRBZnRlciA9IHBhcmFtcy5pbnRlcnJ1cHRBZnRlcjtcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRCZWZvcmUgPSBwYXJhbXMuaW50ZXJydXB0QmVmb3JlO1xuICAgICAgICB0aGlzLmRlYnVnID0gcGFyYW1zLmRlYnVnO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgaW5pdGlhbGl6ZShwYXJhbXMpIHtcbiAgICAgICAgbGV0IHsgY29uZmlnLCBzdHJlYW0gfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgeyBjaGVja1N1YmdyYXBocyA9IHRydWUgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKHN0cmVhbSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBjb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9TVFJFQU1dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0cmVhbSA9IGNyZWF0ZUR1cGxleFN0cmVhbShzdHJlYW0sIGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9TVFJFQU1dKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lwRG9uZVRhc2tzID0gY29uZmlnLmNvbmZpZ3VyYWJsZVxuICAgICAgICAgICAgPyAhKFwiY2hlY2twb2ludF9pZFwiIGluIGNvbmZpZy5jb25maWd1cmFibGUpXG4gICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIGNvbnN0IGlzTmVzdGVkID0gQ09ORklHX0tFWV9SRUFEIGluIChjb25maWcuY29uZmlndXJhYmxlID8/IHt9KTtcbiAgICAgICAgaWYgKCFpc05lc3RlZCAmJlxuICAgICAgICAgICAgY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25maWcgPSBwYXRjaENvbmZpZ3VyYWJsZShjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjaGVja3BvaW50X25zOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaGVja3BvaW50Q29uZmlnID0gY29uZmlnO1xuICAgICAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXT8uW2NvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnNdKSB7XG4gICAgICAgICAgICBjaGVja3BvaW50Q29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2hlY2twb2ludF9pZDogY29uZmlnLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXVtjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2UgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zPy5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpID8/IFtdO1xuICAgICAgICBjb25zdCBzYXZlZCA9IChhd2FpdCBwYXJhbXMuY2hlY2twb2ludGVyPy5nZXRUdXBsZShjaGVja3BvaW50Q29uZmlnKSkgPz8ge1xuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgY2hlY2twb2ludDogZW1wdHlDaGVja3BvaW50KCksXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJpbnB1dFwiLFxuICAgICAgICAgICAgICAgIHN0ZXA6IC0yLFxuICAgICAgICAgICAgICAgIHdyaXRlczogbnVsbCxcbiAgICAgICAgICAgICAgICBwYXJlbnRzOiB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwZW5kaW5nV3JpdGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2twb2ludENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIC4uLnNhdmVkLmNvbmZpZyxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IFwiXCIsXG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICAuLi5zYXZlZC5jb25maWcuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHJldkNoZWNrcG9pbnRDb25maWcgPSBzYXZlZC5wYXJlbnRDb25maWc7XG4gICAgICAgIGNvbnN0IGNoZWNrcG9pbnQgPSBjb3B5Q2hlY2twb2ludChzYXZlZC5jaGVja3BvaW50KTtcbiAgICAgICAgY29uc3QgY2hlY2twb2ludE1ldGFkYXRhID0geyAuLi5zYXZlZC5tZXRhZGF0YSB9O1xuICAgICAgICBjb25zdCBjaGVja3BvaW50UGVuZGluZ1dyaXRlcyA9IHNhdmVkLnBlbmRpbmdXcml0ZXMgPz8gW107XG4gICAgICAgIGNvbnN0IGNoYW5uZWxzID0gZW1wdHlDaGFubmVscyhwYXJhbXMuY2hhbm5lbFNwZWNzLCBjaGVja3BvaW50KTtcbiAgICAgICAgY29uc3Qgc3RlcCA9IChjaGVja3BvaW50TWV0YWRhdGEuc3RlcCA/PyAwKSArIDE7XG4gICAgICAgIGNvbnN0IHN0b3AgPSBzdGVwICsgKGNvbmZpZy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX0xPT1BfTElNSVQpICsgMTtcbiAgICAgICAgY29uc3QgY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMgPSB7IC4uLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyB9O1xuICAgICAgICBjb25zdCBzdG9yZSA9IHBhcmFtcy5zdG9yZVxuICAgICAgICAgICAgPyBuZXcgQXN5bmNCYXRjaGVkU3RvcmUocGFyYW1zLnN0b3JlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIHN0b3JlLiBUaGlzIGlzIGEgYmF0Y2ggc3RvcmUsIHNvIGl0IHdpbGwgcnVuIGNvbnRpbnVvdXNseVxuICAgICAgICAgICAgc3RvcmUuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hlY2tTdWJncmFwaHMgJiYgaXNOZXN0ZWQgJiYgcGFyYW1zLmNoZWNrcG9pbnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoZ2V0U3ViZ3JhcGhzU2VlblNldCgpLmhhcyhjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNdWx0aXBsZVN1YmdyYXBoc0Vycm9yKFtcbiAgICAgICAgICAgICAgICAgICAgXCJEZXRlY3RlZCB0aGUgc2FtZSBzdWJncmFwaCBjYWxsZWQgbXVsdGlwbGUgdGltZXMgYnkgdGhlIHNhbWUgbm9kZS5cIixcbiAgICAgICAgICAgICAgICAgICAgXCJUaGlzIGlzIG5vdCBhbGxvd2VkIGlmIGNoZWNrcG9pbnRpbmcgaXMgZW5hYmxlZC5cIixcbiAgICAgICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgYFlvdSBjYW4gZGlzYWJsZSBjaGVja3BvaW50aW5nIGZvciBhIHN1YmdyYXBoIGJ5IGNvbXBpbGluZyBpdCB3aXRoIFwiLmNvbXBpbGUoeyBjaGVja3BvaW50ZXI6IGZhbHNlIH0pO1wiYCxcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCJcXG5cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgbGNfZXJyb3JfY29kZTogXCJNVUxUSVBMRV9TVUJHUkFQSFNcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdldFN1YmdyYXBoc1NlZW5TZXQoKS5hZGQoY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcmVnZWxMb29wKHtcbiAgICAgICAgICAgIGlucHV0OiBwYXJhbXMuaW5wdXQsXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBjaGVja3BvaW50ZXI6IHBhcmFtcy5jaGVja3BvaW50ZXIsXG4gICAgICAgICAgICBjaGVja3BvaW50LFxuICAgICAgICAgICAgY2hlY2twb2ludE1ldGFkYXRhLFxuICAgICAgICAgICAgY2hlY2twb2ludENvbmZpZyxcbiAgICAgICAgICAgIHByZXZDaGVja3BvaW50Q29uZmlnLFxuICAgICAgICAgICAgY2hlY2twb2ludE5hbWVzcGFjZSxcbiAgICAgICAgICAgIGNoYW5uZWxzLFxuICAgICAgICAgICAgbWFuYWdlZDogcGFyYW1zLm1hbmFnZWQsXG4gICAgICAgICAgICBpc05lc3RlZCxcbiAgICAgICAgICAgIG1hbmFnZXI6IHBhcmFtcy5tYW5hZ2VyLFxuICAgICAgICAgICAgc2tpcERvbmVUYXNrcyxcbiAgICAgICAgICAgIHN0ZXAsXG4gICAgICAgICAgICBzdG9wLFxuICAgICAgICAgICAgY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMsXG4gICAgICAgICAgICBjaGVja3BvaW50UGVuZGluZ1dyaXRlcyxcbiAgICAgICAgICAgIG91dHB1dEtleXM6IHBhcmFtcy5vdXRwdXRLZXlzID8/IFtdLFxuICAgICAgICAgICAgc3RyZWFtS2V5czogcGFyYW1zLnN0cmVhbUtleXMgPz8gW10sXG4gICAgICAgICAgICBub2RlczogcGFyYW1zLm5vZGVzLFxuICAgICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgICAgc3RvcmUsXG4gICAgICAgICAgICBpbnRlcnJ1cHRBZnRlcjogcGFyYW1zLmludGVycnVwdEFmdGVyLFxuICAgICAgICAgICAgaW50ZXJydXB0QmVmb3JlOiBwYXJhbXMuaW50ZXJydXB0QmVmb3JlLFxuICAgICAgICAgICAgZGVidWc6IHBhcmFtcy5kZWJ1ZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9jaGVja3BvaW50ZXJQdXRBZnRlclByZXZpb3VzKGlucHV0KSB7XG4gICAgICAgIHRoaXMuX2NoZWNrcG9pbnRlckNoYWluZWRQcm9taXNlID0gdGhpcy5fY2hlY2twb2ludGVyQ2hhaW5lZFByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja3BvaW50ZXI/LnB1dChpbnB1dC5jb25maWcsIGlucHV0LmNoZWNrcG9pbnQsIGlucHV0Lm1ldGFkYXRhLCBpbnB1dC5uZXdWZXJzaW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoZWNrcG9pbnRlclByb21pc2VzLnB1c2godGhpcy5fY2hlY2twb2ludGVyQ2hhaW5lZFByb21pc2UpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIHVwZGF0ZU1hbmFnZWRWYWx1ZXMoa2V5LCB2YWx1ZXMpIHtcbiAgICAgICAgY29uc3QgbXYgPSB0aGlzLm1hbmFnZWQuZ2V0KGtleSk7XG4gICAgICAgIGlmIChtdiAmJiBcInVwZGF0ZVwiIGluIG12ICYmIHR5cGVvZiBtdi51cGRhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgYXdhaXQgbXYudXBkYXRlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHV0IHdyaXRlcyBmb3IgYSB0YXNrLCB0byBiZSByZWFkIGJ5IHRoZSBuZXh0IHRpY2suXG4gICAgICogQHBhcmFtIHRhc2tJZFxuICAgICAqIEBwYXJhbSB3cml0ZXNcbiAgICAgKi9cbiAgICBwdXRXcml0ZXModGFza0lkLCB3cml0ZXMpIHtcbiAgICAgICAgbGV0IHdyaXRlc0NvcHkgPSB3cml0ZXM7XG4gICAgICAgIGlmICh3cml0ZXNDb3B5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRlZHVwbGljYXRlIHdyaXRlcyB0byBzcGVjaWFsIGNoYW5uZWxzLCBsYXN0IHdyaXRlIHdpbnNcbiAgICAgICAgaWYgKHdyaXRlc0NvcHkuZXZlcnkoKFtrZXldKSA9PiBrZXkgaW4gV1JJVEVTX0lEWF9NQVApKSB7XG4gICAgICAgICAgICB3cml0ZXNDb3B5ID0gQXJyYXkuZnJvbShuZXcgTWFwKHdyaXRlc0NvcHkubWFwKCh3KSA9PiBbd1swXSwgd10pKS52YWx1ZXMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSB3cml0ZXNcbiAgICAgICAgZm9yIChjb25zdCBbYywgdl0gb2Ygd3JpdGVzQ29weSkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcy5maW5kSW5kZXgoKHcpID0+IHdbMF0gPT09IHRhc2tJZCAmJiB3WzFdID09PSBjKTtcbiAgICAgICAgICAgIGlmIChjIGluIFdSSVRFU19JRFhfTUFQICYmIGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzW2lkeF0gPSBbdGFza0lkLCBjLCB2XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMucHVzaChbdGFza0lkLCBjLCB2XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHV0V3JpdGVQcm9taXNlID0gdGhpcy5jaGVja3BvaW50ZXI/LnB1dFdyaXRlcyh7XG4gICAgICAgICAgICAuLi50aGlzLmNoZWNrcG9pbnRDb25maWcsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNoZWNrcG9pbnRDb25maWcuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfbnM6IHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiLFxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnRfaWQ6IHRoaXMuY2hlY2twb2ludC5pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIHdyaXRlc0NvcHksIHRhc2tJZCk7XG4gICAgICAgIGlmIChwdXRXcml0ZVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50ZXJQcm9taXNlcy5wdXNoKHB1dFdyaXRlUHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFza3MpIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dFdyaXRlcyh0YXNrSWQsIHdyaXRlc0NvcHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9vdXRwdXRXcml0ZXModGFza0lkLCB3cml0ZXMsIGNhY2hlZCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSB0aGlzLnRhc2tzW3Rhc2tJZF07XG4gICAgICAgIGlmICh0YXNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLmNvbmZpZyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHRhc2suY29uZmlnLnRhZ3MgPz8gW10pLmluY2x1ZGVzKFRBR19ISURERU4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdyaXRlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgd3JpdGVzWzBdWzBdICE9PSBFUlJPUiAmJlxuICAgICAgICAgICAgICAgIHdyaXRlc1swXVswXSAhPT0gSU5URVJSVVBUKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdChnYXRoZXJJdGVyYXRvclN5bmMocHJlZml4R2VuZXJhdG9yKG1hcE91dHB1dFVwZGF0ZXModGhpcy5vdXRwdXRLZXlzLCBbW3Rhc2ssIHdyaXRlc11dLCBjYWNoZWQpLCBcInVwZGF0ZXNcIikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdChnYXRoZXJJdGVyYXRvclN5bmMocHJlZml4R2VuZXJhdG9yKG1hcERlYnVnVGFza1Jlc3VsdHModGhpcy5zdGVwLCBbW3Rhc2ssIHdyaXRlc11dLCB0aGlzLnN0cmVhbUtleXMpLCBcImRlYnVnXCIpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIHNpbmdsZSBpdGVyYXRpb24gb2YgdGhlIFByZWdlbCBsb29wLlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBtb3JlIGl0ZXJhdGlvbnMgYXJlIG5lZWRlZC5cbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG4gICAgYXN5bmMgdGljayhwYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcmUgJiYgIXRoaXMuc3RvcmUuaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3JlPy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaW5wdXRLZXlzID0gW10gfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSBcInBlbmRpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgdGljayB3aGVuIHN0YXR1cyBpcyBubyBsb25nZXIgXCJwZW5kaW5nXCIuIEN1cnJlbnQgc3RhdHVzOiBcIiR7dGhpcy5zdGF0dXN9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVtJTlBVVF9ET05FLCBJTlBVVF9SRVNVTUlOR10uaW5jbHVkZXModGhpcy5pbnB1dCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2ZpcnN0KGlucHV0S2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5ldmVyeSgodGFzaykgPT4gdGFzay53cml0ZXMuZmlsdGVyKChbY10pID0+ICEoYyBpbiBXUklURVNfSURYX01BUCkpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZXMgPSBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmZsYXRNYXAoKHQpID0+IHQud3JpdGVzKTtcbiAgICAgICAgICAgIC8vIEFsbCB0YXNrcyBoYXZlIGZpbmlzaGVkXG4gICAgICAgICAgICBjb25zdCBtYW5hZ2VkVmFsdWVXcml0ZXMgPSBfYXBwbHlXcml0ZXModGhpcy5jaGVja3BvaW50LCB0aGlzLmNoYW5uZWxzLCBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLCB0aGlzLmNoZWNrcG9pbnRlckdldE5leHRWZXJzaW9uKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVzXSBvZiBPYmplY3QuZW50cmllcyhtYW5hZ2VkVmFsdWVXcml0ZXMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVNYW5hZ2VkVmFsdWVzKGtleSwgdmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByb2R1Y2UgdmFsdWVzIG91dHB1dFxuICAgICAgICAgICAgY29uc3QgdmFsdWVzT3V0cHV0ID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IocHJlZml4R2VuZXJhdG9yKG1hcE91dHB1dFZhbHVlcyh0aGlzLm91dHB1dEtleXMsIHdyaXRlcywgdGhpcy5jaGFubmVscyksIFwidmFsdWVzXCIpKTtcbiAgICAgICAgICAgIHRoaXMuX2VtaXQodmFsdWVzT3V0cHV0KTtcbiAgICAgICAgICAgIC8vIGNsZWFyIHBlbmRpbmcgd3JpdGVzXG4gICAgICAgICAgICB0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzID0gW107XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wdXRDaGVja3BvaW50KHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwibG9vcFwiLFxuICAgICAgICAgICAgICAgIHdyaXRlczogbWFwT3V0cHV0VXBkYXRlcyh0aGlzLm91dHB1dEtleXMsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykubWFwKCh0YXNrKSA9PiBbdGFzaywgdGFzay53cml0ZXNdKSkubmV4dCgpLnZhbHVlID8/IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGFmdGVyIGV4ZWN1dGlvbiwgY2hlY2sgaWYgd2Ugc2hvdWxkIGludGVycnVwdFxuICAgICAgICAgICAgaWYgKHNob3VsZEludGVycnVwdCh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuaW50ZXJydXB0QWZ0ZXIsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBcImludGVycnVwdF9hZnRlclwiO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHcmFwaEludGVycnVwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0ZXAgPiB0aGlzLnN0b3ApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gXCJvdXRfb2Zfc3RlcHNcIjtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0VGFza3MgPSBfcHJlcGFyZU5leHRUYXNrcyh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIHRoaXMuY2hhbm5lbHMsIHRoaXMubWFuYWdlZCwgdGhpcy5jb25maWcsIHRydWUsIHtcbiAgICAgICAgICAgIHN0ZXA6IHRoaXMuc3RlcCxcbiAgICAgICAgICAgIGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIsXG4gICAgICAgICAgICBpc1Jlc3VtaW5nOiB0aGlzLmlucHV0ID09PSBJTlBVVF9SRVNVTUlORyxcbiAgICAgICAgICAgIG1hbmFnZXI6IHRoaXMubWFuYWdlcixcbiAgICAgICAgICAgIHN0b3JlOiB0aGlzLnN0b3JlLFxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGFza3MgPSBuZXh0VGFza3M7XG4gICAgICAgIC8vIFByb2R1Y2UgZGVidWcgb3V0cHV0XG4gICAgICAgIGlmICh0aGlzLmNoZWNrcG9pbnRlcikge1xuICAgICAgICAgICAgdGhpcy5fZW1pdChhd2FpdCBnYXRoZXJJdGVyYXRvcihwcmVmaXhHZW5lcmF0b3IobWFwRGVidWdDaGVja3BvaW50KHRoaXMuc3RlcCAtIDEsIC8vIHByaW50aW5nIGNoZWNrcG9pbnQgZm9yIHByZXZpb3VzIHN0ZXBcbiAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludENvbmZpZywgdGhpcy5jaGFubmVscywgdGhpcy5zdHJlYW1LZXlzLCB0aGlzLmNoZWNrcG9pbnRNZXRhZGF0YSwgT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKSwgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcywgdGhpcy5wcmV2Q2hlY2twb2ludENvbmZpZyksIFwiZGVidWdcIikpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gXCJkb25lXCI7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIHBlbmRpbmcgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBsb29wLCBhcHBseSB0aGVtXG4gICAgICAgIGlmICh0aGlzLnNraXBEb25lVGFza3MgJiYgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFt0aWQsIGssIHZdIG9mIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoayA9PT0gRVJST1IgfHwgayA9PT0gSU5URVJSVVBUIHx8IGsgPT09IFJFU1VNRSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IE9iamVjdC52YWx1ZXModGhpcy50YXNrcykuZmluZCgodCkgPT4gdC5pZCA9PT0gdGlkKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLndyaXRlcy5wdXNoKFtrLCB2XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0YXNrIG9mIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFzay53cml0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vdXRwdXRXcml0ZXModGFzay5pZCwgdGFzay53cml0ZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBhbGwgdGFza3MgaGF2ZSBmaW5pc2hlZCwgcmUtdGlja1xuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5ldmVyeSgodGFzaykgPT4gdGFzay53cml0ZXMubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpY2soeyBpbnB1dEtleXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQmVmb3JlIGV4ZWN1dGlvbiwgY2hlY2sgaWYgd2Ugc2hvdWxkIGludGVycnVwdFxuICAgICAgICBpZiAoc2hvdWxkSW50ZXJydXB0KHRoaXMuY2hlY2twb2ludCwgdGhpcy5pbnRlcnJ1cHRCZWZvcmUsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFwiaW50ZXJydXB0X2JlZm9yZVwiO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdyYXBoSW50ZXJydXB0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvZHVjZSBkZWJ1ZyBvdXRwdXRcbiAgICAgICAgY29uc3QgZGVidWdPdXRwdXQgPSBhd2FpdCBnYXRoZXJJdGVyYXRvcihwcmVmaXhHZW5lcmF0b3IobWFwRGVidWdUYXNrcyh0aGlzLnN0ZXAsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpLCBcImRlYnVnXCIpKTtcbiAgICAgICAgdGhpcy5fZW1pdChkZWJ1Z091dHB1dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBmaW5pc2hBbmRIYW5kbGVFcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCBzdXBwcmVzcyA9IHRoaXMuX3N1cHByZXNzSW50ZXJydXB0KGVycm9yKTtcbiAgICAgICAgaWYgKHN1cHByZXNzIHx8IGVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0ID0gcmVhZENoYW5uZWxzKHRoaXMuY2hhbm5lbHMsIHRoaXMub3V0cHV0S2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1cHByZXNzKSB7XG4gICAgICAgICAgICAvLyBlbWl0IG9uZSBsYXN0IFwidmFsdWVzXCIgZXZlbnQsIHdpdGggcGVuZGluZyB3cml0ZXMgYXBwbGllZFxuICAgICAgICAgICAgaWYgKHRoaXMudGFza3MgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykuc29tZSgodGFzaykgPT4gdGFzay53cml0ZXMubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VkVmFsdWVXcml0ZXMgPSBfYXBwbHlXcml0ZXModGhpcy5jaGVja3BvaW50LCB0aGlzLmNoYW5uZWxzLCBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLCB0aGlzLmNoZWNrcG9pbnRlckdldE5leHRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlc10gb2YgT2JqZWN0LmVudHJpZXMobWFuYWdlZFZhbHVlV3JpdGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZU1hbmFnZWRWYWx1ZXMoa2V5LCB2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KGdhdGhlckl0ZXJhdG9yU3luYyhwcmVmaXhHZW5lcmF0b3IobWFwT3V0cHV0VmFsdWVzKHRoaXMub3V0cHV0S2V5cywgT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5mbGF0TWFwKCh0KSA9PiB0LndyaXRlcyksIHRoaXMuY2hhbm5lbHMpLCBcInZhbHVlc1wiKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRW1pdCBJTlRFUlJVUFQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoW1xuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgXCJ1cGRhdGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtJTlRFUlJVUFRdOiBlcnJvci5pbnRlcnJ1cHRzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwcHJlc3M7XG4gICAgfVxuICAgIGFjY2VwdFB1c2godGFzaywgd3JpdGVJZHgsIGNhbGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJydXB0QWZ0ZXI/Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIHNob3VsZEludGVycnVwdCh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuaW50ZXJydXB0QWZ0ZXIsIFt0YXNrXSkpIHtcbiAgICAgICAgICAgIHRoaXMudG9JbnRlcnJ1cHQucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdXNoZWQgPSBfcHJlcGFyZVNpbmdsZVRhc2soW1BVU0gsIHRhc2sucGF0aCA/PyBbXSwgd3JpdGVJZHgsIHRhc2suaWQsIGNhbGxdLCB0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIHRoaXMuY2hhbm5lbHMsIHRoaXMubWFuYWdlZCwgdGhpcy5jb25maWcsIHRydWUsIHtcbiAgICAgICAgICAgIHN0ZXA6IHRoaXMuc3RlcCxcbiAgICAgICAgICAgIGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIsXG4gICAgICAgICAgICBtYW5hZ2VyOiB0aGlzLm1hbmFnZXIsXG4gICAgICAgICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocHVzaGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcnJ1cHRCZWZvcmU/Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICBzaG91bGRJbnRlcnJ1cHQodGhpcy5jaGVja3BvaW50LCB0aGlzLmludGVycnVwdEJlZm9yZSwgW3B1c2hlZF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b0ludGVycnVwdC5wdXNoKHB1c2hlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZW1pdChnYXRoZXJJdGVyYXRvclN5bmMocHJlZml4R2VuZXJhdG9yKG1hcERlYnVnVGFza3ModGhpcy5zdGVwLCBbcHVzaGVkXSksIFwiZGVidWdcIikpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgcHJpbnRTdGVwVGFza3ModGhpcy5zdGVwLCBbcHVzaGVkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhc2tzW3B1c2hlZC5pZF0gPSBwdXNoZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwRG9uZVRhc2tzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWF0Y2hXcml0ZXMoeyBbcHVzaGVkLmlkXTogcHVzaGVkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB1c2hlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc3VwcHJlc3NJbnRlcnJ1cHQoZSkge1xuICAgICAgICByZXR1cm4gaXNHcmFwaEludGVycnVwdChlKSAmJiAhdGhpcy5pc05lc3RlZDtcbiAgICB9XG4gICAgYXN5bmMgX2ZpcnN0KGlucHV0S2V5cykge1xuICAgICAgICAvKlxuICAgICAgICAgKiBSZXN1bWluZyBmcm9tIHByZXZpb3VzIGNoZWNrcG9pbnQgcmVxdWlyZXNcbiAgICAgICAgICogLSBmaW5kaW5nIGEgcHJldmlvdXMgY2hlY2twb2ludFxuICAgICAgICAgKiAtIHJlY2VpdmluZyBudWxsIGlucHV0IChvdXRlciBncmFwaCkgb3IgUkVTVU1JTkcgZmxhZyAoc3ViZ3JhcGgpXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB7IGNvbmZpZ3VyYWJsZSB9ID0gdGhpcy5jb25maWc7XG4gICAgICAgIGNvbnN0IGlzUmVzdW1pbmcgPSBPYmplY3Qua2V5cyh0aGlzLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucykubGVuZ3RoICE9PSAwICYmXG4gICAgICAgICAgICAodGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9SRVNVTUlOR10gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICBpc0NvbW1hbmQodGhpcy5pbnB1dCkpO1xuICAgICAgICAvLyB0YWtlIHJlc3VtZSB2YWx1ZSBmcm9tIHBhcmVudFxuICAgICAgICBjb25zdCBzY3JhdGNocGFkID0gY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9TQ1JBVENIUEFEXTtcbiAgICAgICAgaWYgKHNjcmF0Y2hwYWQgJiYgc2NyYXRjaHBhZC5udWxsUmVzdW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHV0V3JpdGVzKE5VTExfVEFTS19JRCwgW1tSRVNVTUUsIHNjcmF0Y2hwYWQubnVsbFJlc3VtZV1dKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDb21tYW5kKHRoaXMuaW5wdXQpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dC5yZXN1bWUgIT0gbnVsbCAmJiB0aGlzLmNoZWNrcG9pbnRlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHVzZSBDb21tYW5kKHJlc3VtZT0uLi4pIHdpdGhvdXQgY2hlY2twb2ludGVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgd3JpdGVzID0ge307XG4gICAgICAgICAgICAvLyBncm91cCB3cml0ZXMgYnkgdGFzayBpZFxuICAgICAgICAgICAgZm9yIChjb25zdCBbdGlkLCBrZXksIHZhbHVlXSBvZiBtYXBDb21tYW5kKHRoaXMuaW5wdXQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdyaXRlc1t0aWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVzW3RpZF0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd3JpdGVzW3RpZF0ucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHdyaXRlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVtcHR5SW5wdXRFcnJvcihcIlJlY2VpdmVkIGVtcHR5IENvbW1hbmQgaW5wdXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzYXZlIHdyaXRlc1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdGlkLCB3c10gb2YgT2JqZWN0LmVudHJpZXMod3JpdGVzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHV0V3JpdGVzKHRpZCwgd3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGx5IG51bGwgd3JpdGVzXG4gICAgICAgIGNvbnN0IG51bGxXcml0ZXMgPSAodGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcyA/PyBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHcpID0+IHdbMF0gPT09IE5VTExfVEFTS19JRClcbiAgICAgICAgICAgIC5tYXAoKHcpID0+IHcuc2xpY2UoMSkpO1xuICAgICAgICBpZiAobnVsbFdyaXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBfYXBwbHlXcml0ZXModGhpcy5jaGVja3BvaW50LCB0aGlzLmNoYW5uZWxzLCBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBJTlBVVCxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiBudWxsV3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyczogW10sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sIHRoaXMuY2hlY2twb2ludGVyR2V0TmV4dFZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Jlc3VtaW5nKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoYW5uZWxOYW1lIG9mIE9iamVjdC5rZXlzKHRoaXMuY2hhbm5lbHMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5uZWxOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tjaGFubmVsTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW0lOVEVSUlVQVF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNoZWNrcG9pbnQudmVyc2lvbnNfc2VlbltJTlRFUlJVUFRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgW2NoYW5uZWxOYW1lXTogdmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9kdWNlIHZhbHVlcyBvdXRwdXRcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlc091dHB1dCA9IGF3YWl0IGdhdGhlckl0ZXJhdG9yKHByZWZpeEdlbmVyYXRvcihtYXBPdXRwdXRWYWx1ZXModGhpcy5vdXRwdXRLZXlzLCB0cnVlLCB0aGlzLmNoYW5uZWxzKSwgXCJ2YWx1ZXNcIikpO1xuICAgICAgICAgICAgdGhpcy5fZW1pdCh2YWx1ZXNPdXRwdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbWFwIGlucHV0cyB0byBjaGFubmVsIHVwZGF0ZXNcbiAgICAgICAgICAgIGNvbnN0IGlucHV0V3JpdGVzID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IobWFwSW5wdXQoaW5wdXRLZXlzLCB0aGlzLmlucHV0KSk7XG4gICAgICAgICAgICBpZiAoaW5wdXRXcml0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVtcHR5SW5wdXRFcnJvcihgUmVjZWl2ZWQgbm8gaW5wdXQgd3JpdGVzIGZvciAke0pTT04uc3RyaW5naWZ5KGlucHV0S2V5cywgbnVsbCwgMil9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkaXNjYXJkVGFza3MgPSBfcHJlcGFyZU5leHRUYXNrcyh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIHRoaXMuY2hhbm5lbHMsIHRoaXMubWFuYWdlZCwgdGhpcy5jb25maWcsIHRydWUsIHsgc3RlcDogdGhpcy5zdGVwIH0pO1xuICAgICAgICAgICAgX2FwcGx5V3JpdGVzKHRoaXMuY2hlY2twb2ludCwgdGhpcy5jaGFubmVscywgT2JqZWN0LnZhbHVlcyhkaXNjYXJkVGFza3MpLmNvbmNhdChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBJTlBVVCxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiBpbnB1dFdyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnM6IFtdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKSwgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbik7XG4gICAgICAgICAgICAvLyBzYXZlIGlucHV0IGNoZWNrcG9pbnRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3B1dENoZWNrcG9pbnQoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJpbnB1dFwiLFxuICAgICAgICAgICAgICAgIHdyaXRlczogT2JqZWN0LmZyb21FbnRyaWVzKGlucHV0V3JpdGVzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRvbmUgd2l0aCBpbnB1dFxuICAgICAgICB0aGlzLmlucHV0ID0gdGhpcy5pbnB1dCA9PT0gSU5QVVRfUkVTVU1JTkcgPyBJTlBVVF9SRVNVTUlORyA6IElOUFVUX0RPTkU7XG4gICAgICAgIGlmICghdGhpcy5pc05lc3RlZCkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBwYXRjaENvbmZpZ3VyYWJsZSh0aGlzLmNvbmZpZywge1xuICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1JFU1VNSU5HXTogdGhpcy5pbnB1dCA9PT0gSU5QVVRfUkVTVU1JTkcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZW1pdCh2YWx1ZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbS5tb2Rlcy5oYXMoY2h1bmtbMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW0ucHVzaChbdGhpcy5jaGVja3BvaW50TmFtZXNwYWNlLCAuLi5jaHVua10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9wdXRDaGVja3BvaW50KGlucHV0TWV0YWRhdGEpIHtcbiAgICAgICAgLy8gQXNzaWduIHN0ZXBcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAuLi5pbnB1dE1ldGFkYXRhLFxuICAgICAgICAgICAgc3RlcDogdGhpcy5zdGVwLFxuICAgICAgICAgICAgcGFyZW50czogdGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF0gPz8ge30sXG4gICAgICAgIH07XG4gICAgICAgIC8vIEJhaWwgaWYgbm8gY2hlY2twb2ludGVyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrcG9pbnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBzdG9yZSB0aGUgcHJldmlvdXMgY2hlY2twb2ludCBjb25maWcgZm9yIGRlYnVnIGV2ZW50c1xuICAgICAgICAgICAgdGhpcy5wcmV2Q2hlY2twb2ludENvbmZpZyA9IHRoaXMuY2hlY2twb2ludENvbmZpZz8uY29uZmlndXJhYmxlXG4gICAgICAgICAgICAgICAgPy5jaGVja3BvaW50X2lkXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNoZWNrcG9pbnRDb25maWdcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgY2hlY2twb2ludFxuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50TWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICAgIC8vIGNoaWxkIGdyYXBocyBrZWVwIGF0IG1vc3Qgb25lIGNoZWNrcG9pbnQgcGVyIHBhcmVudCBjaGVja3BvaW50XG4gICAgICAgICAgICAvLyB0aGlzIGlzIGFjaGlldmVkIGJ5IHdyaXRpbmcgY2hpbGQgY2hlY2twb2ludHMgYXMgcHJvZ3Jlc3MgaXMgbWFkZVxuICAgICAgICAgICAgLy8gKHNvIHRoYXQgZXJyb3IgcmVjb3ZlcnkgLyByZXN1bWluZyBmcm9tIGludGVycnVwdCBkb24ndCBsb3NlIHdvcmspXG4gICAgICAgICAgICAvLyBidXQgZG9pbmcgc28gYWx3YXlzIHdpdGggYW4gaWQgZXF1YWwgdG8gdGhhdCBvZiB0aGUgcGFyZW50IGNoZWNrcG9pbnRcbiAgICAgICAgICAgIHRoaXMuY2hlY2twb2ludCA9IGNyZWF0ZUNoZWNrcG9pbnQodGhpcy5jaGVja3BvaW50LCB0aGlzLmNoYW5uZWxzLCB0aGlzLnN0ZXApO1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2hlY2twb2ludENvbmZpZyxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jaGVja3BvaW50Q29uZmlnLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2twb2ludF9uczogdGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsVmVyc2lvbnMgPSB7IC4uLnRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zIH07XG4gICAgICAgICAgICBjb25zdCBuZXdWZXJzaW9ucyA9IGdldE5ld0NoYW5uZWxWZXJzaW9ucyh0aGlzLmNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zLCBjaGFubmVsVmVyc2lvbnMpO1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucyA9IGNoYW5uZWxWZXJzaW9ucztcbiAgICAgICAgICAgIC8vIHNhdmUgaXQsIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3MgYSBwcmV2aW91cyBjaGVja3BvaW50IHNhdmUgaW4gcHJvZ3Jlc3MsIHdhaXQgZm9yIGl0XG4gICAgICAgICAgICAvLyBlbnN1cmluZyBjaGVja3BvaW50ZXJzIHJlY2VpdmUgY2hlY2twb2ludHMgaW4gb3JkZXJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fY2hlY2twb2ludGVyUHV0QWZ0ZXJQcmV2aW91cyh7XG4gICAgICAgICAgICAgICAgY29uZmlnOiB7IC4uLnRoaXMuY2hlY2twb2ludENvbmZpZyB9LFxuICAgICAgICAgICAgICAgIGNoZWNrcG9pbnQ6IGNvcHlDaGVja3BvaW50KHRoaXMuY2hlY2twb2ludCksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHsgLi4udGhpcy5jaGVja3BvaW50TWV0YWRhdGEgfSxcbiAgICAgICAgICAgICAgICBuZXdWZXJzaW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGVja3BvaW50Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2hlY2twb2ludENvbmZpZyxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jaGVja3BvaW50Q29uZmlnLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2twb2ludF9pZDogdGhpcy5jaGVja3BvaW50LmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RlcCArPSAxO1xuICAgIH1cbiAgICBfbWF0Y2hXcml0ZXModGFza3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBbdGlkLCBrLCB2XSBvZiB0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzKSB7XG4gICAgICAgICAgICBpZiAoayA9PT0gRVJST1IgfHwgayA9PT0gSU5URVJSVVBUIHx8IGsgPT09IFJFU1VNRSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGFzayA9IE9iamVjdC52YWx1ZXModGFza3MpLmZpbmQoKHQpID0+IHQuaWQgPT09IHRpZCk7XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIHRhc2sud3JpdGVzLnB1c2goW2ssIHZdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgT2JqZWN0LnZhbHVlcyh0YXNrcykpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLndyaXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3V0cHV0V3JpdGVzKHRhc2suaWQsIHRhc2sud3JpdGVzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/loop.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/messages.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/messages.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StreamMessagesHandler: () => (/* binding */ StreamMessagesHandler)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_callbacks_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/callbacks/base */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/callbacks/base.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n\nfunction isChatGenerationChunk(x) {\n    return (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(x?.message);\n}\n/**\n * A callback handler that implements stream_mode=messages.\n * Collects messages from (1) chat model stream events and (2) node outputs.\n */\n// TODO: Make this import and explicitly implement the\n// CallbackHandlerPrefersStreaming interface once we drop support for core 0.2\nclass StreamMessagesHandler extends _langchain_core_callbacks_base__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(streamFn) {\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"StreamMessagesHandler\"\n        });\n        Object.defineProperty(this, \"streamFn\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadatas\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"seen\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"emittedChatModelRunIds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"stableMessageIdMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"lc_prefer_streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.streamFn = streamFn;\n    }\n    _emit(meta, message, runId, dedupe = false) {\n        if (dedupe &&\n            message.id !== undefined &&\n            this.seen[message.id] !== undefined) {\n            return;\n        }\n        // For instance in ChatAnthropic, the first chunk has an message ID\n        // but the subsequent chunks do not. To avoid clients seeing two messages\n        // we rename the message ID if it's being auto-set to `run-${runId}`\n        // (see https://github.com/langchain-ai/langchainjs/pull/6646).\n        let messageId = message.id;\n        if (messageId == null || messageId === `run-${runId}`) {\n            messageId = this.stableMessageIdMap[runId] ?? messageId ?? `run-${runId}`;\n        }\n        this.stableMessageIdMap[runId] ??= messageId;\n        if (messageId !== message.id) {\n            // eslint-disable-next-line no-param-reassign\n            message.id = messageId;\n            // eslint-disable-next-line no-param-reassign\n            message.lc_kwargs.id = messageId;\n        }\n        this.seen[message.id] = message;\n        this.streamFn([meta[0], \"messages\", [message, meta[1]]]);\n    }\n    handleChatModelStart(_llm, _messages, runId, _parentRunId, _extraParams, tags, metadata, name) {\n        if (metadata &&\n            // Include legacy LangGraph SDK tag\n            (!tags || (!tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_NOSTREAM) && !tags.includes(\"nostream\")))) {\n            this.metadatas[runId] = [\n                metadata.langgraph_checkpoint_ns.split(\"|\"),\n                { tags, name, ...metadata },\n            ];\n        }\n    }\n    handleLLMNewToken(token, _idx, runId, _parentRunId, _tags, fields) {\n        const chunk = fields?.chunk;\n        this.emittedChatModelRunIds[runId] = true;\n        if (this.metadatas[runId] !== undefined) {\n            if (isChatGenerationChunk(chunk)) {\n                this._emit(this.metadatas[runId], chunk.message, runId);\n            }\n            else {\n                this._emit(this.metadatas[runId], new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk({ content: token }), runId);\n            }\n        }\n    }\n    handleLLMEnd(output, runId) {\n        // In JS, non-streaming runs do not call handleLLMNewToken at the model level\n        if (!this.emittedChatModelRunIds[runId]) {\n            const chatGeneration = output.generations?.[0]?.[0];\n            if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(chatGeneration?.message)) {\n                this._emit(this.metadatas[runId], chatGeneration?.message, runId, true);\n            }\n            delete this.emittedChatModelRunIds[runId];\n        }\n        delete this.metadatas[runId];\n        delete this.stableMessageIdMap[runId];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    handleLLMError(_err, runId) {\n        delete this.metadatas[runId];\n    }\n    handleChainStart(_chain, _inputs, runId, _parentRunId, tags, metadata, _runType, name) {\n        if (metadata !== undefined &&\n            name === metadata.langgraph_node &&\n            (tags === undefined || !tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN))) {\n            this.metadatas[runId] = [\n                metadata.langgraph_checkpoint_ns.split(\"|\"),\n                { tags, name, ...metadata },\n            ];\n        }\n    }\n    handleChainEnd(outputs, runId) {\n        const metadata = this.metadatas[runId];\n        delete this.metadatas[runId];\n        if (metadata !== undefined) {\n            if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(outputs)) {\n                this._emit(metadata, outputs, runId, true);\n            }\n            else if (Array.isArray(outputs)) {\n                for (const value of outputs) {\n                    if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(value)) {\n                        this._emit(metadata, value, runId, true);\n                    }\n                }\n            }\n            else if (outputs != null && typeof outputs === \"object\") {\n                for (const value of Object.values(outputs)) {\n                    if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(value)) {\n                        this._emit(metadata, value, runId, true);\n                    }\n                    else if (Array.isArray(value)) {\n                        for (const item of value) {\n                            if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(item)) {\n                                this._emit(metadata, item, runId, true);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    handleChainError(_err, runId) {\n        delete this.metadatas[runId];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9tZXNzYWdlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNFO0FBQ0k7QUFDZjtBQUMzRDtBQUNBLFdBQVcsdUVBQWE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxvQ0FBb0MsK0VBQW1CO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLE1BQU07QUFDM0U7QUFDQTtBQUNBLHNEQUFzRCxNQUFNO0FBQzVELDhFQUE4RSxNQUFNO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsdURBQVk7QUFDbEQ7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxvRUFBYyxHQUFHLGdCQUFnQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHFEQUFVO0FBQzVEO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVFQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1RUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1RUFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvbWVzc2FnZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2NhbGxiYWNrcy9iYXNlXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2VDaHVuaywgaXNCYXNlTWVzc2FnZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBUQUdfSElEREVOLCBUQUdfTk9TVFJFQU0gfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuICAgIHJldHVybiBpc0Jhc2VNZXNzYWdlKHg/Lm1lc3NhZ2UpO1xufVxuLyoqXG4gKiBBIGNhbGxiYWNrIGhhbmRsZXIgdGhhdCBpbXBsZW1lbnRzIHN0cmVhbV9tb2RlPW1lc3NhZ2VzLlxuICogQ29sbGVjdHMgbWVzc2FnZXMgZnJvbSAoMSkgY2hhdCBtb2RlbCBzdHJlYW0gZXZlbnRzIGFuZCAoMikgbm9kZSBvdXRwdXRzLlxuICovXG4vLyBUT0RPOiBNYWtlIHRoaXMgaW1wb3J0IGFuZCBleHBsaWNpdGx5IGltcGxlbWVudCB0aGVcbi8vIENhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmcgaW50ZXJmYWNlIG9uY2Ugd2UgZHJvcCBzdXBwb3J0IGZvciBjb3JlIDAuMlxuZXhwb3J0IGNsYXNzIFN0cmVhbU1lc3NhZ2VzSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHN0cmVhbUZuKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiU3RyZWFtTWVzc2FnZXNIYW5kbGVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbUZuXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlZW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbWl0dGVkQ2hhdE1vZGVsUnVuSWRzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhYmxlTWVzc2FnZUlkTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcHJlZmVyX3N0cmVhbWluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdHJlYW1GbiA9IHN0cmVhbUZuO1xuICAgIH1cbiAgICBfZW1pdChtZXRhLCBtZXNzYWdlLCBydW5JZCwgZGVkdXBlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRlZHVwZSAmJlxuICAgICAgICAgICAgbWVzc2FnZS5pZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLnNlZW5bbWVzc2FnZS5pZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBpbnN0YW5jZSBpbiBDaGF0QW50aHJvcGljLCB0aGUgZmlyc3QgY2h1bmsgaGFzIGFuIG1lc3NhZ2UgSURcbiAgICAgICAgLy8gYnV0IHRoZSBzdWJzZXF1ZW50IGNodW5rcyBkbyBub3QuIFRvIGF2b2lkIGNsaWVudHMgc2VlaW5nIHR3byBtZXNzYWdlc1xuICAgICAgICAvLyB3ZSByZW5hbWUgdGhlIG1lc3NhZ2UgSUQgaWYgaXQncyBiZWluZyBhdXRvLXNldCB0byBgcnVuLSR7cnVuSWR9YFxuICAgICAgICAvLyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5nY2hhaW4tYWkvbGFuZ2NoYWluanMvcHVsbC82NjQ2KS5cbiAgICAgICAgbGV0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWQ7XG4gICAgICAgIGlmIChtZXNzYWdlSWQgPT0gbnVsbCB8fCBtZXNzYWdlSWQgPT09IGBydW4tJHtydW5JZH1gKSB7XG4gICAgICAgICAgICBtZXNzYWdlSWQgPSB0aGlzLnN0YWJsZU1lc3NhZ2VJZE1hcFtydW5JZF0gPz8gbWVzc2FnZUlkID8/IGBydW4tJHtydW5JZH1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhYmxlTWVzc2FnZUlkTWFwW3J1bklkXSA/Pz0gbWVzc2FnZUlkO1xuICAgICAgICBpZiAobWVzc2FnZUlkICE9PSBtZXNzYWdlLmlkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSBtZXNzYWdlSWQ7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIG1lc3NhZ2UubGNfa3dhcmdzLmlkID0gbWVzc2FnZUlkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VlblttZXNzYWdlLmlkXSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuc3RyZWFtRm4oW21ldGFbMF0sIFwibWVzc2FnZXNcIiwgW21lc3NhZ2UsIG1ldGFbMV1dXSk7XG4gICAgfVxuICAgIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KF9sbG0sIF9tZXNzYWdlcywgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX2V4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBpZiAobWV0YWRhdGEgJiZcbiAgICAgICAgICAgIC8vIEluY2x1ZGUgbGVnYWN5IExhbmdHcmFwaCBTREsgdGFnXG4gICAgICAgICAgICAoIXRhZ3MgfHwgKCF0YWdzLmluY2x1ZGVzKFRBR19OT1NUUkVBTSkgJiYgIXRhZ3MuaW5jbHVkZXMoXCJub3N0cmVhbVwiKSkpKSB7XG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhc1tydW5JZF0gPSBbXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubGFuZ2dyYXBoX2NoZWNrcG9pbnRfbnMuc3BsaXQoXCJ8XCIpLFxuICAgICAgICAgICAgICAgIHsgdGFncywgbmFtZSwgLi4ubWV0YWRhdGEgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIF9pZHgsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBmaWVsZHM/LmNodW5rO1xuICAgICAgICB0aGlzLmVtaXR0ZWRDaGF0TW9kZWxSdW5JZHNbcnVuSWRdID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGFzW3J1bklkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGF0R2VuZXJhdGlvbkNodW5rKGNodW5rKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQodGhpcy5tZXRhZGF0YXNbcnVuSWRdLCBjaHVuay5tZXNzYWdlLCBydW5JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KHRoaXMubWV0YWRhdGFzW3J1bklkXSwgbmV3IEFJTWVzc2FnZUNodW5rKHsgY29udGVudDogdG9rZW4gfSksIHJ1bklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVMTE1FbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICAvLyBJbiBKUywgbm9uLXN0cmVhbWluZyBydW5zIGRvIG5vdCBjYWxsIGhhbmRsZUxMTU5ld1Rva2VuIGF0IHRoZSBtb2RlbCBsZXZlbFxuICAgICAgICBpZiAoIXRoaXMuZW1pdHRlZENoYXRNb2RlbFJ1bklkc1tydW5JZF0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXRHZW5lcmF0aW9uID0gb3V0cHV0LmdlbmVyYXRpb25zPy5bMF0/LlswXTtcbiAgICAgICAgICAgIGlmIChpc0Jhc2VNZXNzYWdlKGNoYXRHZW5lcmF0aW9uPy5tZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQodGhpcy5tZXRhZGF0YXNbcnVuSWRdLCBjaGF0R2VuZXJhdGlvbj8ubWVzc2FnZSwgcnVuSWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZW1pdHRlZENoYXRNb2RlbFJ1bklkc1tydW5JZF07XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFzW3J1bklkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RhYmxlTWVzc2FnZUlkTWFwW3J1bklkXTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBoYW5kbGVMTE1FcnJvcihfZXJyLCBydW5JZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5tZXRhZGF0YXNbcnVuSWRdO1xuICAgIH1cbiAgICBoYW5kbGVDaGFpblN0YXJ0KF9jaGFpbiwgX2lucHV0cywgcnVuSWQsIF9wYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIF9ydW5UeXBlLCBuYW1lKSB7XG4gICAgICAgIGlmIChtZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBuYW1lID09PSBtZXRhZGF0YS5sYW5nZ3JhcGhfbm9kZSAmJlxuICAgICAgICAgICAgKHRhZ3MgPT09IHVuZGVmaW5lZCB8fCAhdGFncy5pbmNsdWRlcyhUQUdfSElEREVOKSkpIHtcbiAgICAgICAgICAgIHRoaXMubWV0YWRhdGFzW3J1bklkXSA9IFtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5sYW5nZ3JhcGhfY2hlY2twb2ludF9ucy5zcGxpdChcInxcIiksXG4gICAgICAgICAgICAgICAgeyB0YWdzLCBuYW1lLCAuLi5tZXRhZGF0YSB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDaGFpbkVuZChvdXRwdXRzLCBydW5JZCkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGFzW3J1bklkXTtcbiAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFzW3J1bklkXTtcbiAgICAgICAgaWYgKG1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpc0Jhc2VNZXNzYWdlKG91dHB1dHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdChtZXRhZGF0YSwgb3V0cHV0cywgcnVuSWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2Ygb3V0cHV0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNCYXNlTWVzc2FnZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtaXQobWV0YWRhdGEsIHZhbHVlLCBydW5JZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdXRwdXRzICE9IG51bGwgJiYgdHlwZW9mIG91dHB1dHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIE9iamVjdC52YWx1ZXMob3V0cHV0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmFzZU1lc3NhZ2UodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KG1ldGFkYXRhLCB2YWx1ZSwgcnVuSWQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNCYXNlTWVzc2FnZShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbWl0KG1ldGFkYXRhLCBpdGVtLCBydW5JZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaGFuZGxlQ2hhaW5FcnJvcihfZXJyLCBydW5JZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5tZXRhZGF0YXNbcnVuSWRdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelRead: () => (/* binding */ ChannelRead),\n/* harmony export */   PregelNode: () => (/* binding */ PregelNode)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./write.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n\n\n\n\nclass ChannelRead extends _utils_js__WEBPACK_IMPORTED_MODULE_3__.RunnableCallable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(channel, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    mapper, fresh = false) {\n        super({\n            func: (_, config) => ChannelRead.doRead(config, this.channel, this.fresh, this.mapper),\n        });\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"ChannelRead\"\n        });\n        Object.defineProperty(this, \"channel\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fresh\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.fresh = fresh;\n        this.mapper = mapper;\n        this.channel = channel;\n        this.name = Array.isArray(channel)\n            ? `ChannelRead<${channel.join(\",\")}>`\n            : `ChannelRead<${channel}>`;\n    }\n    static doRead(config, channel, fresh, mapper) {\n        const read = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_READ];\n        if (!read) {\n            throw new Error(`Runnable ${this} is not configured with a read function. Make sure to call in the context of a Pregel process`);\n        }\n        if (mapper) {\n            return mapper(read(channel, fresh));\n        }\n        else {\n            return read(channel, fresh);\n        }\n    }\n}\nconst defaultRunnableBound = \n/* #__PURE__ */ new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnablePassthrough();\nclass PregelNode extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding {\n    constructor(fields) {\n        const { channels, triggers, mapper, writers, bound, kwargs, metadata, retryPolicy, tags, subgraphs, ends, } = fields;\n        const mergedTags = [\n            ...(fields.config?.tags ? fields.config.tags : []),\n            ...(tags ?? []),\n        ];\n        super({\n            ...fields,\n            bound: fields.bound ??\n                defaultRunnableBound,\n            config: {\n                ...(fields.config ? fields.config : {}),\n                tags: mergedTags,\n            },\n        });\n        Object.defineProperty(this, \"lc_graph_name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"PregelNode\"\n        });\n        Object.defineProperty(this, \"channels\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"triggers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: defaultRunnableBound\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"retryPolicy\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"subgraphs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ends\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.channels = channels;\n        this.triggers = triggers;\n        this.mapper = mapper;\n        this.writers = writers ?? this.writers;\n        this.bound = bound ?? this.bound;\n        this.kwargs = kwargs ?? this.kwargs;\n        this.metadata = metadata ?? this.metadata;\n        this.tags = mergedTags;\n        this.retryPolicy = retryPolicy;\n        this.subgraphs = subgraphs;\n        this.ends = ends;\n    }\n    getWriters() {\n        const newWriters = [...this.writers];\n        while (newWriters.length > 1 &&\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            newWriters[newWriters.length - 1] instanceof _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite &&\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            newWriters[newWriters.length - 2] instanceof _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite) {\n            // we can combine writes if they are consecutive\n            // careful to not modify the original writers list or ChannelWrite\n            const endWriters = newWriters.slice(-2);\n            const combinedWrites = endWriters[0].writes.concat(endWriters[1].writes);\n            newWriters[newWriters.length - 2] = new _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite(combinedWrites, endWriters[0].config?.tags);\n            newWriters.pop();\n        }\n        return newWriters;\n    }\n    getNode() {\n        const writers = this.getWriters();\n        if (this.bound === defaultRunnableBound && writers.length === 0) {\n            return undefined;\n        }\n        else if (this.bound === defaultRunnableBound && writers.length === 1) {\n            return writers[0];\n        }\n        else if (this.bound === defaultRunnableBound) {\n            return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence({\n                first: writers[0],\n                middle: writers.slice(1, writers.length - 1),\n                last: writers[writers.length - 1],\n                omitSequenceTags: true,\n            });\n        }\n        else if (writers.length > 0) {\n            return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence({\n                first: this.bound,\n                middle: writers.slice(0, writers.length - 1),\n                last: writers[writers.length - 1],\n                omitSequenceTags: true,\n            });\n        }\n        else {\n            return this.bound;\n        }\n    }\n    join(channels) {\n        if (!Array.isArray(channels)) {\n            throw new Error(\"channels must be a list\");\n        }\n        if (typeof this.channels !== \"object\") {\n            throw new Error(\"all channels must be named when using .join()\");\n        }\n        return new PregelNode({\n            channels: {\n                ...this.channels,\n                ...Object.fromEntries(channels.map((chan) => [chan, chan])),\n            },\n            triggers: this.triggers,\n            mapper: this.mapper,\n            writers: this.writers,\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            retryPolicy: this.retryPolicy,\n        });\n    }\n    pipe(coerceable) {\n        if (_write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite.isWriter(coerceable)) {\n            return new PregelNode({\n                channels: this.channels,\n                triggers: this.triggers,\n                mapper: this.mapper,\n                writers: [...this.writers, coerceable],\n                bound: this.bound,\n                config: this.config,\n                kwargs: this.kwargs,\n                retryPolicy: this.retryPolicy,\n            });\n        }\n        else if (this.bound === defaultRunnableBound) {\n            return new PregelNode({\n                channels: this.channels,\n                triggers: this.triggers,\n                mapper: this.mapper,\n                writers: this.writers,\n                bound: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(coerceable),\n                config: this.config,\n                kwargs: this.kwargs,\n                retryPolicy: this.retryPolicy,\n            });\n        }\n        else {\n            return new PregelNode({\n                channels: this.channels,\n                triggers: this.triggers,\n                mapper: this.mapper,\n                writers: this.writers,\n                bound: this.bound.pipe(coerceable),\n                config: this.config,\n                kwargs: this.kwargs,\n                retryPolicy: this.retryPolicy,\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9yZWFkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF1SDtBQUNyRTtBQUNSO0FBQ0s7QUFDeEMsMEJBQTBCLHVEQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtCQUFrQjtBQUMvQyw2QkFBNkIsUUFBUTtBQUNyQztBQUNBO0FBQ0EsMkNBQTJDLDBEQUFlO0FBQzFEO0FBQ0Esd0NBQXdDLE1BQU07QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEVBQW1CO0FBQ2hDLHlCQUF5QixzRUFBZTtBQUMvQztBQUNBLGdCQUFnQixvR0FBb0c7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsbURBQVk7QUFDckU7QUFDQSx5REFBeUQsbURBQVk7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsbURBQVk7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxZQUFZLG1EQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9yZWFkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlQmluZGluZywgUnVubmFibGVQYXNzdGhyb3VnaCwgUnVubmFibGVTZXF1ZW5jZSwgX2NvZXJjZVRvUnVubmFibGUsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbmltcG9ydCB7IENPTkZJR19LRVlfUkVBRCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSB9IGZyb20gXCIuL3dyaXRlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5leHBvcnQgY2xhc3MgQ2hhbm5lbFJlYWQgZXh0ZW5kcyBSdW5uYWJsZUNhbGxhYmxlIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0cnVjdG9yKGNoYW5uZWwsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbWFwcGVyLCBmcmVzaCA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGZ1bmM6IChfLCBjb25maWcpID0+IENoYW5uZWxSZWFkLmRvUmVhZChjb25maWcsIHRoaXMuY2hhbm5lbCwgdGhpcy5mcmVzaCwgdGhpcy5tYXBwZXIpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZ3JhcGhfbmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJDaGFubmVsUmVhZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGFubmVsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyZXNoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWFwcGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZnJlc2ggPSBmcmVzaDtcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBtYXBwZXI7XG4gICAgICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWw7XG4gICAgICAgIHRoaXMubmFtZSA9IEFycmF5LmlzQXJyYXkoY2hhbm5lbClcbiAgICAgICAgICAgID8gYENoYW5uZWxSZWFkPCR7Y2hhbm5lbC5qb2luKFwiLFwiKX0+YFxuICAgICAgICAgICAgOiBgQ2hhbm5lbFJlYWQ8JHtjaGFubmVsfT5gO1xuICAgIH1cbiAgICBzdGF0aWMgZG9SZWFkKGNvbmZpZywgY2hhbm5lbCwgZnJlc2gsIG1hcHBlcikge1xuICAgICAgICBjb25zdCByZWFkID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfUkVBRF07XG4gICAgICAgIGlmICghcmVhZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW5uYWJsZSAke3RoaXN9IGlzIG5vdCBjb25maWd1cmVkIHdpdGggYSByZWFkIGZ1bmN0aW9uLiBNYWtlIHN1cmUgdG8gY2FsbCBpbiB0aGUgY29udGV4dCBvZiBhIFByZWdlbCBwcm9jZXNzYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcHBlcikge1xuICAgICAgICAgICAgcmV0dXJuIG1hcHBlcihyZWFkKGNoYW5uZWwsIGZyZXNoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZChjaGFubmVsLCBmcmVzaCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBkZWZhdWx0UnVubmFibGVCb3VuZCA9IFxuLyogI19fUFVSRV9fICovIG5ldyBSdW5uYWJsZVBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY2xhc3MgUHJlZ2VsTm9kZSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHsgY2hhbm5lbHMsIHRyaWdnZXJzLCBtYXBwZXIsIHdyaXRlcnMsIGJvdW5kLCBrd2FyZ3MsIG1ldGFkYXRhLCByZXRyeVBvbGljeSwgdGFncywgc3ViZ3JhcGhzLCBlbmRzLCB9ID0gZmllbGRzO1xuICAgICAgICBjb25zdCBtZXJnZWRUYWdzID0gW1xuICAgICAgICAgICAgLi4uKGZpZWxkcy5jb25maWc/LnRhZ3MgPyBmaWVsZHMuY29uZmlnLnRhZ3MgOiBbXSksXG4gICAgICAgICAgICAuLi4odGFncyA/PyBbXSksXG4gICAgICAgIF07XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgIGJvdW5kOiBmaWVsZHMuYm91bmQgPz9cbiAgICAgICAgICAgICAgICBkZWZhdWx0UnVubmFibGVCb3VuZCxcbiAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIC4uLihmaWVsZHMuY29uZmlnID8gZmllbGRzLmNvbmZpZyA6IHt9KSxcbiAgICAgICAgICAgICAgICB0YWdzOiBtZXJnZWRUYWdzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2dyYXBoX25hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiUHJlZ2VsTm9kZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaGFubmVsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmlnZ2Vyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hcHBlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRSdW5uYWJsZUJvdW5kXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXRyeVBvbGljeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdWJncmFwaHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoYW5uZWxzID0gY2hhbm5lbHM7XG4gICAgICAgIHRoaXMudHJpZ2dlcnMgPSB0cmlnZ2VycztcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBtYXBwZXI7XG4gICAgICAgIHRoaXMud3JpdGVycyA9IHdyaXRlcnMgPz8gdGhpcy53cml0ZXJzO1xuICAgICAgICB0aGlzLmJvdW5kID0gYm91bmQgPz8gdGhpcy5ib3VuZDtcbiAgICAgICAgdGhpcy5rd2FyZ3MgPSBrd2FyZ3MgPz8gdGhpcy5rd2FyZ3M7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YSA/PyB0aGlzLm1ldGFkYXRhO1xuICAgICAgICB0aGlzLnRhZ3MgPSBtZXJnZWRUYWdzO1xuICAgICAgICB0aGlzLnJldHJ5UG9saWN5ID0gcmV0cnlQb2xpY3k7XG4gICAgICAgIHRoaXMuc3ViZ3JhcGhzID0gc3ViZ3JhcGhzO1xuICAgICAgICB0aGlzLmVuZHMgPSBlbmRzO1xuICAgIH1cbiAgICBnZXRXcml0ZXJzKCkge1xuICAgICAgICBjb25zdCBuZXdXcml0ZXJzID0gWy4uLnRoaXMud3JpdGVyc107XG4gICAgICAgIHdoaWxlIChuZXdXcml0ZXJzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIG5ld1dyaXRlcnNbbmV3V3JpdGVycy5sZW5ndGggLSAxXSBpbnN0YW5jZW9mIENoYW5uZWxXcml0ZSAmJlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgbmV3V3JpdGVyc1tuZXdXcml0ZXJzLmxlbmd0aCAtIDJdIGluc3RhbmNlb2YgQ2hhbm5lbFdyaXRlKSB7XG4gICAgICAgICAgICAvLyB3ZSBjYW4gY29tYmluZSB3cml0ZXMgaWYgdGhleSBhcmUgY29uc2VjdXRpdmVcbiAgICAgICAgICAgIC8vIGNhcmVmdWwgdG8gbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwgd3JpdGVycyBsaXN0IG9yIENoYW5uZWxXcml0ZVxuICAgICAgICAgICAgY29uc3QgZW5kV3JpdGVycyA9IG5ld1dyaXRlcnMuc2xpY2UoLTIpO1xuICAgICAgICAgICAgY29uc3QgY29tYmluZWRXcml0ZXMgPSBlbmRXcml0ZXJzWzBdLndyaXRlcy5jb25jYXQoZW5kV3JpdGVyc1sxXS53cml0ZXMpO1xuICAgICAgICAgICAgbmV3V3JpdGVyc1tuZXdXcml0ZXJzLmxlbmd0aCAtIDJdID0gbmV3IENoYW5uZWxXcml0ZShjb21iaW5lZFdyaXRlcywgZW5kV3JpdGVyc1swXS5jb25maWc/LnRhZ3MpO1xuICAgICAgICAgICAgbmV3V3JpdGVycy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3V3JpdGVycztcbiAgICB9XG4gICAgZ2V0Tm9kZSgpIHtcbiAgICAgICAgY29uc3Qgd3JpdGVycyA9IHRoaXMuZ2V0V3JpdGVycygpO1xuICAgICAgICBpZiAodGhpcy5ib3VuZCA9PT0gZGVmYXVsdFJ1bm5hYmxlQm91bmQgJiYgd3JpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5ib3VuZCA9PT0gZGVmYXVsdFJ1bm5hYmxlQm91bmQgJiYgd3JpdGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXJzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYm91bmQgPT09IGRlZmF1bHRSdW5uYWJsZUJvdW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB3cml0ZXJzWzBdLFxuICAgICAgICAgICAgICAgIG1pZGRsZTogd3JpdGVycy5zbGljZSgxLCB3cml0ZXJzLmxlbmd0aCAtIDEpLFxuICAgICAgICAgICAgICAgIGxhc3Q6IHdyaXRlcnNbd3JpdGVycy5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICBvbWl0U2VxdWVuY2VUYWdzOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAod3JpdGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAgICAgIG1pZGRsZTogd3JpdGVycy5zbGljZSgwLCB3cml0ZXJzLmxlbmd0aCAtIDEpLFxuICAgICAgICAgICAgICAgIGxhc3Q6IHdyaXRlcnNbd3JpdGVycy5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICBvbWl0U2VxdWVuY2VUYWdzOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3VuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBqb2luKGNoYW5uZWxzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjaGFubmVscykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNoYW5uZWxzIG11c3QgYmUgYSBsaXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jaGFubmVscyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYWxsIGNoYW5uZWxzIG11c3QgYmUgbmFtZWQgd2hlbiB1c2luZyAuam9pbigpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJlZ2VsTm9kZSh7XG4gICAgICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKGNoYW5uZWxzLm1hcCgoY2hhbikgPT4gW2NoYW4sIGNoYW5dKSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJpZ2dlcnM6IHRoaXMudHJpZ2dlcnMsXG4gICAgICAgICAgICBtYXBwZXI6IHRoaXMubWFwcGVyLFxuICAgICAgICAgICAgd3JpdGVyczogdGhpcy53cml0ZXJzLFxuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgIHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGlwZShjb2VyY2VhYmxlKSB7XG4gICAgICAgIGlmIChDaGFubmVsV3JpdGUuaXNXcml0ZXIoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJlZ2VsTm9kZSh7XG4gICAgICAgICAgICAgICAgY2hhbm5lbHM6IHRoaXMuY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgdHJpZ2dlcnM6IHRoaXMudHJpZ2dlcnMsXG4gICAgICAgICAgICAgICAgbWFwcGVyOiB0aGlzLm1hcHBlcixcbiAgICAgICAgICAgICAgICB3cml0ZXJzOiBbLi4udGhpcy53cml0ZXJzLCBjb2VyY2VhYmxlXSxcbiAgICAgICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICAgICAgcmV0cnlQb2xpY3k6IHRoaXMucmV0cnlQb2xpY3ksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmJvdW5kID09PSBkZWZhdWx0UnVubmFibGVCb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVnZWxOb2RlKHtcbiAgICAgICAgICAgICAgICBjaGFubmVsczogdGhpcy5jaGFubmVscyxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyczogdGhpcy50cmlnZ2VycyxcbiAgICAgICAgICAgICAgICBtYXBwZXI6IHRoaXMubWFwcGVyLFxuICAgICAgICAgICAgICAgIHdyaXRlcnM6IHRoaXMud3JpdGVycyxcbiAgICAgICAgICAgICAgICBib3VuZDogX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSksXG4gICAgICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgICAgIHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByZWdlbE5vZGUoe1xuICAgICAgICAgICAgICAgIGNoYW5uZWxzOiB0aGlzLmNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHRyaWdnZXJzOiB0aGlzLnRyaWdnZXJzLFxuICAgICAgICAgICAgICAgIG1hcHBlcjogdGhpcy5tYXBwZXIsXG4gICAgICAgICAgICAgICAgd3JpdGVyczogdGhpcy53cml0ZXJzLFxuICAgICAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLnBpcGUoY29lcmNlYWJsZSksXG4gICAgICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgICAgIHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/retry.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/retry.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_BACKOFF_FACTOR: () => (/* binding */ DEFAULT_BACKOFF_FACTOR),\n/* harmony export */   DEFAULT_INITIAL_INTERVAL: () => (/* binding */ DEFAULT_INITIAL_INTERVAL),\n/* harmony export */   DEFAULT_MAX_INTERVAL: () => (/* binding */ DEFAULT_MAX_INTERVAL),\n/* harmony export */   DEFAULT_MAX_RETRIES: () => (/* binding */ DEFAULT_MAX_RETRIES),\n/* harmony export */   _runWithRetry: () => (/* binding */ _runWithRetry)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n\n\n\nconst DEFAULT_INITIAL_INTERVAL = 500;\nconst DEFAULT_BACKOFF_FACTOR = 2;\nconst DEFAULT_MAX_INTERVAL = 128000;\nconst DEFAULT_MAX_RETRIES = 3;\nconst DEFAULT_STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409, // Conflict\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst DEFAULT_RETRY_ON_HANDLER = (error) => {\n    if (error.message.startsWith(\"Cancel\") ||\n        error.message.startsWith(\"AbortError\") ||\n        error.name === \"AbortError\") {\n        return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        return false;\n    }\n    const status = \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && DEFAULT_STATUS_NO_RETRY.includes(+status)) {\n        return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        return false;\n    }\n    return true;\n};\nasync function _runWithRetry(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\npregelTask, retryPolicy, configurable, signal) {\n    const resolvedRetryPolicy = pregelTask.retry_policy ?? retryPolicy;\n    let interval = resolvedRetryPolicy !== undefined\n        ? resolvedRetryPolicy.initialInterval ?? DEFAULT_INITIAL_INTERVAL\n        : 0;\n    let attempts = 0;\n    let error;\n    let result;\n    let { config } = pregelTask;\n    if (configurable) {\n        config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.patchConfigurable)(config, configurable);\n    }\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        if (signal?.aborted) {\n            // no need to throw here - we'll throw from the runner, instead.\n            // there's just no point in retrying if the user has requested an abort.\n            break;\n        }\n        // Clear any writes from previous attempts\n        pregelTask.writes.splice(0, pregelTask.writes.length);\n        error = undefined;\n        try {\n            result = await pregelTask.proc.invoke(pregelTask.input, config);\n            break;\n        }\n        catch (e) {\n            error = e;\n            error.pregelTaskId = pregelTask.id;\n            if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.isParentCommand)(error)) {\n                const ns = config?.configurable?.checkpoint_ns;\n                const cmd = error.command;\n                if (cmd.graph === ns) {\n                    // this command is for the current graph, handle it\n                    for (const writer of pregelTask.writers) {\n                        await writer.invoke(cmd, config);\n                    }\n                    break;\n                }\n                else if (cmd.graph === _constants_js__WEBPACK_IMPORTED_MODULE_0__.Command.PARENT) {\n                    // this command is for the parent graph, assign it to the parent\n                    const parent_ns = ns\n                        .split(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR)\n                        .slice(0, -1)\n                        .join(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR);\n                    error.command = new _constants_js__WEBPACK_IMPORTED_MODULE_0__.Command({\n                        ...error.command,\n                        graph: parent_ns,\n                    });\n                }\n            }\n            if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.isGraphBubbleUp)(error)) {\n                break;\n            }\n            if (resolvedRetryPolicy === undefined) {\n                break;\n            }\n            attempts += 1;\n            // check if we should give up\n            if (attempts >= (resolvedRetryPolicy.maxAttempts ?? DEFAULT_MAX_RETRIES)) {\n                break;\n            }\n            const retryOn = resolvedRetryPolicy.retryOn ?? DEFAULT_RETRY_ON_HANDLER;\n            if (!retryOn(error)) {\n                break;\n            }\n            interval = Math.min(resolvedRetryPolicy.maxInterval ?? DEFAULT_MAX_INTERVAL, interval * (resolvedRetryPolicy.backoffFactor ?? DEFAULT_BACKOFF_FACTOR));\n            const intervalWithJitter = resolvedRetryPolicy.jitter\n                ? Math.floor(interval + Math.random() * 1000)\n                : interval;\n            // sleep before retrying\n            // eslint-disable-next-line no-promise-executor-return\n            await new Promise((resolve) => setTimeout(resolve, intervalWithJitter));\n            // log the retry\n            const errorName = error.name ??\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                error.constructor.unminifiable_name ??\n                error.constructor.name;\n            console.log(`Retrying task \"${String(pregelTask.name)}\" after ${interval.toFixed(2)}ms (attempt ${attempts}) after ${errorName}: ${error}`);\n            // signal subgraphs to resume (if available)\n            config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_2__.patchConfigurable)(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_RESUMING]: true });\n        }\n        finally {\n            // Clear checkpoint_ns seen (for subgraph detection)\n            const checkpointNs = config?.configurable?.checkpoint_ns;\n            if (checkpointNs) {\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.getSubgraphsSeenSet)().delete(checkpointNs);\n            }\n        }\n    }\n    return {\n        task: pregelTask,\n        result,\n        error: error,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9yZXRyeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnRztBQUNWO0FBQ2pDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBLGlCQUFpQixrRUFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJEQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrREFBTztBQUM5QztBQUNBO0FBQ0EsK0JBQStCLHlFQUE4QjtBQUM3RDtBQUNBLDhCQUE4Qix5RUFBOEI7QUFDNUQsd0NBQXdDLGtEQUFPO0FBQy9DO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGdCQUFnQiwyREFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdCQUF3QixVQUFVLG9CQUFvQixjQUFjLFNBQVMsVUFBVSxVQUFVLElBQUksTUFBTTtBQUNySjtBQUNBLHFCQUFxQixrRUFBaUIsV0FBVyxDQUFDLDhEQUFtQixTQUFTO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsK0RBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvcmV0cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBDb21tYW5kLCBDT05GSUdfS0VZX1JFU1VNSU5HLCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGdldFN1YmdyYXBoc1NlZW5TZXQsIGlzR3JhcGhCdWJibGVVcCwgaXNQYXJlbnRDb21tYW5kLCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHBhdGNoQ29uZmlndXJhYmxlIH0gZnJvbSBcIi4vdXRpbHMvaW5kZXguanNcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX0lOSVRJQUxfSU5URVJWQUwgPSA1MDA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9NQVhfSU5URVJWQUwgPSAxMjgwMDA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9NQVhfUkVUUklFUyA9IDM7XG5jb25zdCBERUZBVUxUX1NUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMixcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgREVGQVVMVF9SRVRSWV9PTl9IQU5ETEVSID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8XG4gICAgICAgIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBzdGF0dXMgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID8/IGVycm9yPy5zdGF0dXM7XG4gICAgaWYgKHN0YXR1cyAmJiBERUZBVUxUX1NUQVRVU19OT19SRVRSWS5pbmNsdWRlcygrc3RhdHVzKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGVycm9yPy5lcnJvcj8uY29kZSA9PT0gXCJpbnN1ZmZpY2llbnRfcXVvdGFcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfcnVuV2l0aFJldHJ5KFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnByZWdlbFRhc2ssIHJldHJ5UG9saWN5LCBjb25maWd1cmFibGUsIHNpZ25hbCkge1xuICAgIGNvbnN0IHJlc29sdmVkUmV0cnlQb2xpY3kgPSBwcmVnZWxUYXNrLnJldHJ5X3BvbGljeSA/PyByZXRyeVBvbGljeTtcbiAgICBsZXQgaW50ZXJ2YWwgPSByZXNvbHZlZFJldHJ5UG9saWN5ICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyByZXNvbHZlZFJldHJ5UG9saWN5LmluaXRpYWxJbnRlcnZhbCA/PyBERUZBVUxUX0lOSVRJQUxfSU5URVJWQUxcbiAgICAgICAgOiAwO1xuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgbGV0IGVycm9yO1xuICAgIGxldCByZXN1bHQ7XG4gICAgbGV0IHsgY29uZmlnIH0gPSBwcmVnZWxUYXNrO1xuICAgIGlmIChjb25maWd1cmFibGUpIHtcbiAgICAgICAgY29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCBjb25maWd1cmFibGUpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byB0aHJvdyBoZXJlIC0gd2UnbGwgdGhyb3cgZnJvbSB0aGUgcnVubmVyLCBpbnN0ZWFkLlxuICAgICAgICAgICAgLy8gdGhlcmUncyBqdXN0IG5vIHBvaW50IGluIHJldHJ5aW5nIGlmIHRoZSB1c2VyIGhhcyByZXF1ZXN0ZWQgYW4gYWJvcnQuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhciBhbnkgd3JpdGVzIGZyb20gcHJldmlvdXMgYXR0ZW1wdHNcbiAgICAgICAgcHJlZ2VsVGFzay53cml0ZXMuc3BsaWNlKDAsIHByZWdlbFRhc2sud3JpdGVzLmxlbmd0aCk7XG4gICAgICAgIGVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcHJlZ2VsVGFzay5wcm9jLmludm9rZShwcmVnZWxUYXNrLmlucHV0LCBjb25maWcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yID0gZTtcbiAgICAgICAgICAgIGVycm9yLnByZWdlbFRhc2tJZCA9IHByZWdlbFRhc2suaWQ7XG4gICAgICAgICAgICBpZiAoaXNQYXJlbnRDb21tYW5kKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5zID0gY29uZmlnPy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnM7XG4gICAgICAgICAgICAgICAgY29uc3QgY21kID0gZXJyb3IuY29tbWFuZDtcbiAgICAgICAgICAgICAgICBpZiAoY21kLmdyYXBoID09PSBucykge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGNvbW1hbmQgaXMgZm9yIHRoZSBjdXJyZW50IGdyYXBoLCBoYW5kbGUgaXRcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3cml0ZXIgb2YgcHJlZ2VsVGFzay53cml0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZXIuaW52b2tlKGNtZCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY21kLmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGNvbW1hbmQgaXMgZm9yIHRoZSBwYXJlbnQgZ3JhcGgsIGFzc2lnbiBpdCB0byB0aGUgcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudF9ucyA9IG5zXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuY29tbWFuZCA9IG5ldyBDb21tYW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVycm9yLmNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaDogcGFyZW50X25zLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNHcmFwaEJ1YmJsZVVwKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc29sdmVkUmV0cnlQb2xpY3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0ZW1wdHMgKz0gMTtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIHNob3VsZCBnaXZlIHVwXG4gICAgICAgICAgICBpZiAoYXR0ZW1wdHMgPj0gKHJlc29sdmVkUmV0cnlQb2xpY3kubWF4QXR0ZW1wdHMgPz8gREVGQVVMVF9NQVhfUkVUUklFUykpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJldHJ5T24gPSByZXNvbHZlZFJldHJ5UG9saWN5LnJldHJ5T24gPz8gREVGQVVMVF9SRVRSWV9PTl9IQU5ETEVSO1xuICAgICAgICAgICAgaWYgKCFyZXRyeU9uKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50ZXJ2YWwgPSBNYXRoLm1pbihyZXNvbHZlZFJldHJ5UG9saWN5Lm1heEludGVydmFsID8/IERFRkFVTFRfTUFYX0lOVEVSVkFMLCBpbnRlcnZhbCAqIChyZXNvbHZlZFJldHJ5UG9saWN5LmJhY2tvZmZGYWN0b3IgPz8gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikpO1xuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxXaXRoSml0dGVyID0gcmVzb2x2ZWRSZXRyeVBvbGljeS5qaXR0ZXJcbiAgICAgICAgICAgICAgICA/IE1hdGguZmxvb3IoaW50ZXJ2YWwgKyBNYXRoLnJhbmRvbSgpICogMTAwMClcbiAgICAgICAgICAgICAgICA6IGludGVydmFsO1xuICAgICAgICAgICAgLy8gc2xlZXAgYmVmb3JlIHJldHJ5aW5nXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvbWlzZS1leGVjdXRvci1yZXR1cm5cbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGludGVydmFsV2l0aEppdHRlcikpO1xuICAgICAgICAgICAgLy8gbG9nIHRoZSByZXRyeVxuICAgICAgICAgICAgY29uc3QgZXJyb3JOYW1lID0gZXJyb3IubmFtZSA/P1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZXJyb3IuY29uc3RydWN0b3IudW5taW5pZmlhYmxlX25hbWUgPz9cbiAgICAgICAgICAgICAgICBlcnJvci5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIHRhc2sgXCIke1N0cmluZyhwcmVnZWxUYXNrLm5hbWUpfVwiIGFmdGVyICR7aW50ZXJ2YWwudG9GaXhlZCgyKX1tcyAoYXR0ZW1wdCAke2F0dGVtcHRzfSkgYWZ0ZXIgJHtlcnJvck5hbWV9OiAke2Vycm9yfWApO1xuICAgICAgICAgICAgLy8gc2lnbmFsIHN1YmdyYXBocyB0byByZXN1bWUgKGlmIGF2YWlsYWJsZSlcbiAgICAgICAgICAgIGNvbmZpZyA9IHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgeyBbQ09ORklHX0tFWV9SRVNVTUlOR106IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvLyBDbGVhciBjaGVja3BvaW50X25zIHNlZW4gKGZvciBzdWJncmFwaCBkZXRlY3Rpb24pXG4gICAgICAgICAgICBjb25zdCBjaGVja3BvaW50TnMgPSBjb25maWc/LmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucztcbiAgICAgICAgICAgIGlmIChjaGVja3BvaW50TnMpIHtcbiAgICAgICAgICAgICAgICBnZXRTdWJncmFwaHNTZWVuU2V0KCkuZGVsZXRlKGNoZWNrcG9pbnROcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFzazogcHJlZ2VsVGFzayxcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/retry.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/runner.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/runner.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PregelRunner: () => (/* binding */ PregelRunner)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/types.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _retry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./retry.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/retry.js\");\n\n\n\n\n/**\n * Responsible for handling task execution on each tick of the {@link PregelLoop}.\n */\nclass PregelRunner {\n    /**\n     * Construct a new PregelRunner, which executes tasks from the provided PregelLoop.\n     * @param loop - The PregelLoop that produces tasks for this runner to execute.\n     */\n    constructor({ loop, nodeFinished, }) {\n        Object.defineProperty(this, \"nodeFinished\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"loop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.loop = loop;\n        this.nodeFinished = nodeFinished;\n    }\n    /**\n     * Execute tasks from the current step of the PregelLoop.\n     *\n     * Note: this method does NOT call {@link PregelLoop}#tick. That must be handled externally.\n     * @param options - Options for the execution.\n     */\n    async tick(options = {}) {\n        const { timeout, signal, retryPolicy, onStepWrite } = options;\n        let graphInterrupt;\n        // Start task execution\n        const pendingTasks = Object.values(this.loop.tasks).filter((t) => t.writes.length === 0);\n        const taskStream = this._executeTasksWithRetry(pendingTasks, {\n            stepTimeout: timeout,\n            signal,\n            retryPolicy,\n        });\n        for await (const { task, error } of taskStream) {\n            graphInterrupt = this._commit(task, error) ?? graphInterrupt;\n        }\n        onStepWrite?.(this.loop.step, Object.values(this.loop.tasks)\n            .map((task) => task.writes)\n            .flat());\n        if (graphInterrupt) {\n            throw graphInterrupt;\n        }\n    }\n    /**\n     * Concurrently executes tasks with the requested retry policy, yielding a {@link SettledPregelTask} for each task as it completes.\n     * @param tasks - The tasks to execute.\n     * @param options - Options for the execution.\n     */\n    async *_executeTasksWithRetry(tasks, options) {\n        const { stepTimeout, retryPolicy } = options ?? {};\n        let signal = options?.signal;\n        const promiseAddedSymbol = Symbol.for(\"promiseAdded\");\n        let addedPromiseSignal;\n        let addedPromiseWait;\n        function waitHandler(resolve) {\n            addedPromiseSignal = () => {\n                addedPromiseWait = new Promise(waitHandler);\n                resolve(promiseAddedSymbol);\n            };\n        }\n        addedPromiseWait = new Promise(waitHandler);\n        const executingTasksMap = {};\n        const writer = (task, writes, { calls } = {}) => {\n            if (writes.every(([channel]) => channel !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.PUSH)) {\n                return task.config?.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND]?.(writes) ?? [];\n            }\n            // Schedule PUSH tasks, collect promises\n            const scratchpad = task.config?.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SCRATCHPAD];\n            const rtn = {};\n            for (const [idx, write] of writes.entries()) {\n                const [channel] = write;\n                if (channel !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.PUSH) {\n                    continue;\n                }\n                const wcall = calls?.[idx];\n                const cnt = scratchpad.callCounter;\n                scratchpad.callCounter += 1;\n                if (wcall == null) {\n                    throw new Error(\"BUG: No call found\");\n                }\n                const nextTask = this.loop.acceptPush(task, cnt, wcall);\n                if (!nextTask) {\n                    continue;\n                }\n                // Check if this task is already running\n                const existingPromise = executingTasksMap[nextTask.id];\n                if (existingPromise !== undefined) {\n                    // If the parent task was retried, the next task might already be running\n                    rtn[idx] = existingPromise;\n                }\n                else if (nextTask.writes.length > 0) {\n                    // If it already ran, return the result\n                    const returns = nextTask.writes.filter(([c]) => c === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RETURN);\n                    const errors = nextTask.writes.filter(([c]) => c === _constants_js__WEBPACK_IMPORTED_MODULE_1__.ERROR);\n                    if (returns.length > 0) {\n                        // Task completed successfully\n                        if (returns.length === 1) {\n                            rtn[idx] = Promise.resolve(returns[0][1]);\n                        }\n                        else {\n                            // should be unreachable\n                            throw new Error(`BUG: multiple returns found for task ${nextTask.name}__${nextTask.id}`);\n                        }\n                    }\n                    else if (errors.length > 0) {\n                        if (errors.length === 1) {\n                            const errorValue = errors[0][1];\n                            // Task failed\n                            const error = \n                            // eslint-disable-next-line no-instanceof/no-instanceof\n                            errorValue instanceof Error\n                                ? errorValue\n                                : new Error(String(errorValue));\n                            rtn[idx] = Promise.reject(error);\n                        }\n                        else {\n                            // the only way this should happen is if the task executes multiple times and writes aren't cleared\n                            throw new Error(`BUG: multiple errors found for task ${nextTask.name}__${nextTask.id}`);\n                        }\n                    }\n                }\n                else {\n                    // Schedule the next task with retry\n                    const prom = (0,_retry_js__WEBPACK_IMPORTED_MODULE_3__._runWithRetry)(nextTask, retryPolicy, {\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND]: writer.bind(this, nextTask),\n                        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                        [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CALL]: call.bind(this, nextTask),\n                    });\n                    executingTasksMap[nextTask.id] = prom;\n                    addedPromiseSignal();\n                    rtn[idx] = prom.then(({ result, error }) => {\n                        if (error) {\n                            return Promise.reject(error);\n                        }\n                        return result;\n                    });\n                }\n            }\n            return Object.values(rtn);\n        };\n        const call = (task, func, name, input, options = {}) => {\n            const result = writer(task, [[_constants_js__WEBPACK_IMPORTED_MODULE_1__.PUSH, null]], {\n                calls: [\n                    new _types_js__WEBPACK_IMPORTED_MODULE_0__.Call({\n                        func,\n                        name,\n                        input,\n                        retry: options.retry,\n                        callbacks: options.callbacks,\n                    }),\n                ],\n            });\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (result !== undefined) {\n                if (result.length === 1) {\n                    return result[0];\n                }\n                return Promise.all(result);\n            }\n            return Promise.resolve();\n        };\n        if (stepTimeout && signal) {\n            if (\"any\" in AbortSignal) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                signal = AbortSignal.any([\n                    signal,\n                    AbortSignal.timeout(stepTimeout),\n                ]);\n            }\n        }\n        else if (stepTimeout) {\n            signal = AbortSignal.timeout(stepTimeout);\n        }\n        if (signal?.aborted) {\n            // note: don't use throwIfAborted here because it throws a DOMException,\n            // which isn't consistent with how we throw on abort below.\n            throw new Error(\"Abort\");\n        }\n        // Start tasks\n        Object.assign(executingTasksMap, Object.fromEntries(tasks.map((pregelTask) => {\n            return [\n                pregelTask.id,\n                (0,_retry_js__WEBPACK_IMPORTED_MODULE_3__._runWithRetry)(pregelTask, retryPolicy, {\n                    [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND]: writer?.bind(this, pregelTask),\n                    [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CALL]: call?.bind(this, pregelTask),\n                }).catch((error) => {\n                    return { task: pregelTask, error };\n                }),\n            ];\n        })));\n        let listener;\n        const signalPromise = new Promise((_resolve, reject) => {\n            listener = () => reject(new Error(\"Abort\"));\n            signal?.addEventListener(\"abort\", listener);\n        }).finally(() => signal?.removeEventListener(\"abort\", listener));\n        while (Object.keys(executingTasksMap).length > 0) {\n            const settledTask = await Promise.race([\n                ...Object.values(executingTasksMap),\n                signalPromise,\n                addedPromiseWait,\n            ]);\n            if (settledTask === promiseAddedSymbol) {\n                continue;\n            }\n            yield settledTask;\n            delete executingTasksMap[settledTask.task.id];\n        }\n    }\n    /**\n     * Determines what writes to apply based on whether the task completed successfully, and what type of error occurred.\n     *\n     * Throws an error if the error is a {@link GraphBubbleUp} error and {@link PregelLoop}#isNested is true.\n     *\n     * Note that in the case of a {@link GraphBubbleUp} error that is not a {@link GraphInterrupt}, like a {@link Command}, this method does not apply any writes.\n     *\n     * @param task - The task to commit.\n     * @param error - The error that occurred, if any.\n     * @returns The {@link GraphInterrupt} that occurred, if the user's code threw one.\n     */\n    _commit(task, error) {\n        let graphInterrupt;\n        if (error !== undefined) {\n            if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.isGraphBubbleUp)(error)) {\n                if (this.loop.isNested) {\n                    throw error;\n                }\n                if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.isGraphInterrupt)(error)) {\n                    graphInterrupt = error;\n                    if (error.interrupts.length) {\n                        const interrupts = error.interrupts.map((interrupt) => [_constants_js__WEBPACK_IMPORTED_MODULE_1__.INTERRUPT, interrupt]);\n                        const resumes = task.writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME);\n                        if (resumes.length) {\n                            interrupts.push(...resumes);\n                        }\n                        this.loop.putWrites(task.id, interrupts);\n                    }\n                }\n            }\n            else {\n                this.loop.putWrites(task.id, [\n                    [_constants_js__WEBPACK_IMPORTED_MODULE_1__.ERROR, { message: error.message, name: error.name }],\n                ]);\n                throw error;\n            }\n        }\n        else {\n            if (this.nodeFinished &&\n                (task.config?.tags == null || !task.config.tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN))) {\n                this.nodeFinished(String(task.name));\n            }\n            if (task.writes.length === 0) {\n                // Add no writes marker\n                task.writes.push([_constants_js__WEBPACK_IMPORTED_MODULE_1__.NO_WRITES, null]);\n            }\n            // Save task writes to checkpointer\n            this.loop.putWrites(task.id, task.writes);\n        }\n        return graphInterrupt;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9ydW5uZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDd0g7QUFDeEY7QUFDdkI7QUFDM0M7QUFDQSxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxQkFBcUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxpQkFBaUI7QUFDekQ7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQixnQkFBZ0IsNENBQTRDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDJCQUEyQixjQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLHlCQUF5QjtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyQkFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFFBQVEsSUFBSTtBQUNwRCx3REFBd0QsK0NBQUk7QUFDNUQsbURBQW1ELDBEQUFlO0FBQ2xFO0FBQ0E7QUFDQSwyREFBMkQsZ0VBQXFCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrQ0FBSTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLGlEQUFNO0FBQ2hGLHlFQUF5RSxnREFBSztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixjQUFjLElBQUksWUFBWTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsY0FBYyxJQUFJLFlBQVk7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3REFBYTtBQUM5Qyx5QkFBeUIsMERBQWU7QUFDeEM7QUFDQSx5QkFBeUIsMERBQWU7QUFDeEMscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw0Q0FBNEMsZUFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRCwwQ0FBMEMsK0NBQUk7QUFDOUM7QUFDQSx3QkFBd0IsMkNBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0RBQWE7QUFDN0IscUJBQXFCLDBEQUFlO0FBQ3BDLHFCQUFxQiwwREFBZTtBQUNwQyxpQkFBaUI7QUFDakIsNkJBQTZCO0FBQzdCLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxxQkFBcUIsV0FBVyxpQkFBaUI7QUFDM0Y7QUFDQSxtQ0FBbUMscUJBQXFCLHFCQUFxQixxQkFBcUIsVUFBVSxjQUFjO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDREQUFnQjtBQUNwQztBQUNBO0FBQ0EsZ0ZBQWdGLG9EQUFTO0FBQ3pGLDJFQUEyRSxpREFBTTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0RBQUssSUFBSSwwQ0FBMEM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLHFEQUFVO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9EQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9ydW5uZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsbCB9IGZyb20gXCIuL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBDT05GSUdfS0VZX1NFTkQsIENPTkZJR19LRVlfU0NSQVRDSFBBRCwgUFVTSCwgRVJST1IsIElOVEVSUlVQVCwgUkVTVU1FLCBOT19XUklURVMsIFRBR19ISURERU4sIFJFVFVSTiwgQ09ORklHX0tFWV9DQUxMLCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGlzR3JhcGhCdWJibGVVcCwgaXNHcmFwaEludGVycnVwdCwgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBfcnVuV2l0aFJldHJ5IH0gZnJvbSBcIi4vcmV0cnkuanNcIjtcbi8qKlxuICogUmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIHRhc2sgZXhlY3V0aW9uIG9uIGVhY2ggdGljayBvZiB0aGUge0BsaW5rIFByZWdlbExvb3B9LlxuICovXG5leHBvcnQgY2xhc3MgUHJlZ2VsUnVubmVyIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgYSBuZXcgUHJlZ2VsUnVubmVyLCB3aGljaCBleGVjdXRlcyB0YXNrcyBmcm9tIHRoZSBwcm92aWRlZCBQcmVnZWxMb29wLlxuICAgICAqIEBwYXJhbSBsb29wIC0gVGhlIFByZWdlbExvb3AgdGhhdCBwcm9kdWNlcyB0YXNrcyBmb3IgdGhpcyBydW5uZXIgdG8gZXhlY3V0ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih7IGxvb3AsIG5vZGVGaW5pc2hlZCwgfSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2RlRmluaXNoZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9vcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvb3AgPSBsb29wO1xuICAgICAgICB0aGlzLm5vZGVGaW5pc2hlZCA9IG5vZGVGaW5pc2hlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSB0YXNrcyBmcm9tIHRoZSBjdXJyZW50IHN0ZXAgb2YgdGhlIFByZWdlbExvb3AuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGlzIG1ldGhvZCBkb2VzIE5PVCBjYWxsIHtAbGluayBQcmVnZWxMb29wfSN0aWNrLiBUaGF0IG11c3QgYmUgaGFuZGxlZCBleHRlcm5hbGx5LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyB0aWNrKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCB7IHRpbWVvdXQsIHNpZ25hbCwgcmV0cnlQb2xpY3ksIG9uU3RlcFdyaXRlIH0gPSBvcHRpb25zO1xuICAgICAgICBsZXQgZ3JhcGhJbnRlcnJ1cHQ7XG4gICAgICAgIC8vIFN0YXJ0IHRhc2sgZXhlY3V0aW9uXG4gICAgICAgIGNvbnN0IHBlbmRpbmdUYXNrcyA9IE9iamVjdC52YWx1ZXModGhpcy5sb29wLnRhc2tzKS5maWx0ZXIoKHQpID0+IHQud3JpdGVzLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgIGNvbnN0IHRhc2tTdHJlYW0gPSB0aGlzLl9leGVjdXRlVGFza3NXaXRoUmV0cnkocGVuZGluZ1Rhc2tzLCB7XG4gICAgICAgICAgICBzdGVwVGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIHJldHJ5UG9saWN5LFxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCB7IHRhc2ssIGVycm9yIH0gb2YgdGFza1N0cmVhbSkge1xuICAgICAgICAgICAgZ3JhcGhJbnRlcnJ1cHQgPSB0aGlzLl9jb21taXQodGFzaywgZXJyb3IpID8/IGdyYXBoSW50ZXJydXB0O1xuICAgICAgICB9XG4gICAgICAgIG9uU3RlcFdyaXRlPy4odGhpcy5sb29wLnN0ZXAsIE9iamVjdC52YWx1ZXModGhpcy5sb29wLnRhc2tzKVxuICAgICAgICAgICAgLm1hcCgodGFzaykgPT4gdGFzay53cml0ZXMpXG4gICAgICAgICAgICAuZmxhdCgpKTtcbiAgICAgICAgaWYgKGdyYXBoSW50ZXJydXB0KSB7XG4gICAgICAgICAgICB0aHJvdyBncmFwaEludGVycnVwdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jdXJyZW50bHkgZXhlY3V0ZXMgdGFza3Mgd2l0aCB0aGUgcmVxdWVzdGVkIHJldHJ5IHBvbGljeSwgeWllbGRpbmcgYSB7QGxpbmsgU2V0dGxlZFByZWdlbFRhc2t9IGZvciBlYWNoIHRhc2sgYXMgaXQgY29tcGxldGVzLlxuICAgICAqIEBwYXJhbSB0YXNrcyAtIFRoZSB0YXNrcyB0byBleGVjdXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyAqX2V4ZWN1dGVUYXNrc1dpdGhSZXRyeSh0YXNrcywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHN0ZXBUaW1lb3V0LCByZXRyeVBvbGljeSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgbGV0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICAgICAgY29uc3QgcHJvbWlzZUFkZGVkU3ltYm9sID0gU3ltYm9sLmZvcihcInByb21pc2VBZGRlZFwiKTtcbiAgICAgICAgbGV0IGFkZGVkUHJvbWlzZVNpZ25hbDtcbiAgICAgICAgbGV0IGFkZGVkUHJvbWlzZVdhaXQ7XG4gICAgICAgIGZ1bmN0aW9uIHdhaXRIYW5kbGVyKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGFkZGVkUHJvbWlzZVNpZ25hbCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBhZGRlZFByb21pc2VXYWl0ID0gbmV3IFByb21pc2Uod2FpdEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUocHJvbWlzZUFkZGVkU3ltYm9sKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgYWRkZWRQcm9taXNlV2FpdCA9IG5ldyBQcm9taXNlKHdhaXRIYW5kbGVyKTtcbiAgICAgICAgY29uc3QgZXhlY3V0aW5nVGFza3NNYXAgPSB7fTtcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gKHRhc2ssIHdyaXRlcywgeyBjYWxscyB9ID0ge30pID0+IHtcbiAgICAgICAgICAgIGlmICh3cml0ZXMuZXZlcnkoKFtjaGFubmVsXSkgPT4gY2hhbm5lbCAhPT0gUFVTSCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5jb25maWc/LmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfU0VORF0/Lih3cml0ZXMpID8/IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2NoZWR1bGUgUFVTSCB0YXNrcywgY29sbGVjdCBwcm9taXNlc1xuICAgICAgICAgICAgY29uc3Qgc2NyYXRjaHBhZCA9IHRhc2suY29uZmlnPy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1NDUkFUQ0hQQURdO1xuICAgICAgICAgICAgY29uc3QgcnRuID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpZHgsIHdyaXRlXSBvZiB3cml0ZXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NoYW5uZWxdID0gd3JpdGU7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwgIT09IFBVU0gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHdjYWxsID0gY2FsbHM/LltpZHhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNudCA9IHNjcmF0Y2hwYWQuY2FsbENvdW50ZXI7XG4gICAgICAgICAgICAgICAgc2NyYXRjaHBhZC5jYWxsQ291bnRlciArPSAxO1xuICAgICAgICAgICAgICAgIGlmICh3Y2FsbCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJVRzogTm8gY2FsbCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRhc2sgPSB0aGlzLmxvb3AuYWNjZXB0UHVzaCh0YXNrLCBjbnQsIHdjYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5leHRUYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHRhc2sgaXMgYWxyZWFkeSBydW5uaW5nXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdQcm9taXNlID0gZXhlY3V0aW5nVGFza3NNYXBbbmV4dFRhc2suaWRdO1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1Byb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcGFyZW50IHRhc2sgd2FzIHJldHJpZWQsIHRoZSBuZXh0IHRhc2sgbWlnaHQgYWxyZWFkeSBiZSBydW5uaW5nXG4gICAgICAgICAgICAgICAgICAgIHJ0bltpZHhdID0gZXhpc3RpbmdQcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0VGFzay53cml0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBhbHJlYWR5IHJhbiwgcmV0dXJuIHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJucyA9IG5leHRUYXNrLndyaXRlcy5maWx0ZXIoKFtjXSkgPT4gYyA9PT0gUkVUVVJOKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gbmV4dFRhc2sud3JpdGVzLmZpbHRlcigoW2NdKSA9PiBjID09PSBFUlJPUik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhc2sgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVybnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnRuW2lkeF0gPSBQcm9taXNlLnJlc29sdmUocmV0dXJuc1swXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgYmUgdW5yZWFjaGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJVRzogbXVsdGlwbGUgcmV0dXJucyBmb3VuZCBmb3IgdGFzayAke25leHRUYXNrLm5hbWV9X18ke25leHRUYXNrLmlkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVmFsdWUgPSBlcnJvcnNbMF1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGFzayBmYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclZhbHVlIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlcnJvclZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IEVycm9yKFN0cmluZyhlcnJvclZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnRuW2lkeF0gPSBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgb25seSB3YXkgdGhpcyBzaG91bGQgaGFwcGVuIGlzIGlmIHRoZSB0YXNrIGV4ZWN1dGVzIG11bHRpcGxlIHRpbWVzIGFuZCB3cml0ZXMgYXJlbid0IGNsZWFyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJVRzogbXVsdGlwbGUgZXJyb3JzIGZvdW5kIGZvciB0YXNrICR7bmV4dFRhc2submFtZX1fXyR7bmV4dFRhc2suaWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjaGVkdWxlIHRoZSBuZXh0IHRhc2sgd2l0aCByZXRyeVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9tID0gX3J1bldpdGhSZXRyeShuZXh0VGFzaywgcmV0cnlQb2xpY3ksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtDT05GSUdfS0VZX1NFTkRdOiB3cml0ZXIuYmluZCh0aGlzLCBuZXh0VGFzayksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICBbQ09ORklHX0tFWV9DQUxMXTogY2FsbC5iaW5kKHRoaXMsIG5leHRUYXNrKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGluZ1Rhc2tzTWFwW25leHRUYXNrLmlkXSA9IHByb207XG4gICAgICAgICAgICAgICAgICAgIGFkZGVkUHJvbWlzZVNpZ25hbCgpO1xuICAgICAgICAgICAgICAgICAgICBydG5baWR4XSA9IHByb20udGhlbigoeyByZXN1bHQsIGVycm9yIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhydG4pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjYWxsID0gKHRhc2ssIGZ1bmMsIG5hbWUsIGlucHV0LCBvcHRpb25zID0ge30pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHdyaXRlcih0YXNrLCBbW1BVU0gsIG51bGxdXSwge1xuICAgICAgICAgICAgICAgIGNhbGxzOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBDYWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeTogb3B0aW9ucy5yZXRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogb3B0aW9ucy5jYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoc3RlcFRpbWVvdXQgJiYgc2lnbmFsKSB7XG4gICAgICAgICAgICBpZiAoXCJhbnlcIiBpbiBBYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgc2lnbmFsID0gQWJvcnRTaWduYWwuYW55KFtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICBBYm9ydFNpZ25hbC50aW1lb3V0KHN0ZXBUaW1lb3V0KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGVwVGltZW91dCkge1xuICAgICAgICAgICAgc2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChzdGVwVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgLy8gbm90ZTogZG9uJ3QgdXNlIHRocm93SWZBYm9ydGVkIGhlcmUgYmVjYXVzZSBpdCB0aHJvd3MgYSBET01FeGNlcHRpb24sXG4gICAgICAgICAgICAvLyB3aGljaCBpc24ndCBjb25zaXN0ZW50IHdpdGggaG93IHdlIHRocm93IG9uIGFib3J0IGJlbG93LlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWJvcnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3RhcnQgdGFza3NcbiAgICAgICAgT2JqZWN0LmFzc2lnbihleGVjdXRpbmdUYXNrc01hcCwgT2JqZWN0LmZyb21FbnRyaWVzKHRhc2tzLm1hcCgocHJlZ2VsVGFzaykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBwcmVnZWxUYXNrLmlkLFxuICAgICAgICAgICAgICAgIF9ydW5XaXRoUmV0cnkocHJlZ2VsVGFzaywgcmV0cnlQb2xpY3ksIHtcbiAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfU0VORF06IHdyaXRlcj8uYmluZCh0aGlzLCBwcmVnZWxUYXNrKSxcbiAgICAgICAgICAgICAgICAgICAgW0NPTkZJR19LRVlfQ0FMTF06IGNhbGw/LmJpbmQodGhpcywgcHJlZ2VsVGFzayksXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHRhc2s6IHByZWdlbFRhc2ssIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KSkpO1xuICAgICAgICBsZXQgbGlzdGVuZXI7XG4gICAgICAgIGNvbnN0IHNpZ25hbFByb21pc2UgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKFwiQWJvcnRcIikpO1xuICAgICAgICAgICAgc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpO1xuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHNpZ25hbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyKSk7XG4gICAgICAgIHdoaWxlIChPYmplY3Qua2V5cyhleGVjdXRpbmdUYXNrc01hcCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGxlZFRhc2sgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC52YWx1ZXMoZXhlY3V0aW5nVGFza3NNYXApLFxuICAgICAgICAgICAgICAgIHNpZ25hbFByb21pc2UsXG4gICAgICAgICAgICAgICAgYWRkZWRQcm9taXNlV2FpdCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgaWYgKHNldHRsZWRUYXNrID09PSBwcm9taXNlQWRkZWRTeW1ib2wpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHNldHRsZWRUYXNrO1xuICAgICAgICAgICAgZGVsZXRlIGV4ZWN1dGluZ1Rhc2tzTWFwW3NldHRsZWRUYXNrLnRhc2suaWRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hhdCB3cml0ZXMgdG8gYXBwbHkgYmFzZWQgb24gd2hldGhlciB0aGUgdGFzayBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LCBhbmQgd2hhdCB0eXBlIG9mIGVycm9yIG9jY3VycmVkLlxuICAgICAqXG4gICAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBlcnJvciBpcyBhIHtAbGluayBHcmFwaEJ1YmJsZVVwfSBlcnJvciBhbmQge0BsaW5rIFByZWdlbExvb3B9I2lzTmVzdGVkIGlzIHRydWUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaW4gdGhlIGNhc2Ugb2YgYSB7QGxpbmsgR3JhcGhCdWJibGVVcH0gZXJyb3IgdGhhdCBpcyBub3QgYSB7QGxpbmsgR3JhcGhJbnRlcnJ1cHR9LCBsaWtlIGEge0BsaW5rIENvbW1hbmR9LCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBhcHBseSBhbnkgd3JpdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhc2sgLSBUaGUgdGFzayB0byBjb21taXQuXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHRoYXQgb2NjdXJyZWQsIGlmIGFueS5cbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEdyYXBoSW50ZXJydXB0fSB0aGF0IG9jY3VycmVkLCBpZiB0aGUgdXNlcidzIGNvZGUgdGhyZXcgb25lLlxuICAgICAqL1xuICAgIF9jb21taXQodGFzaywgZXJyb3IpIHtcbiAgICAgICAgbGV0IGdyYXBoSW50ZXJydXB0O1xuICAgICAgICBpZiAoZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlzR3JhcGhCdWJibGVVcChlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb29wLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNHcmFwaEludGVycnVwdChlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhJbnRlcnJ1cHQgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmludGVycnVwdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnJ1cHRzID0gZXJyb3IuaW50ZXJydXB0cy5tYXAoKGludGVycnVwdCkgPT4gW0lOVEVSUlVQVCwgaW50ZXJydXB0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bWVzID0gdGFzay53cml0ZXMuZmlsdGVyKCh3KSA9PiB3WzBdID09PSBSRVNVTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJydXB0cy5wdXNoKC4uLnJlc3VtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wLnB1dFdyaXRlcyh0YXNrLmlkLCBpbnRlcnJ1cHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9vcC5wdXRXcml0ZXModGFzay5pZCwgW1xuICAgICAgICAgICAgICAgICAgICBbRVJST1IsIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgbmFtZTogZXJyb3IubmFtZSB9XSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVGaW5pc2hlZCAmJlxuICAgICAgICAgICAgICAgICh0YXNrLmNvbmZpZz8udGFncyA9PSBudWxsIHx8ICF0YXNrLmNvbmZpZy50YWdzLmluY2x1ZGVzKFRBR19ISURERU4pKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZUZpbmlzaGVkKFN0cmluZyh0YXNrLm5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXNrLndyaXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgbm8gd3JpdGVzIG1hcmtlclxuICAgICAgICAgICAgICAgIHRhc2sud3JpdGVzLnB1c2goW05PX1dSSVRFUywgbnVsbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2F2ZSB0YXNrIHdyaXRlcyB0byBjaGVja3BvaW50ZXJcbiAgICAgICAgICAgIHRoaXMubG9vcC5wdXRXcml0ZXModGFzay5pZCwgdGFzay53cml0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBncmFwaEludGVycnVwdDtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/runner.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/stream.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/stream.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IterableReadableWritableStream: () => (/* binding */ IterableReadableWritableStream)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/stream */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/utils/stream.js\");\n\nclass IterableReadableWritableStream extends _langchain_core_utils_stream__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream {\n    get closed() {\n        return this._closed;\n    }\n    constructor(params) {\n        let streamControllerPromiseResolver;\n        const streamControllerPromise = new Promise((resolve) => {\n            streamControllerPromiseResolver = resolve;\n        });\n        super({\n            start: (controller) => {\n                streamControllerPromiseResolver(controller);\n            },\n        });\n        Object.defineProperty(this, \"modes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"controller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"passthroughFn\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_closed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        // .start() will always be called before the stream can be interacted\n        // with anyway\n        void streamControllerPromise.then((controller) => {\n            this.controller = controller;\n        });\n        this.passthroughFn = params.passthroughFn;\n        this.modes = params.modes;\n    }\n    push(chunk) {\n        this.passthroughFn?.(chunk);\n        this.controller.enqueue(chunk);\n    }\n    close() {\n        try {\n            this.controller.close();\n        }\n        catch (e) {\n            // pass\n        }\n        finally {\n            this._closed = true;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(e) {\n        this.controller.error(e);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0U7QUFDL0QsNkNBQTZDLGdGQUFzQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvc3RyZWFtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3N0cmVhbVwiO1xuZXhwb3J0IGNsYXNzIEl0ZXJhYmxlUmVhZGFibGVXcml0YWJsZVN0cmVhbSBleHRlbmRzIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0ge1xuICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9zZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBsZXQgc3RyZWFtQ29udHJvbGxlclByb21pc2VSZXNvbHZlcjtcbiAgICAgICAgY29uc3Qgc3RyZWFtQ29udHJvbGxlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgc3RyZWFtQ29udHJvbGxlclByb21pc2VSZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Db250cm9sbGVyUHJvbWlzZVJlc29sdmVyKGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbnRyb2xsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGFzc3Rocm91Z2hGblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfY2xvc2VkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gLnN0YXJ0KCkgd2lsbCBhbHdheXMgYmUgY2FsbGVkIGJlZm9yZSB0aGUgc3RyZWFtIGNhbiBiZSBpbnRlcmFjdGVkXG4gICAgICAgIC8vIHdpdGggYW55d2F5XG4gICAgICAgIHZvaWQgc3RyZWFtQ29udHJvbGxlclByb21pc2UudGhlbigoY29udHJvbGxlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFzc3Rocm91Z2hGbiA9IHBhcmFtcy5wYXNzdGhyb3VnaEZuO1xuICAgICAgICB0aGlzLm1vZGVzID0gcGFyYW1zLm1vZGVzO1xuICAgIH1cbiAgICBwdXNoKGNodW5rKSB7XG4gICAgICAgIHRoaXMucGFzc3Rocm91Z2hGbj8uKGNodW5rKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmVucXVldWUoY2h1bmspO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBwYXNzXG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXJyb3IoZSkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZXJyb3IoZSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/types.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/types.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Call: () => (/* binding */ Call),\n/* harmony export */   isCall: () => (/* binding */ isCall)\n/* harmony export */ });\nclass Call {\n    constructor({ func, name, input, retry, callbacks }) {\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"input\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"retry\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"__lg_type\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"call\"\n        });\n        this.func = func;\n        this.name = name;\n        this.input = input;\n        this.retry = retry;\n        this.callbacks = callbacks;\n    }\n}\nfunction isCall(value) {\n    return (typeof value === \"object\" &&\n        value !== null &&\n        \"__lg_type\" in value &&\n        value.__lg_type === \"call\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1Asa0JBQWtCLHFDQUFxQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhbGwge1xuICAgIGNvbnN0cnVjdG9yKHsgZnVuYywgbmFtZSwgaW5wdXQsIHJldHJ5LCBjYWxsYmFja3MgfSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmV0cnlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9fbGdfdHlwZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjYWxsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZnVuYyA9IGZ1bmM7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5yZXRyeSA9IHJldHJ5O1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNDYWxsKHZhbHVlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgXCJfX2xnX3R5cGVcIiBpbiB2YWx1ZSAmJlxuICAgICAgICB2YWx1ZS5fX2xnX3R5cGUgPT09IFwiY2FsbFwiKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureLangGraphConfig: () => (/* binding */ ensureLangGraphConfig),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getStore: () => (/* binding */ getStore),\n/* harmony export */   getWriter: () => (/* binding */ getWriter)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n\nconst COPIABLE_KEYS = [\"tags\", \"metadata\", \"callbacks\", \"configurable\"];\nconst CONFIG_KEYS = [\n    \"tags\",\n    \"metadata\",\n    \"callbacks\",\n    \"runName\",\n    \"maxConcurrency\",\n    \"recursionLimit\",\n    \"configurable\",\n    \"runId\",\n    \"outputKeys\",\n    \"streamMode\",\n    \"store\",\n    \"writer\",\n    \"interruptBefore\",\n    \"interruptAfter\",\n    \"signal\",\n];\nconst DEFAULT_RECURSION_LIMIT = 25;\nfunction ensureLangGraphConfig(...configs) {\n    const empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: DEFAULT_RECURSION_LIMIT,\n        configurable: {},\n    };\n    const implicitConfig = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    if (implicitConfig !== undefined) {\n        for (const [k, v] of Object.entries(implicitConfig)) {\n            if (v !== undefined) {\n                if (COPIABLE_KEYS.includes(k)) {\n                    let copiedValue;\n                    if (Array.isArray(v)) {\n                        copiedValue = [...v];\n                    }\n                    else if (typeof v === \"object\") {\n                        if (k === \"callbacks\" &&\n                            \"copy\" in v &&\n                            typeof v.copy === \"function\") {\n                            copiedValue = v.copy();\n                        }\n                        else {\n                            copiedValue = { ...v };\n                        }\n                    }\n                    else {\n                        copiedValue = v;\n                    }\n                    empty[k] = copiedValue;\n                }\n                else {\n                    empty[k] = v;\n                }\n            }\n        }\n    }\n    for (const config of configs) {\n        if (config === undefined) {\n            continue;\n        }\n        for (const [k, v] of Object.entries(config)) {\n            if (v !== undefined && CONFIG_KEYS.includes(k)) {\n                empty[k] = v;\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(empty.configurable)) {\n        empty.metadata = empty.metadata ?? {};\n        if (!key.startsWith(\"__\") &&\n            (typeof value === \"string\" ||\n                typeof value === \"number\" ||\n                typeof value === \"boolean\") &&\n            !(key in empty.metadata)) {\n            empty.metadata[key] = value;\n        }\n    }\n    return empty;\n}\n/**\n * A helper utility function that returns the {@link BaseStore} that was set when the graph was initialized\n *\n * @returns a reference to the {@link BaseStore} that was set when the graph was initialized\n */\nfunction getStore() {\n    const config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    return config?.store;\n}\n/**\n * A helper utility function that returns the {@link LangGraphRunnableConfig#writer} if \"custom\" stream mode is enabled, otherwise undefined\n *\n * @returns a reference to the {@link LangGraphRunnableConfig#writer} if \"custom\" stream mode is enabled, otherwise undefined\n */\nfunction getWriter() {\n    const config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    return config?.configurable?.writer;\n}\nfunction getConfig() {\n    return _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9jb25maWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLDJCQUEyQiwwRkFBa0M7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQSxnQ0FBZ0MsaUJBQWlCO0FBQ2pEO0FBQ087QUFDUCxtQkFBbUIsMEZBQWtDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxzQ0FBc0M7QUFDckY7QUFDQSxnQ0FBZ0Msc0NBQXNDO0FBQ3RFO0FBQ087QUFDUCxtQkFBbUIsMEZBQWtDO0FBQ3JEO0FBQ0E7QUFDTztBQUNQLFdBQVcsMEZBQWtDO0FBQzdDIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvc2luZ2xldG9uc1wiO1xuY29uc3QgQ09QSUFCTEVfS0VZUyA9IFtcInRhZ3NcIiwgXCJtZXRhZGF0YVwiLCBcImNhbGxiYWNrc1wiLCBcImNvbmZpZ3VyYWJsZVwiXTtcbmNvbnN0IENPTkZJR19LRVlTID0gW1xuICAgIFwidGFnc1wiLFxuICAgIFwibWV0YWRhdGFcIixcbiAgICBcImNhbGxiYWNrc1wiLFxuICAgIFwicnVuTmFtZVwiLFxuICAgIFwibWF4Q29uY3VycmVuY3lcIixcbiAgICBcInJlY3Vyc2lvbkxpbWl0XCIsXG4gICAgXCJjb25maWd1cmFibGVcIixcbiAgICBcInJ1bklkXCIsXG4gICAgXCJvdXRwdXRLZXlzXCIsXG4gICAgXCJzdHJlYW1Nb2RlXCIsXG4gICAgXCJzdG9yZVwiLFxuICAgIFwid3JpdGVyXCIsXG4gICAgXCJpbnRlcnJ1cHRCZWZvcmVcIixcbiAgICBcImludGVycnVwdEFmdGVyXCIsXG4gICAgXCJzaWduYWxcIixcbl07XG5jb25zdCBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCA9IDI1O1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUxhbmdHcmFwaENvbmZpZyguLi5jb25maWdzKSB7XG4gICAgY29uc3QgZW1wdHkgPSB7XG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIGNhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICByZWN1cnNpb25MaW1pdDogREVGQVVMVF9SRUNVUlNJT05fTElNSVQsXG4gICAgICAgIGNvbmZpZ3VyYWJsZToge30sXG4gICAgfTtcbiAgICBjb25zdCBpbXBsaWNpdENvbmZpZyA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcbiAgICBpZiAoaW1wbGljaXRDb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpbXBsaWNpdENvbmZpZykpIHtcbiAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoQ09QSUFCTEVfS0VZUy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29waWVkVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3BpZWRWYWx1ZSA9IFsuLi52XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT09IFwiY2FsbGJhY2tzXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvcHlcIiBpbiB2ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHYuY29weSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkVmFsdWUgPSB2LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcGllZFZhbHVlID0geyAuLi52IH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3BpZWRWYWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW1wdHlba10gPSBjb3BpZWRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5W2tdID0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBjb25maWcgb2YgY29uZmlncykge1xuICAgICAgICBpZiAoY29uZmlnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpZykpIHtcbiAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQgJiYgQ09ORklHX0tFWVMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgICAgICBlbXB0eVtrXSA9IHY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZW1wdHkuY29uZmlndXJhYmxlKSkge1xuICAgICAgICBlbXB0eS5tZXRhZGF0YSA9IGVtcHR5Lm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBpZiAoIWtleS5zdGFydHNXaXRoKFwiX19cIikgJiZcbiAgICAgICAgICAgICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSAmJlxuICAgICAgICAgICAgIShrZXkgaW4gZW1wdHkubWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBlbXB0eS5tZXRhZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVtcHR5O1xufVxuLyoqXG4gKiBBIGhlbHBlciB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUge0BsaW5rIEJhc2VTdG9yZX0gdGhhdCB3YXMgc2V0IHdoZW4gdGhlIGdyYXBoIHdhcyBpbml0aWFsaXplZFxuICpcbiAqIEByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgQmFzZVN0b3JlfSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgZ3JhcGggd2FzIGluaXRpYWxpemVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yZSgpIHtcbiAgICBjb25zdCBjb25maWcgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCk7XG4gICAgcmV0dXJuIGNvbmZpZz8uc3RvcmU7XG59XG4vKipcbiAqIEEgaGVscGVyIHV0aWxpdHkgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB7QGxpbmsgTGFuZ0dyYXBoUnVubmFibGVDb25maWcjd3JpdGVyfSBpZiBcImN1c3RvbVwiIHN0cmVhbSBtb2RlIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1bmRlZmluZWRcbiAqXG4gKiBAcmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIExhbmdHcmFwaFJ1bm5hYmxlQ29uZmlnI3dyaXRlcn0gaWYgXCJjdXN0b21cIiBzdHJlYW0gbW9kZSBpcyBlbmFibGVkLCBvdGhlcndpc2UgdW5kZWZpbmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXcml0ZXIoKSB7XG4gICAgY29uc3QgY29uZmlnID0gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xuICAgIHJldHVybiBjb25maWc/LmNvbmZpZ3VyYWJsZT8ud3JpdGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpIHtcbiAgICByZXR1cm4gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   getNewChannelVersions: () => (/* binding */ getNewChannelVersions),\n/* harmony export */   getNullChannelVersion: () => (/* binding */ getNullChannelVersion),\n/* harmony export */   patchCheckpointMap: () => (/* binding */ patchCheckpointMap),\n/* harmony export */   patchConfigurable: () => (/* binding */ patchConfigurable)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n\nfunction getNullChannelVersion(currentVersions) {\n    const versionValues = Object.values(currentVersions);\n    const versionType = versionValues.length > 0 ? typeof versionValues[0] : undefined;\n    let nullVersion;\n    if (versionType === \"number\") {\n        nullVersion = 0;\n    }\n    else if (versionType === \"string\") {\n        nullVersion = \"\";\n    }\n    return nullVersion;\n}\nfunction getNewChannelVersions(previousVersions, currentVersions) {\n    // Get new channel versions\n    if (Object.keys(previousVersions).length > 0) {\n        const nullVersion = getNullChannelVersion(currentVersions);\n        return Object.fromEntries(Object.entries(currentVersions).filter(([k, v]) => v > (previousVersions[k] ?? nullVersion)));\n    }\n    else {\n        return currentVersions;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value &&\n        !Array.isArray(value) &&\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        !(value instanceof Date) &&\n        typeof value === \"object\"\n        ? value\n        : { [defaultKey]: value };\n}\nfunction patchConfigurable(config, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\npatch) {\n    if (config === null) {\n        return { configurable: patch };\n    }\n    else if (config?.configurable === undefined) {\n        return { ...config, configurable: patch };\n    }\n    else {\n        return {\n            ...config,\n            configurable: { ...config.configurable, ...patch },\n        };\n    }\n}\nfunction patchCheckpointMap(config, metadata) {\n    const parents = metadata?.parents ?? {};\n    if (Object.keys(parents).length > 0) {\n        return patchConfigurable(config, {\n            [_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_CHECKPOINT_MAP]: {\n                ...parents,\n                [config.configurable?.checkpoint_ns ?? \"\"]: config.configurable?.checkpoint_id,\n            },\n        });\n    }\n    else {\n        return config;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0Q7QUFDeEQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQ0FBa0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9FQUF5QjtBQUN0QztBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50cy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE51bGxDaGFubmVsVmVyc2lvbihjdXJyZW50VmVyc2lvbnMpIHtcbiAgICBjb25zdCB2ZXJzaW9uVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhjdXJyZW50VmVyc2lvbnMpO1xuICAgIGNvbnN0IHZlcnNpb25UeXBlID0gdmVyc2lvblZhbHVlcy5sZW5ndGggPiAwID8gdHlwZW9mIHZlcnNpb25WYWx1ZXNbMF0gOiB1bmRlZmluZWQ7XG4gICAgbGV0IG51bGxWZXJzaW9uO1xuICAgIGlmICh2ZXJzaW9uVHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBudWxsVmVyc2lvbiA9IDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZlcnNpb25UeXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG51bGxWZXJzaW9uID0gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGxWZXJzaW9uO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld0NoYW5uZWxWZXJzaW9ucyhwcmV2aW91c1ZlcnNpb25zLCBjdXJyZW50VmVyc2lvbnMpIHtcbiAgICAvLyBHZXQgbmV3IGNoYW5uZWwgdmVyc2lvbnNcbiAgICBpZiAoT2JqZWN0LmtleXMocHJldmlvdXNWZXJzaW9ucykubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBudWxsVmVyc2lvbiA9IGdldE51bGxDaGFubmVsVmVyc2lvbihjdXJyZW50VmVyc2lvbnMpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGN1cnJlbnRWZXJzaW9ucykuZmlsdGVyKChbaywgdl0pID0+IHYgPiAocHJldmlvdXNWZXJzaW9uc1trXSA/PyBudWxsVmVyc2lvbikpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VmVyc2lvbnM7XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucGF0Y2gpIHtcbiAgICBpZiAoY29uZmlnID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7IGNvbmZpZ3VyYWJsZTogcGF0Y2ggfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29uZmlnPy5jb25maWd1cmFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4geyAuLi5jb25maWcsIGNvbmZpZ3VyYWJsZTogcGF0Y2ggfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHsgLi4uY29uZmlnLmNvbmZpZ3VyYWJsZSwgLi4ucGF0Y2ggfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hDaGVja3BvaW50TWFwKGNvbmZpZywgbWV0YWRhdGEpIHtcbiAgICBjb25zdCBwYXJlbnRzID0gbWV0YWRhdGE/LnBhcmVudHMgPz8ge307XG4gICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudHMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywge1xuICAgICAgICAgICAgW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdOiB7XG4gICAgICAgICAgICAgICAgLi4ucGFyZW50cyxcbiAgICAgICAgICAgICAgICBbY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiXTogY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findSubgraphPregel: () => (/* binding */ findSubgraphPregel),\n/* harmony export */   isPregelLike: () => (/* binding */ isPregelLike)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableSequence(x) {\n    return \"steps\" in x && Array.isArray(x.steps);\n}\nfunction isPregelLike(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nx\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    return \"lg_is_pregel\" in x && x.lg_is_pregel === true;\n}\nfunction findSubgraphPregel(candidate\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    const candidates = [candidate];\n    for (const candidate of candidates) {\n        if (isPregelLike(candidate)) {\n            return candidate;\n        }\n        else if (isRunnableSequence(candidate)) {\n            candidates.push(...candidate.steps);\n        }\n    }\n    return undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9zdWJncmFwaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9zdWJncmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gaXNSdW5uYWJsZVNlcXVlbmNlKHgpIHtcbiAgICByZXR1cm4gXCJzdGVwc1wiIGluIHggJiYgQXJyYXkuaXNBcnJheSh4LnN0ZXBzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1ByZWdlbExpa2UoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxueFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIHJldHVybiBcImxnX2lzX3ByZWdlbFwiIGluIHggJiYgeC5sZ19pc19wcmVnZWwgPT09IHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZFN1YmdyYXBoUHJlZ2VsKGNhbmRpZGF0ZVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbY2FuZGlkYXRlXTtcbiAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgIGlmIChpc1ByZWdlbExpa2UoY2FuZGlkYXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1J1bm5hYmxlU2VxdWVuY2UoY2FuZGlkYXRlKSkge1xuICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKC4uLmNhbmRpZGF0ZS5zdGVwcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/validate.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/validate.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GraphValidationError: () => (/* binding */ GraphValidationError),\n/* harmony export */   validateGraph: () => (/* binding */ validateGraph),\n/* harmony export */   validateKeys: () => (/* binding */ validateKeys)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _read_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./read.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/read.js\");\n\n\nclass GraphValidationError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"GraphValidationError\";\n    }\n}\nfunction validateGraph({ nodes, channels, inputChannels, outputChannels, streamChannels, interruptAfterNodes, interruptBeforeNodes, }) {\n    if (!channels) {\n        throw new GraphValidationError(\"Channels not provided\");\n    }\n    const subscribedChannels = new Set();\n    const allOutputChannels = new Set();\n    for (const [name, node] of Object.entries(nodes)) {\n        if (name === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT) {\n            throw new GraphValidationError(`\"Node name ${_constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT} is reserved\"`);\n        }\n        if (node.constructor === _read_js__WEBPACK_IMPORTED_MODULE_1__.PregelNode) {\n            node.triggers.forEach((trigger) => subscribedChannels.add(trigger));\n        }\n        else {\n            throw new GraphValidationError(`Invalid node type ${typeof node}, expected PregelNode`);\n        }\n    }\n    // side effect: update channels\n    for (const chan of subscribedChannels) {\n        if (!(chan in channels)) {\n            throw new GraphValidationError(`Subcribed channel '${String(chan)}' not in channels`);\n        }\n    }\n    if (!Array.isArray(inputChannels)) {\n        if (!subscribedChannels.has(inputChannels)) {\n            throw new GraphValidationError(`Input channel ${String(inputChannels)} is not subscribed to by any node`);\n        }\n    }\n    else {\n        if (inputChannels.every((channel) => !subscribedChannels.has(channel))) {\n            throw new GraphValidationError(`None of the input channels ${inputChannels} are subscribed to by any node`);\n        }\n    }\n    if (!Array.isArray(outputChannels)) {\n        allOutputChannels.add(outputChannels);\n    }\n    else {\n        outputChannels.forEach((chan) => allOutputChannels.add(chan));\n    }\n    if (streamChannels && !Array.isArray(streamChannels)) {\n        allOutputChannels.add(streamChannels);\n    }\n    else if (Array.isArray(streamChannels)) {\n        streamChannels.forEach((chan) => allOutputChannels.add(chan));\n    }\n    for (const chan of allOutputChannels) {\n        if (!(chan in channels)) {\n            throw new GraphValidationError(`Output channel '${String(chan)}' not in channels`);\n        }\n    }\n    // validate interrupt before/after\n    if (interruptAfterNodes && interruptAfterNodes !== \"*\") {\n        for (const node of interruptAfterNodes) {\n            if (!(node in nodes)) {\n                throw new GraphValidationError(`Node ${String(node)} not in nodes`);\n            }\n        }\n    }\n    if (interruptBeforeNodes && interruptBeforeNodes !== \"*\") {\n        for (const node of interruptBeforeNodes) {\n            if (!(node in nodes)) {\n                throw new GraphValidationError(`Node ${String(node)} not in nodes`);\n            }\n        }\n    }\n}\nfunction validateKeys(keys, channels) {\n    if (Array.isArray(keys)) {\n        for (const key of keys) {\n            if (!(key in channels)) {\n                throw new Error(`Key ${String(key)} not found in channels`);\n            }\n        }\n    }\n    else {\n        if (!(keys in channels)) {\n            throw new Error(`Key ${String(keys)} not found in channels`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0QztBQUNMO0FBQ2hDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHlCQUF5Qiw0R0FBNEc7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9EQUFTO0FBQzlCLHlEQUF5RCxvREFBUyxFQUFFO0FBQ3BFO0FBQ0EsaUNBQWlDLGdEQUFVO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxZQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsYUFBYTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCx1QkFBdUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsZUFBZTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxhQUFhO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxjQUFjO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxjQUFjO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsYUFBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGNBQWM7QUFDakQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC92YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlRFUlJVUFQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBQcmVnZWxOb2RlIH0gZnJvbSBcIi4vcmVhZC5qc1wiO1xuZXhwb3J0IGNsYXNzIEdyYXBoVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiR3JhcGhWYWxpZGF0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVHcmFwaCh7IG5vZGVzLCBjaGFubmVscywgaW5wdXRDaGFubmVscywgb3V0cHV0Q2hhbm5lbHMsIHN0cmVhbUNoYW5uZWxzLCBpbnRlcnJ1cHRBZnRlck5vZGVzLCBpbnRlcnJ1cHRCZWZvcmVOb2RlcywgfSkge1xuICAgIGlmICghY2hhbm5lbHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdyYXBoVmFsaWRhdGlvbkVycm9yKFwiQ2hhbm5lbHMgbm90IHByb3ZpZGVkXCIpO1xuICAgIH1cbiAgICBjb25zdCBzdWJzY3JpYmVkQ2hhbm5lbHMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgYWxsT3V0cHV0Q2hhbm5lbHMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXMobm9kZXMpKSB7XG4gICAgICAgIGlmIChuYW1lID09PSBJTlRFUlJVUFQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgXCJOb2RlIG5hbWUgJHtJTlRFUlJVUFR9IGlzIHJlc2VydmVkXCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5jb25zdHJ1Y3RvciA9PT0gUHJlZ2VsTm9kZSkge1xuICAgICAgICAgICAgbm9kZS50cmlnZ2Vycy5mb3JFYWNoKCh0cmlnZ2VyKSA9PiBzdWJzY3JpYmVkQ2hhbm5lbHMuYWRkKHRyaWdnZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgSW52YWxpZCBub2RlIHR5cGUgJHt0eXBlb2Ygbm9kZX0sIGV4cGVjdGVkIFByZWdlbE5vZGVgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzaWRlIGVmZmVjdDogdXBkYXRlIGNoYW5uZWxzXG4gICAgZm9yIChjb25zdCBjaGFuIG9mIHN1YnNjcmliZWRDaGFubmVscykge1xuICAgICAgICBpZiAoIShjaGFuIGluIGNoYW5uZWxzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdyYXBoVmFsaWRhdGlvbkVycm9yKGBTdWJjcmliZWQgY2hhbm5lbCAnJHtTdHJpbmcoY2hhbil9JyBub3QgaW4gY2hhbm5lbHNgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXRDaGFubmVscykpIHtcbiAgICAgICAgaWYgKCFzdWJzY3JpYmVkQ2hhbm5lbHMuaGFzKGlucHV0Q2hhbm5lbHMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYElucHV0IGNoYW5uZWwgJHtTdHJpbmcoaW5wdXRDaGFubmVscyl9IGlzIG5vdCBzdWJzY3JpYmVkIHRvIGJ5IGFueSBub2RlYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbnB1dENoYW5uZWxzLmV2ZXJ5KChjaGFubmVsKSA9PiAhc3Vic2NyaWJlZENoYW5uZWxzLmhhcyhjaGFubmVsKSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgTm9uZSBvZiB0aGUgaW5wdXQgY2hhbm5lbHMgJHtpbnB1dENoYW5uZWxzfSBhcmUgc3Vic2NyaWJlZCB0byBieSBhbnkgbm9kZWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShvdXRwdXRDaGFubmVscykpIHtcbiAgICAgICAgYWxsT3V0cHV0Q2hhbm5lbHMuYWRkKG91dHB1dENoYW5uZWxzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG91dHB1dENoYW5uZWxzLmZvckVhY2goKGNoYW4pID0+IGFsbE91dHB1dENoYW5uZWxzLmFkZChjaGFuKSk7XG4gICAgfVxuICAgIGlmIChzdHJlYW1DaGFubmVscyAmJiAhQXJyYXkuaXNBcnJheShzdHJlYW1DaGFubmVscykpIHtcbiAgICAgICAgYWxsT3V0cHV0Q2hhbm5lbHMuYWRkKHN0cmVhbUNoYW5uZWxzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzdHJlYW1DaGFubmVscykpIHtcbiAgICAgICAgc3RyZWFtQ2hhbm5lbHMuZm9yRWFjaCgoY2hhbikgPT4gYWxsT3V0cHV0Q2hhbm5lbHMuYWRkKGNoYW4pKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBjaGFuIG9mIGFsbE91dHB1dENoYW5uZWxzKSB7XG4gICAgICAgIGlmICghKGNoYW4gaW4gY2hhbm5lbHMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYE91dHB1dCBjaGFubmVsICcke1N0cmluZyhjaGFuKX0nIG5vdCBpbiBjaGFubmVsc2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHZhbGlkYXRlIGludGVycnVwdCBiZWZvcmUvYWZ0ZXJcbiAgICBpZiAoaW50ZXJydXB0QWZ0ZXJOb2RlcyAmJiBpbnRlcnJ1cHRBZnRlck5vZGVzICE9PSBcIipcIikge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgaW50ZXJydXB0QWZ0ZXJOb2Rlcykge1xuICAgICAgICAgICAgaWYgKCEobm9kZSBpbiBub2RlcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYE5vZGUgJHtTdHJpbmcobm9kZSl9IG5vdCBpbiBub2Rlc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnRlcnJ1cHRCZWZvcmVOb2RlcyAmJiBpbnRlcnJ1cHRCZWZvcmVOb2RlcyAhPT0gXCIqXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIGludGVycnVwdEJlZm9yZU5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIShub2RlIGluIG5vZGVzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgTm9kZSAke1N0cmluZyhub2RlKX0gbm90IGluIG5vZGVzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVLZXlzKGtleXMsIGNoYW5uZWxzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5cykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgICAgaWYgKCEoa2V5IGluIGNoYW5uZWxzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7U3RyaW5nKGtleSl9IG5vdCBmb3VuZCBpbiBjaGFubmVsc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIShrZXlzIGluIGNoYW5uZWxzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHtTdHJpbmcoa2V5cyl9IG5vdCBmb3VuZCBpbiBjaGFubmVsc2ApO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/validate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelWrite: () => (/* binding */ ChannelWrite),\n/* harmony export */   PASSTHROUGH: () => (/* binding */ PASSTHROUGH),\n/* harmony export */   SKIP_WRITE: () => (/* binding */ SKIP_WRITE)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n\n\n\n\nconst SKIP_WRITE = {\n    [Symbol.for(\"LG_SKIP_WRITE\")]: true,\n};\nfunction _isSkipWrite(x) {\n    return (typeof x === \"object\" &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        x?.[Symbol.for(\"LG_SKIP_WRITE\")] !== undefined);\n}\nconst PASSTHROUGH = {\n    [Symbol.for(\"LG_PASSTHROUGH\")]: true,\n};\nfunction _isPassthrough(x) {\n    return (typeof x === \"object\" &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        x?.[Symbol.for(\"LG_PASSTHROUGH\")] !== undefined);\n}\nconst IS_WRITER = Symbol(\"IS_WRITER\");\n/**\n * Mapping of write channels to Runnables that return the value to be written,\n * or None to skip writing.\n */\nclass ChannelWrite extends _utils_js__WEBPACK_IMPORTED_MODULE_2__.RunnableCallable {\n    constructor(writes, tags) {\n        const name = `ChannelWrite<${writes\n            .map((packet) => {\n            if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(packet)) {\n                return packet.node;\n            }\n            else if (\"channel\" in packet) {\n                return packet.channel;\n            }\n            return \"...\";\n        })\n            .join(\",\")}>`;\n        super({\n            ...{ writes, name, tags },\n            func: async (input, config) => {\n                return this._write(input, config ?? {});\n            },\n        });\n        Object.defineProperty(this, \"writes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.writes = writes;\n    }\n    async _write(input, config) {\n        const writes = this.writes.map((write) => {\n            if (_isChannelWriteTupleEntry(write) && _isPassthrough(write.value)) {\n                return {\n                    mapper: write.mapper,\n                    value: input,\n                };\n            }\n            else if (_isChannelWriteEntry(write) && _isPassthrough(write.value)) {\n                return {\n                    channel: write.channel,\n                    value: input,\n                    skipNone: write.skipNone,\n                    mapper: write.mapper,\n                };\n            }\n            else {\n                return write;\n            }\n        });\n        await ChannelWrite.doWrite(config, writes);\n        return input;\n    }\n    // TODO: Support requireAtLeastOneOf\n    static async doWrite(config, writes) {\n        // validate\n        for (const w of writes) {\n            if (_isChannelWriteEntry(w)) {\n                if (w.channel === _constants_js__WEBPACK_IMPORTED_MODULE_1__.TASKS) {\n                    throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.InvalidUpdateError(\"Cannot write to the reserved channel TASKS\");\n                }\n                if (_isPassthrough(w.value)) {\n                    throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.InvalidUpdateError(\"PASSTHROUGH value must be replaced\");\n                }\n            }\n            if (_isChannelWriteTupleEntry(w)) {\n                if (_isPassthrough(w.value)) {\n                    throw new _errors_js__WEBPACK_IMPORTED_MODULE_3__.InvalidUpdateError(\"PASSTHROUGH value must be replaced\");\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const writeEntries = [];\n        for (const w of writes) {\n            if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(w)) {\n                writeEntries.push([_constants_js__WEBPACK_IMPORTED_MODULE_1__.TASKS, w]);\n            }\n            else if (_isChannelWriteTupleEntry(w)) {\n                const mappedResult = await w.mapper.invoke(w.value, config);\n                if (mappedResult != null && mappedResult.length > 0) {\n                    writeEntries.push(...mappedResult);\n                }\n            }\n            else if (_isChannelWriteEntry(w)) {\n                const mappedValue = w.mapper !== undefined\n                    ? await w.mapper.invoke(w.value, config)\n                    : w.value;\n                if (_isSkipWrite(mappedValue)) {\n                    continue;\n                }\n                if (w.skipNone && mappedValue === undefined) {\n                    continue;\n                }\n                writeEntries.push([w.channel, mappedValue]);\n            }\n            else {\n                throw new Error(`Invalid write entry: ${JSON.stringify(w)}`);\n            }\n        }\n        const write = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND];\n        write(writeEntries);\n    }\n    static isWriter(runnable) {\n        return (\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        runnable instanceof ChannelWrite ||\n            (IS_WRITER in runnable && !!runnable[IS_WRITER]));\n    }\n    static registerWriter(runnable) {\n        return Object.defineProperty(runnable, IS_WRITER, { value: true });\n    }\n}\nfunction _isChannelWriteEntry(x) {\n    return (x !== undefined && typeof x.channel === \"string\");\n}\nfunction _isChannelWriteTupleEntry(x) {\n    return (x !== undefined &&\n        !_isChannelWriteEntry(x) &&\n        _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(x.mapper));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC93cml0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNEO0FBQ1k7QUFDbkI7QUFDRztBQUMzQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywyQkFBMkIsdURBQWdCO0FBQ2xEO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EsZ0JBQWdCLHNEQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx1QkFBdUI7QUFDdkI7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0Esc0RBQXNEO0FBQ3RELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnREFBSztBQUN2Qyw4QkFBOEIsMERBQWtCO0FBQ2hEO0FBQ0E7QUFDQSw4QkFBOEIsMERBQWtCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDBEQUFrQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQU87QUFDdkIsbUNBQW1DLGdEQUFLO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0E7QUFDQSw0Q0FBNEMsMERBQWU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGFBQWE7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQVE7QUFDaEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL3dyaXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5pbXBvcnQgeyBfaXNTZW5kLCBDT05GSUdfS0VZX1NFTkQsIFRBU0tTIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVDYWxsYWJsZSB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGNvbnN0IFNLSVBfV1JJVEUgPSB7XG4gICAgW1N5bWJvbC5mb3IoXCJMR19TS0lQX1dSSVRFXCIpXTogdHJ1ZSxcbn07XG5mdW5jdGlvbiBfaXNTa2lwV3JpdGUoeCkge1xuICAgIHJldHVybiAodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgeD8uW1N5bWJvbC5mb3IoXCJMR19TS0lQX1dSSVRFXCIpXSAhPT0gdW5kZWZpbmVkKTtcbn1cbmV4cG9ydCBjb25zdCBQQVNTVEhST1VHSCA9IHtcbiAgICBbU3ltYm9sLmZvcihcIkxHX1BBU1NUSFJPVUdIXCIpXTogdHJ1ZSxcbn07XG5mdW5jdGlvbiBfaXNQYXNzdGhyb3VnaCh4KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB4Py5bU3ltYm9sLmZvcihcIkxHX1BBU1NUSFJPVUdIXCIpXSAhPT0gdW5kZWZpbmVkKTtcbn1cbmNvbnN0IElTX1dSSVRFUiA9IFN5bWJvbChcIklTX1dSSVRFUlwiKTtcbi8qKlxuICogTWFwcGluZyBvZiB3cml0ZSBjaGFubmVscyB0byBSdW5uYWJsZXMgdGhhdCByZXR1cm4gdGhlIHZhbHVlIHRvIGJlIHdyaXR0ZW4sXG4gKiBvciBOb25lIHRvIHNraXAgd3JpdGluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYW5uZWxXcml0ZSBleHRlbmRzIFJ1bm5hYmxlQ2FsbGFibGUge1xuICAgIGNvbnN0cnVjdG9yKHdyaXRlcywgdGFncykge1xuICAgICAgICBjb25zdCBuYW1lID0gYENoYW5uZWxXcml0ZTwke3dyaXRlc1xuICAgICAgICAgICAgLm1hcCgocGFja2V0KSA9PiB7XG4gICAgICAgICAgICBpZiAoX2lzU2VuZChwYWNrZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhY2tldC5ub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXCJjaGFubmVsXCIgaW4gcGFja2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhY2tldC5jaGFubmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiLi4uXCI7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIixcIil9PmA7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIC4uLnsgd3JpdGVzLCBuYW1lLCB0YWdzIH0sXG4gICAgICAgICAgICBmdW5jOiBhc3luYyAoaW5wdXQsIGNvbmZpZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93cml0ZShpbnB1dCwgY29uZmlnID8/IHt9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53cml0ZXMgPSB3cml0ZXM7XG4gICAgfVxuICAgIGFzeW5jIF93cml0ZShpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHdyaXRlcyA9IHRoaXMud3JpdGVzLm1hcCgod3JpdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHdyaXRlKSAmJiBfaXNQYXNzdGhyb3VnaCh3cml0ZS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtYXBwZXI6IHdyaXRlLm1hcHBlcixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGlucHV0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChfaXNDaGFubmVsV3JpdGVFbnRyeSh3cml0ZSkgJiYgX2lzUGFzc3Rocm91Z2god3JpdGUudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogd3JpdGUuY2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBza2lwTm9uZTogd3JpdGUuc2tpcE5vbmUsXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlcjogd3JpdGUubWFwcGVyLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBDaGFubmVsV3JpdGUuZG9Xcml0ZShjb25maWcsIHdyaXRlcyk7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gICAgLy8gVE9ETzogU3VwcG9ydCByZXF1aXJlQXRMZWFzdE9uZU9mXG4gICAgc3RhdGljIGFzeW5jIGRvV3JpdGUoY29uZmlnLCB3cml0ZXMpIHtcbiAgICAgICAgLy8gdmFsaWRhdGVcbiAgICAgICAgZm9yIChjb25zdCB3IG9mIHdyaXRlcykge1xuICAgICAgICAgICAgaWYgKF9pc0NoYW5uZWxXcml0ZUVudHJ5KHcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHcuY2hhbm5lbCA9PT0gVEFTS1MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihcIkNhbm5vdCB3cml0ZSB0byB0aGUgcmVzZXJ2ZWQgY2hhbm5lbCBUQVNLU1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9pc1Bhc3N0aHJvdWdoKHcudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJQQVNTVEhST1VHSCB2YWx1ZSBtdXN0IGJlIHJlcGxhY2VkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9pc1Bhc3N0aHJvdWdoKHcudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJQQVNTVEhST1VHSCB2YWx1ZSBtdXN0IGJlIHJlcGxhY2VkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB3cml0ZUVudHJpZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB3IG9mIHdyaXRlcykge1xuICAgICAgICAgICAgaWYgKF9pc1NlbmQodykpIHtcbiAgICAgICAgICAgICAgICB3cml0ZUVudHJpZXMucHVzaChbVEFTS1MsIHddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKF9pc0NoYW5uZWxXcml0ZVR1cGxlRW50cnkodykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWRSZXN1bHQgPSBhd2FpdCB3Lm1hcHBlci5pbnZva2Uody52YWx1ZSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkUmVzdWx0ICE9IG51bGwgJiYgbWFwcGVkUmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVFbnRyaWVzLnB1c2goLi4ubWFwcGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChfaXNDaGFubmVsV3JpdGVFbnRyeSh3KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZFZhbHVlID0gdy5tYXBwZXIgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IGF3YWl0IHcubWFwcGVyLmludm9rZSh3LnZhbHVlLCBjb25maWcpXG4gICAgICAgICAgICAgICAgICAgIDogdy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoX2lzU2tpcFdyaXRlKG1hcHBlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHcuc2tpcE5vbmUgJiYgbWFwcGVkVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd3JpdGVFbnRyaWVzLnB1c2goW3cuY2hhbm5lbCwgbWFwcGVkVmFsdWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB3cml0ZSBlbnRyeTogJHtKU09OLnN0cmluZ2lmeSh3KX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZSA9IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1NFTkRdO1xuICAgICAgICB3cml0ZSh3cml0ZUVudHJpZXMpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNXcml0ZXIocnVubmFibGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBydW5uYWJsZSBpbnN0YW5jZW9mIENoYW5uZWxXcml0ZSB8fFxuICAgICAgICAgICAgKElTX1dSSVRFUiBpbiBydW5uYWJsZSAmJiAhIXJ1bm5hYmxlW0lTX1dSSVRFUl0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyV3JpdGVyKHJ1bm5hYmxlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkocnVubmFibGUsIElTX1dSSVRFUiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBfaXNDaGFubmVsV3JpdGVFbnRyeSh4KSB7XG4gICAgcmV0dXJuICh4ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHguY2hhbm5lbCA9PT0gXCJzdHJpbmdcIik7XG59XG5mdW5jdGlvbiBfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHgpIHtcbiAgICByZXR1cm4gKHggIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAhX2lzQ2hhbm5lbFdyaXRlRW50cnkoeCkgJiZcbiAgICAgICAgUnVubmFibGUuaXNSdW5uYWJsZSh4Lm1hcHBlcikpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/write.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/setup/async_local_storage.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/setup/async_local_storage.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeAsyncLocalStorageSingleton: () => (/* binding */ initializeAsyncLocalStorageSingleton)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:async_hooks */ \"node:async_hooks\");\n\n\nfunction initializeAsyncLocalStorageSingleton() {\n    _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.initializeGlobalInstance(new node_async_hooks__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorage());\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3NldHVwL2FzeW5jX2xvY2FsX3N0b3JhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdGO0FBQzNCO0FBQzlDO0FBQ1AsSUFBSSwwRkFBa0MsOEJBQThCLCtEQUFpQjtBQUNyRiIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9zZXR1cC9hc3luY19sb2NhbF9zdG9yYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3NpbmdsZXRvbnNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSBcIm5vZGU6YXN5bmNfaG9va3NcIjtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQXN5bmNMb2NhbFN0b3JhZ2VTaW5nbGV0b24oKSB7XG4gICAgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5pbml0aWFsaXplR2xvYmFsSW5zdGFuY2UobmV3IEFzeW5jTG9jYWxTdG9yYWdlKCkpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/setup/async_local_storage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js":
/*!*****************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js ***!
  \*****************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableCallable: () => (/* binding */ RunnableCallable),\n/* harmony export */   gatherIterator: () => (/* binding */ gatherIterator),\n/* harmony export */   gatherIteratorSync: () => (/* binding */ gatherIteratorSync),\n/* harmony export */   isAsyncGeneratorFunction: () => (/* binding */ isAsyncGeneratorFunction),\n/* harmony export */   isGeneratorFunction: () => (/* binding */ isGeneratorFunction),\n/* harmony export */   patchConfigurable: () => (/* binding */ patchConfigurable),\n/* harmony export */   prefixGenerator: () => (/* binding */ prefixGenerator)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/singletons */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/singletons.js\");\n/* harmony import */ var _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pregel/utils/config.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n\n\n\nclass RunnableCallable extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(fields) {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langgraph\"]\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"trace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"recurse\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.name = fields.name ?? fields.func.name;\n        this.func = fields.func;\n        this.config = fields.tags ? { tags: fields.tags } : undefined;\n        this.trace = fields.trace ?? this.trace;\n        this.recurse = fields.recurse ?? this.recurse;\n    }\n    async _tracedInvoke(input, config, runManager) {\n        return new Promise((resolve, reject) => {\n            const childConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n            });\n            void _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async () => {\n                try {\n                    const output = await this.func(input, childConfig);\n                    resolve(output);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, options\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let returnValue;\n        const config = (0,_pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureLangGraphConfig)(options);\n        const mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs)(this.config, config);\n        if (this.trace) {\n            returnValue = await this._callWithConfig(this._tracedInvoke, input, mergedConfig);\n        }\n        else {\n            returnValue = await _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(mergedConfig, async () => this.func(input, mergedConfig));\n        }\n        if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_0__.Runnable.isRunnable(returnValue) && this.recurse) {\n            return await _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(mergedConfig, async () => returnValue.invoke(input, mergedConfig));\n        }\n        return returnValue;\n    }\n}\nfunction* prefixGenerator(generator, prefix) {\n    if (prefix === undefined) {\n        yield* generator;\n    }\n    else {\n        for (const value of generator) {\n            yield [prefix, value];\n        }\n    }\n}\n// https://github.com/tc39/proposal-array-from-async\nasync function gatherIterator(i) {\n    const out = [];\n    for await (const item of await i) {\n        out.push(item);\n    }\n    return out;\n}\nfunction gatherIteratorSync(i) {\n    const out = [];\n    for (const item of i) {\n        out.push(item);\n    }\n    return out;\n}\nfunction patchConfigurable(config, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\npatch) {\n    if (!config) {\n        return {\n            configurable: patch,\n        };\n    }\n    else if (!(\"configurable\" in config)) {\n        return {\n            ...config,\n            configurable: patch,\n        };\n    }\n    else {\n        return {\n            ...config,\n            configurable: {\n                ...config.configurable,\n                ...patch,\n            },\n        };\n    }\n}\nfunction isAsyncGeneratorFunction(val) {\n    return (val != null &&\n        typeof val === \"function\" &&\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        val instanceof Object.getPrototypeOf(async function* () { }).constructor);\n}\nfunction isGeneratorFunction(val) {\n    return (val != null &&\n        typeof val === \"function\" &&\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        val instanceof Object.getPrototypeOf(function* () { }).constructor);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUY7QUFDRDtBQUNmO0FBQzFELCtCQUErQiwrREFBUTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0NBQXNDLG9CQUFvQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNFQUFXO0FBQzNDO0FBQ0EsYUFBYTtBQUNiLGlCQUFpQiwwRkFBa0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsOEVBQXFCO0FBQzVDLDZCQUE2Qix1RUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywwRkFBa0M7QUFDbEU7QUFDQSxZQUFZLCtEQUFRO0FBQ3BCLHlCQUF5QiwwRkFBa0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RCIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rbGFuZ2dyYXBoQDAuMi40Nl9AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9hZWwzNGdkcXMzeGJlY2R3Nzd4aWxzeGVtZS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnLCBSdW5uYWJsZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvc2luZ2xldG9uc1wiO1xuaW1wb3J0IHsgZW5zdXJlTGFuZ0dyYXBoQ29uZmlnIH0gZnJvbSBcIi4vcHJlZ2VsL3V0aWxzL2NvbmZpZy5qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQ2FsbGFibGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2dyYXBoXCJdXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWN1cnNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZSA/PyBmaWVsZHMuZnVuYy5uYW1lO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICAgICAgdGhpcy5jb25maWcgPSBmaWVsZHMudGFncyA/IHsgdGFnczogZmllbGRzLnRhZ3MgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50cmFjZSA9IGZpZWxkcy50cmFjZSA/PyB0aGlzLnRyYWNlO1xuICAgICAgICB0aGlzLnJlY3Vyc2UgPSBmaWVsZHMucmVjdXJzZSA/PyB0aGlzLnJlY3Vyc2U7XG4gICAgfVxuICAgIGFzeW5jIF90cmFjZWRJbnZva2UoaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCBjaGlsZENvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW5wdXQsIG9wdGlvbnNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgcmV0dXJuVmFsdWU7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUxhbmdHcmFwaENvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgbWVyZ2VkQ29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCBjb25maWcpO1xuICAgICAgICBpZiAodGhpcy50cmFjZSkge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdCB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl90cmFjZWRJbnZva2UsIGlucHV0LCBtZXJnZWRDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcobWVyZ2VkQ29uZmlnLCBhc3luYyAoKSA9PiB0aGlzLmZ1bmMoaW5wdXQsIG1lcmdlZENvbmZpZykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKHJldHVyblZhbHVlKSAmJiB0aGlzLnJlY3Vyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcobWVyZ2VkQ29uZmlnLCBhc3luYyAoKSA9PiByZXR1cm5WYWx1ZS5pbnZva2UoaW5wdXQsIG1lcmdlZENvbmZpZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24qIHByZWZpeEdlbmVyYXRvcihnZW5lcmF0b3IsIHByZWZpeCkge1xuICAgIGlmIChwcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB5aWVsZCogZ2VuZXJhdG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIHlpZWxkIFtwcmVmaXgsIHZhbHVlXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWFycmF5LWZyb20tYXN5bmNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnYXRoZXJJdGVyYXRvcihpKSB7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGF3YWl0IGkpIHtcbiAgICAgICAgb3V0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2F0aGVySXRlcmF0b3JTeW5jKGkpIHtcbiAgICBjb25zdCBvdXQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaSkge1xuICAgICAgICBvdXQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaENvbmZpZ3VyYWJsZShjb25maWcsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnBhdGNoKSB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogcGF0Y2gsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKCEoXCJjb25maWd1cmFibGVcIiBpbiBjb25maWcpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHBhdGNoLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgIC4uLmNvbmZpZy5jb25maWd1cmFibGUsXG4gICAgICAgICAgICAgICAgLi4ucGF0Y2gsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24odmFsKSB7XG4gICAgcmV0dXJuICh2YWwgIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICB2YWwgaW5zdGFuY2VvZiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXN5bmMgZnVuY3Rpb24qICgpIHsgfSkuY29uc3RydWN0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzR2VuZXJhdG9yRnVuY3Rpb24odmFsKSB7XG4gICAgcmV0dXJuICh2YWwgIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICB2YWwgaW5zdGFuY2VvZiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuY3Rpb24qICgpIHsgfSkuY29uc3RydWN0b3IpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/web.js":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/web.js ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.Annotation),\n/* harmony export */   AsyncBatchedStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.AsyncBatchedStore),\n/* harmony export */   BaseChannel: () => (/* reexport safe */ _channels_index_js__WEBPACK_IMPORTED_MODULE_2__.BaseChannel),\n/* harmony export */   BaseCheckpointSaver: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.BaseCheckpointSaver),\n/* harmony export */   BaseLangGraphError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.BaseLangGraphError),\n/* harmony export */   BaseStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.BaseStore),\n/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _channels_index_js__WEBPACK_IMPORTED_MODULE_2__.BinaryOperatorAggregate),\n/* harmony export */   ChannelKeyPlaceholder: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.ChannelKeyPlaceholder),\n/* harmony export */   Command: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_3__.Command),\n/* harmony export */   CompiledStateGraph: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.CompiledStateGraph),\n/* harmony export */   END: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_3__.END),\n/* harmony export */   EmptyChannelError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyChannelError),\n/* harmony export */   EmptyInputError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.EmptyInputError),\n/* harmony export */   Graph: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.Graph),\n/* harmony export */   GraphBubbleUp: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.GraphBubbleUp),\n/* harmony export */   GraphInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.GraphInterrupt),\n/* harmony export */   GraphRecursionError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.GraphRecursionError),\n/* harmony export */   GraphValueError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.GraphValueError),\n/* harmony export */   InMemoryStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.InMemoryStore),\n/* harmony export */   InvalidUpdateError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.InvalidUpdateError),\n/* harmony export */   IsLastStepManager: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.IsLastStepManager),\n/* harmony export */   ManagedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.ManagedValue),\n/* harmony export */   ManagedValueMapping: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.ManagedValueMapping),\n/* harmony export */   MemorySaver: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.MemorySaver),\n/* harmony export */   MessageGraph: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.MessageGraph),\n/* harmony export */   MessagesAnnotation: () => (/* reexport safe */ _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_7__.MessagesAnnotation),\n/* harmony export */   MultipleSubgraphsError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.MultipleSubgraphsError),\n/* harmony export */   NodeInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.NodeInterrupt),\n/* harmony export */   NoopManagedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.NoopManagedValue),\n/* harmony export */   ParentCommand: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.ParentCommand),\n/* harmony export */   RemoteException: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.RemoteException),\n/* harmony export */   START: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_3__.START),\n/* harmony export */   Send: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_3__.Send),\n/* harmony export */   SharedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.SharedValue),\n/* harmony export */   StateGraph: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.StateGraph),\n/* harmony export */   UnreachableNodeError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.UnreachableNodeError),\n/* harmony export */   WritableManagedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.WritableManagedValue),\n/* harmony export */   addMessages: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.messagesStateReducer),\n/* harmony export */   copyCheckpoint: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.copyCheckpoint),\n/* harmony export */   emptyCheckpoint: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__.emptyCheckpoint),\n/* harmony export */   entrypoint: () => (/* reexport safe */ _func_index_js__WEBPACK_IMPORTED_MODULE_6__.entrypoint),\n/* harmony export */   getSubgraphsSeenSet: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.getSubgraphsSeenSet),\n/* harmony export */   isCommand: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_3__.isCommand),\n/* harmony export */   isConfiguredManagedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.isConfiguredManagedValue),\n/* harmony export */   isGraphBubbleUp: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.isGraphBubbleUp),\n/* harmony export */   isGraphInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.isGraphInterrupt),\n/* harmony export */   isManagedValue: () => (/* reexport safe */ _managed_index_js__WEBPACK_IMPORTED_MODULE_5__.isManagedValue),\n/* harmony export */   isParentCommand: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_1__.isParentCommand),\n/* harmony export */   messagesStateReducer: () => (/* reexport safe */ _graph_index_js__WEBPACK_IMPORTED_MODULE_0__.messagesStateReducer),\n/* harmony export */   task: () => (/* reexport safe */ _func_index_js__WEBPACK_IMPORTED_MODULE_6__.task)\n/* harmony export */ });\n/* harmony import */ var _graph_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graph/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./channels/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/channels/index.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph-checkpoint@0.0.15_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferu_wxyqc73w5wk4lx2cfu5zaddqqi/node_modules/@langchain/langgraph-checkpoint/index.js\");\n/* harmony import */ var _managed_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./managed/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/managed/index.js\");\n/* harmony import */ var _func_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./func/index.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/func/index.js\");\n/* harmony import */ var _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./graph/messages_annotation.js */ \"(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/graph/messages_annotation.js\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbitsYW5nZ3JhcGhAMC4yLjQ2X0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X2FlbDM0Z2RxczN4YmVjZHc3N3hpbHN4ZW1lL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3dlYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStKO0FBQ25JO0FBQ2dEO0FBQ0w7QUFDMkY7QUFDL0g7QUFDaUI7QUFDZ0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2xhbmdncmFwaEAwLjIuNDZfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfYWVsMzRnZHFzM3hiZWNkdzc3eGlsc3hlbWUvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3Qvd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IEdyYXBoLCBTdGF0ZUdyYXBoLCBDb21waWxlZFN0YXRlR3JhcGgsIE1lc3NhZ2VHcmFwaCwgbWVzc2FnZXNTdGF0ZVJlZHVjZXIsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyIGFzIGFkZE1lc3NhZ2VzLCBBbm5vdGF0aW9uLCB9IGZyb20gXCIuL2dyYXBoL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmV4cG9ydCB7IEJhc2VDaGFubmVsLCBCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZSwgfSBmcm9tIFwiLi9jaGFubmVscy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgU2VuZCwgQ29tbWFuZCwgaXNDb21tYW5kLCBTVEFSVCwgRU5ELCB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuZXhwb3J0IHsgTWVtb3J5U2F2ZXIsIGNvcHlDaGVja3BvaW50LCBlbXB0eUNoZWNrcG9pbnQsIEJhc2VDaGVja3BvaW50U2F2ZXIsIEJhc2VTdG9yZSwgQXN5bmNCYXRjaGVkU3RvcmUsIEluTWVtb3J5U3RvcmUsIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21hbmFnZWQvaW5kZXguanNcIjtcbmV4cG9ydCB7IGVudHJ5cG9pbnQsIHRhc2ssIH0gZnJvbSBcIi4vZnVuYy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgTWVzc2FnZXNBbm5vdGF0aW9uIH0gZnJvbSBcIi4vZ3JhcGgvbWVzc2FnZXNfYW5ub3RhdGlvbi5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/web.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/index.js":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/index.js ***!
  \************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Annotation: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.Annotation),
/* harmony export */   AsyncBatchedStore: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncBatchedStore),
/* harmony export */   BaseChannel: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseChannel),
/* harmony export */   BaseCheckpointSaver: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseCheckpointSaver),
/* harmony export */   BaseLangGraphError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseLangGraphError),
/* harmony export */   BaseStore: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseStore),
/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate),
/* harmony export */   ChannelKeyPlaceholder: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChannelKeyPlaceholder),
/* harmony export */   Command: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.Command),
/* harmony export */   CompiledStateGraph: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.CompiledStateGraph),
/* harmony export */   END: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.END),
/* harmony export */   EmptyChannelError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError),
/* harmony export */   EmptyInputError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.EmptyInputError),
/* harmony export */   Graph: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.Graph),
/* harmony export */   GraphBubbleUp: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GraphBubbleUp),
/* harmony export */   GraphInterrupt: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt),
/* harmony export */   GraphRecursionError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GraphRecursionError),
/* harmony export */   GraphValueError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError),
/* harmony export */   InMemoryStore: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryStore),
/* harmony export */   InvalidUpdateError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError),
/* harmony export */   IsLastStepManager: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.IsLastStepManager),
/* harmony export */   ManagedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ManagedValue),
/* harmony export */   ManagedValueMapping: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ManagedValueMapping),
/* harmony export */   MemorySaver: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MemorySaver),
/* harmony export */   MessageGraph: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MessageGraph),
/* harmony export */   MessagesAnnotation: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MessagesAnnotation),
/* harmony export */   MultipleSubgraphsError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MultipleSubgraphsError),
/* harmony export */   NodeInterrupt: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.NodeInterrupt),
/* harmony export */   NoopManagedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.NoopManagedValue),
/* harmony export */   ParentCommand: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ParentCommand),
/* harmony export */   RemoteException: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.RemoteException),
/* harmony export */   START: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.START),
/* harmony export */   Send: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.Send),
/* harmony export */   SharedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.SharedValue),
/* harmony export */   StateGraph: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.StateGraph),
/* harmony export */   UnreachableNodeError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.UnreachableNodeError),
/* harmony export */   WritableManagedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.WritableManagedValue),
/* harmony export */   addMessages: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.addMessages),
/* harmony export */   copyCheckpoint: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.copyCheckpoint),
/* harmony export */   emptyCheckpoint: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.emptyCheckpoint),
/* harmony export */   entrypoint: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.entrypoint),
/* harmony export */   getPreviousState: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getPreviousState),
/* harmony export */   getStore: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getStore),
/* harmony export */   getSubgraphsSeenSet: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getSubgraphsSeenSet),
/* harmony export */   getWriter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getWriter),
/* harmony export */   interrupt: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.interrupt),
/* harmony export */   isCommand: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isCommand),
/* harmony export */   isConfiguredManagedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isConfiguredManagedValue),
/* harmony export */   isGraphBubbleUp: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp),
/* harmony export */   isGraphInterrupt: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt),
/* harmony export */   isManagedValue: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isManagedValue),
/* harmony export */   isParentCommand: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.isParentCommand),
/* harmony export */   messagesStateReducer: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.messagesStateReducer),
/* harmony export */   task: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.task)
/* harmony export */ });
/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/index.js");


/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/prebuilt.js":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/prebuilt.js ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ToolExecutor: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolExecutor),
/* harmony export */   ToolNode: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolNode),
/* harmony export */   createAgentExecutor: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.createAgentExecutor),
/* harmony export */   createFunctionCallingExecutor: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.createFunctionCallingExecutor),
/* harmony export */   createReactAgent: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.createReactAgent),
/* harmony export */   toolsCondition: () => (/* reexport safe */ _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__.toolsCondition)
/* harmony export */ });
/* harmony import */ var _dist_prebuilt_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/prebuilt/index.js */ "(rsc)/./node_modules/.pnpm/@langchain+langgraph@0.2.46_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_ael34gdqs3xbecdw77xilsxeme/node_modules/@langchain/langgraph/dist/prebuilt/index.js");


/***/ })

};
;