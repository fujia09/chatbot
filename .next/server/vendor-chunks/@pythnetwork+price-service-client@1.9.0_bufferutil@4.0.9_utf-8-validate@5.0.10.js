"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10";
exports.ids = ["vendor-chunks/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/PriceServiceConnection.js":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/PriceServiceConnection.js ***!
  \****************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PriceServiceConnection = void 0;\nconst price_service_sdk_1 = __webpack_require__(/*! @pythnetwork/price-service-sdk */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-sdk@1.8.0/node_modules/@pythnetwork/price-service-sdk/lib/index.js\");\nconst axios_1 = __importDefault(__webpack_require__(/*! axios */ \"(rsc)/./node_modules/.pnpm/axios@1.7.9/node_modules/axios/dist/node/axios.cjs\"));\nconst axios_retry_1 = __importDefault(__webpack_require__(/*! axios-retry */ \"(rsc)/./node_modules/.pnpm/axios-retry@3.9.1/node_modules/axios-retry/index.js\"));\nconst ResillientWebSocket_1 = __webpack_require__(/*! ./ResillientWebSocket */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/ResillientWebSocket.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/utils.js\");\nclass PriceServiceConnection {\n    httpClient;\n    priceFeedCallbacks;\n    wsClient;\n    wsEndpoint;\n    logger;\n    priceFeedRequestConfig;\n    /**\n     * Custom handler for web socket errors (connection and message parsing).\n     *\n     * Default handler only logs the errors.\n     */\n    onWsError;\n    /**\n     * Constructs a new Connection.\n     *\n     * @param endpoint endpoint URL to the price service. Example: https://website/example/\n     * @param config Optional PriceServiceConnectionConfig for custom configurations.\n     */\n    constructor(endpoint, config) {\n        this.httpClient = axios_1.default.create({\n            baseURL: endpoint,\n            timeout: config?.timeout || 5000,\n        });\n        (0, axios_retry_1.default)(this.httpClient, {\n            retries: config?.httpRetries || 3,\n            retryDelay: axios_retry_1.default.exponentialDelay,\n        });\n        this.priceFeedRequestConfig = {\n            binary: config?.priceFeedRequestConfig?.binary,\n            verbose: config?.priceFeedRequestConfig?.verbose ?? config?.verbose,\n            allowOutOfOrder: config?.priceFeedRequestConfig?.allowOutOfOrder,\n        };\n        this.priceFeedCallbacks = new Map();\n        // Default logger is console for only warnings and errors.\n        this.logger = config?.logger || {\n            trace: () => { },\n            debug: () => { },\n            info: () => { },\n            warn: console.warn,\n            error: console.error,\n        };\n        this.onWsError = (error) => {\n            this.logger.error(error);\n            // Exit the process if it is running in node.\n            if (typeof process !== \"undefined\" &&\n                typeof process.exit === \"function\") {\n                this.logger.error(\"Halting the process due to the websocket error\");\n                process.exit(1);\n            }\n            else {\n                this.logger.error(\"Cannot halt process. Please handle the websocket error.\");\n            }\n        };\n        this.wsEndpoint = (0, utils_1.makeWebsocketUrl)(endpoint);\n    }\n    /**\n     * Fetch Latest PriceFeeds of given price ids.\n     * This will throw an axios error if there is a network problem or the price service returns a non-ok response (e.g: Invalid price ids)\n     *\n     * @param priceIds Array of hex-encoded price ids.\n     * @returns Array of PriceFeeds\n     */\n    async getLatestPriceFeeds(priceIds) {\n        if (priceIds.length === 0) {\n            return [];\n        }\n        const response = await this.httpClient.get(\"/api/latest_price_feeds\", {\n            params: {\n                ids: priceIds,\n                verbose: this.priceFeedRequestConfig.verbose,\n                binary: this.priceFeedRequestConfig.binary,\n            },\n        });\n        const priceFeedsJson = response.data;\n        return priceFeedsJson.map((priceFeedJson) => price_service_sdk_1.PriceFeed.fromJson(priceFeedJson));\n    }\n    /**\n     * Fetch latest VAA of given price ids.\n     * This will throw an axios error if there is a network problem or the price service returns a non-ok response (e.g: Invalid price ids)\n     *\n     * This function is coupled to wormhole implemntation.\n     *\n     * @param priceIds Array of hex-encoded price ids.\n     * @returns Array of base64 encoded VAAs.\n     */\n    async getLatestVaas(priceIds) {\n        const response = await this.httpClient.get(\"/api/latest_vaas\", {\n            params: {\n                ids: priceIds,\n            },\n        });\n        return response.data;\n    }\n    /**\n     * Fetch the earliest VAA of the given price id that is published since the given publish time.\n     * This will throw an error if the given publish time is in the future, or if the publish time\n     * is old and the price service endpoint does not have a db backend for historical requests.\n     * This will throw an axios error if there is a network problem or the price service returns a non-ok response (e.g: Invalid price id)\n     *\n     * This function is coupled to wormhole implemntation.\n     *\n     * @param priceId Hex-encoded price id.\n     * @param publishTime Epoch timestamp in seconds.\n     * @returns Tuple of VAA and publishTime.\n     */\n    async getVaa(priceId, publishTime) {\n        const response = await this.httpClient.get(\"/api/get_vaa\", {\n            params: {\n                id: priceId,\n                publish_time: publishTime,\n            },\n        });\n        return [response.data.vaa, response.data.publishTime];\n    }\n    /**\n     * Fetch the PriceFeed of the given price id that is published since the given publish time.\n     * This will throw an error if the given publish time is in the future, or if the publish time\n     * is old and the price service endpoint does not have a db backend for historical requests.\n     * This will throw an axios error if there is a network problem or the price service returns a non-ok response (e.g: Invalid price id)\n     *\n     * @param priceId Hex-encoded price id.\n     * @param publishTime Epoch timestamp in seconds.\n     * @returns PriceFeed\n     */\n    async getPriceFeed(priceId, publishTime) {\n        const response = await this.httpClient.get(\"/api/get_price_feed\", {\n            params: {\n                id: priceId,\n                publish_time: publishTime,\n                verbose: this.priceFeedRequestConfig.verbose,\n                binary: this.priceFeedRequestConfig.binary,\n            },\n        });\n        return price_service_sdk_1.PriceFeed.fromJson(response.data);\n    }\n    /**\n     * Fetch the list of available price feed ids.\n     * This will throw an axios error if there is a network problem or the price service returns a non-ok response.\n     *\n     * @returns Array of hex-encoded price ids.\n     */\n    async getPriceFeedIds() {\n        const response = await this.httpClient.get(\"/api/price_feed_ids\");\n        return response.data;\n    }\n    /**\n     * Subscribe to updates for given price ids.\n     *\n     * It will start a websocket connection if it's not started yet.\n     * Also, it won't throw any exception if given price ids are invalid or connection errors. Instead,\n     * it calls `connection.onWsError`. If you want to handle the errors you should set the\n     * `onWsError` function to your custom error handler.\n     *\n     * @param priceIds Array of hex-encoded price ids.\n     * @param cb Callback function that is called with a PriceFeed upon updates to given price ids.\n     */\n    async subscribePriceFeedUpdates(priceIds, cb) {\n        if (this.wsClient === undefined) {\n            await this.startWebSocket();\n        }\n        priceIds = priceIds.map((priceId) => (0, utils_1.removeLeading0xIfExists)(priceId));\n        const newPriceIds = [];\n        for (const id of priceIds) {\n            if (!this.priceFeedCallbacks.has(id)) {\n                this.priceFeedCallbacks.set(id, new Set());\n                newPriceIds.push(id);\n            }\n            this.priceFeedCallbacks.get(id).add(cb);\n        }\n        const message = {\n            ids: newPriceIds,\n            type: \"subscribe\",\n            verbose: this.priceFeedRequestConfig.verbose,\n            binary: this.priceFeedRequestConfig.binary,\n            allow_out_of_order: this.priceFeedRequestConfig.allowOutOfOrder,\n        };\n        await this.wsClient?.send(JSON.stringify(message));\n    }\n    /**\n     * Unsubscribe from updates for given price ids.\n     *\n     * It will close the websocket connection if it's not subscribed to any price feed updates anymore.\n     * Also, it won't throw any exception if given price ids are invalid or connection errors. Instead,\n     * it calls `connection.onWsError`. If you want to handle the errors you should set the\n     * `onWsError` function to your custom error handler.\n     *\n     * @param priceIds Array of hex-encoded price ids.\n     * @param cb Optional callback, if set it will only unsubscribe this callback from updates for given price ids.\n     */\n    async unsubscribePriceFeedUpdates(priceIds, cb) {\n        if (this.wsClient === undefined) {\n            await this.startWebSocket();\n        }\n        priceIds = priceIds.map((priceId) => (0, utils_1.removeLeading0xIfExists)(priceId));\n        const removedPriceIds = [];\n        for (const id of priceIds) {\n            if (this.priceFeedCallbacks.has(id)) {\n                let idRemoved = false;\n                if (cb === undefined) {\n                    this.priceFeedCallbacks.delete(id);\n                    idRemoved = true;\n                }\n                else {\n                    this.priceFeedCallbacks.get(id).delete(cb);\n                    if (this.priceFeedCallbacks.get(id).size === 0) {\n                        this.priceFeedCallbacks.delete(id);\n                        idRemoved = true;\n                    }\n                }\n                if (idRemoved) {\n                    removedPriceIds.push(id);\n                }\n            }\n        }\n        const message = {\n            ids: removedPriceIds,\n            type: \"unsubscribe\",\n        };\n        await this.wsClient?.send(JSON.stringify(message));\n        if (this.priceFeedCallbacks.size === 0) {\n            this.closeWebSocket();\n        }\n    }\n    /**\n     * Starts connection websocket.\n     *\n     * This function is called automatically upon subscribing to price feed updates.\n     */\n    async startWebSocket() {\n        if (this.wsEndpoint === undefined) {\n            throw new Error(\"Websocket endpoint is undefined.\");\n        }\n        this.wsClient = new ResillientWebSocket_1.ResilientWebSocket(this.wsEndpoint, this.logger);\n        this.wsClient.onError = this.onWsError;\n        this.wsClient.onReconnect = () => {\n            if (this.priceFeedCallbacks.size > 0) {\n                const message = {\n                    ids: Array.from(this.priceFeedCallbacks.keys()),\n                    type: \"subscribe\",\n                    verbose: this.priceFeedRequestConfig.verbose,\n                    binary: this.priceFeedRequestConfig.binary,\n                    allow_out_of_order: this.priceFeedRequestConfig.allowOutOfOrder,\n                };\n                this.logger.info(\"Resubscribing to existing price feeds.\");\n                this.wsClient?.send(JSON.stringify(message));\n            }\n        };\n        this.wsClient.onMessage = (data) => {\n            this.logger.info(`Received message ${data.toString()}`);\n            let message;\n            try {\n                message = JSON.parse(data.toString());\n            }\n            catch (e) {\n                this.logger.error(`Error parsing message ${data.toString()} as JSON.`);\n                this.logger.error(e);\n                this.onWsError(e);\n                return;\n            }\n            if (message.type === \"response\") {\n                if (message.status === \"error\") {\n                    this.logger.error(`Error response from the websocket server ${message.error}.`);\n                    this.onWsError(new Error(message.error));\n                }\n            }\n            else if (message.type === \"price_update\") {\n                let priceFeed;\n                try {\n                    priceFeed = price_service_sdk_1.PriceFeed.fromJson(message.price_feed);\n                }\n                catch (e) {\n                    this.logger.error(`Error parsing price feeds from message ${data.toString()}.`);\n                    this.logger.error(e);\n                    this.onWsError(e);\n                    return;\n                }\n                if (this.priceFeedCallbacks.has(priceFeed.id)) {\n                    for (const cb of this.priceFeedCallbacks.get(priceFeed.id)) {\n                        cb(priceFeed);\n                    }\n                }\n            }\n            else {\n                this.logger.warn(`Ignoring unsupported server response ${data.toString()}.`);\n            }\n        };\n        await this.wsClient.startWebSocket();\n    }\n    /**\n     * Closes connection websocket.\n     *\n     * At termination, the websocket should be closed to finish the\n     * process elegantly. It will automatically close when the connection\n     * is subscribed to no price feeds.\n     */\n    closeWebSocket() {\n        this.wsClient?.closeWebSocket();\n        this.wsClient = undefined;\n        this.priceFeedCallbacks.clear();\n    }\n}\nexports.PriceServiceConnection = PriceServiceConnection;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHB5dGhuZXR3b3JrK3ByaWNlLXNlcnZpY2UtY2xpZW50QDEuOS4wX2J1ZmZlcnV0aWxANC4wLjlfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9AcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1jbGllbnQvbGliL1ByaWNlU2VydmljZUNvbm5lY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEI7QUFDOUIsNEJBQTRCLG1CQUFPLENBQUMsZ0tBQWdDO0FBQ3BFLGdDQUFnQyxtQkFBTyxDQUFDLDRGQUFPO0FBQy9DLHNDQUFzQyxtQkFBTyxDQUFDLG1HQUFhO0FBQzNELDhCQUE4QixtQkFBTyxDQUFDLGtOQUF1QjtBQUM3RCxnQkFBZ0IsbUJBQU8sQ0FBQyxzTEFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QiwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnQkFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxpQkFBaUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLGNBQWM7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLGdCQUFnQjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLGdCQUFnQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQHB5dGhuZXR3b3JrK3ByaWNlLXNlcnZpY2UtY2xpZW50QDEuOS4wX2J1ZmZlcnV0aWxANC4wLjlfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9AcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1jbGllbnQvbGliL1ByaWNlU2VydmljZUNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlByaWNlU2VydmljZUNvbm5lY3Rpb24gPSB2b2lkIDA7XG5jb25zdCBwcmljZV9zZXJ2aWNlX3Nka18xID0gcmVxdWlyZShcIkBweXRobmV0d29yay9wcmljZS1zZXJ2aWNlLXNka1wiKTtcbmNvbnN0IGF4aW9zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImF4aW9zXCIpKTtcbmNvbnN0IGF4aW9zX3JldHJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImF4aW9zLXJldHJ5XCIpKTtcbmNvbnN0IFJlc2lsbGllbnRXZWJTb2NrZXRfMSA9IHJlcXVpcmUoXCIuL1Jlc2lsbGllbnRXZWJTb2NrZXRcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jbGFzcyBQcmljZVNlcnZpY2VDb25uZWN0aW9uIHtcbiAgICBodHRwQ2xpZW50O1xuICAgIHByaWNlRmVlZENhbGxiYWNrcztcbiAgICB3c0NsaWVudDtcbiAgICB3c0VuZHBvaW50O1xuICAgIGxvZ2dlcjtcbiAgICBwcmljZUZlZWRSZXF1ZXN0Q29uZmlnO1xuICAgIC8qKlxuICAgICAqIEN1c3RvbSBoYW5kbGVyIGZvciB3ZWIgc29ja2V0IGVycm9ycyAoY29ubmVjdGlvbiBhbmQgbWVzc2FnZSBwYXJzaW5nKS5cbiAgICAgKlxuICAgICAqIERlZmF1bHQgaGFuZGxlciBvbmx5IGxvZ3MgdGhlIGVycm9ycy5cbiAgICAgKi9cbiAgICBvbldzRXJyb3I7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBDb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVuZHBvaW50IGVuZHBvaW50IFVSTCB0byB0aGUgcHJpY2Ugc2VydmljZS4gRXhhbXBsZTogaHR0cHM6Ly93ZWJzaXRlL2V4YW1wbGUvXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBQcmljZVNlcnZpY2VDb25uZWN0aW9uQ29uZmlnIGZvciBjdXN0b20gY29uZmlndXJhdGlvbnMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5kcG9pbnQsIGNvbmZpZykge1xuICAgICAgICB0aGlzLmh0dHBDbGllbnQgPSBheGlvc18xLmRlZmF1bHQuY3JlYXRlKHtcbiAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgdGltZW91dDogY29uZmlnPy50aW1lb3V0IHx8IDUwMDAsXG4gICAgICAgIH0pO1xuICAgICAgICAoMCwgYXhpb3NfcmV0cnlfMS5kZWZhdWx0KSh0aGlzLmh0dHBDbGllbnQsIHtcbiAgICAgICAgICAgIHJldHJpZXM6IGNvbmZpZz8uaHR0cFJldHJpZXMgfHwgMyxcbiAgICAgICAgICAgIHJldHJ5RGVsYXk6IGF4aW9zX3JldHJ5XzEuZGVmYXVsdC5leHBvbmVudGlhbERlbGF5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcmljZUZlZWRSZXF1ZXN0Q29uZmlnID0ge1xuICAgICAgICAgICAgYmluYXJ5OiBjb25maWc/LnByaWNlRmVlZFJlcXVlc3RDb25maWc/LmJpbmFyeSxcbiAgICAgICAgICAgIHZlcmJvc2U6IGNvbmZpZz8ucHJpY2VGZWVkUmVxdWVzdENvbmZpZz8udmVyYm9zZSA/PyBjb25maWc/LnZlcmJvc2UsXG4gICAgICAgICAgICBhbGxvd091dE9mT3JkZXI6IGNvbmZpZz8ucHJpY2VGZWVkUmVxdWVzdENvbmZpZz8uYWxsb3dPdXRPZk9yZGVyLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaWNlRmVlZENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gRGVmYXVsdCBsb2dnZXIgaXMgY29uc29sZSBmb3Igb25seSB3YXJuaW5ncyBhbmQgZXJyb3JzLlxuICAgICAgICB0aGlzLmxvZ2dlciA9IGNvbmZpZz8ubG9nZ2VyIHx8IHtcbiAgICAgICAgICAgIHRyYWNlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBkZWJ1ZzogKCkgPT4geyB9LFxuICAgICAgICAgICAgaW5mbzogKCkgPT4geyB9LFxuICAgICAgICAgICAgd2FybjogY29uc29sZS53YXJuLFxuICAgICAgICAgICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Xc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAvLyBFeGl0IHRoZSBwcm9jZXNzIGlmIGl0IGlzIHJ1bm5pbmcgaW4gbm9kZS5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmV4aXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiSGFsdGluZyB0aGUgcHJvY2VzcyBkdWUgdG8gdGhlIHdlYnNvY2tldCBlcnJvclwiKTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkNhbm5vdCBoYWx0IHByb2Nlc3MuIFBsZWFzZSBoYW5kbGUgdGhlIHdlYnNvY2tldCBlcnJvci5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3NFbmRwb2ludCA9ICgwLCB1dGlsc18xLm1ha2VXZWJzb2NrZXRVcmwpKGVuZHBvaW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2ggTGF0ZXN0IFByaWNlRmVlZHMgb2YgZ2l2ZW4gcHJpY2UgaWRzLlxuICAgICAqIFRoaXMgd2lsbCB0aHJvdyBhbiBheGlvcyBlcnJvciBpZiB0aGVyZSBpcyBhIG5ldHdvcmsgcHJvYmxlbSBvciB0aGUgcHJpY2Ugc2VydmljZSByZXR1cm5zIGEgbm9uLW9rIHJlc3BvbnNlIChlLmc6IEludmFsaWQgcHJpY2UgaWRzKVxuICAgICAqXG4gICAgICogQHBhcmFtIHByaWNlSWRzIEFycmF5IG9mIGhleC1lbmNvZGVkIHByaWNlIGlkcy5cbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBQcmljZUZlZWRzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TGF0ZXN0UHJpY2VGZWVkcyhwcmljZUlkcykge1xuICAgICAgICBpZiAocHJpY2VJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmh0dHBDbGllbnQuZ2V0KFwiL2FwaS9sYXRlc3RfcHJpY2VfZmVlZHNcIiwge1xuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgaWRzOiBwcmljZUlkcyxcbiAgICAgICAgICAgICAgICB2ZXJib3NlOiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcudmVyYm9zZSxcbiAgICAgICAgICAgICAgICBiaW5hcnk6IHRoaXMucHJpY2VGZWVkUmVxdWVzdENvbmZpZy5iaW5hcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcHJpY2VGZWVkc0pzb24gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICByZXR1cm4gcHJpY2VGZWVkc0pzb24ubWFwKChwcmljZUZlZWRKc29uKSA9PiBwcmljZV9zZXJ2aWNlX3Nka18xLlByaWNlRmVlZC5mcm9tSnNvbihwcmljZUZlZWRKc29uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoIGxhdGVzdCBWQUEgb2YgZ2l2ZW4gcHJpY2UgaWRzLlxuICAgICAqIFRoaXMgd2lsbCB0aHJvdyBhbiBheGlvcyBlcnJvciBpZiB0aGVyZSBpcyBhIG5ldHdvcmsgcHJvYmxlbSBvciB0aGUgcHJpY2Ugc2VydmljZSByZXR1cm5zIGEgbm9uLW9rIHJlc3BvbnNlIChlLmc6IEludmFsaWQgcHJpY2UgaWRzKVxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBjb3VwbGVkIHRvIHdvcm1ob2xlIGltcGxlbW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJpY2VJZHMgQXJyYXkgb2YgaGV4LWVuY29kZWQgcHJpY2UgaWRzLlxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIGJhc2U2NCBlbmNvZGVkIFZBQXMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TGF0ZXN0VmFhcyhwcmljZUlkcykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuaHR0cENsaWVudC5nZXQoXCIvYXBpL2xhdGVzdF92YWFzXCIsIHtcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIGlkczogcHJpY2VJZHMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoIHRoZSBlYXJsaWVzdCBWQUEgb2YgdGhlIGdpdmVuIHByaWNlIGlkIHRoYXQgaXMgcHVibGlzaGVkIHNpbmNlIHRoZSBnaXZlbiBwdWJsaXNoIHRpbWUuXG4gICAgICogVGhpcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBnaXZlbiBwdWJsaXNoIHRpbWUgaXMgaW4gdGhlIGZ1dHVyZSwgb3IgaWYgdGhlIHB1Ymxpc2ggdGltZVxuICAgICAqIGlzIG9sZCBhbmQgdGhlIHByaWNlIHNlcnZpY2UgZW5kcG9pbnQgZG9lcyBub3QgaGF2ZSBhIGRiIGJhY2tlbmQgZm9yIGhpc3RvcmljYWwgcmVxdWVzdHMuXG4gICAgICogVGhpcyB3aWxsIHRocm93IGFuIGF4aW9zIGVycm9yIGlmIHRoZXJlIGlzIGEgbmV0d29yayBwcm9ibGVtIG9yIHRoZSBwcmljZSBzZXJ2aWNlIHJldHVybnMgYSBub24tb2sgcmVzcG9uc2UgKGUuZzogSW52YWxpZCBwcmljZSBpZClcbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY291cGxlZCB0byB3b3JtaG9sZSBpbXBsZW1udGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaWNlSWQgSGV4LWVuY29kZWQgcHJpY2UgaWQuXG4gICAgICogQHBhcmFtIHB1Ymxpc2hUaW1lIEVwb2NoIHRpbWVzdGFtcCBpbiBzZWNvbmRzLlxuICAgICAqIEByZXR1cm5zIFR1cGxlIG9mIFZBQSBhbmQgcHVibGlzaFRpbWUuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VmFhKHByaWNlSWQsIHB1Ymxpc2hUaW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5odHRwQ2xpZW50LmdldChcIi9hcGkvZ2V0X3ZhYVwiLCB7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBpZDogcHJpY2VJZCxcbiAgICAgICAgICAgICAgICBwdWJsaXNoX3RpbWU6IHB1Ymxpc2hUaW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbcmVzcG9uc2UuZGF0YS52YWEsIHJlc3BvbnNlLmRhdGEucHVibGlzaFRpbWVdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgUHJpY2VGZWVkIG9mIHRoZSBnaXZlbiBwcmljZSBpZCB0aGF0IGlzIHB1Ymxpc2hlZCBzaW5jZSB0aGUgZ2l2ZW4gcHVibGlzaCB0aW1lLlxuICAgICAqIFRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZ2l2ZW4gcHVibGlzaCB0aW1lIGlzIGluIHRoZSBmdXR1cmUsIG9yIGlmIHRoZSBwdWJsaXNoIHRpbWVcbiAgICAgKiBpcyBvbGQgYW5kIHRoZSBwcmljZSBzZXJ2aWNlIGVuZHBvaW50IGRvZXMgbm90IGhhdmUgYSBkYiBiYWNrZW5kIGZvciBoaXN0b3JpY2FsIHJlcXVlc3RzLlxuICAgICAqIFRoaXMgd2lsbCB0aHJvdyBhbiBheGlvcyBlcnJvciBpZiB0aGVyZSBpcyBhIG5ldHdvcmsgcHJvYmxlbSBvciB0aGUgcHJpY2Ugc2VydmljZSByZXR1cm5zIGEgbm9uLW9rIHJlc3BvbnNlIChlLmc6IEludmFsaWQgcHJpY2UgaWQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJpY2VJZCBIZXgtZW5jb2RlZCBwcmljZSBpZC5cbiAgICAgKiBAcGFyYW0gcHVibGlzaFRpbWUgRXBvY2ggdGltZXN0YW1wIGluIHNlY29uZHMuXG4gICAgICogQHJldHVybnMgUHJpY2VGZWVkXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UHJpY2VGZWVkKHByaWNlSWQsIHB1Ymxpc2hUaW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5odHRwQ2xpZW50LmdldChcIi9hcGkvZ2V0X3ByaWNlX2ZlZWRcIiwge1xuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgaWQ6IHByaWNlSWQsXG4gICAgICAgICAgICAgICAgcHVibGlzaF90aW1lOiBwdWJsaXNoVGltZSxcbiAgICAgICAgICAgICAgICB2ZXJib3NlOiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcudmVyYm9zZSxcbiAgICAgICAgICAgICAgICBiaW5hcnk6IHRoaXMucHJpY2VGZWVkUmVxdWVzdENvbmZpZy5iaW5hcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByaWNlX3NlcnZpY2Vfc2RrXzEuUHJpY2VGZWVkLmZyb21Kc29uKHJlc3BvbnNlLmRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgbGlzdCBvZiBhdmFpbGFibGUgcHJpY2UgZmVlZCBpZHMuXG4gICAgICogVGhpcyB3aWxsIHRocm93IGFuIGF4aW9zIGVycm9yIGlmIHRoZXJlIGlzIGEgbmV0d29yayBwcm9ibGVtIG9yIHRoZSBwcmljZSBzZXJ2aWNlIHJldHVybnMgYSBub24tb2sgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBoZXgtZW5jb2RlZCBwcmljZSBpZHMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UHJpY2VGZWVkSWRzKCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuaHR0cENsaWVudC5nZXQoXCIvYXBpL3ByaWNlX2ZlZWRfaWRzXCIpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIHVwZGF0ZXMgZm9yIGdpdmVuIHByaWNlIGlkcy5cbiAgICAgKlxuICAgICAqIEl0IHdpbGwgc3RhcnQgYSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBpZiBpdCdzIG5vdCBzdGFydGVkIHlldC5cbiAgICAgKiBBbHNvLCBpdCB3b24ndCB0aHJvdyBhbnkgZXhjZXB0aW9uIGlmIGdpdmVuIHByaWNlIGlkcyBhcmUgaW52YWxpZCBvciBjb25uZWN0aW9uIGVycm9ycy4gSW5zdGVhZCxcbiAgICAgKiBpdCBjYWxscyBgY29ubmVjdGlvbi5vbldzRXJyb3JgLiBJZiB5b3Ugd2FudCB0byBoYW5kbGUgdGhlIGVycm9ycyB5b3Ugc2hvdWxkIHNldCB0aGVcbiAgICAgKiBgb25Xc0Vycm9yYCBmdW5jdGlvbiB0byB5b3VyIGN1c3RvbSBlcnJvciBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaWNlSWRzIEFycmF5IG9mIGhleC1lbmNvZGVkIHByaWNlIGlkcy5cbiAgICAgKiBAcGFyYW0gY2IgQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2l0aCBhIFByaWNlRmVlZCB1cG9uIHVwZGF0ZXMgdG8gZ2l2ZW4gcHJpY2UgaWRzLlxuICAgICAqL1xuICAgIGFzeW5jIHN1YnNjcmliZVByaWNlRmVlZFVwZGF0ZXMocHJpY2VJZHMsIGNiKSB7XG4gICAgICAgIGlmICh0aGlzLndzQ2xpZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmljZUlkcyA9IHByaWNlSWRzLm1hcCgocHJpY2VJZCkgPT4gKDAsIHV0aWxzXzEucmVtb3ZlTGVhZGluZzB4SWZFeGlzdHMpKHByaWNlSWQpKTtcbiAgICAgICAgY29uc3QgbmV3UHJpY2VJZHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBwcmljZUlkcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmljZUZlZWRDYWxsYmFja3Muc2V0KGlkLCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgICAgIG5ld1ByaWNlSWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmljZUZlZWRDYWxsYmFja3MuZ2V0KGlkKS5hZGQoY2IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBpZHM6IG5ld1ByaWNlSWRzLFxuICAgICAgICAgICAgdHlwZTogXCJzdWJzY3JpYmVcIixcbiAgICAgICAgICAgIHZlcmJvc2U6IHRoaXMucHJpY2VGZWVkUmVxdWVzdENvbmZpZy52ZXJib3NlLFxuICAgICAgICAgICAgYmluYXJ5OiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcuYmluYXJ5LFxuICAgICAgICAgICAgYWxsb3dfb3V0X29mX29yZGVyOiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcuYWxsb3dPdXRPZk9yZGVyLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLndzQ2xpZW50Py5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmUgZnJvbSB1cGRhdGVzIGZvciBnaXZlbiBwcmljZSBpZHMuXG4gICAgICpcbiAgICAgKiBJdCB3aWxsIGNsb3NlIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBpZiBpdCdzIG5vdCBzdWJzY3JpYmVkIHRvIGFueSBwcmljZSBmZWVkIHVwZGF0ZXMgYW55bW9yZS5cbiAgICAgKiBBbHNvLCBpdCB3b24ndCB0aHJvdyBhbnkgZXhjZXB0aW9uIGlmIGdpdmVuIHByaWNlIGlkcyBhcmUgaW52YWxpZCBvciBjb25uZWN0aW9uIGVycm9ycy4gSW5zdGVhZCxcbiAgICAgKiBpdCBjYWxscyBgY29ubmVjdGlvbi5vbldzRXJyb3JgLiBJZiB5b3Ugd2FudCB0byBoYW5kbGUgdGhlIGVycm9ycyB5b3Ugc2hvdWxkIHNldCB0aGVcbiAgICAgKiBgb25Xc0Vycm9yYCBmdW5jdGlvbiB0byB5b3VyIGN1c3RvbSBlcnJvciBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaWNlSWRzIEFycmF5IG9mIGhleC1lbmNvZGVkIHByaWNlIGlkcy5cbiAgICAgKiBAcGFyYW0gY2IgT3B0aW9uYWwgY2FsbGJhY2ssIGlmIHNldCBpdCB3aWxsIG9ubHkgdW5zdWJzY3JpYmUgdGhpcyBjYWxsYmFjayBmcm9tIHVwZGF0ZXMgZm9yIGdpdmVuIHByaWNlIGlkcy5cbiAgICAgKi9cbiAgICBhc3luYyB1bnN1YnNjcmliZVByaWNlRmVlZFVwZGF0ZXMocHJpY2VJZHMsIGNiKSB7XG4gICAgICAgIGlmICh0aGlzLndzQ2xpZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmljZUlkcyA9IHByaWNlSWRzLm1hcCgocHJpY2VJZCkgPT4gKDAsIHV0aWxzXzEucmVtb3ZlTGVhZGluZzB4SWZFeGlzdHMpKHByaWNlSWQpKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlZFByaWNlSWRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgcHJpY2VJZHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkUmVtb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjYiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2VGZWVkQ2FsbGJhY2tzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgICAgIGlkUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5nZXQoaWQpLmRlbGV0ZShjYik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5nZXQoaWQpLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2VGZWVkQ2FsbGJhY2tzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpZFJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFByaWNlSWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICAgICAgaWRzOiByZW1vdmVkUHJpY2VJZHMsXG4gICAgICAgICAgICB0eXBlOiBcInVuc3Vic2NyaWJlXCIsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMud3NDbGllbnQ/LnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICBpZiAodGhpcy5wcmljZUZlZWRDYWxsYmFja3Muc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBjb25uZWN0aW9uIHdlYnNvY2tldC5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgdXBvbiBzdWJzY3JpYmluZyB0byBwcmljZSBmZWVkIHVwZGF0ZXMuXG4gICAgICovXG4gICAgYXN5bmMgc3RhcnRXZWJTb2NrZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLndzRW5kcG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2Vic29ja2V0IGVuZHBvaW50IGlzIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53c0NsaWVudCA9IG5ldyBSZXNpbGxpZW50V2ViU29ja2V0XzEuUmVzaWxpZW50V2ViU29ja2V0KHRoaXMud3NFbmRwb2ludCwgdGhpcy5sb2dnZXIpO1xuICAgICAgICB0aGlzLndzQ2xpZW50Lm9uRXJyb3IgPSB0aGlzLm9uV3NFcnJvcjtcbiAgICAgICAgdGhpcy53c0NsaWVudC5vblJlY29ubmVjdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkczogQXJyYXkuZnJvbSh0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5rZXlzKCkpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN1YnNjcmliZVwiLFxuICAgICAgICAgICAgICAgICAgICB2ZXJib3NlOiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcudmVyYm9zZSxcbiAgICAgICAgICAgICAgICAgICAgYmluYXJ5OiB0aGlzLnByaWNlRmVlZFJlcXVlc3RDb25maWcuYmluYXJ5LFxuICAgICAgICAgICAgICAgICAgICBhbGxvd19vdXRfb2Zfb3JkZXI6IHRoaXMucHJpY2VGZWVkUmVxdWVzdENvbmZpZy5hbGxvd091dE9mT3JkZXIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiUmVzdWJzY3JpYmluZyB0byBleGlzdGluZyBwcmljZSBmZWVkcy5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudD8uc2VuZChKU09OLnN0cmluZ2lmeShtZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3NDbGllbnQub25NZXNzYWdlID0gKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oYFJlY2VpdmVkIG1lc3NhZ2UgJHtkYXRhLnRvU3RyaW5nKCl9YCk7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHBhcnNpbmcgbWVzc2FnZSAke2RhdGEudG9TdHJpbmcoKX0gYXMgSlNPTi5gKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uV3NFcnJvcihlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInJlc3BvbnNlXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3IgcmVzcG9uc2UgZnJvbSB0aGUgd2Vic29ja2V0IHNlcnZlciAke21lc3NhZ2UuZXJyb3J9LmApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uV3NFcnJvcihuZXcgRXJyb3IobWVzc2FnZS5lcnJvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJwcmljZV91cGRhdGVcIikge1xuICAgICAgICAgICAgICAgIGxldCBwcmljZUZlZWQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VGZWVkID0gcHJpY2Vfc2VydmljZV9zZGtfMS5QcmljZUZlZWQuZnJvbUpzb24obWVzc2FnZS5wcmljZV9mZWVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIHBhcnNpbmcgcHJpY2UgZmVlZHMgZnJvbSBtZXNzYWdlICR7ZGF0YS50b1N0cmluZygpfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Xc0Vycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5oYXMocHJpY2VGZWVkLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNiIG9mIHRoaXMucHJpY2VGZWVkQ2FsbGJhY2tzLmdldChwcmljZUZlZWQuaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihwcmljZUZlZWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgSWdub3JpbmcgdW5zdXBwb3J0ZWQgc2VydmVyIHJlc3BvbnNlICR7ZGF0YS50b1N0cmluZygpfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy53c0NsaWVudC5zdGFydFdlYlNvY2tldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgY29ubmVjdGlvbiB3ZWJzb2NrZXQuXG4gICAgICpcbiAgICAgKiBBdCB0ZXJtaW5hdGlvbiwgdGhlIHdlYnNvY2tldCBzaG91bGQgYmUgY2xvc2VkIHRvIGZpbmlzaCB0aGVcbiAgICAgKiBwcm9jZXNzIGVsZWdhbnRseS4gSXQgd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIHdoZW4gdGhlIGNvbm5lY3Rpb25cbiAgICAgKiBpcyBzdWJzY3JpYmVkIHRvIG5vIHByaWNlIGZlZWRzLlxuICAgICAqL1xuICAgIGNsb3NlV2ViU29ja2V0KCkge1xuICAgICAgICB0aGlzLndzQ2xpZW50Py5jbG9zZVdlYlNvY2tldCgpO1xuICAgICAgICB0aGlzLndzQ2xpZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaWNlRmVlZENhbGxiYWNrcy5jbGVhcigpO1xuICAgIH1cbn1cbmV4cG9ydHMuUHJpY2VTZXJ2aWNlQ29ubmVjdGlvbiA9IFByaWNlU2VydmljZUNvbm5lY3Rpb247XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/PriceServiceConnection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/ResillientWebSocket.js":
/*!*************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/ResillientWebSocket.js ***!
  \*************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ResilientWebSocket = void 0;\nconst isomorphic_ws_1 = __importDefault(__webpack_require__(/*! isomorphic-ws */ \"(rsc)/./node_modules/.pnpm/isomorphic-ws@4.0.1_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10_/node_modules/isomorphic-ws/node.js\"));\nconst PING_TIMEOUT_DURATION = 30000 + 3000; // It is 30s on the server and 3s is added for delays\n/**\n * This class wraps websocket to provide a resilient web socket client.\n *\n * It will reconnect if connection fails with exponential backoff. Also, in node, it will reconnect\n * if it receives no ping request from server within a while as indication of timeout (assuming\n * the server sends it regularly).\n *\n * This class also logs events if logger is given and by replacing onError method you can handle\n * connection errors yourself (e.g: do not retry and close the connection).\n */\nclass ResilientWebSocket {\n    endpoint;\n    wsClient;\n    wsUserClosed;\n    wsFailedAttempts;\n    pingTimeout;\n    logger;\n    onError;\n    onMessage;\n    onReconnect;\n    constructor(endpoint, logger) {\n        this.endpoint = endpoint;\n        this.logger = logger;\n        this.wsFailedAttempts = 0;\n        this.onError = (error) => {\n            this.logger?.error(error);\n        };\n        this.wsUserClosed = true;\n        this.onMessage = () => { };\n        this.onReconnect = () => { };\n    }\n    async send(data) {\n        this.logger?.info(`Sending ${data}`);\n        await this.waitForMaybeReadyWebSocket();\n        if (this.wsClient === undefined) {\n            this.logger?.error(\"Couldn't connect to the websocket server. Error callback is called.\");\n        }\n        else {\n            this.wsClient?.send(data);\n        }\n    }\n    async startWebSocket() {\n        if (this.wsClient !== undefined) {\n            return;\n        }\n        this.logger?.info(`Creating Web Socket client`);\n        this.wsClient = new isomorphic_ws_1.default(this.endpoint);\n        this.wsUserClosed = false;\n        this.wsClient.onopen = () => {\n            this.wsFailedAttempts = 0;\n            // Ping handler is undefined in browser side so heartbeat is disabled.\n            if (this.wsClient.on !== undefined) {\n                this.heartbeat();\n            }\n        };\n        this.wsClient.onerror = (event) => {\n            this.onError(event.error);\n        };\n        this.wsClient.onmessage = (event) => {\n            this.onMessage(event.data);\n        };\n        this.wsClient.onclose = async () => {\n            if (this.pingTimeout !== undefined) {\n                clearInterval(this.pingTimeout);\n            }\n            if (this.wsUserClosed === false) {\n                this.wsFailedAttempts += 1;\n                this.wsClient = undefined;\n                const waitTime = expoBackoff(this.wsFailedAttempts);\n                this.logger?.error(`Connection closed unexpectedly or because of timeout. Reconnecting after ${waitTime}ms.`);\n                await sleep(waitTime);\n                this.restartUnexpectedClosedWebsocket();\n            }\n            else {\n                this.logger?.info(\"The connection has been closed successfully.\");\n            }\n        };\n        if (this.wsClient.on !== undefined) {\n            // Ping handler is undefined in browser side\n            this.wsClient.on(\"ping\", this.heartbeat.bind(this));\n        }\n    }\n    /**\n     * Heartbeat is only enabled in node clients because they support handling\n     * ping-pong events.\n     *\n     * This approach only works when server constantly pings the clients which.\n     * Otherwise you might consider sending ping and acting on pong responses\n     * yourself.\n     */\n    heartbeat() {\n        this.logger?.info(\"Heartbeat\");\n        if (this.pingTimeout !== undefined) {\n            clearTimeout(this.pingTimeout);\n        }\n        this.pingTimeout = setTimeout(() => {\n            this.logger?.warn(`Connection timed out. Reconnecting...`);\n            this.wsClient?.terminate();\n            this.restartUnexpectedClosedWebsocket();\n        }, PING_TIMEOUT_DURATION);\n    }\n    async waitForMaybeReadyWebSocket() {\n        let waitedTime = 0;\n        while (this.wsClient !== undefined &&\n            this.wsClient.readyState !== this.wsClient.OPEN) {\n            if (waitedTime > 5000) {\n                this.wsClient.close();\n                return;\n            }\n            else {\n                waitedTime += 10;\n                await sleep(10);\n            }\n        }\n    }\n    async restartUnexpectedClosedWebsocket() {\n        if (this.wsUserClosed === true) {\n            return;\n        }\n        await this.startWebSocket();\n        await this.waitForMaybeReadyWebSocket();\n        if (this.wsClient === undefined) {\n            this.logger?.error(\"Couldn't reconnect to websocket. Error callback is called.\");\n            return;\n        }\n        this.onReconnect();\n    }\n    closeWebSocket() {\n        if (this.wsClient !== undefined) {\n            const client = this.wsClient;\n            this.wsClient = undefined;\n            client.close();\n        }\n        this.wsUserClosed = true;\n    }\n}\nexports.ResilientWebSocket = ResilientWebSocket;\nasync function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\nfunction expoBackoff(attempts) {\n    return 2 ** attempts * 100;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHB5dGhuZXR3b3JrK3ByaWNlLXNlcnZpY2UtY2xpZW50QDEuOS4wX2J1ZmZlcnV0aWxANC4wLjlfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9AcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1jbGllbnQvbGliL1Jlc2lsbGllbnRXZWJTb2NrZXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCwwQkFBMEI7QUFDMUIsd0NBQXdDLG1CQUFPLENBQUMsMEpBQWU7QUFDL0QsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsS0FBSztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrR0FBK0csU0FBUztBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AcHl0aG5ldHdvcmsrcHJpY2Utc2VydmljZS1jbGllbnRAMS45LjBfYnVmZmVydXRpbEA0LjAuOV91dGYtOC12YWxpZGF0ZUA1LjAuMTAvbm9kZV9tb2R1bGVzL0BweXRobmV0d29yay9wcmljZS1zZXJ2aWNlLWNsaWVudC9saWIvUmVzaWxsaWVudFdlYlNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUmVzaWxpZW50V2ViU29ja2V0ID0gdm9pZCAwO1xuY29uc3QgaXNvbW9ycGhpY193c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJpc29tb3JwaGljLXdzXCIpKTtcbmNvbnN0IFBJTkdfVElNRU9VVF9EVVJBVElPTiA9IDMwMDAwICsgMzAwMDsgLy8gSXQgaXMgMzBzIG9uIHRoZSBzZXJ2ZXIgYW5kIDNzIGlzIGFkZGVkIGZvciBkZWxheXNcbi8qKlxuICogVGhpcyBjbGFzcyB3cmFwcyB3ZWJzb2NrZXQgdG8gcHJvdmlkZSBhIHJlc2lsaWVudCB3ZWIgc29ja2V0IGNsaWVudC5cbiAqXG4gKiBJdCB3aWxsIHJlY29ubmVjdCBpZiBjb25uZWN0aW9uIGZhaWxzIHdpdGggZXhwb25lbnRpYWwgYmFja29mZi4gQWxzbywgaW4gbm9kZSwgaXQgd2lsbCByZWNvbm5lY3RcbiAqIGlmIGl0IHJlY2VpdmVzIG5vIHBpbmcgcmVxdWVzdCBmcm9tIHNlcnZlciB3aXRoaW4gYSB3aGlsZSBhcyBpbmRpY2F0aW9uIG9mIHRpbWVvdXQgKGFzc3VtaW5nXG4gKiB0aGUgc2VydmVyIHNlbmRzIGl0IHJlZ3VsYXJseSkuXG4gKlxuICogVGhpcyBjbGFzcyBhbHNvIGxvZ3MgZXZlbnRzIGlmIGxvZ2dlciBpcyBnaXZlbiBhbmQgYnkgcmVwbGFjaW5nIG9uRXJyb3IgbWV0aG9kIHlvdSBjYW4gaGFuZGxlXG4gKiBjb25uZWN0aW9uIGVycm9ycyB5b3Vyc2VsZiAoZS5nOiBkbyBub3QgcmV0cnkgYW5kIGNsb3NlIHRoZSBjb25uZWN0aW9uKS5cbiAqL1xuY2xhc3MgUmVzaWxpZW50V2ViU29ja2V0IHtcbiAgICBlbmRwb2ludDtcbiAgICB3c0NsaWVudDtcbiAgICB3c1VzZXJDbG9zZWQ7XG4gICAgd3NGYWlsZWRBdHRlbXB0cztcbiAgICBwaW5nVGltZW91dDtcbiAgICBsb2dnZXI7XG4gICAgb25FcnJvcjtcbiAgICBvbk1lc3NhZ2U7XG4gICAgb25SZWNvbm5lY3Q7XG4gICAgY29uc3RydWN0b3IoZW5kcG9pbnQsIGxvZ2dlcikge1xuICAgICAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQ7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLndzRmFpbGVkQXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLm9uRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyPy5lcnJvcihlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3NVc2VyQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2UgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMub25SZWNvbm5lY3QgPSAoKSA9PiB7IH07XG4gICAgfVxuICAgIGFzeW5jIHNlbmQoZGF0YSkge1xuICAgICAgICB0aGlzLmxvZ2dlcj8uaW5mbyhgU2VuZGluZyAke2RhdGF9YCk7XG4gICAgICAgIGF3YWl0IHRoaXMud2FpdEZvck1heWJlUmVhZHlXZWJTb2NrZXQoKTtcbiAgICAgICAgaWYgKHRoaXMud3NDbGllbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXI/LmVycm9yKFwiQ291bGRuJ3QgY29ubmVjdCB0byB0aGUgd2Vic29ja2V0IHNlcnZlci4gRXJyb3IgY2FsbGJhY2sgaXMgY2FsbGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3NDbGllbnQ/LnNlbmQoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnRXZWJTb2NrZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLndzQ2xpZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlcj8uaW5mbyhgQ3JlYXRpbmcgV2ViIFNvY2tldCBjbGllbnRgKTtcbiAgICAgICAgdGhpcy53c0NsaWVudCA9IG5ldyBpc29tb3JwaGljX3dzXzEuZGVmYXVsdCh0aGlzLmVuZHBvaW50KTtcbiAgICAgICAgdGhpcy53c1VzZXJDbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53c0NsaWVudC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndzRmFpbGVkQXR0ZW1wdHMgPSAwO1xuICAgICAgICAgICAgLy8gUGluZyBoYW5kbGVyIGlzIHVuZGVmaW5lZCBpbiBicm93c2VyIHNpZGUgc28gaGVhcnRiZWF0IGlzIGRpc2FibGVkLlxuICAgICAgICAgICAgaWYgKHRoaXMud3NDbGllbnQub24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhcnRiZWF0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3NDbGllbnQub25lcnJvciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGV2ZW50LmVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53c0NsaWVudC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25NZXNzYWdlKGV2ZW50LmRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLndzQ2xpZW50Lm9uY2xvc2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5waW5nVGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBpbmdUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLndzVXNlckNsb3NlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndzRmFpbGVkQXR0ZW1wdHMgKz0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdhaXRUaW1lID0gZXhwb0JhY2tvZmYodGhpcy53c0ZhaWxlZEF0dGVtcHRzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcj8uZXJyb3IoYENvbm5lY3Rpb24gY2xvc2VkIHVuZXhwZWN0ZWRseSBvciBiZWNhdXNlIG9mIHRpbWVvdXQuIFJlY29ubmVjdGluZyBhZnRlciAke3dhaXRUaW1lfW1zLmApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKHdhaXRUaW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRVbmV4cGVjdGVkQ2xvc2VkV2Vic29ja2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcj8uaW5mbyhcIlRoZSBjb25uZWN0aW9uIGhhcyBiZWVuIGNsb3NlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy53c0NsaWVudC5vbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBQaW5nIGhhbmRsZXIgaXMgdW5kZWZpbmVkIGluIGJyb3dzZXIgc2lkZVxuICAgICAgICAgICAgdGhpcy53c0NsaWVudC5vbihcInBpbmdcIiwgdGhpcy5oZWFydGJlYXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVhcnRiZWF0IGlzIG9ubHkgZW5hYmxlZCBpbiBub2RlIGNsaWVudHMgYmVjYXVzZSB0aGV5IHN1cHBvcnQgaGFuZGxpbmdcbiAgICAgKiBwaW5nLXBvbmcgZXZlbnRzLlxuICAgICAqXG4gICAgICogVGhpcyBhcHByb2FjaCBvbmx5IHdvcmtzIHdoZW4gc2VydmVyIGNvbnN0YW50bHkgcGluZ3MgdGhlIGNsaWVudHMgd2hpY2guXG4gICAgICogT3RoZXJ3aXNlIHlvdSBtaWdodCBjb25zaWRlciBzZW5kaW5nIHBpbmcgYW5kIGFjdGluZyBvbiBwb25nIHJlc3BvbnNlc1xuICAgICAqIHlvdXJzZWxmLlxuICAgICAqL1xuICAgIGhlYXJ0YmVhdCgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXI/LmluZm8oXCJIZWFydGJlYXRcIik7XG4gICAgICAgIGlmICh0aGlzLnBpbmdUaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcj8ud2FybihgQ29ubmVjdGlvbiB0aW1lZCBvdXQuIFJlY29ubmVjdGluZy4uLmApO1xuICAgICAgICAgICAgdGhpcy53c0NsaWVudD8udGVybWluYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRVbmV4cGVjdGVkQ2xvc2VkV2Vic29ja2V0KCk7XG4gICAgICAgIH0sIFBJTkdfVElNRU9VVF9EVVJBVElPTik7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRGb3JNYXliZVJlYWR5V2ViU29ja2V0KCkge1xuICAgICAgICBsZXQgd2FpdGVkVGltZSA9IDA7XG4gICAgICAgIHdoaWxlICh0aGlzLndzQ2xpZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMud3NDbGllbnQucmVhZHlTdGF0ZSAhPT0gdGhpcy53c0NsaWVudC5PUEVOKSB7XG4gICAgICAgICAgICBpZiAod2FpdGVkVGltZSA+IDUwMDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2FpdGVkVGltZSArPSAxMDtcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCgxMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVzdGFydFVuZXhwZWN0ZWRDbG9zZWRXZWJzb2NrZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLndzVXNlckNsb3NlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc3RhcnRXZWJTb2NrZXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yTWF5YmVSZWFkeVdlYlNvY2tldCgpO1xuICAgICAgICBpZiAodGhpcy53c0NsaWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcj8uZXJyb3IoXCJDb3VsZG4ndCByZWNvbm5lY3QgdG8gd2Vic29ja2V0LiBFcnJvciBjYWxsYmFjayBpcyBjYWxsZWQuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25SZWNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2VXZWJTb2NrZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLndzQ2xpZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMud3NDbGllbnQ7XG4gICAgICAgICAgICB0aGlzLndzQ2xpZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53c1VzZXJDbG9zZWQgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVzaWxpZW50V2ViU29ja2V0ID0gUmVzaWxpZW50V2ViU29ja2V0O1xuYXN5bmMgZnVuY3Rpb24gc2xlZXAobXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmZ1bmN0aW9uIGV4cG9CYWNrb2ZmKGF0dGVtcHRzKSB7XG4gICAgcmV0dXJuIDIgKiogYXR0ZW1wdHMgKiAxMDA7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/ResillientWebSocket.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/index.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/index.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.parseAccumulatorUpdateData = exports.isAccumulatorUpdateData = exports.Price = exports.PriceFeed = exports.PriceFeedMetadata = exports.PriceServiceConnection = void 0;\nvar PriceServiceConnection_1 = __webpack_require__(/*! ./PriceServiceConnection */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/PriceServiceConnection.js\");\nObject.defineProperty(exports, \"PriceServiceConnection\", ({ enumerable: true, get: function () { return PriceServiceConnection_1.PriceServiceConnection; } }));\nvar price_service_sdk_1 = __webpack_require__(/*! @pythnetwork/price-service-sdk */ \"(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-sdk@1.8.0/node_modules/@pythnetwork/price-service-sdk/lib/index.js\");\nObject.defineProperty(exports, \"PriceFeedMetadata\", ({ enumerable: true, get: function () { return price_service_sdk_1.PriceFeedMetadata; } }));\nObject.defineProperty(exports, \"PriceFeed\", ({ enumerable: true, get: function () { return price_service_sdk_1.PriceFeed; } }));\nObject.defineProperty(exports, \"Price\", ({ enumerable: true, get: function () { return price_service_sdk_1.Price; } }));\nObject.defineProperty(exports, \"isAccumulatorUpdateData\", ({ enumerable: true, get: function () { return price_service_sdk_1.isAccumulatorUpdateData; } }));\nObject.defineProperty(exports, \"parseAccumulatorUpdateData\", ({ enumerable: true, get: function () { return price_service_sdk_1.parseAccumulatorUpdateData; } }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHB5dGhuZXR3b3JrK3ByaWNlLXNlcnZpY2UtY2xpZW50QDEuOS4wX2J1ZmZlcnV0aWxANC4wLjlfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9AcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1jbGllbnQvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtDQUFrQyxHQUFHLCtCQUErQixHQUFHLGFBQWEsR0FBRyxpQkFBaUIsR0FBRyx5QkFBeUIsR0FBRyw4QkFBOEI7QUFDckssK0JBQStCLG1CQUFPLENBQUMsd05BQTBCO0FBQ2pFLDBEQUF5RCxFQUFFLHFDQUFxQywyREFBMkQsRUFBQztBQUM1SiwwQkFBMEIsbUJBQU8sQ0FBQyxnS0FBZ0M7QUFDbEUscURBQW9ELEVBQUUscUNBQXFDLGlEQUFpRCxFQUFDO0FBQzdJLDZDQUE0QyxFQUFFLHFDQUFxQyx5Q0FBeUMsRUFBQztBQUM3SCx5Q0FBd0MsRUFBRSxxQ0FBcUMscUNBQXFDLEVBQUM7QUFDckgsMkRBQTBELEVBQUUscUNBQXFDLHVEQUF1RCxFQUFDO0FBQ3pKLDhEQUE2RCxFQUFFLHFDQUFxQywwREFBMEQsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BweXRobmV0d29yaytwcmljZS1zZXJ2aWNlLWNsaWVudEAxLjkuMF9idWZmZXJ1dGlsQDQuMC45X3V0Zi04LXZhbGlkYXRlQDUuMC4xMC9ub2RlX21vZHVsZXMvQHB5dGhuZXR3b3JrL3ByaWNlLXNlcnZpY2UtY2xpZW50L2xpYi9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VBY2N1bXVsYXRvclVwZGF0ZURhdGEgPSBleHBvcnRzLmlzQWNjdW11bGF0b3JVcGRhdGVEYXRhID0gZXhwb3J0cy5QcmljZSA9IGV4cG9ydHMuUHJpY2VGZWVkID0gZXhwb3J0cy5QcmljZUZlZWRNZXRhZGF0YSA9IGV4cG9ydHMuUHJpY2VTZXJ2aWNlQ29ubmVjdGlvbiA9IHZvaWQgMDtcbnZhciBQcmljZVNlcnZpY2VDb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9QcmljZVNlcnZpY2VDb25uZWN0aW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUHJpY2VTZXJ2aWNlQ29ubmVjdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUHJpY2VTZXJ2aWNlQ29ubmVjdGlvbl8xLlByaWNlU2VydmljZUNvbm5lY3Rpb247IH0gfSk7XG52YXIgcHJpY2Vfc2VydmljZV9zZGtfMSA9IHJlcXVpcmUoXCJAcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1zZGtcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQcmljZUZlZWRNZXRhZGF0YVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJpY2Vfc2VydmljZV9zZGtfMS5QcmljZUZlZWRNZXRhZGF0YTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlByaWNlRmVlZFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJpY2Vfc2VydmljZV9zZGtfMS5QcmljZUZlZWQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQcmljZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJpY2Vfc2VydmljZV9zZGtfMS5QcmljZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImlzQWNjdW11bGF0b3JVcGRhdGVEYXRhXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwcmljZV9zZXJ2aWNlX3Nka18xLmlzQWNjdW11bGF0b3JVcGRhdGVEYXRhOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicGFyc2VBY2N1bXVsYXRvclVwZGF0ZURhdGFcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByaWNlX3NlcnZpY2Vfc2RrXzEucGFyc2VBY2N1bXVsYXRvclVwZGF0ZURhdGE7IH0gfSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/utils.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/utils.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.removeLeading0xIfExists = exports.makeWebsocketUrl = void 0;\n/**\n * Convert http(s) endpoint to ws(s) endpoint.\n *\n * @param endpoint Http(s) protocol endpoint\n * @returns Ws(s) protocol endpoint of the same address\n */\nfunction makeWebsocketUrl(endpoint) {\n    const url = new URL(\"ws\", endpoint);\n    const useHttps = url.protocol === \"https:\";\n    url.protocol = useHttps ? \"wss:\" : \"ws:\";\n    return url.toString();\n}\nexports.makeWebsocketUrl = makeWebsocketUrl;\nfunction removeLeading0xIfExists(id) {\n    if (id.startsWith(\"0x\")) {\n        return id.substring(2);\n    }\n    else {\n        return id;\n    }\n}\nexports.removeLeading0xIfExists = removeLeading0xIfExists;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHB5dGhuZXR3b3JrK3ByaWNlLXNlcnZpY2UtY2xpZW50QDEuOS4wX2J1ZmZlcnV0aWxANC4wLjlfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9AcHl0aG5ldHdvcmsvcHJpY2Utc2VydmljZS1jbGllbnQvbGliL3V0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELCtCQUErQixHQUFHLHdCQUF3QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BweXRobmV0d29yaytwcmljZS1zZXJ2aWNlLWNsaWVudEAxLjkuMF9idWZmZXJ1dGlsQDQuMC45X3V0Zi04LXZhbGlkYXRlQDUuMC4xMC9ub2RlX21vZHVsZXMvQHB5dGhuZXR3b3JrL3ByaWNlLXNlcnZpY2UtY2xpZW50L2xpYi91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVtb3ZlTGVhZGluZzB4SWZFeGlzdHMgPSBleHBvcnRzLm1ha2VXZWJzb2NrZXRVcmwgPSB2b2lkIDA7XG4vKipcbiAqIENvbnZlcnQgaHR0cChzKSBlbmRwb2ludCB0byB3cyhzKSBlbmRwb2ludC5cbiAqXG4gKiBAcGFyYW0gZW5kcG9pbnQgSHR0cChzKSBwcm90b2NvbCBlbmRwb2ludFxuICogQHJldHVybnMgV3MocykgcHJvdG9jb2wgZW5kcG9pbnQgb2YgdGhlIHNhbWUgYWRkcmVzc1xuICovXG5mdW5jdGlvbiBtYWtlV2Vic29ja2V0VXJsKGVuZHBvaW50KSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChcIndzXCIsIGVuZHBvaW50KTtcbiAgICBjb25zdCB1c2VIdHRwcyA9IHVybC5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgICB1cmwucHJvdG9jb2wgPSB1c2VIdHRwcyA/IFwid3NzOlwiIDogXCJ3czpcIjtcbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG59XG5leHBvcnRzLm1ha2VXZWJzb2NrZXRVcmwgPSBtYWtlV2Vic29ja2V0VXJsO1xuZnVuY3Rpb24gcmVtb3ZlTGVhZGluZzB4SWZFeGlzdHMoaWQpIHtcbiAgICBpZiAoaWQuc3RhcnRzV2l0aChcIjB4XCIpKSB7XG4gICAgICAgIHJldHVybiBpZC5zdWJzdHJpbmcoMik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxufVxuZXhwb3J0cy5yZW1vdmVMZWFkaW5nMHhJZkV4aXN0cyA9IHJlbW92ZUxlYWRpbmcweElmRXhpc3RzO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@pythnetwork+price-service-client@1.9.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/@pythnetwork/price-service-client/lib/utils.js\n");

/***/ })

};
;