"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm";
exports.ids = ["vendor-chunks/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/chat_models.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/chat_models.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatAnthropic: () => (/* binding */ ChatAnthropic),\n/* harmony export */   ChatAnthropicMessages: () => (/* binding */ ChatAnthropicMessages)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/.pnpm/@anthropic-ai+sdk@0.36.3/node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/language_models/base.js\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/.pnpm/zod-to-json-schema@3.24.1_zod@3.24.2/node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/utils/types.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var _output_parsers_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./output_parsers.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/output_parsers.js\");\n/* harmony import */ var _utils_tools_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/tools.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/tools.js\");\n/* harmony import */ var _utils_message_inputs_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/message_inputs.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_inputs.js\");\n/* harmony import */ var _utils_message_outputs_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/message_outputs.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_outputs.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/errors.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _toolsInParams(params) {\n    return !!(params.tools && params.tools.length > 0);\n}\nfunction _documentsInParams(params) {\n    for (const message of params.messages ?? []) {\n        if (typeof message.content === \"string\") {\n            continue;\n        }\n        for (const block of message.content ?? []) {\n            if (typeof block === \"object\" &&\n                block != null &&\n                block.type === \"document\" &&\n                typeof block.citations === \"object\" &&\n                block.citations.enabled) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isAnthropicTool(tool) {\n    return \"input_schema\" in tool;\n}\nfunction extractToken(chunk) {\n    if (typeof chunk.content === \"string\") {\n        return chunk.content;\n    }\n    else if (Array.isArray(chunk.content) &&\n        chunk.content.length >= 1 &&\n        \"input\" in chunk.content[0]) {\n        return typeof chunk.content[0].input === \"string\"\n            ? chunk.content[0].input\n            : JSON.stringify(chunk.content[0].input);\n    }\n    else if (Array.isArray(chunk.content) &&\n        chunk.content.length >= 1 &&\n        \"text\" in chunk.content[0]) {\n        return chunk.content[0].text;\n    }\n    return undefined;\n}\n/**\n * Anthropic chat model integration.\n *\n * Setup:\n * Install `@langchain/anthropic` and set an environment variable named `ANTHROPIC_API_KEY`.\n *\n * ```bash\n * npm install @langchain/anthropic\n * export ANTHROPIC_API_KEY=\"your-api-key\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_anthropic.ChatAnthropic.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_anthropic.ChatAnthropicCallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.bind`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.bind`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.bind({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     tool_choice: \"auto\",\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { ChatAnthropic } from '@langchain/anthropic';\n *\n * const llm = new ChatAnthropic({\n *   model: \"claude-3-5-sonnet-20240620\",\n *   temperature: 0,\n *   maxTokens: undefined,\n *   maxRetries: 2,\n *   // apiKey: \"...\",\n *   // baseUrl: \"...\",\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"msg_01QDpd78JUHpRP6bRRNyzbW3\",\n *   \"content\": \"Here's the translation to French:\\n\\nJ'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"id\": \"msg_01QDpd78JUHpRP6bRRNyzbW3\",\n *     \"model\": \"claude-3-5-sonnet-20240620\",\n *     \"stop_reason\": \"end_turn\",\n *     \"stop_sequence\": null,\n *     \"usage\": {\n *       \"input_tokens\": 25,\n *       \"output_tokens\": 19\n *     },\n *     \"type\": \"message\",\n *     \"role\": \"assistant\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 19,\n *     \"total_tokens\": 44\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"msg_01N8MwoYxiKo9w4chE4gXUs4\",\n *   \"content\": \"\",\n *   \"additional_kwargs\": {\n *     \"id\": \"msg_01N8MwoYxiKo9w4chE4gXUs4\",\n *     \"type\": \"message\",\n *     \"role\": \"assistant\",\n *     \"model\": \"claude-3-5-sonnet-20240620\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 1,\n *     \"total_tokens\": 26\n *   }\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n * }\n * AIMessageChunk {\n *   \"content\": \"Here\",\n * }\n * AIMessageChunk {\n *   \"content\": \"'s\",\n * }\n * AIMessageChunk {\n *   \"content\": \" the translation to\",\n * }\n * AIMessageChunk {\n *   \"content\": \" French:\\n\\nJ\",\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore la programmation\",\n * }\n * AIMessageChunk {\n *   \"content\": \".\",\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"additional_kwargs\": {\n *     \"stop_reason\": \"end_turn\",\n *     \"stop_sequence\": null\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 0,\n *     \"output_tokens\": 19,\n *     \"total_tokens\": 19\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"msg_01SBTb5zSGXfjUc7yQ8EKEEA\",\n *   \"content\": \"Here's the translation to French:\\n\\nJ'adore la programmation.\",\n *   \"additional_kwargs\": {\n *     \"id\": \"msg_01SBTb5zSGXfjUc7yQ8EKEEA\",\n *     \"type\": \"message\",\n *     \"role\": \"assistant\",\n *     \"model\": \"claude-3-5-sonnet-20240620\",\n *     \"stop_reason\": \"end_turn\",\n *     \"stop_sequence\": null\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 25,\n *     \"output_tokens\": 20,\n *     \"total_tokens\": 45\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools([GetWeather, GetPopulation]);\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     id: 'toolu_01WjW3Dann6BPJVtLhovdBD5',\n *     type: 'tool_call'\n *   },\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     id: 'toolu_01G6wfJgqi5zRmJomsmkyZXe',\n *     type: 'tool_call'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     id: 'toolu_0165qYWBA2VFyUst5RA18zew',\n *     type: 'tool_call'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     id: 'toolu_01PGNyP33vxr13tGqr7i3rDo',\n *     type: 'tool_call'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().optional().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, { name: \"Joke\" });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: \"Why don't cats play poker in the jungle?\",\n *   punchline: 'Too many cheetahs!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in this image appears to be beautiful and clear. The sky is a vibrant blue with scattered white clouds, suggesting a sunny and pleasant day. The clouds are wispy and light, indicating calm conditions without any signs of storms or heavy weather. The bright green grass on the rolling hills looks lush and well-watered, which could mean recent rainfall or good growing conditions. Overall, the scene depicts a perfect spring or early summer day with mild temperatures, plenty of sunshine, and gentle breezes - ideal weather for enjoying the outdoors or for plant growth.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 25, output_tokens: 19, total_tokens: 44 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Stream Usage Metadata</strong></summary>\n *\n * ```typescript\n * const streamForMetadata = await llm.stream(\n *   input,\n *   {\n *     streamUsage: true\n *   }\n * );\n * let fullForMetadata: AIMessageChunk | undefined;\n * for await (const chunk of streamForMetadata) {\n *   fullForMetadata = !fullForMetadata ? chunk : concat(fullForMetadata, chunk);\n * }\n * console.log(fullForMetadata?.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 25, output_tokens: 20, total_tokens: 45 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   id: 'msg_01STxeQxJmp4sCSpioD6vK3L',\n *   model: 'claude-3-5-sonnet-20240620',\n *   stop_reason: 'end_turn',\n *   stop_sequence: null,\n *   usage: { input_tokens: 25, output_tokens: 19 },\n *   type: 'message',\n *   role: 'assistant'\n * }\n * ```\n * </details>\n *\n * <br />\n */\nclass ChatAnthropicMessages extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__.BaseChatModel {\n    static lc_name() {\n        return \"ChatAnthropic\";\n    }\n    get lc_secrets() {\n        return {\n            anthropicApiKey: \"ANTHROPIC_API_KEY\",\n            apiKey: \"ANTHROPIC_API_KEY\",\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n        };\n    }\n    constructor(fields) {\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"anthropicApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: -1\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: -1\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 2048\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"claude-2.1\"\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"claude-2.1\"\n        });\n        Object.defineProperty(this, \"invocationKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"clientOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // Used for non-streaming requests\n        Object.defineProperty(this, \"batchClient\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // Used for streaming requests\n        Object.defineProperty(this, \"streamingClient\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streamUsage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * Optional method that returns an initialized underlying Anthropic client.\n         * Useful for accessing Anthropic models hosted on other cloud services\n         * such as Google Vertex.\n         */\n        Object.defineProperty(this, \"createClient\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.anthropicApiKey =\n            fields?.apiKey ??\n                fields?.anthropicApiKey ??\n                (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"ANTHROPIC_API_KEY\");\n        if (!this.anthropicApiKey && !fields?.createClient) {\n            throw new Error(\"Anthropic API key not found\");\n        }\n        this.clientOptions = fields?.clientOptions ?? {};\n        /** Keep anthropicApiKey for backwards compatibility */\n        this.apiKey = this.anthropicApiKey;\n        // Support overriding the default API URL (i.e., https://api.anthropic.com)\n        this.apiUrl = fields?.anthropicApiUrl;\n        /** Keep modelName for backwards compatibility */\n        this.modelName = fields?.model ?? fields?.modelName ?? this.model;\n        this.model = this.modelName;\n        this.invocationKwargs = fields?.invocationKwargs ?? {};\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.topK = fields?.topK ?? this.topK;\n        this.topP = fields?.topP ?? this.topP;\n        this.maxTokens =\n            fields?.maxTokensToSample ?? fields?.maxTokens ?? this.maxTokens;\n        this.stopSequences = fields?.stopSequences ?? this.stopSequences;\n        this.streaming = fields?.streaming ?? false;\n        this.streamUsage = fields?.streamUsage ?? this.streamUsage;\n        this.createClient =\n            fields?.createClient ??\n                ((options) => new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_14__.Anthropic(options));\n    }\n    getLsParams(options) {\n        const params = this.invocationParams(options);\n        return {\n            ls_provider: \"anthropic\",\n            ls_model_name: this.model,\n            ls_model_type: \"chat\",\n            ls_temperature: params.temperature ?? undefined,\n            ls_max_tokens: params.max_tokens ?? undefined,\n            ls_stop: options.stop,\n        };\n    }\n    /**\n     * Formats LangChain StructuredTools to AnthropicTools.\n     *\n     * @param {ChatAnthropicCallOptions[\"tools\"]} tools The tools to format\n     * @returns {AnthropicTool[] | undefined} The formatted tools, or undefined if none are passed.\n     */\n    formatStructuredToolToAnthropic(tools) {\n        if (!tools || !tools.length) {\n            return undefined;\n        }\n        return tools.map((tool) => {\n            if (isAnthropicTool(tool)) {\n                return tool;\n            }\n            if ((0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__.isOpenAITool)(tool)) {\n                return {\n                    name: tool.function.name,\n                    description: tool.function.description,\n                    input_schema: tool.function\n                        .parameters,\n                };\n            }\n            if ((0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_8__.isLangChainTool)(tool)) {\n                return {\n                    name: tool.name,\n                    description: tool.description,\n                    input_schema: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_5__.zodToJsonSchema)(tool.schema),\n                };\n            }\n            throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(tool, null, 2)}`);\n        });\n    }\n    bindTools(tools, kwargs) {\n        return this.bind({\n            tools: this.formatStructuredToolToAnthropic(tools),\n            ...kwargs,\n        });\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */\n    invocationParams(options) {\n        const tool_choice = (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_10__.handleToolChoice)(options?.tool_choice);\n        return {\n            model: this.model,\n            temperature: this.temperature,\n            top_k: this.topK,\n            top_p: this.topP,\n            stop_sequences: options?.stop ?? this.stopSequences,\n            stream: this.streaming,\n            max_tokens: this.maxTokens,\n            tools: this.formatStructuredToolToAnthropic(options?.tools),\n            tool_choice,\n            ...this.invocationKwargs,\n        };\n    }\n    /** @ignore */\n    _identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n        };\n    }\n    /**\n     * Get the identifying parameters for the model\n     */\n    identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n        };\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        const params = this.invocationParams(options);\n        const formattedMessages = (0,_utils_message_inputs_js__WEBPACK_IMPORTED_MODULE_11__._convertMessagesToAnthropicPayload)(messages);\n        const payload = {\n            ...params,\n            ...formattedMessages,\n            stream: true,\n        };\n        const coerceContentToString = !_toolsInParams(payload) && !_documentsInParams(payload);\n        const stream = await this.createStreamWithRetry(payload, {\n            headers: options.headers,\n        });\n        for await (const data of stream) {\n            if (options.signal?.aborted) {\n                stream.controller.abort();\n                throw new Error(\"AbortError: User aborted the request.\");\n            }\n            const shouldStreamUsage = this.streamUsage ?? options.streamUsage;\n            const result = (0,_utils_message_outputs_js__WEBPACK_IMPORTED_MODULE_12__._makeMessageChunkFromAnthropicEvent)(data, {\n                streamUsage: shouldStreamUsage,\n                coerceContentToString,\n            });\n            if (!result)\n                continue;\n            const { chunk } = result;\n            // Extract the text content token for text field and runManager.\n            const token = extractToken(chunk);\n            const generationChunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n                message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                    // Just yield chunk as it is and tool_use will be concat by BaseChatModel._generateUncached().\n                    content: chunk.content,\n                    additional_kwargs: chunk.additional_kwargs,\n                    tool_call_chunks: chunk.tool_call_chunks,\n                    usage_metadata: shouldStreamUsage ? chunk.usage_metadata : undefined,\n                    response_metadata: chunk.response_metadata,\n                    id: chunk.id,\n                }),\n                text: token ?? \"\",\n            });\n            yield generationChunk;\n            await runManager?.handleLLMNewToken(token ?? \"\", undefined, undefined, undefined, undefined, { chunk: generationChunk });\n        }\n    }\n    /** @ignore */\n    async _generateNonStreaming(messages, params, requestOptions) {\n        const response = await this.completionWithRetry({\n            ...params,\n            stream: false,\n            ...(0,_utils_message_inputs_js__WEBPACK_IMPORTED_MODULE_11__._convertMessagesToAnthropicPayload)(messages),\n        }, requestOptions);\n        const { content, ...additionalKwargs } = response;\n        const generations = (0,_utils_message_outputs_js__WEBPACK_IMPORTED_MODULE_12__.anthropicResponseToChatMessages)(content, additionalKwargs);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { role: _role, type: _type, ...rest } = additionalKwargs;\n        return { generations, llmOutput: rest };\n    }\n    /** @ignore */\n    async _generate(messages, options, runManager) {\n        if (this.stopSequences && options.stop) {\n            throw new Error(`\"stopSequence\" parameter found in input and default params`);\n        }\n        const params = this.invocationParams(options);\n        if (params.stream) {\n            let finalChunk;\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            for await (const chunk of stream) {\n                if (finalChunk === undefined) {\n                    finalChunk = chunk;\n                }\n                else {\n                    finalChunk = finalChunk.concat(chunk);\n                }\n            }\n            if (finalChunk === undefined) {\n                throw new Error(\"No chunks returned from Anthropic API.\");\n            }\n            return {\n                generations: [\n                    {\n                        text: finalChunk.text,\n                        message: finalChunk.message,\n                    },\n                ],\n            };\n        }\n        else {\n            return this._generateNonStreaming(messages, params, {\n                signal: options.signal,\n                headers: options.headers,\n            });\n        }\n    }\n    /**\n     * Creates a streaming request with retry.\n     * @param request The parameters for creating a completion.\n     * @param options\n     * @returns A streaming request.\n     */\n    async createStreamWithRetry(request, options) {\n        if (!this.streamingClient) {\n            const options_ = this.apiUrl ? { baseURL: this.apiUrl } : undefined;\n            this.streamingClient = this.createClient({\n                dangerouslyAllowBrowser: true,\n                ...this.clientOptions,\n                ...options_,\n                apiKey: this.apiKey,\n                // Prefer LangChain built-in retries\n                maxRetries: 0,\n            });\n        }\n        const makeCompletionRequest = async () => {\n            try {\n                return await this.streamingClient.messages.create({\n                    ...request,\n                    ...this.invocationKwargs,\n                    stream: true,\n                }, options);\n            }\n            catch (e) {\n                const error = (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_13__.wrapAnthropicClientError)(e);\n                throw error;\n            }\n        };\n        return this.caller.call(makeCompletionRequest);\n    }\n    /** @ignore */\n    async completionWithRetry(request, options) {\n        if (!this.batchClient) {\n            const options = this.apiUrl ? { baseURL: this.apiUrl } : undefined;\n            this.batchClient = this.createClient({\n                dangerouslyAllowBrowser: true,\n                ...this.clientOptions,\n                ...options,\n                apiKey: this.apiKey,\n                maxRetries: 0,\n            });\n        }\n        const makeCompletionRequest = async () => {\n            try {\n                return await this.batchClient.messages.create({\n                    ...request,\n                    ...this.invocationKwargs,\n                }, options);\n            }\n            catch (e) {\n                const error = (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_13__.wrapAnthropicClientError)(e);\n                throw error;\n            }\n        };\n        return this.caller.callWithOptions({ signal: options.signal ?? undefined }, makeCompletionRequest);\n    }\n    _llmType() {\n        return \"anthropic\";\n    }\n    withStructuredOutput(outputSchema, config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const schema = outputSchema;\n        const name = config?.name;\n        const method = config?.method;\n        const includeRaw = config?.includeRaw;\n        if (method === \"jsonMode\") {\n            throw new Error(`Anthropic only supports \"functionCalling\" as a method.`);\n        }\n        let functionName = name ?? \"extract\";\n        let outputParser;\n        let tools;\n        if ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_7__.isZodSchema)(schema)) {\n            const jsonSchema = (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_5__.zodToJsonSchema)(schema);\n            tools = [\n                {\n                    name: functionName,\n                    description: jsonSchema.description ?? \"A function available to call.\",\n                    input_schema: jsonSchema,\n                },\n            ];\n            outputParser = new _output_parsers_js__WEBPACK_IMPORTED_MODULE_9__.AnthropicToolsOutputParser({\n                returnSingle: true,\n                keyName: functionName,\n                zodSchema: schema,\n            });\n        }\n        else {\n            let anthropicTools;\n            if (typeof schema.name === \"string\" &&\n                typeof schema.description === \"string\" &&\n                typeof schema.input_schema === \"object\" &&\n                schema.input_schema != null) {\n                anthropicTools = schema;\n                functionName = schema.name;\n            }\n            else {\n                anthropicTools = {\n                    name: functionName,\n                    description: schema.description ?? \"\",\n                    input_schema: schema,\n                };\n            }\n            tools = [anthropicTools];\n            outputParser = new _output_parsers_js__WEBPACK_IMPORTED_MODULE_9__.AnthropicToolsOutputParser({\n                returnSingle: true,\n                keyName: functionName,\n            });\n        }\n        const llm = this.bind({\n            tools,\n            tool_choice: {\n                type: \"tool\",\n                name: functionName,\n            },\n        });\n        if (!includeRaw) {\n            return llm.pipe(outputParser).withConfig({\n                runName: \"ChatAnthropicStructuredOutput\",\n            });\n        }\n        const parserAssign = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_6__.RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config) => outputParser.invoke(input.raw, config),\n        });\n        const parserNone = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_6__.RunnablePassthrough.assign({\n            parsed: () => null,\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [parserNone],\n        });\n        return _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_6__.RunnableSequence.from([\n            {\n                raw: llm,\n            },\n            parsedWithFallback,\n        ]).withConfig({\n            runName: \"StructuredOutputRunnable\",\n        });\n    }\n}\nclass ChatAnthropic extends ChatAnthropicMessages {\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThDO0FBQ1k7QUFDSTtBQUNLO0FBQ1U7QUFDUjtBQUNoQjtBQUM4QjtBQUN6QjtBQUNlO0FBQ1I7QUFDYjtBQUMyQjtBQUNvQztBQUN0RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCO0FBQzdCLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxlQUFlLDBCQUEwQjtBQUN6QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxlQUFlLDBCQUEwQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsMERBQTBELGNBQWM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUEwRDtBQUNuRTtBQUNBO0FBQ0Esc0JBQXNCLHNCQUFzQixTQUFTLFlBQVksR0FBRztBQUNwRSxRQUFRO0FBQ1I7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFDQUFxQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sb0NBQW9DLHNGQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpRkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseURBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQ0FBbUM7QUFDbEQsaUJBQWlCLDZCQUE2QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0ZBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUZBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG1FQUFlO0FBQ2pEO0FBQ0E7QUFDQSwwRUFBMEUsOEJBQThCO0FBQ3hHLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDZGQUFrQztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrRkFBbUM7QUFDOUQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBLHdDQUF3Qyx3RUFBbUI7QUFDM0QsNkJBQTZCLG9FQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkdBQTJHLHdCQUF3QjtBQUNuSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkZBQWtDO0FBQ2pELFNBQVM7QUFDVCxnQkFBZ0IsK0JBQStCO0FBQy9DLDRCQUE0QiwyRkFBK0I7QUFDM0Q7QUFDQSxnQkFBZ0Isb0NBQW9DO0FBQ3BELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHVCQUF1QjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsOEJBQThCLDJFQUF3QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVCQUF1QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSw4QkFBOEIsMkVBQXdCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxxQ0FBcUM7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdFQUFXO0FBQ3ZCLCtCQUErQixtRUFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsK0JBQStCLDBFQUEwQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBFQUEwQjtBQUN6RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsNkJBQTZCLDBFQUFtQjtBQUNoRDtBQUNBO0FBQ0EsU0FBUztBQUNULDJCQUEyQiwwRUFBbUI7QUFDOUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlLHVFQUFnQjtBQUMvQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rYW50aHJvcGljQDAuMy4xM19AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9xd2JzbW82bXNxcm8zbmsycXdyNHM3amVsbS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hbnRocm9waWMvZGlzdC9jaGF0X21vZGVscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbnRocm9waWMgfSBmcm9tIFwiQGFudGhyb3BpYy1haS9zZGtcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0c1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBCYXNlQ2hhdE1vZGVsLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzXCI7XG5pbXBvcnQgeyBpc09wZW5BSVRvb2wsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvYmFzZVwiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgUnVubmFibGVQYXNzdGhyb3VnaCwgUnVubmFibGVTZXF1ZW5jZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgaXNab2RTY2hlbWEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3R5cGVzXCI7XG5pbXBvcnQgeyBpc0xhbmdDaGFpblRvb2wgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmdcIjtcbmltcG9ydCB7IEFudGhyb3BpY1Rvb2xzT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vb3V0cHV0X3BhcnNlcnMuanNcIjtcbmltcG9ydCB7IGhhbmRsZVRvb2xDaG9pY2UgfSBmcm9tIFwiLi91dGlscy90b29scy5qc1wiO1xuaW1wb3J0IHsgX2NvbnZlcnRNZXNzYWdlc1RvQW50aHJvcGljUGF5bG9hZCB9IGZyb20gXCIuL3V0aWxzL21lc3NhZ2VfaW5wdXRzLmpzXCI7XG5pbXBvcnQgeyBfbWFrZU1lc3NhZ2VDaHVua0Zyb21BbnRocm9waWNFdmVudCwgYW50aHJvcGljUmVzcG9uc2VUb0NoYXRNZXNzYWdlcywgfSBmcm9tIFwiLi91dGlscy9tZXNzYWdlX291dHB1dHMuanNcIjtcbmltcG9ydCB7IHdyYXBBbnRocm9waWNDbGllbnRFcnJvciB9IGZyb20gXCIuL3V0aWxzL2Vycm9ycy5qc1wiO1xuZnVuY3Rpb24gX3Rvb2xzSW5QYXJhbXMocGFyYW1zKSB7XG4gICAgcmV0dXJuICEhKHBhcmFtcy50b29scyAmJiBwYXJhbXMudG9vbHMubGVuZ3RoID4gMCk7XG59XG5mdW5jdGlvbiBfZG9jdW1lbnRzSW5QYXJhbXMocGFyYW1zKSB7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHBhcmFtcy5tZXNzYWdlcyA/PyBbXSkge1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBibG9jayBvZiBtZXNzYWdlLmNvbnRlbnQgPz8gW10pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmxvY2sgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBibG9jayAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgYmxvY2sudHlwZSA9PT0gXCJkb2N1bWVudFwiICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGJsb2NrLmNpdGF0aW9ucyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIGJsb2NrLmNpdGF0aW9ucy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIGlzQW50aHJvcGljVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIFwiaW5wdXRfc2NoZW1hXCIgaW4gdG9vbDtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RUb2tlbihjaHVuaykge1xuICAgIGlmICh0eXBlb2YgY2h1bmsuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gY2h1bmsuY29udGVudDtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjaHVuay5jb250ZW50KSAmJlxuICAgICAgICBjaHVuay5jb250ZW50Lmxlbmd0aCA+PSAxICYmXG4gICAgICAgIFwiaW5wdXRcIiBpbiBjaHVuay5jb250ZW50WzBdKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY2h1bmsuY29udGVudFswXS5pbnB1dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBjaHVuay5jb250ZW50WzBdLmlucHV0XG4gICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGNodW5rLmNvbnRlbnRbMF0uaW5wdXQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNodW5rLmNvbnRlbnQpICYmXG4gICAgICAgIGNodW5rLmNvbnRlbnQubGVuZ3RoID49IDEgJiZcbiAgICAgICAgXCJ0ZXh0XCIgaW4gY2h1bmsuY29udGVudFswXSkge1xuICAgICAgICByZXR1cm4gY2h1bmsuY29udGVudFswXS50ZXh0O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBBbnRocm9waWMgY2hhdCBtb2RlbCBpbnRlZ3JhdGlvbi5cbiAqXG4gKiBTZXR1cDpcbiAqIEluc3RhbGwgYEBsYW5nY2hhaW4vYW50aHJvcGljYCBhbmQgc2V0IGFuIGVudmlyb25tZW50IHZhcmlhYmxlIG5hbWVkIGBBTlRIUk9QSUNfQVBJX0tFWWAuXG4gKlxuICogYGBgYmFzaFxuICogbnBtIGluc3RhbGwgQGxhbmdjaGFpbi9hbnRocm9waWNcbiAqIGV4cG9ydCBBTlRIUk9QSUNfQVBJX0tFWT1cInlvdXItYXBpLWtleVwiXG4gKiBgYGBcbiAqXG4gKiAjIyBbQ29uc3RydWN0b3IgYXJnc10oaHR0cHM6Ly9hcGkuanMubGFuZ2NoYWluLmNvbS9jbGFzc2VzL2xhbmdjaGFpbl9hbnRocm9waWMuQ2hhdEFudGhyb3BpYy5odG1sI2NvbnN0cnVjdG9yKVxuICpcbiAqICMjIFtSdW50aW1lIGFyZ3NdKGh0dHBzOi8vYXBpLmpzLmxhbmdjaGFpbi5jb20vaW50ZXJmYWNlcy9sYW5nY2hhaW5fYW50aHJvcGljLkNoYXRBbnRocm9waWNDYWxsT3B0aW9ucy5odG1sKVxuICpcbiAqIFJ1bnRpbWUgYXJncyBjYW4gYmUgcGFzc2VkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gYW55IG9mIHRoZSBiYXNlIHJ1bm5hYmxlIG1ldGhvZHMgYC5pbnZva2VgLiBgLnN0cmVhbWAsIGAuYmF0Y2hgLCBldGMuXG4gKiBUaGV5IGNhbiBhbHNvIGJlIHBhc3NlZCB2aWEgYC5iaW5kYCwgb3IgdGhlIHNlY29uZCBhcmcgaW4gYC5iaW5kVG9vbHNgLCBsaWtlIHNob3duIGluIHRoZSBleGFtcGxlcyBiZWxvdzpcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBXaGVuIGNhbGxpbmcgYC5iaW5kYCwgY2FsbCBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudFxuICogY29uc3QgbGxtV2l0aEFyZ3NCb3VuZCA9IGxsbS5iaW5kKHtcbiAqICAgc3RvcDogW1wiXFxuXCJdLFxuICogICB0b29sczogWy4uLl0sXG4gKiB9KTtcbiAqXG4gKiAvLyBXaGVuIGNhbGxpbmcgYC5iaW5kVG9vbHNgLCBjYWxsIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgdGhlIHNlY29uZCBhcmd1bWVudFxuICogY29uc3QgbGxtV2l0aFRvb2xzID0gbGxtLmJpbmRUb29scyhcbiAqICAgWy4uLl0sXG4gKiAgIHtcbiAqICAgICB0b29sX2Nob2ljZTogXCJhdXRvXCIsXG4gKiAgIH1cbiAqICk7XG4gKiBgYGBcbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIDxkZXRhaWxzIG9wZW4+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkluc3RhbnRpYXRlPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENoYXRBbnRocm9waWMgfSBmcm9tICdAbGFuZ2NoYWluL2FudGhyb3BpYyc7XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuICogICBtb2RlbDogXCJjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMFwiLFxuICogICB0ZW1wZXJhdHVyZTogMCxcbiAqICAgbWF4VG9rZW5zOiB1bmRlZmluZWQsXG4gKiAgIG1heFJldHJpZXM6IDIsXG4gKiAgIC8vIGFwaUtleTogXCIuLi5cIixcbiAqICAgLy8gYmFzZVVybDogXCIuLi5cIixcbiAqICAgLy8gb3RoZXIgcGFyYW1zLi4uXG4gKiB9KTtcbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5JbnZva2luZzwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBpbnB1dCA9IGBUcmFuc2xhdGUgXCJJIGxvdmUgcHJvZ3JhbW1pbmdcIiBpbnRvIEZyZW5jaC5gO1xuICpcbiAqIC8vIE1vZGVscyBhbHNvIGFjY2VwdCBhIGxpc3Qgb2YgY2hhdCBtZXNzYWdlcyBvciBhIGZvcm1hdHRlZCBwcm9tcHRcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxsbS5pbnZva2UoaW5wdXQpO1xuICogY29uc29sZS5sb2cocmVzdWx0KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlIHtcbiAqICAgXCJpZFwiOiBcIm1zZ18wMVFEcGQ3OEpVSHBSUDZiUlJOeXpiVzNcIixcbiAqICAgXCJjb250ZW50XCI6IFwiSGVyZSdzIHRoZSB0cmFuc2xhdGlvbiB0byBGcmVuY2g6XFxuXFxuSidhZG9yZSBsYSBwcm9ncmFtbWF0aW9uLlwiLFxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlkXCI6IFwibXNnXzAxUURwZDc4SlVIcFJQNmJSUk55emJXM1wiLFxuICogICAgIFwibW9kZWxcIjogXCJjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMFwiLFxuICogICAgIFwic3RvcF9yZWFzb25cIjogXCJlbmRfdHVyblwiLFxuICogICAgIFwic3RvcF9zZXF1ZW5jZVwiOiBudWxsLFxuICogICAgIFwidXNhZ2VcIjoge1xuICogICAgICAgXCJpbnB1dF90b2tlbnNcIjogMjUsXG4gKiAgICAgICBcIm91dHB1dF90b2tlbnNcIjogMTlcbiAqICAgICB9LFxuICogICAgIFwidHlwZVwiOiBcIm1lc3NhZ2VcIixcbiAqICAgICBcInJvbGVcIjogXCJhc3Npc3RhbnRcIlxuICogICB9LFxuICogICBcInVzYWdlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlucHV0X3Rva2Vuc1wiOiAyNSxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogMTksXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogNDRcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPlN0cmVhbWluZyBDaHVua3M8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBhd2FpdCBsbG0uc3RyZWFtKGlucHV0KSkge1xuICogICBjb25zb2xlLmxvZyhjaHVuayk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJpZFwiOiBcIm1zZ18wMU44TXdvWXhpS285dzRjaEU0Z1hVczRcIixcbiAqICAgXCJjb250ZW50XCI6IFwiXCIsXG4gKiAgIFwiYWRkaXRpb25hbF9rd2FyZ3NcIjoge1xuICogICAgIFwiaWRcIjogXCJtc2dfMDFOOE13b1l4aUtvOXc0Y2hFNGdYVXM0XCIsXG4gKiAgICAgXCJ0eXBlXCI6IFwibWVzc2FnZVwiLFxuICogICAgIFwicm9sZVwiOiBcImFzc2lzdGFudFwiLFxuICogICAgIFwibW9kZWxcIjogXCJjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMFwiXG4gKiAgIH0sXG4gKiAgIFwidXNhZ2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwiaW5wdXRfdG9rZW5zXCI6IDI1LFxuICogICAgIFwib3V0cHV0X3Rva2Vuc1wiOiAxLFxuICogICAgIFwidG90YWxfdG9rZW5zXCI6IDI2XG4gKiAgIH1cbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiXCIsXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIkhlcmVcIixcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiJ3NcIixcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiIHRoZSB0cmFuc2xhdGlvbiB0b1wiLFxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCIgRnJlbmNoOlxcblxcbkpcIixcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiJ2Fkb3JlIGxhIHByb2dyYW1tYXRpb25cIixcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiLlwiLFxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCJcIixcbiAqICAgXCJhZGRpdGlvbmFsX2t3YXJnc1wiOiB7XG4gKiAgICAgXCJzdG9wX3JlYXNvblwiOiBcImVuZF90dXJuXCIsXG4gKiAgICAgXCJzdG9wX3NlcXVlbmNlXCI6IG51bGxcbiAqICAgfSxcbiAqICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMCxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogMTksXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogMTlcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkFnZ3JlZ2F0ZSBTdHJlYW1lZCBDaHVua3M8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMnO1xuICogaW1wb3J0IHsgY29uY2F0IH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3N0cmVhbSc7XG4gKlxuICogY29uc3Qgc3RyZWFtID0gYXdhaXQgbGxtLnN0cmVhbShpbnB1dCk7XG4gKiBsZXQgZnVsbDogQUlNZXNzYWdlQ2h1bmsgfCB1bmRlZmluZWQ7XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICogICBmdWxsID0gIWZ1bGwgPyBjaHVuayA6IGNvbmNhdChmdWxsLCBjaHVuayk7XG4gKiB9XG4gKiBjb25zb2xlLmxvZyhmdWxsKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImlkXCI6IFwibXNnXzAxU0JUYjV6U0dYZmpVYzd5UThFS0VFQVwiLFxuICogICBcImNvbnRlbnRcIjogXCJIZXJlJ3MgdGhlIHRyYW5zbGF0aW9uIHRvIEZyZW5jaDpcXG5cXG5KJ2Fkb3JlIGxhIHByb2dyYW1tYXRpb24uXCIsXG4gKiAgIFwiYWRkaXRpb25hbF9rd2FyZ3NcIjoge1xuICogICAgIFwiaWRcIjogXCJtc2dfMDFTQlRiNXpTR1hmalVjN3lROEVLRUVBXCIsXG4gKiAgICAgXCJ0eXBlXCI6IFwibWVzc2FnZVwiLFxuICogICAgIFwicm9sZVwiOiBcImFzc2lzdGFudFwiLFxuICogICAgIFwibW9kZWxcIjogXCJjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMFwiLFxuICogICAgIFwic3RvcF9yZWFzb25cIjogXCJlbmRfdHVyblwiLFxuICogICAgIFwic3RvcF9zZXF1ZW5jZVwiOiBudWxsXG4gKiAgIH0sXG4gKiAgIFwidXNhZ2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwiaW5wdXRfdG9rZW5zXCI6IDI1LFxuICogICAgIFwib3V0cHV0X3Rva2Vuc1wiOiAyMCxcbiAqICAgICBcInRvdGFsX3Rva2Vuc1wiOiA0NVxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+QmluZCB0b29sczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbiAqXG4gKiBjb25zdCBHZXRXZWF0aGVyID0ge1xuICogICBuYW1lOiBcIkdldFdlYXRoZXJcIixcbiAqICAgZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHdlYXRoZXIgaW4gYSBnaXZlbiBsb2NhdGlvblwiLFxuICogICBzY2hlbWE6IHoub2JqZWN0KHtcbiAqICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBjaXR5IGFuZCBzdGF0ZSwgZS5nLiBTYW4gRnJhbmNpc2NvLCBDQVwiKVxuICogICB9KSxcbiAqIH1cbiAqXG4gKiBjb25zdCBHZXRQb3B1bGF0aW9uID0ge1xuICogICBuYW1lOiBcIkdldFBvcHVsYXRpb25cIixcbiAqICAgZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHBvcHVsYXRpb24gaW4gYSBnaXZlbiBsb2NhdGlvblwiLFxuICogICBzY2hlbWE6IHoub2JqZWN0KHtcbiAqICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBjaXR5IGFuZCBzdGF0ZSwgZS5nLiBTYW4gRnJhbmNpc2NvLCBDQVwiKVxuICogICB9KSxcbiAqIH1cbiAqXG4gKiBjb25zdCBsbG1XaXRoVG9vbHMgPSBsbG0uYmluZFRvb2xzKFtHZXRXZWF0aGVyLCBHZXRQb3B1bGF0aW9uXSk7XG4gKiBjb25zdCBhaU1zZyA9IGF3YWl0IGxsbVdpdGhUb29scy5pbnZva2UoXG4gKiAgIFwiV2hpY2ggY2l0eSBpcyBob3R0ZXIgdG9kYXkgYW5kIHdoaWNoIGlzIGJpZ2dlcjogTEEgb3IgTlk/XCJcbiAqICk7XG4gKiBjb25zb2xlLmxvZyhhaU1zZy50b29sX2NhbGxzKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogW1xuICogICB7XG4gKiAgICAgbmFtZTogJ0dldFdlYXRoZXInLFxuICogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdMb3MgQW5nZWxlcywgQ0EnIH0sXG4gKiAgICAgaWQ6ICd0b29sdV8wMVdqVzNEYW5uNkJQSlZ0TGhvdmRCRDUnLFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBuYW1lOiAnR2V0V2VhdGhlcicsXG4gKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ05ldyBZb3JrLCBOWScgfSxcbiAqICAgICBpZDogJ3Rvb2x1XzAxRzZ3ZkpncWk1elJtSm9tc21reVpYZScsXG4gKiAgICAgdHlwZTogJ3Rvb2xfY2FsbCdcbiAqICAgfSxcbiAqICAge1xuICogICAgIG5hbWU6ICdHZXRQb3B1bGF0aW9uJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTG9zIEFuZ2VsZXMsIENBJyB9LFxuICogICAgIGlkOiAndG9vbHVfMDE2NXFZV0JBMlZGeVVzdDVSQTE4emV3JyxcbiAqICAgICB0eXBlOiAndG9vbF9jYWxsJ1xuICogICB9LFxuICogICB7XG4gKiAgICAgbmFtZTogJ0dldFBvcHVsYXRpb24nLFxuICogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdOZXcgWW9yaywgTlknIH0sXG4gKiAgICAgaWQ6ICd0b29sdV8wMVBHTnlQMzN2eHIxM3RHcXI3aTNyRG8nLFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnXG4gKiAgIH1cbiAqIF1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5TdHJ1Y3R1cmVkIE91dHB1dDwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbiAqXG4gKiBjb25zdCBKb2tlID0gei5vYmplY3Qoe1xuICogICBzZXR1cDogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBzZXR1cCBvZiB0aGUgam9rZVwiKSxcbiAqICAgcHVuY2hsaW5lOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiVGhlIHB1bmNobGluZSB0byB0aGUgam9rZVwiKSxcbiAqICAgcmF0aW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJIb3cgZnVubnkgdGhlIGpva2UgaXMsIGZyb20gMSB0byAxMFwiKVxuICogfSkuZGVzY3JpYmUoJ0pva2UgdG8gdGVsbCB1c2VyLicpO1xuICpcbiAqIGNvbnN0IHN0cnVjdHVyZWRMbG0gPSBsbG0ud2l0aFN0cnVjdHVyZWRPdXRwdXQoSm9rZSwgeyBuYW1lOiBcIkpva2VcIiB9KTtcbiAqIGNvbnN0IGpva2VSZXN1bHQgPSBhd2FpdCBzdHJ1Y3R1cmVkTGxtLmludm9rZShcIlRlbGwgbWUgYSBqb2tlIGFib3V0IGNhdHNcIik7XG4gKiBjb25zb2xlLmxvZyhqb2tlUmVzdWx0KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICBzZXR1cDogXCJXaHkgZG9uJ3QgY2F0cyBwbGF5IHBva2VyIGluIHRoZSBqdW5nbGU/XCIsXG4gKiAgIHB1bmNobGluZTogJ1RvbyBtYW55IGNoZWV0YWhzIScsXG4gKiAgIHJhdGluZzogN1xuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPk11bHRpbW9kYWw8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbiAqXG4gKiBjb25zdCBpbWFnZVVybCA9IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIjtcbiAqIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKS50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSk7XG4gKiBjb25zdCBiYXNlNjRJbWFnZSA9IEJ1ZmZlci5mcm9tKGltYWdlRGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICpcbiAqIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHtcbiAqICAgY29udGVudDogW1xuICogICAgIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiZGVzY3JpYmUgdGhlIHdlYXRoZXIgaW4gdGhpcyBpbWFnZVwiIH0sXG4gKiAgICAge1xuICogICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAqICAgICAgIGltYWdlX3VybDogeyB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YCB9LFxuICogICAgIH0sXG4gKiAgIF1cbiAqIH0pO1xuICpcbiAqIGNvbnN0IGltYWdlRGVzY3JpcHRpb25BaU1zZyA9IGF3YWl0IGxsbS5pbnZva2UoW21lc3NhZ2VdKTtcbiAqIGNvbnNvbGUubG9nKGltYWdlRGVzY3JpcHRpb25BaU1zZy5jb250ZW50KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogVGhlIHdlYXRoZXIgaW4gdGhpcyBpbWFnZSBhcHBlYXJzIHRvIGJlIGJlYXV0aWZ1bCBhbmQgY2xlYXIuIFRoZSBza3kgaXMgYSB2aWJyYW50IGJsdWUgd2l0aCBzY2F0dGVyZWQgd2hpdGUgY2xvdWRzLCBzdWdnZXN0aW5nIGEgc3VubnkgYW5kIHBsZWFzYW50IGRheS4gVGhlIGNsb3VkcyBhcmUgd2lzcHkgYW5kIGxpZ2h0LCBpbmRpY2F0aW5nIGNhbG0gY29uZGl0aW9ucyB3aXRob3V0IGFueSBzaWducyBvZiBzdG9ybXMgb3IgaGVhdnkgd2VhdGhlci4gVGhlIGJyaWdodCBncmVlbiBncmFzcyBvbiB0aGUgcm9sbGluZyBoaWxscyBsb29rcyBsdXNoIGFuZCB3ZWxsLXdhdGVyZWQsIHdoaWNoIGNvdWxkIG1lYW4gcmVjZW50IHJhaW5mYWxsIG9yIGdvb2QgZ3Jvd2luZyBjb25kaXRpb25zLiBPdmVyYWxsLCB0aGUgc2NlbmUgZGVwaWN0cyBhIHBlcmZlY3Qgc3ByaW5nIG9yIGVhcmx5IHN1bW1lciBkYXkgd2l0aCBtaWxkIHRlbXBlcmF0dXJlcywgcGxlbnR5IG9mIHN1bnNoaW5lLCBhbmQgZ2VudGxlIGJyZWV6ZXMgLSBpZGVhbCB3ZWF0aGVyIGZvciBlbmpveWluZyB0aGUgb3V0ZG9vcnMgb3IgZm9yIHBsYW50IGdyb3d0aC5cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5Vc2FnZSBNZXRhZGF0YTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhaU1zZ0Zvck1ldGFkYXRhID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4gKiBjb25zb2xlLmxvZyhhaU1zZ0Zvck1ldGFkYXRhLnVzYWdlX21ldGFkYXRhKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogeyBpbnB1dF90b2tlbnM6IDI1LCBvdXRwdXRfdG9rZW5zOiAxOSwgdG90YWxfdG9rZW5zOiA0NCB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+U3RyZWFtIFVzYWdlIE1ldGFkYXRhPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHN0cmVhbUZvck1ldGFkYXRhID0gYXdhaXQgbGxtLnN0cmVhbShcbiAqICAgaW5wdXQsXG4gKiAgIHtcbiAqICAgICBzdHJlYW1Vc2FnZTogdHJ1ZVxuICogICB9XG4gKiApO1xuICogbGV0IGZ1bGxGb3JNZXRhZGF0YTogQUlNZXNzYWdlQ2h1bmsgfCB1bmRlZmluZWQ7XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbUZvck1ldGFkYXRhKSB7XG4gKiAgIGZ1bGxGb3JNZXRhZGF0YSA9ICFmdWxsRm9yTWV0YWRhdGEgPyBjaHVuayA6IGNvbmNhdChmdWxsRm9yTWV0YWRhdGEsIGNodW5rKTtcbiAqIH1cbiAqIGNvbnNvbGUubG9nKGZ1bGxGb3JNZXRhZGF0YT8udXNhZ2VfbWV0YWRhdGEpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiB7IGlucHV0X3Rva2VuczogMjUsIG91dHB1dF90b2tlbnM6IDIwLCB0b3RhbF90b2tlbnM6IDQ1IH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5SZXNwb25zZSBNZXRhZGF0YTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhaU1zZ0ZvclJlc3BvbnNlTWV0YWRhdGEgPSBhd2FpdCBsbG0uaW52b2tlKGlucHV0KTtcbiAqIGNvbnNvbGUubG9nKGFpTXNnRm9yUmVzcG9uc2VNZXRhZGF0YS5yZXNwb25zZV9tZXRhZGF0YSk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHtcbiAqICAgaWQ6ICdtc2dfMDFTVHhlUXhKbXA0c0NTcGlvRDZ2SzNMJyxcbiAqICAgbW9kZWw6ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMCcsXG4gKiAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nLFxuICogICBzdG9wX3NlcXVlbmNlOiBudWxsLFxuICogICB1c2FnZTogeyBpbnB1dF90b2tlbnM6IDI1LCBvdXRwdXRfdG9rZW5zOiAxOSB9LFxuICogICB0eXBlOiAnbWVzc2FnZScsXG4gKiAgIHJvbGU6ICdhc3Npc3RhbnQnXG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRBbnRocm9waWNNZXNzYWdlcyBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0QW50aHJvcGljXCI7XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW50aHJvcGljQXBpS2V5OiBcIkFOVEhST1BJQ19BUElfS0VZXCIsXG4gICAgICAgICAgICBhcGlLZXk6IFwiQU5USFJPUElDX0FQSV9LRVlcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbE5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYW50aHJvcGljQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcGlVcmxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcEtcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IC0xXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BQXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VG9rZW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAyMDQ4XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiY2xhdWRlLTIuMVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjbGF1ZGUtMi4xXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludm9jYXRpb25Ld2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFNlcXVlbmNlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRPcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFVzZWQgZm9yIG5vbi1zdHJlYW1pbmcgcmVxdWVzdHNcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmF0Y2hDbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVXNlZCBmb3Igc3RyZWFtaW5nIHJlcXVlc3RzXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbWluZ0NsaWVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1Vc2FnZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9wdGlvbmFsIG1ldGhvZCB0aGF0IHJldHVybnMgYW4gaW5pdGlhbGl6ZWQgdW5kZXJseWluZyBBbnRocm9waWMgY2xpZW50LlxuICAgICAgICAgKiBVc2VmdWwgZm9yIGFjY2Vzc2luZyBBbnRocm9waWMgbW9kZWxzIGhvc3RlZCBvbiBvdGhlciBjbG91ZCBzZXJ2aWNlc1xuICAgICAgICAgKiBzdWNoIGFzIEdvb2dsZSBWZXJ0ZXguXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjcmVhdGVDbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbnRocm9waWNBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5hcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmFudGhyb3BpY0FwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBTlRIUk9QSUNfQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmFudGhyb3BpY0FwaUtleSAmJiAhZmllbGRzPy5jcmVhdGVDbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFudGhyb3BpYyBBUEkga2V5IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudE9wdGlvbnMgPSBmaWVsZHM/LmNsaWVudE9wdGlvbnMgPz8ge307XG4gICAgICAgIC8qKiBLZWVwIGFudGhyb3BpY0FwaUtleSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgKi9cbiAgICAgICAgdGhpcy5hcGlLZXkgPSB0aGlzLmFudGhyb3BpY0FwaUtleTtcbiAgICAgICAgLy8gU3VwcG9ydCBvdmVycmlkaW5nIHRoZSBkZWZhdWx0IEFQSSBVUkwgKGkuZS4sIGh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20pXG4gICAgICAgIHRoaXMuYXBpVXJsID0gZmllbGRzPy5hbnRocm9waWNBcGlVcmw7XG4gICAgICAgIC8qKiBLZWVwIG1vZGVsTmFtZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgKi9cbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPSBmaWVsZHM/Lm1vZGVsID8/IGZpZWxkcz8ubW9kZWxOYW1lID8/IHRoaXMubW9kZWw7XG4gICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5pbnZvY2F0aW9uS3dhcmdzID0gZmllbGRzPy5pbnZvY2F0aW9uS3dhcmdzID8/IHt9O1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlO1xuICAgICAgICB0aGlzLnRvcEsgPSBmaWVsZHM/LnRvcEsgPz8gdGhpcy50b3BLO1xuICAgICAgICB0aGlzLnRvcFAgPSBmaWVsZHM/LnRvcFAgPz8gdGhpcy50b3BQO1xuICAgICAgICB0aGlzLm1heFRva2VucyA9XG4gICAgICAgICAgICBmaWVsZHM/Lm1heFRva2Vuc1RvU2FtcGxlID8/IGZpZWxkcz8ubWF4VG9rZW5zID8/IHRoaXMubWF4VG9rZW5zO1xuICAgICAgICB0aGlzLnN0b3BTZXF1ZW5jZXMgPSBmaWVsZHM/LnN0b3BTZXF1ZW5jZXMgPz8gdGhpcy5zdG9wU2VxdWVuY2VzO1xuICAgICAgICB0aGlzLnN0cmVhbWluZyA9IGZpZWxkcz8uc3RyZWFtaW5nID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnN0cmVhbVVzYWdlID0gZmllbGRzPy5zdHJlYW1Vc2FnZSA/PyB0aGlzLnN0cmVhbVVzYWdlO1xuICAgICAgICB0aGlzLmNyZWF0ZUNsaWVudCA9XG4gICAgICAgICAgICBmaWVsZHM/LmNyZWF0ZUNsaWVudCA/P1xuICAgICAgICAgICAgICAgICgob3B0aW9ucykgPT4gbmV3IEFudGhyb3BpYyhvcHRpb25zKSk7XG4gICAgfVxuICAgIGdldExzUGFyYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbHNfcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICAgICAgICBsc19tb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgbHNfbW9kZWxfdHlwZTogXCJjaGF0XCIsXG4gICAgICAgICAgICBsc190ZW1wZXJhdHVyZTogcGFyYW1zLnRlbXBlcmF0dXJlID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxzX21heF90b2tlbnM6IHBhcmFtcy5tYXhfdG9rZW5zID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxzX3N0b3A6IG9wdGlvbnMuc3RvcCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBMYW5nQ2hhaW4gU3RydWN0dXJlZFRvb2xzIHRvIEFudGhyb3BpY1Rvb2xzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGF0QW50aHJvcGljQ2FsbE9wdGlvbnNbXCJ0b29sc1wiXX0gdG9vbHMgVGhlIHRvb2xzIHRvIGZvcm1hdFxuICAgICAqIEByZXR1cm5zIHtBbnRocm9waWNUb29sW10gfCB1bmRlZmluZWR9IFRoZSBmb3JtYXR0ZWQgdG9vbHMsIG9yIHVuZGVmaW5lZCBpZiBub25lIGFyZSBwYXNzZWQuXG4gICAgICovXG4gICAgZm9ybWF0U3RydWN0dXJlZFRvb2xUb0FudGhyb3BpYyh0b29scykge1xuICAgICAgICBpZiAoIXRvb2xzIHx8ICF0b29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzLm1hcCgodG9vbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzQW50aHJvcGljVG9vbCh0b29sKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzT3BlbkFJVG9vbCh0b29sKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2wuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZnVuY3Rpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X3NjaGVtYTogdG9vbC5mdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0xhbmdDaGFpblRvb2wodG9vbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dF9zY2hlbWE6IHpvZFRvSnNvblNjaGVtYSh0b29sLnNjaGVtYSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB0b29sIHR5cGUgcGFzc2VkIHRvIENoYXRBbnRocm9waWM6ICR7SlNPTi5zdHJpbmdpZnkodG9vbCwgbnVsbCwgMil9YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBiaW5kVG9vbHModG9vbHMsIGt3YXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kKHtcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLmZvcm1hdFN0cnVjdHVyZWRUb29sVG9BbnRocm9waWModG9vbHMpLFxuICAgICAgICAgICAgLi4ua3dhcmdzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIGludm9jYXRpb25QYXJhbXMob3B0aW9ucykge1xuICAgICAgICBjb25zdCB0b29sX2Nob2ljZSA9IGhhbmRsZVRvb2xDaG9pY2Uob3B0aW9ucz8udG9vbF9jaG9pY2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIHRvcF9rOiB0aGlzLnRvcEssXG4gICAgICAgICAgICB0b3BfcDogdGhpcy50b3BQLFxuICAgICAgICAgICAgc3RvcF9zZXF1ZW5jZXM6IG9wdGlvbnM/LnN0b3AgPz8gdGhpcy5zdG9wU2VxdWVuY2VzLFxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbWluZyxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgdG9vbHM6IHRoaXMuZm9ybWF0U3RydWN0dXJlZFRvb2xUb0FudGhyb3BpYyhvcHRpb25zPy50b29scyksXG4gICAgICAgICAgICB0b29sX2Nob2ljZSxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvbkt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IF9jb252ZXJ0TWVzc2FnZXNUb0FudGhyb3BpY1BheWxvYWQobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgLi4uZm9ybWF0dGVkTWVzc2FnZXMsXG4gICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvZXJjZUNvbnRlbnRUb1N0cmluZyA9ICFfdG9vbHNJblBhcmFtcyhwYXlsb2FkKSAmJiAhX2RvY3VtZW50c0luUGFyYW1zKHBheWxvYWQpO1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNyZWF0ZVN0cmVhbVdpdGhSZXRyeShwYXlsb2FkLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRhdGEgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0RXJyb3I6IFVzZXIgYWJvcnRlZCB0aGUgcmVxdWVzdC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaG91bGRTdHJlYW1Vc2FnZSA9IHRoaXMuc3RyZWFtVXNhZ2UgPz8gb3B0aW9ucy5zdHJlYW1Vc2FnZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IF9tYWtlTWVzc2FnZUNodW5rRnJvbUFudGhyb3BpY0V2ZW50KGRhdGEsIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Vc2FnZTogc2hvdWxkU3RyZWFtVXNhZ2UsXG4gICAgICAgICAgICAgICAgY29lcmNlQ29udGVudFRvU3RyaW5nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHsgY2h1bmsgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHRleHQgY29udGVudCB0b2tlbiBmb3IgdGV4dCBmaWVsZCBhbmQgcnVuTWFuYWdlci5cbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gZXh0cmFjdFRva2VuKGNodW5rKTtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpb25DaHVuayA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAvLyBKdXN0IHlpZWxkIGNodW5rIGFzIGl0IGlzIGFuZCB0b29sX3VzZSB3aWxsIGJlIGNvbmNhdCBieSBCYXNlQ2hhdE1vZGVsLl9nZW5lcmF0ZVVuY2FjaGVkKCkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNodW5rLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogY2h1bmsudG9vbF9jYWxsX2NodW5rcyxcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IHNob3VsZFN0cmVhbVVzYWdlID8gY2h1bmsudXNhZ2VfbWV0YWRhdGEgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNodW5rLmlkLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRva2VuID8/IFwiXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIGdlbmVyYXRpb25DaHVuaztcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKHRva2VuID8/IFwiXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBjaHVuazogZ2VuZXJhdGlvbkNodW5rIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2dlbmVyYXRlTm9uU3RyZWFtaW5nKG1lc3NhZ2VzLCBwYXJhbXMsIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHtcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAuLi5fY29udmVydE1lc3NhZ2VzVG9BbnRocm9waWNQYXlsb2FkKG1lc3NhZ2VzKSxcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnQsIC4uLmFkZGl0aW9uYWxLd2FyZ3MgfSA9IHJlc3BvbnNlO1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IGFudGhyb3BpY1Jlc3BvbnNlVG9DaGF0TWVzc2FnZXMoY29udGVudCwgYWRkaXRpb25hbEt3YXJncyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgY29uc3QgeyByb2xlOiBfcm9sZSwgdHlwZTogX3R5cGUsIC4uLnJlc3QgfSA9IGFkZGl0aW9uYWxLd2FyZ3M7XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zLCBsbG1PdXRwdXQ6IHJlc3QgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcFNlcXVlbmNlcyAmJiBvcHRpb25zLnN0b3ApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJzdG9wU2VxdWVuY2VcIiBwYXJhbWV0ZXIgZm91bmQgaW4gaW5wdXQgYW5kIGRlZmF1bHQgcGFyYW1zYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBpZiAocGFyYW1zLnN0cmVhbSkge1xuICAgICAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGZpbmFsQ2h1bmsuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2h1bmtzIHJldHVybmVkIGZyb20gQW50aHJvcGljIEFQSS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZpbmFsQ2h1bmsudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGZpbmFsQ2h1bmsubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmF0ZU5vblN0cmVhbWluZyhtZXNzYWdlcywgcGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc3RyZWFtaW5nIHJlcXVlc3Qgd2l0aCByZXRyeS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCBUaGUgcGFyYW1ldGVycyBmb3IgY3JlYXRpbmcgYSBjb21wbGV0aW9uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgQSBzdHJlYW1pbmcgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVTdHJlYW1XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuc3RyZWFtaW5nQ2xpZW50KSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zXyA9IHRoaXMuYXBpVXJsID8geyBiYXNlVVJMOiB0aGlzLmFwaVVybCB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zdHJlYW1pbmdDbGllbnQgPSB0aGlzLmNyZWF0ZUNsaWVudCh7XG4gICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5jbGllbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNfLFxuICAgICAgICAgICAgICAgIGFwaUtleTogdGhpcy5hcGlLZXksXG4gICAgICAgICAgICAgICAgLy8gUHJlZmVyIExhbmdDaGFpbiBidWlsdC1pbiByZXRyaWVzXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ha2VDb21wbGV0aW9uUmVxdWVzdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3RyZWFtaW5nQ2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvbkt3YXJncyxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBBbnRocm9waWNDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwobWFrZUNvbXBsZXRpb25SZXF1ZXN0KTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhdGNoQ2xpZW50KSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5hcGlVcmwgPyB7IGJhc2VVUkw6IHRoaXMuYXBpVXJsIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmJhdGNoQ2xpZW50ID0gdGhpcy5jcmVhdGVDbGllbnQoe1xuICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGFwaUtleTogdGhpcy5hcGlLZXksXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ha2VDb21wbGV0aW9uUmVxdWVzdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYmF0Y2hDbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uS3dhcmdzLFxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBBbnRocm9waWNDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucy5zaWduYWwgPz8gdW5kZWZpbmVkIH0sIG1ha2VDb21wbGV0aW9uUmVxdWVzdCk7XG4gICAgfVxuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhbnRocm9waWNcIjtcbiAgICB9XG4gICAgd2l0aFN0cnVjdHVyZWRPdXRwdXQob3V0cHV0U2NoZW1hLCBjb25maWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gb3V0cHV0U2NoZW1hO1xuICAgICAgICBjb25zdCBuYW1lID0gY29uZmlnPy5uYW1lO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBjb25maWc/Lm1ldGhvZDtcbiAgICAgICAgY29uc3QgaW5jbHVkZVJhdyA9IGNvbmZpZz8uaW5jbHVkZVJhdztcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJqc29uTW9kZVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFudGhyb3BpYyBvbmx5IHN1cHBvcnRzIFwiZnVuY3Rpb25DYWxsaW5nXCIgYXMgYSBtZXRob2QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZ1bmN0aW9uTmFtZSA9IG5hbWUgPz8gXCJleHRyYWN0XCI7XG4gICAgICAgIGxldCBvdXRwdXRQYXJzZXI7XG4gICAgICAgIGxldCB0b29scztcbiAgICAgICAgaWYgKGlzWm9kU2NoZW1hKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25TY2hlbWEgPSB6b2RUb0pzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHRvb2xzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoganNvblNjaGVtYS5kZXNjcmlwdGlvbiA/PyBcIkEgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGNhbGwuXCIsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X3NjaGVtYToganNvblNjaGVtYSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIG91dHB1dFBhcnNlciA9IG5ldyBBbnRocm9waWNUb29sc091dHB1dFBhcnNlcih7XG4gICAgICAgICAgICAgICAgcmV0dXJuU2luZ2xlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGtleU5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICB6b2RTY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGFudGhyb3BpY1Rvb2xzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWEubmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBzY2hlbWEuZGVzY3JpcHRpb24gPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2Ygc2NoZW1hLmlucHV0X3NjaGVtYSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIHNjaGVtYS5pbnB1dF9zY2hlbWEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzID0gc2NoZW1hO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IHNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW50aHJvcGljVG9vbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNjaGVtYS5kZXNjcmlwdGlvbiA/PyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dF9zY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9vbHMgPSBbYW50aHJvcGljVG9vbHNdO1xuICAgICAgICAgICAgb3V0cHV0UGFyc2VyID0gbmV3IEFudGhyb3BpY1Rvb2xzT3V0cHV0UGFyc2VyKHtcbiAgICAgICAgICAgICAgICByZXR1cm5TaW5nbGU6IHRydWUsXG4gICAgICAgICAgICAgICAga2V5TmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGxtID0gdGhpcy5iaW5kKHtcbiAgICAgICAgICAgIHRvb2xzLFxuICAgICAgICAgICAgdG9vbF9jaG9pY2U6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpbmNsdWRlUmF3KSB7XG4gICAgICAgICAgICByZXR1cm4gbGxtLnBpcGUob3V0cHV0UGFyc2VyKS53aXRoQ29uZmlnKHtcbiAgICAgICAgICAgICAgICBydW5OYW1lOiBcIkNoYXRBbnRocm9waWNTdHJ1Y3R1cmVkT3V0cHV0XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZXJBc3NpZ24gPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgcGFyc2VkOiAoaW5wdXQsIGNvbmZpZykgPT4gb3V0cHV0UGFyc2VyLmludm9rZShpbnB1dC5yYXcsIGNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZXJOb25lID0gUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAgICAgICAgcGFyc2VkOiAoKSA9PiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VkV2l0aEZhbGxiYWNrID0gcGFyc2VyQXNzaWduLndpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgZmFsbGJhY2tzOiBbcGFyc2VyTm9uZV0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByYXc6IGxsbSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJzZWRXaXRoRmFsbGJhY2ssXG4gICAgICAgIF0pLndpdGhDb25maWcoe1xuICAgICAgICAgICAgcnVuTmFtZTogXCJTdHJ1Y3R1cmVkT3V0cHV0UnVubmFibGVcIixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENoYXRBbnRocm9waWMgZXh0ZW5kcyBDaGF0QW50aHJvcGljTWVzc2FnZXMge1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/index.js":
/*!*****************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/index.js ***!
  \*****************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatAnthropic: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatAnthropic),\n/* harmony export */   ChatAnthropicMessages: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatAnthropicMessages),\n/* harmony export */   convertPromptToAnthropic: () => (/* reexport safe */ _utils_prompts_js__WEBPACK_IMPORTED_MODULE_1__.convertPromptToAnthropic)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/chat_models.js\");\n/* harmony import */ var _utils_prompts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/prompts.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/prompts.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlDO0FBQzZCIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2NoYXRfbW9kZWxzLmpzXCI7XG5leHBvcnQgeyBjb252ZXJ0UHJvbXB0VG9BbnRocm9waWMgfSBmcm9tIFwiLi91dGlscy9wcm9tcHRzLmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/output_parsers.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/output_parsers.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnthropicToolsOutputParser: () => (/* binding */ AnthropicToolsOutputParser),\n/* harmony export */   extractToolCalls: () => (/* binding */ extractToolCalls)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/output_parsers */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/output_parsers.js\");\n\nclass AnthropicToolsOutputParser extends _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser {\n    static lc_name() {\n        return \"AnthropicToolsOutputParser\";\n    }\n    constructor(params) {\n        super(params);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"anthropic\", \"output_parsers\"]\n        });\n        Object.defineProperty(this, \"returnId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /** The type of tool calls to return. */\n        Object.defineProperty(this, \"keyName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Whether to return only the first tool call. */\n        Object.defineProperty(this, \"returnSingle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"zodSchema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keyName = params.keyName;\n        this.returnSingle = params.returnSingle ?? this.returnSingle;\n        this.zodSchema = params.zodSchema;\n    }\n    async _validateResult(result) {\n        let parsedResult = result;\n        if (typeof result === \"string\") {\n            try {\n                parsedResult = JSON.parse(result);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            catch (e) {\n                throw new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(e.message)}`, result);\n            }\n        }\n        else {\n            parsedResult = result;\n        }\n        if (this.zodSchema === undefined) {\n            return parsedResult;\n        }\n        const zodParsedResult = await this.zodSchema.safeParseAsync(parsedResult);\n        if (zodParsedResult.success) {\n            return zodParsedResult.data;\n        }\n        else {\n            throw new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(zodParsedResult.error.errors)}`, JSON.stringify(parsedResult, null, 2));\n        }\n    }\n    async parseResult(generations) {\n        const tools = generations.flatMap((generation) => {\n            const { message } = generation;\n            if (!Array.isArray(message.content)) {\n                return [];\n            }\n            const tool = extractToolCalls(message.content)[0];\n            return tool;\n        });\n        if (tools[0] === undefined) {\n            throw new Error(\"No parseable tool calls provided to AnthropicToolsOutputParser.\");\n        }\n        const [tool] = tools;\n        const validatedResult = await this._validateResult(tool.args);\n        return validatedResult;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extractToolCalls(content) {\n    const toolCalls = [];\n    for (const block of content) {\n        if (block.type === \"tool_use\") {\n            toolCalls.push({\n                name: block.name,\n                args: block.input,\n                id: block.id,\n                type: \"tool_call\",\n            });\n        }\n    }\n    return toolCalls;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L291dHB1dF9wYXJzZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2RjtBQUN0Rix5Q0FBeUMsK0VBQW1CO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRkFBcUIsNEJBQTRCLGdDQUFnQyxZQUFZLDBCQUEwQjtBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpRkFBcUIsNEJBQTRCLGdDQUFnQyxZQUFZLDZDQUE2QztBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L291dHB1dF9wYXJzZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VMTE1PdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzXCI7XG5leHBvcnQgY2xhc3MgQW50aHJvcGljVG9vbHNPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlTExNT3V0cHV0UGFyc2VyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQW50aHJvcGljVG9vbHNPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKHBhcmFtcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwiYW50aHJvcGljXCIsIFwib3V0cHV0X3BhcnNlcnNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVybklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRvb2wgY2FsbHMgdG8gcmV0dXJuLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBXaGV0aGVyIHRvIHJldHVybiBvbmx5IHRoZSBmaXJzdCB0b29sIGNhbGwuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVyblNpbmdsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInpvZFNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtleU5hbWUgPSBwYXJhbXMua2V5TmFtZTtcbiAgICAgICAgdGhpcy5yZXR1cm5TaW5nbGUgPSBwYXJhbXMucmV0dXJuU2luZ2xlID8/IHRoaXMucmV0dXJuU2luZ2xlO1xuICAgICAgICB0aGlzLnpvZFNjaGVtYSA9IHBhcmFtcy56b2RTY2hlbWE7XG4gICAgfVxuICAgIGFzeW5jIF92YWxpZGF0ZVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgbGV0IHBhcnNlZFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkUmVzdWx0ID0gSlNPTi5wYXJzZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEZhaWxlZCB0byBwYXJzZS4gVGV4dDogXCIke0pTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMil9XCIuIEVycm9yOiAke0pTT04uc3RyaW5naWZ5KGUubWVzc2FnZSl9YCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy56b2RTY2hlbWEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB6b2RQYXJzZWRSZXN1bHQgPSBhd2FpdCB0aGlzLnpvZFNjaGVtYS5zYWZlUGFyc2VBc3luYyhwYXJzZWRSZXN1bHQpO1xuICAgICAgICBpZiAoem9kUGFyc2VkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB6b2RQYXJzZWRSZXN1bHQuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEZhaWxlZCB0byBwYXJzZS4gVGV4dDogXCIke0pTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMil9XCIuIEVycm9yOiAke0pTT04uc3RyaW5naWZ5KHpvZFBhcnNlZFJlc3VsdC5lcnJvci5lcnJvcnMpfWAsIEpTT04uc3RyaW5naWZ5KHBhcnNlZFJlc3VsdCwgbnVsbCwgMikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlUmVzdWx0KGdlbmVyYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzID0gZ2VuZXJhdGlvbnMuZmxhdE1hcCgoZ2VuZXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBtZXNzYWdlIH0gPSBnZW5lcmF0aW9uO1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b29sID0gZXh0cmFjdFRvb2xDYWxscyhtZXNzYWdlLmNvbnRlbnQpWzBdO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2w7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodG9vbHNbMF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcGFyc2VhYmxlIHRvb2wgY2FsbHMgcHJvdmlkZWQgdG8gQW50aHJvcGljVG9vbHNPdXRwdXRQYXJzZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFt0b29sXSA9IHRvb2xzO1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRSZXN1bHQgPSBhd2FpdCB0aGlzLl92YWxpZGF0ZVJlc3VsdCh0b29sLmFyZ3MpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkUmVzdWx0O1xuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFRvb2xDYWxscyhjb250ZW50KSB7XG4gICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgZm9yIChjb25zdCBibG9jayBvZiBjb250ZW50KSB7XG4gICAgICAgIGlmIChibG9jay50eXBlID09PSBcInRvb2xfdXNlXCIpIHtcbiAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBibG9jay5uYW1lLFxuICAgICAgICAgICAgICAgIGFyZ3M6IGJsb2NrLmlucHV0LFxuICAgICAgICAgICAgICAgIGlkOiBibG9jay5pZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfY2FsbFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvb2xDYWxscztcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/output_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/errors.js":
/*!************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/errors.js ***!
  \************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLangChainErrorFields: () => (/* binding */ addLangChainErrorFields),\n/* harmony export */   wrapAnthropicClientError: () => (/* binding */ wrapAnthropicClientError)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\nfunction addLangChainErrorFields(error, lc_error_code) {\n    error.lc_error_code = lc_error_code;\n    error.message = `${error.message}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${lc_error_code}/\\n`;\n    return error;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction wrapAnthropicClientError(e) {\n    let error;\n    if (e.status === 400 && e.message.includes(\"tool\")) {\n        error = addLangChainErrorFields(e, \"INVALID_TOOL_RESULTS\");\n    }\n    else if (e.status === 401) {\n        error = addLangChainErrorFields(e, \"MODEL_AUTHENTICATION\");\n    }\n    else if (e.status === 404) {\n        error = addLangChainErrorFields(e, \"MODEL_NOT_FOUND\");\n    }\n    else if (e.status === 429) {\n        error = addLangChainErrorFields(e, \"MODEL_RATE_LIMIT\");\n    }\n    else {\n        error = e;\n    }\n    return error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsdUJBQXVCLGNBQWMsZ0ZBQWdGLGNBQWM7QUFDbkk7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2FudGhyb3BpY0AwLjMuMTNfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfcXdic21vNm1zcXJvM25rMnF3cjRzN2plbG0vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYW50aHJvcGljL2Rpc3QvdXRpbHMvZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZXJyb3IsIGxjX2Vycm9yX2NvZGUpIHtcbiAgICBlcnJvci5sY19lcnJvcl9jb2RlID0gbGNfZXJyb3JfY29kZTtcbiAgICBlcnJvci5tZXNzYWdlID0gYCR7ZXJyb3IubWVzc2FnZX1cXG5cXG5Ucm91Ymxlc2hvb3RpbmcgVVJMOiBodHRwczovL2pzLmxhbmdjaGFpbi5jb20vZG9jcy90cm91Ymxlc2hvb3RpbmcvZXJyb3JzLyR7bGNfZXJyb3JfY29kZX0vXFxuYDtcbiAgICByZXR1cm4gZXJyb3I7XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBBbnRocm9waWNDbGllbnRFcnJvcihlKSB7XG4gICAgbGV0IGVycm9yO1xuICAgIGlmIChlLnN0YXR1cyA9PT0gNDAwICYmIGUubWVzc2FnZS5pbmNsdWRlcyhcInRvb2xcIikpIHtcbiAgICAgICAgZXJyb3IgPSBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlLCBcIklOVkFMSURfVE9PTF9SRVNVTFRTXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIGVycm9yID0gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZSwgXCJNT0RFTF9BVVRIRU5USUNBVElPTlwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKGUsIFwiTU9ERUxfTk9UX0ZPVU5EXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgIGVycm9yID0gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZSwgXCJNT0RFTF9SQVRFX0xJTUlUXCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXJyb3IgPSBlO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3I7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_inputs.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_inputs.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _convertLangChainToolCallToAnthropic: () => (/* binding */ _convertLangChainToolCallToAnthropic),\n/* harmony export */   _convertMessagesToAnthropicPayload: () => (/* binding */ _convertMessagesToAnthropicPayload)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/**\n * This util file contains functions for converting LangChain messages to Anthropic messages.\n */\n\nfunction _formatImage(imageUrl) {\n    const regex = /^data:(image\\/.+);base64,(.+)$/;\n    const match = imageUrl.match(regex);\n    if (match === null) {\n        throw new Error([\n            \"Anthropic only supports base64-encoded images currently.\",\n            \"Example: data:image/png;base64,/9j/4AAQSk...\",\n        ].join(\"\\n\\n\"));\n    }\n    return {\n        type: \"base64\",\n        media_type: match[1] ?? \"\",\n        data: match[2] ?? \"\",\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    };\n}\nfunction _ensureMessageContents(messages) {\n    // Merge runs of human/tool messages into single human messages with content blocks.\n    const updatedMsgs = [];\n    for (const message of messages) {\n        if (message._getType() === \"tool\") {\n            if (typeof message.content === \"string\") {\n                const previousMessage = updatedMsgs[updatedMsgs.length - 1];\n                if (previousMessage?._getType() === \"human\" &&\n                    Array.isArray(previousMessage.content) &&\n                    \"type\" in previousMessage.content[0] &&\n                    previousMessage.content[0].type === \"tool_result\") {\n                    // If the previous message was a tool result, we merge this tool message into it.\n                    previousMessage.content.push({\n                        type: \"tool_result\",\n                        content: message.content,\n                        tool_use_id: message.tool_call_id,\n                    });\n                }\n                else {\n                    // If not, we create a new human message with the tool result.\n                    updatedMsgs.push(new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.HumanMessage({\n                        content: [\n                            {\n                                type: \"tool_result\",\n                                content: message.content,\n                                tool_use_id: message.tool_call_id,\n                            },\n                        ],\n                    }));\n                }\n            }\n            else {\n                updatedMsgs.push(new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.HumanMessage({\n                    content: [\n                        {\n                            type: \"tool_result\",\n                            content: _formatContent(message.content),\n                            tool_use_id: message.tool_call_id,\n                        },\n                    ],\n                }));\n            }\n        }\n        else {\n            updatedMsgs.push(message);\n        }\n    }\n    return updatedMsgs;\n}\nfunction _convertLangChainToolCallToAnthropic(toolCall) {\n    if (toolCall.id === undefined) {\n        throw new Error(`Anthropic requires all tool calls to have an \"id\".`);\n    }\n    return {\n        type: \"tool_use\",\n        id: toolCall.id,\n        name: toolCall.name,\n        input: toolCall.args,\n    };\n}\nfunction _formatContent(content) {\n    const toolTypes = [\"tool_use\", \"tool_result\", \"input_json_delta\"];\n    const textTypes = [\"text\", \"text_delta\"];\n    if (typeof content === \"string\") {\n        return content;\n    }\n    else {\n        const contentBlocks = content.map((contentPart) => {\n            const cacheControl = \"cache_control\" in contentPart ? contentPart.cache_control : undefined;\n            if (contentPart.type === \"image_url\") {\n                let source;\n                if (typeof contentPart.image_url === \"string\") {\n                    source = _formatImage(contentPart.image_url);\n                }\n                else {\n                    source = _formatImage(contentPart.image_url.url);\n                }\n                return {\n                    type: \"image\",\n                    source,\n                    ...(cacheControl ? { cache_control: cacheControl } : {}),\n                };\n            }\n            else if (contentPart.type === \"document\") {\n                // PDF\n                return {\n                    ...contentPart,\n                    ...(cacheControl ? { cache_control: cacheControl } : {}),\n                };\n            }\n            else if (textTypes.find((t) => t === contentPart.type) &&\n                \"text\" in contentPart) {\n                // Assuming contentPart is of type MessageContentText here\n                return {\n                    type: \"text\",\n                    text: contentPart.text,\n                    ...(cacheControl ? { cache_control: cacheControl } : {}),\n                };\n            }\n            else if (toolTypes.find((t) => t === contentPart.type)) {\n                const contentPartCopy = { ...contentPart };\n                if (\"index\" in contentPartCopy) {\n                    // Anthropic does not support passing the index field here, so we remove it.\n                    delete contentPartCopy.index;\n                }\n                if (contentPartCopy.type === \"input_json_delta\") {\n                    // `input_json_delta` type only represents yielding partial tool inputs\n                    // and is not a valid type for Anthropic messages.\n                    contentPartCopy.type = \"tool_use\";\n                }\n                if (\"input\" in contentPartCopy) {\n                    // Anthropic tool use inputs should be valid objects, when applicable.\n                    try {\n                        contentPartCopy.input = JSON.parse(contentPartCopy.input);\n                    }\n                    catch {\n                        // no-op\n                    }\n                }\n                // TODO: Fix when SDK types are fixed\n                return {\n                    ...contentPartCopy,\n                    ...(cacheControl ? { cache_control: cacheControl } : {}),\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                };\n            }\n            else {\n                throw new Error(\"Unsupported message content format\");\n            }\n        });\n        return contentBlocks;\n    }\n}\n/**\n * Formats messages as a prompt for the model.\n * Used in LangSmith, export is important here.\n * @param messages The base messages to format as a prompt.\n * @returns The formatted prompt.\n */\nfunction _convertMessagesToAnthropicPayload(messages) {\n    const mergedMessages = _ensureMessageContents(messages);\n    let system;\n    if (mergedMessages.length > 0 && mergedMessages[0]._getType() === \"system\") {\n        system = messages[0].content;\n    }\n    const conversationMessages = system !== undefined ? mergedMessages.slice(1) : mergedMessages;\n    const formattedMessages = conversationMessages.map((message) => {\n        let role;\n        if (message._getType() === \"human\") {\n            role = \"user\";\n        }\n        else if (message._getType() === \"ai\") {\n            role = \"assistant\";\n        }\n        else if (message._getType() === \"tool\") {\n            role = \"user\";\n        }\n        else if (message._getType() === \"system\") {\n            throw new Error(\"System messages are only permitted as the first passed message.\");\n        }\n        else {\n            throw new Error(`Message type \"${message._getType()}\" is not supported.`);\n        }\n        if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(message) && !!message.tool_calls?.length) {\n            if (typeof message.content === \"string\") {\n                if (message.content === \"\") {\n                    return {\n                        role,\n                        content: message.tool_calls.map(_convertLangChainToolCallToAnthropic),\n                    };\n                }\n                else {\n                    return {\n                        role,\n                        content: [\n                            { type: \"text\", text: message.content },\n                            ...message.tool_calls.map(_convertLangChainToolCallToAnthropic),\n                        ],\n                    };\n                }\n            }\n            else {\n                const { content } = message;\n                const hasMismatchedToolCalls = !message.tool_calls.every((toolCall) => content.find((contentPart) => (contentPart.type === \"tool_use\" ||\n                    contentPart.type === \"input_json_delta\") &&\n                    contentPart.id === toolCall.id));\n                if (hasMismatchedToolCalls) {\n                    console.warn(`The \"tool_calls\" field on a message is only respected if content is a string.`);\n                }\n                return {\n                    role,\n                    content: _formatContent(message.content),\n                };\n            }\n        }\n        else {\n            return {\n                role,\n                content: _formatContent(message.content),\n            };\n        }\n    });\n    return {\n        messages: mergeMessages(formattedMessages),\n        system,\n    };\n}\nfunction mergeMessages(messages) {\n    if (!messages || messages.length <= 1) {\n        return messages;\n    }\n    const result = [];\n    let currentMessage = messages[0];\n    const normalizeContent = (content) => {\n        if (typeof content === \"string\") {\n            return [\n                {\n                    type: \"text\",\n                    text: content,\n                },\n            ];\n        }\n        return content;\n    };\n    const isToolResultMessage = (msg) => {\n        if (msg.role !== \"user\")\n            return false;\n        if (typeof msg.content === \"string\") {\n            return false;\n        }\n        return (Array.isArray(msg.content) &&\n            msg.content.every((item) => item.type === \"tool_result\"));\n    };\n    for (let i = 1; i < messages.length; i += 1) {\n        const nextMessage = messages[i];\n        if (isToolResultMessage(currentMessage) &&\n            isToolResultMessage(nextMessage)) {\n            // Merge the messages by combining their content arrays\n            currentMessage = {\n                ...currentMessage,\n                content: [\n                    ...normalizeContent(currentMessage.content),\n                    ...normalizeContent(nextMessage.content),\n                ],\n            };\n        }\n        else {\n            result.push(currentMessage);\n            currentMessage = nextMessage;\n        }\n    }\n    result.push(currentMessage);\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL21lc3NhZ2VfaW5wdXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNzRTtBQUN0RTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsa0VBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsa0VBQVk7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsOEJBQThCLElBQUk7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDhCQUE4QixJQUFJO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsOEJBQThCLElBQUk7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw4QkFBOEIsSUFBSTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsbUJBQW1CO0FBQ2hFO0FBQ0EsWUFBWSxxRUFBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFDQUFxQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsVUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2Z1amlhd2FuZy9EZXNrdG9wL2NoYXRib3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BsYW5nY2hhaW4rYW50aHJvcGljQDAuMy4xM19AbGFuZ2NoYWluK2NvcmVAMC4zLjQwX29wZW5haUA0Ljg1LjJfd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjlfdV9xd2JzbW82bXNxcm8zbmsycXdyNHM3amVsbS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9hbnRocm9waWMvZGlzdC91dGlscy9tZXNzYWdlX2lucHV0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgdXRpbCBmaWxlIGNvbnRhaW5zIGZ1bmN0aW9ucyBmb3IgY29udmVydGluZyBMYW5nQ2hhaW4gbWVzc2FnZXMgdG8gQW50aHJvcGljIG1lc3NhZ2VzLlxuICovXG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIGlzQUlNZXNzYWdlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmZ1bmN0aW9uIF9mb3JtYXRJbWFnZShpbWFnZVVybCkge1xuICAgIGNvbnN0IHJlZ2V4ID0gL15kYXRhOihpbWFnZVxcLy4rKTtiYXNlNjQsKC4rKSQvO1xuICAgIGNvbnN0IG1hdGNoID0gaW1hZ2VVcmwubWF0Y2gocmVnZXgpO1xuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoW1xuICAgICAgICAgICAgXCJBbnRocm9waWMgb25seSBzdXBwb3J0cyBiYXNlNjQtZW5jb2RlZCBpbWFnZXMgY3VycmVudGx5LlwiLFxuICAgICAgICAgICAgXCJFeGFtcGxlOiBkYXRhOmltYWdlL3BuZztiYXNlNjQsLzlqLzRBQVFTay4uLlwiLFxuICAgICAgICBdLmpvaW4oXCJcXG5cXG5cIikpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICBtZWRpYV90eXBlOiBtYXRjaFsxXSA/PyBcIlwiLFxuICAgICAgICBkYXRhOiBtYXRjaFsyXSA/PyBcIlwiLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH07XG59XG5mdW5jdGlvbiBfZW5zdXJlTWVzc2FnZUNvbnRlbnRzKG1lc3NhZ2VzKSB7XG4gICAgLy8gTWVyZ2UgcnVucyBvZiBodW1hbi90b29sIG1lc3NhZ2VzIGludG8gc2luZ2xlIGh1bWFuIG1lc3NhZ2VzIHdpdGggY29udGVudCBibG9ja3MuXG4gICAgY29uc3QgdXBkYXRlZE1zZ3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNNZXNzYWdlID0gdXBkYXRlZE1zZ3NbdXBkYXRlZE1zZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTWVzc2FnZT8uX2dldFR5cGUoKSA9PT0gXCJodW1hblwiICYmXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocHJldmlvdXNNZXNzYWdlLmNvbnRlbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiIGluIHByZXZpb3VzTWVzc2FnZS5jb250ZW50WzBdICYmXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTWVzc2FnZS5jb250ZW50WzBdLnR5cGUgPT09IFwidG9vbF9yZXN1bHRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcHJldmlvdXMgbWVzc2FnZSB3YXMgYSB0b29sIHJlc3VsdCwgd2UgbWVyZ2UgdGhpcyB0b29sIG1lc3NhZ2UgaW50byBpdC5cbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNNZXNzYWdlLmNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX3VzZV9pZDogbWVzc2FnZS50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm90LCB3ZSBjcmVhdGUgYSBuZXcgaHVtYW4gbWVzc2FnZSB3aXRoIHRoZSB0b29sIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZE1zZ3MucHVzaChuZXcgSHVtYW5NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sX3VzZV9pZDogbWVzc2FnZS50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVkTXNncy5wdXNoKG5ldyBIdW1hbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX3Jlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IF9mb3JtYXRDb250ZW50KG1lc3NhZ2UuY29udGVudCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF91c2VfaWQ6IG1lc3NhZ2UudG9vbF9jYWxsX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVkTXNncy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVkTXNncztcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9BbnRocm9waWModG9vbENhbGwpIHtcbiAgICBpZiAodG9vbENhbGwuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFudGhyb3BpYyByZXF1aXJlcyBhbGwgdG9vbCBjYWxscyB0byBoYXZlIGFuIFwiaWRcIi5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0b29sX3VzZVwiLFxuICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgIGlucHV0OiB0b29sQ2FsbC5hcmdzLFxuICAgIH07XG59XG5mdW5jdGlvbiBfZm9ybWF0Q29udGVudChjb250ZW50KSB7XG4gICAgY29uc3QgdG9vbFR5cGVzID0gW1widG9vbF91c2VcIiwgXCJ0b29sX3Jlc3VsdFwiLCBcImlucHV0X2pzb25fZGVsdGFcIl07XG4gICAgY29uc3QgdGV4dFR5cGVzID0gW1widGV4dFwiLCBcInRleHRfZGVsdGFcIl07XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY29udGVudEJsb2NrcyA9IGNvbnRlbnQubWFwKChjb250ZW50UGFydCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGVDb250cm9sID0gXCJjYWNoZV9jb250cm9sXCIgaW4gY29udGVudFBhcnQgPyBjb250ZW50UGFydC5jYWNoZV9jb250cm9sIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnRQYXJ0LnR5cGUgPT09IFwiaW1hZ2VfdXJsXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudFBhcnQuaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IF9mb3JtYXRJbWFnZShjb250ZW50UGFydC5pbWFnZV91cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gX2Zvcm1hdEltYWdlKGNvbnRlbnRQYXJ0LmltYWdlX3VybC51cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNhY2hlQ29udHJvbCA/IHsgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnRQYXJ0LnR5cGUgPT09IFwiZG9jdW1lbnRcIikge1xuICAgICAgICAgICAgICAgIC8vIFBERlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbnRlbnRQYXJ0LFxuICAgICAgICAgICAgICAgICAgICAuLi4oY2FjaGVDb250cm9sID8geyBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2wgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGV4dFR5cGVzLmZpbmQoKHQpID0+IHQgPT09IGNvbnRlbnRQYXJ0LnR5cGUpICYmXG4gICAgICAgICAgICAgICAgXCJ0ZXh0XCIgaW4gY29udGVudFBhcnQpIHtcbiAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyBjb250ZW50UGFydCBpcyBvZiB0eXBlIE1lc3NhZ2VDb250ZW50VGV4dCBoZXJlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNvbnRlbnRQYXJ0LnRleHQsXG4gICAgICAgICAgICAgICAgICAgIC4uLihjYWNoZUNvbnRyb2wgPyB7IGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbCB9IDoge30pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0b29sVHlwZXMuZmluZCgodCkgPT4gdCA9PT0gY29udGVudFBhcnQudHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50UGFydENvcHkgPSB7IC4uLmNvbnRlbnRQYXJ0IH07XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5kZXhcIiBpbiBjb250ZW50UGFydENvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQW50aHJvcGljIGRvZXMgbm90IHN1cHBvcnQgcGFzc2luZyB0aGUgaW5kZXggZmllbGQgaGVyZSwgc28gd2UgcmVtb3ZlIGl0LlxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29udGVudFBhcnRDb3B5LmluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGVudFBhcnRDb3B5LnR5cGUgPT09IFwiaW5wdXRfanNvbl9kZWx0YVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGBpbnB1dF9qc29uX2RlbHRhYCB0eXBlIG9ubHkgcmVwcmVzZW50cyB5aWVsZGluZyBwYXJ0aWFsIHRvb2wgaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpcyBub3QgYSB2YWxpZCB0eXBlIGZvciBBbnRocm9waWMgbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0Q29weS50eXBlID0gXCJ0b29sX3VzZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXCJpbnB1dFwiIGluIGNvbnRlbnRQYXJ0Q29weSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbnRocm9waWMgdG9vbCB1c2UgaW5wdXRzIHNob3VsZCBiZSB2YWxpZCBvYmplY3RzLCB3aGVuIGFwcGxpY2FibGUuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydENvcHkuaW5wdXQgPSBKU09OLnBhcnNlKGNvbnRlbnRQYXJ0Q29weS5pbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8tb3BcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaXggd2hlbiBTREsgdHlwZXMgYXJlIGZpeGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudFBhcnRDb3B5LFxuICAgICAgICAgICAgICAgICAgICAuLi4oY2FjaGVDb250cm9sID8geyBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2wgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgbWVzc2FnZSBjb250ZW50IGZvcm1hdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb250ZW50QmxvY2tzO1xuICAgIH1cbn1cbi8qKlxuICogRm9ybWF0cyBtZXNzYWdlcyBhcyBhIHByb21wdCBmb3IgdGhlIG1vZGVsLlxuICogVXNlZCBpbiBMYW5nU21pdGgsIGV4cG9ydCBpcyBpbXBvcnRhbnQgaGVyZS5cbiAqIEBwYXJhbSBtZXNzYWdlcyBUaGUgYmFzZSBtZXNzYWdlcyB0byBmb3JtYXQgYXMgYSBwcm9tcHQuXG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIHByb21wdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9jb252ZXJ0TWVzc2FnZXNUb0FudGhyb3BpY1BheWxvYWQobWVzc2FnZXMpIHtcbiAgICBjb25zdCBtZXJnZWRNZXNzYWdlcyA9IF9lbnN1cmVNZXNzYWdlQ29udGVudHMobWVzc2FnZXMpO1xuICAgIGxldCBzeXN0ZW07XG4gICAgaWYgKG1lcmdlZE1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgbWVyZ2VkTWVzc2FnZXNbMF0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICBzeXN0ZW0gPSBtZXNzYWdlc1swXS5jb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBjb252ZXJzYXRpb25NZXNzYWdlcyA9IHN5c3RlbSAhPT0gdW5kZWZpbmVkID8gbWVyZ2VkTWVzc2FnZXMuc2xpY2UoMSkgOiBtZXJnZWRNZXNzYWdlcztcbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IGNvbnZlcnNhdGlvbk1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4ge1xuICAgICAgICBsZXQgcm9sZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJ1c2VyXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcImFzc2lzdGFudFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcInVzZXJcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5c3RlbSBtZXNzYWdlcyBhcmUgb25seSBwZXJtaXR0ZWQgYXMgdGhlIGZpcnN0IHBhc3NlZCBtZXNzYWdlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWVzc2FnZSB0eXBlIFwiJHttZXNzYWdlLl9nZXRUeXBlKCl9XCIgaXMgbm90IHN1cHBvcnRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBSU1lc3NhZ2UobWVzc2FnZSkgJiYgISFtZXNzYWdlLnRvb2xfY2FsbHM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50ID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS50b29sX2NhbGxzLm1hcChfY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9BbnRocm9waWMpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogbWVzc2FnZS5jb250ZW50IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZS50b29sX2NhbGxzLm1hcChfY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9BbnRocm9waWMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbnRlbnQgfSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzTWlzbWF0Y2hlZFRvb2xDYWxscyA9ICFtZXNzYWdlLnRvb2xfY2FsbHMuZXZlcnkoKHRvb2xDYWxsKSA9PiBjb250ZW50LmZpbmQoKGNvbnRlbnRQYXJ0KSA9PiAoY29udGVudFBhcnQudHlwZSA9PT0gXCJ0b29sX3VzZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0LnR5cGUgPT09IFwiaW5wdXRfanNvbl9kZWx0YVwiKSAmJlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50UGFydC5pZCA9PT0gdG9vbENhbGwuaWQpKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzTWlzbWF0Y2hlZFRvb2xDYWxscykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBcInRvb2xfY2FsbHNcIiBmaWVsZCBvbiBhIG1lc3NhZ2UgaXMgb25seSByZXNwZWN0ZWQgaWYgY29udGVudCBpcyBhIHN0cmluZy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogX2Zvcm1hdENvbnRlbnQobWVzc2FnZS5jb250ZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByb2xlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IF9mb3JtYXRDb250ZW50KG1lc3NhZ2UuY29udGVudCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZXM6IG1lcmdlTWVzc2FnZXMoZm9ybWF0dGVkTWVzc2FnZXMpLFxuICAgICAgICBzeXN0ZW0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IGN1cnJlbnRNZXNzYWdlID0gbWVzc2FnZXNbMF07XG4gICAgY29uc3Qgbm9ybWFsaXplQ29udGVudCA9IChjb250ZW50KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH07XG4gICAgY29uc3QgaXNUb29sUmVzdWx0TWVzc2FnZSA9IChtc2cpID0+IHtcbiAgICAgICAgaWYgKG1zZy5yb2xlICE9PSBcInVzZXJcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBtc2cuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoQXJyYXkuaXNBcnJheShtc2cuY29udGVudCkgJiZcbiAgICAgICAgICAgIG1zZy5jb250ZW50LmV2ZXJ5KChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IFwidG9vbF9yZXN1bHRcIikpO1xuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtZXNzYWdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBuZXh0TWVzc2FnZSA9IG1lc3NhZ2VzW2ldO1xuICAgICAgICBpZiAoaXNUb29sUmVzdWx0TWVzc2FnZShjdXJyZW50TWVzc2FnZSkgJiZcbiAgICAgICAgICAgIGlzVG9vbFJlc3VsdE1lc3NhZ2UobmV4dE1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAvLyBNZXJnZSB0aGUgbWVzc2FnZXMgYnkgY29tYmluaW5nIHRoZWlyIGNvbnRlbnQgYXJyYXlzXG4gICAgICAgICAgICBjdXJyZW50TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAuLi5jdXJyZW50TWVzc2FnZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLm5vcm1hbGl6ZUNvbnRlbnQoY3VycmVudE1lc3NhZ2UuY29udGVudCksXG4gICAgICAgICAgICAgICAgICAgIC4uLm5vcm1hbGl6ZUNvbnRlbnQobmV4dE1lc3NhZ2UuY29udGVudCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChjdXJyZW50TWVzc2FnZSk7XG4gICAgICAgICAgICBjdXJyZW50TWVzc2FnZSA9IG5leHRNZXNzYWdlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKGN1cnJlbnRNZXNzYWdlKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_inputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_outputs.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_outputs.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _makeMessageChunkFromAnthropicEvent: () => (/* binding */ _makeMessageChunkFromAnthropicEvent),\n/* harmony export */   anthropicResponseToChatMessages: () => (/* binding */ anthropicResponseToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/.pnpm/@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_utf-8-validate@5.0.10__zod@3.24.2_/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _output_parsers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../output_parsers.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/output_parsers.js\");\n\n\nfunction _makeMessageChunkFromAnthropicEvent(data, fields) {\n    if (data.type === \"message_start\") {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { content, usage, ...additionalKwargs } = data.message;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const filteredAdditionalKwargs = {};\n        for (const [key, value] of Object.entries(additionalKwargs)) {\n            if (value !== undefined && value !== null) {\n                filteredAdditionalKwargs[key] = value;\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const { input_tokens, output_tokens, ...rest } = usage ?? {};\n        const usageMetadata = {\n            input_tokens,\n            output_tokens,\n            total_tokens: input_tokens + output_tokens,\n            input_token_details: {\n                cache_creation: rest.cache_creation_input_tokens,\n                cache_read: rest.cache_read_input_tokens,\n            },\n        };\n        return {\n            chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: fields.coerceContentToString ? \"\" : [],\n                additional_kwargs: filteredAdditionalKwargs,\n                usage_metadata: fields.streamUsage ? usageMetadata : undefined,\n                response_metadata: {\n                    usage: {\n                        ...rest,\n                    },\n                },\n                id: data.message.id,\n            }),\n        };\n    }\n    else if (data.type === \"message_delta\") {\n        const usageMetadata = {\n            input_tokens: 0,\n            output_tokens: data.usage.output_tokens,\n            total_tokens: data.usage.output_tokens,\n            input_token_details: {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                cache_creation: data.usage.cache_creation_input_tokens,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                cache_read: data.usage.cache_read_input_tokens,\n            },\n        };\n        return {\n            chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: fields.coerceContentToString ? \"\" : [],\n                additional_kwargs: { ...data.delta },\n                usage_metadata: fields.streamUsage ? usageMetadata : undefined,\n            }),\n        };\n    }\n    else if (data.type === \"content_block_start\" &&\n        [\"tool_use\", \"document\"].includes(data.content_block.type)) {\n        const contentBlock = data.content_block;\n        let toolCallChunks;\n        if (contentBlock.type === \"tool_use\") {\n            toolCallChunks = [\n                {\n                    id: contentBlock.id,\n                    index: data.index,\n                    name: contentBlock.name,\n                    args: \"\",\n                },\n            ];\n        }\n        else {\n            toolCallChunks = [];\n        }\n        return {\n            chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: fields.coerceContentToString\n                    ? \"\"\n                    : [\n                        {\n                            index: data.index,\n                            ...data.content_block,\n                            input: \"\",\n                        },\n                    ],\n                additional_kwargs: {},\n                tool_call_chunks: toolCallChunks,\n            }),\n        };\n    }\n    else if (data.type === \"content_block_delta\" &&\n        [\"text_delta\", \"citations_delta\"].includes(data.delta.type)) {\n        if (fields.coerceContentToString && \"text\" in data.delta) {\n            return {\n                chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                    content: data.delta.text,\n                }),\n            };\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const contentBlock = data.delta;\n            if (\"citation\" in contentBlock) {\n                contentBlock.citations = [contentBlock.citation];\n                delete contentBlock.citation;\n            }\n            return {\n                chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                    content: [{ index: data.index, ...contentBlock, type: \"text\" }],\n                }),\n            };\n        }\n    }\n    else if (data.type === \"content_block_delta\" &&\n        data.delta.type === \"input_json_delta\") {\n        return {\n            chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content: fields.coerceContentToString\n                    ? \"\"\n                    : [\n                        {\n                            index: data.index,\n                            input: data.delta.partial_json,\n                            type: data.delta.type,\n                        },\n                    ],\n                additional_kwargs: {},\n                tool_call_chunks: [\n                    {\n                        index: data.index,\n                        args: data.delta.partial_json,\n                    },\n                ],\n            }),\n        };\n    }\n    else if (data.type === \"content_block_start\" &&\n        data.content_block.type === \"text\") {\n        const content = data.content_block?.text;\n        if (content !== undefined) {\n            return {\n                chunk: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                    content: fields.coerceContentToString\n                        ? content\n                        : [\n                            {\n                                index: data.index,\n                                ...data.content_block,\n                            },\n                        ],\n                    additional_kwargs: {},\n                }),\n            };\n        }\n    }\n    return null;\n}\nfunction anthropicResponseToChatMessages(messages, additionalKwargs) {\n    const usage = additionalKwargs.usage;\n    const usageMetadata = usage != null\n        ? {\n            input_tokens: usage.input_tokens ?? 0,\n            output_tokens: usage.output_tokens ?? 0,\n            total_tokens: (usage.input_tokens ?? 0) + (usage.output_tokens ?? 0),\n            input_token_details: {\n                cache_creation: usage.cache_creation_input_tokens,\n                cache_read: usage.cache_read_input_tokens,\n            },\n        }\n        : undefined;\n    if (messages.length === 1 && messages[0].type === \"text\") {\n        return [\n            {\n                text: messages[0].text,\n                message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n                    content: messages[0].text,\n                    additional_kwargs: additionalKwargs,\n                    usage_metadata: usageMetadata,\n                    response_metadata: additionalKwargs,\n                    id: additionalKwargs.id,\n                }),\n            },\n        ];\n    }\n    else {\n        const toolCalls = (0,_output_parsers_js__WEBPACK_IMPORTED_MODULE_1__.extractToolCalls)(messages);\n        const generations = [\n            {\n                text: \"\",\n                message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    content: messages,\n                    additional_kwargs: additionalKwargs,\n                    tool_calls: toolCalls,\n                    usage_metadata: usageMetadata,\n                    response_metadata: additionalKwargs,\n                    id: additionalKwargs.id,\n                }),\n            },\n        ];\n        return generations;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL21lc3NhZ2Vfb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNFO0FBQ2Q7QUFDakQ7QUFDUDtBQUNBO0FBQ0EsZ0JBQWdCLHNDQUFzQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUF1QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWM7QUFDckM7QUFDQSxxQ0FBcUMsZUFBZTtBQUNwRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9FQUFjO0FBQ3pDO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9FQUFjO0FBQ3pDLGdDQUFnQyxrREFBa0Q7QUFDbEYsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvRUFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvRUFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSx5Q0FBeUM7QUFDekMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9FQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZnVqaWF3YW5nL0Rlc2t0b3AvY2hhdGJvdC9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL21lc3NhZ2Vfb3V0cHV0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IGV4dHJhY3RUb29sQ2FsbHMgfSBmcm9tIFwiLi4vb3V0cHV0X3BhcnNlcnMuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBfbWFrZU1lc3NhZ2VDaHVua0Zyb21BbnRocm9waWNFdmVudChkYXRhLCBmaWVsZHMpIHtcbiAgICBpZiAoZGF0YS50eXBlID09PSBcIm1lc3NhZ2Vfc3RhcnRcIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgY29udGVudCwgdXNhZ2UsIC4uLmFkZGl0aW9uYWxLd2FyZ3MgfSA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgZmlsdGVyZWRBZGRpdGlvbmFsS3dhcmdzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxLd2FyZ3MpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkQWRkaXRpb25hbEt3YXJnc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgeyBpbnB1dF90b2tlbnMsIG91dHB1dF90b2tlbnMsIC4uLnJlc3QgfSA9IHVzYWdlID8/IHt9O1xuICAgICAgICBjb25zdCB1c2FnZU1ldGFkYXRhID0ge1xuICAgICAgICAgICAgaW5wdXRfdG9rZW5zLFxuICAgICAgICAgICAgb3V0cHV0X3Rva2VucyxcbiAgICAgICAgICAgIHRvdGFsX3Rva2VuczogaW5wdXRfdG9rZW5zICsgb3V0cHV0X3Rva2VucyxcbiAgICAgICAgICAgIGlucHV0X3Rva2VuX2RldGFpbHM6IHtcbiAgICAgICAgICAgICAgICBjYWNoZV9jcmVhdGlvbjogcmVzdC5jYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgY2FjaGVfcmVhZDogcmVzdC5jYWNoZV9yZWFkX2lucHV0X3Rva2VucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaHVuazogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMuY29lcmNlQ29udGVudFRvU3RyaW5nID8gXCJcIiA6IFtdLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBmaWx0ZXJlZEFkZGl0aW9uYWxLd2FyZ3MsXG4gICAgICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IGZpZWxkcy5zdHJlYW1Vc2FnZSA/IHVzYWdlTWV0YWRhdGEgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5tZXNzYWdlLmlkLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJtZXNzYWdlX2RlbHRhXCIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2VNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIGlucHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgIG91dHB1dF90b2tlbnM6IGRhdGEudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgICAgIHRvdGFsX3Rva2VuczogZGF0YS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczoge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY2FjaGVfY3JlYXRpb246IGRhdGEudXNhZ2UuY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY2FjaGVfcmVhZDogZGF0YS51c2FnZS5jYWNoZV9yZWFkX2lucHV0X3Rva2VucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaHVuazogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMuY29lcmNlQ29udGVudFRvU3RyaW5nID8gXCJcIiA6IFtdLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7IC4uLmRhdGEuZGVsdGEgfSxcbiAgICAgICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogZmllbGRzLnN0cmVhbVVzYWdlID8gdXNhZ2VNZXRhZGF0YSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiY29udGVudF9ibG9ja19zdGFydFwiICYmXG4gICAgICAgIFtcInRvb2xfdXNlXCIsIFwiZG9jdW1lbnRcIl0uaW5jbHVkZXMoZGF0YS5jb250ZW50X2Jsb2NrLnR5cGUpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRCbG9jayA9IGRhdGEuY29udGVudF9ibG9jaztcbiAgICAgICAgbGV0IHRvb2xDYWxsQ2h1bmtzO1xuICAgICAgICBpZiAoY29udGVudEJsb2NrLnR5cGUgPT09IFwidG9vbF91c2VcIikge1xuICAgICAgICAgICAgdG9vbENhbGxDaHVua3MgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogY29udGVudEJsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogZGF0YS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY29udGVudEJsb2NrLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b29sQ2FsbENodW5rcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaHVuazogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMuY29lcmNlQ29udGVudFRvU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZGF0YS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLmNvbnRlbnRfYmxvY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7fSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiB0b29sQ2FsbENodW5rcyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiY29udGVudF9ibG9ja19kZWx0YVwiICYmXG4gICAgICAgIFtcInRleHRfZGVsdGFcIiwgXCJjaXRhdGlvbnNfZGVsdGFcIl0uaW5jbHVkZXMoZGF0YS5kZWx0YS50eXBlKSkge1xuICAgICAgICBpZiAoZmllbGRzLmNvZXJjZUNvbnRlbnRUb1N0cmluZyAmJiBcInRleHRcIiBpbiBkYXRhLmRlbHRhKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNodW5rOiBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmRlbHRhLnRleHQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRCbG9jayA9IGRhdGEuZGVsdGE7XG4gICAgICAgICAgICBpZiAoXCJjaXRhdGlvblwiIGluIGNvbnRlbnRCbG9jaykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9jay5jaXRhdGlvbnMgPSBbY29udGVudEJsb2NrLmNpdGF0aW9uXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgY29udGVudEJsb2NrLmNpdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjaHVuazogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogW3sgaW5kZXg6IGRhdGEuaW5kZXgsIC4uLmNvbnRlbnRCbG9jaywgdHlwZTogXCJ0ZXh0XCIgfV0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjb250ZW50X2Jsb2NrX2RlbHRhXCIgJiZcbiAgICAgICAgZGF0YS5kZWx0YS50eXBlID09PSBcImlucHV0X2pzb25fZGVsdGFcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2h1bms6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLmNvZXJjZUNvbnRlbnRUb1N0cmluZ1xuICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGRhdGEuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGRhdGEuZGVsdGEucGFydGlhbF9qc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEuZGVsdGEudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHt9LFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGRhdGEuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBkYXRhLmRlbHRhLnBhcnRpYWxfanNvbixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjb250ZW50X2Jsb2NrX3N0YXJ0XCIgJiZcbiAgICAgICAgZGF0YS5jb250ZW50X2Jsb2NrLnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNvbnRlbnRfYmxvY2s/LnRleHQ7XG4gICAgICAgIGlmIChjb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2h1bms6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcy5jb2VyY2VDb250ZW50VG9TdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZGF0YS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YS5jb250ZW50X2Jsb2NrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoge30sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFudGhyb3BpY1Jlc3BvbnNlVG9DaGF0TWVzc2FnZXMobWVzc2FnZXMsIGFkZGl0aW9uYWxLd2FyZ3MpIHtcbiAgICBjb25zdCB1c2FnZSA9IGFkZGl0aW9uYWxLd2FyZ3MudXNhZ2U7XG4gICAgY29uc3QgdXNhZ2VNZXRhZGF0YSA9IHVzYWdlICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBpbnB1dF90b2tlbnM6IHVzYWdlLmlucHV0X3Rva2VucyA/PyAwLFxuICAgICAgICAgICAgb3V0cHV0X3Rva2VuczogdXNhZ2Uub3V0cHV0X3Rva2VucyA/PyAwLFxuICAgICAgICAgICAgdG90YWxfdG9rZW5zOiAodXNhZ2UuaW5wdXRfdG9rZW5zID8/IDApICsgKHVzYWdlLm91dHB1dF90b2tlbnMgPz8gMCksXG4gICAgICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgY2FjaGVfY3JlYXRpb246IHVzYWdlLmNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICBjYWNoZV9yZWFkOiB1c2FnZS5jYWNoZV9yZWFkX2lucHV0X3Rva2VucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMSAmJiBtZXNzYWdlc1swXS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2VzWzBdLnRleHQsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VzWzBdLnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBhZGRpdGlvbmFsS3dhcmdzLFxuICAgICAgICAgICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdXNhZ2VNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IGFkZGl0aW9uYWxLd2FyZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBhZGRpdGlvbmFsS3dhcmdzLmlkLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IGV4dHJhY3RUb29sQ2FsbHMobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGFkZGl0aW9uYWxLd2FyZ3MsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IHVzYWdlTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBhZGRpdGlvbmFsS3dhcmdzLFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb25hbEt3YXJncy5pZCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9ucztcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/prompts.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/prompts.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertPromptToAnthropic: () => (/* binding */ convertPromptToAnthropic)\n/* harmony export */ });\n/* harmony import */ var _message_inputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./message_inputs.js */ \"(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/message_inputs.js\");\n\n/**\n * Convert a formatted LangChain prompt (e.g. pulled from the hub) into\n * a format expected by Anthropic's JS SDK.\n *\n * Requires the \"@langchain/anthropic\" package to be installed in addition\n * to the Anthropic SDK.\n *\n * @example\n * ```ts\n * import { convertPromptToAnthropic } from \"langsmith/utils/hub/anthropic\";\n * import { pull } from \"langchain/hub\";\n *\n * import Anthropic from '@anthropic-ai/sdk';\n *\n * const prompt = await pull(\"jacob/joke-generator\");\n * const formattedPrompt = await prompt.invoke({\n *   topic: \"cats\",\n * });\n *\n * const { system, messages } = convertPromptToAnthropic(formattedPrompt);\n *\n * const anthropicClient = new Anthropic({\n *   apiKey: 'your_api_key',\n * });\n *\n * const anthropicResponse = await anthropicClient.messages.create({\n *   model: \"claude-3-5-sonnet-20240620\",\n *   max_tokens: 1024,\n *   stream: false,\n *   system,\n *   messages,\n * });\n * ```\n * @param formattedPrompt\n * @returns A partial Anthropic payload.\n */\nfunction convertPromptToAnthropic(formattedPrompt) {\n    const messages = formattedPrompt.toChatMessages();\n    const anthropicBody = (0,_message_inputs_js__WEBPACK_IMPORTED_MODULE_0__._convertMessagesToAnthropicPayload)(messages);\n    if (anthropicBody.messages === undefined) {\n        anthropicBody.messages = [];\n    }\n    return anthropicBody;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL3Byb21wdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyQkFBMkI7QUFDdkMsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFdBQVcsbUJBQW1CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSwwQkFBMEIsc0ZBQWtDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2FudGhyb3BpY0AwLjMuMTNfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfcXdic21vNm1zcXJvM25rMnF3cjRzN2plbG0vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYW50aHJvcGljL2Rpc3QvdXRpbHMvcHJvbXB0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfY29udmVydE1lc3NhZ2VzVG9BbnRocm9waWNQYXlsb2FkIH0gZnJvbSBcIi4vbWVzc2FnZV9pbnB1dHMuanNcIjtcbi8qKlxuICogQ29udmVydCBhIGZvcm1hdHRlZCBMYW5nQ2hhaW4gcHJvbXB0IChlLmcuIHB1bGxlZCBmcm9tIHRoZSBodWIpIGludG9cbiAqIGEgZm9ybWF0IGV4cGVjdGVkIGJ5IEFudGhyb3BpYydzIEpTIFNESy5cbiAqXG4gKiBSZXF1aXJlcyB0aGUgXCJAbGFuZ2NoYWluL2FudGhyb3BpY1wiIHBhY2thZ2UgdG8gYmUgaW5zdGFsbGVkIGluIGFkZGl0aW9uXG4gKiB0byB0aGUgQW50aHJvcGljIFNESy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNvbnZlcnRQcm9tcHRUb0FudGhyb3BpYyB9IGZyb20gXCJsYW5nc21pdGgvdXRpbHMvaHViL2FudGhyb3BpY1wiO1xuICogaW1wb3J0IHsgcHVsbCB9IGZyb20gXCJsYW5nY2hhaW4vaHViXCI7XG4gKlxuICogaW1wb3J0IEFudGhyb3BpYyBmcm9tICdAYW50aHJvcGljLWFpL3Nkayc7XG4gKlxuICogY29uc3QgcHJvbXB0ID0gYXdhaXQgcHVsbChcImphY29iL2pva2UtZ2VuZXJhdG9yXCIpO1xuICogY29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gYXdhaXQgcHJvbXB0Lmludm9rZSh7XG4gKiAgIHRvcGljOiBcImNhdHNcIixcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHsgc3lzdGVtLCBtZXNzYWdlcyB9ID0gY29udmVydFByb21wdFRvQW50aHJvcGljKGZvcm1hdHRlZFByb21wdCk7XG4gKlxuICogY29uc3QgYW50aHJvcGljQ2xpZW50ID0gbmV3IEFudGhyb3BpYyh7XG4gKiAgIGFwaUtleTogJ3lvdXJfYXBpX2tleScsXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBhbnRocm9waWNSZXNwb25zZSA9IGF3YWl0IGFudGhyb3BpY0NsaWVudC5tZXNzYWdlcy5jcmVhdGUoe1xuICogICBtb2RlbDogXCJjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMFwiLFxuICogICBtYXhfdG9rZW5zOiAxMDI0LFxuICogICBzdHJlYW06IGZhbHNlLFxuICogICBzeXN0ZW0sXG4gKiAgIG1lc3NhZ2VzLFxuICogfSk7XG4gKiBgYGBcbiAqIEBwYXJhbSBmb3JtYXR0ZWRQcm9tcHRcbiAqIEByZXR1cm5zIEEgcGFydGlhbCBBbnRocm9waWMgcGF5bG9hZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRQcm9tcHRUb0FudGhyb3BpYyhmb3JtYXR0ZWRQcm9tcHQpIHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IGZvcm1hdHRlZFByb21wdC50b0NoYXRNZXNzYWdlcygpO1xuICAgIGNvbnN0IGFudGhyb3BpY0JvZHkgPSBfY29udmVydE1lc3NhZ2VzVG9BbnRocm9waWNQYXlsb2FkKG1lc3NhZ2VzKTtcbiAgICBpZiAoYW50aHJvcGljQm9keS5tZXNzYWdlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFudGhyb3BpY0JvZHkubWVzc2FnZXMgPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGFudGhyb3BpY0JvZHk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/prompts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/tools.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/tools.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleToolChoice: () => (/* binding */ handleToolChoice)\n/* harmony export */ });\nfunction handleToolChoice(toolChoice) {\n    if (!toolChoice) {\n        return undefined;\n    }\n    else if (toolChoice === \"any\") {\n        return {\n            type: \"any\",\n        };\n    }\n    else if (toolChoice === \"auto\") {\n        return {\n            type: \"auto\",\n        };\n    }\n    else if (typeof toolChoice === \"string\") {\n        return {\n            type: \"tool\",\n            name: toolChoice,\n        };\n    }\n    else {\n        return toolChoice;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxhbmdjaGFpbithbnRocm9waWNAMC4zLjEzX0BsYW5nY2hhaW4rY29yZUAwLjMuNDBfb3BlbmFpQDQuODUuMl93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOV91X3F3YnNtbzZtc3FybzNuazJxd3I0czdqZWxtL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2FudGhyb3BpYy9kaXN0L3V0aWxzL3Rvb2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9mdWppYXdhbmcvRGVza3RvcC9jaGF0Ym90L25vZGVfbW9kdWxlcy8ucG5wbS9AbGFuZ2NoYWluK2FudGhyb3BpY0AwLjMuMTNfQGxhbmdjaGFpbitjb3JlQDAuMy40MF9vcGVuYWlANC44NS4yX3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45X3VfcXdic21vNm1zcXJvM25rMnF3cjRzN2plbG0vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vYW50aHJvcGljL2Rpc3QvdXRpbHMvdG9vbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVRvb2xDaG9pY2UodG9vbENob2ljZSkge1xuICAgIGlmICghdG9vbENob2ljZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbHNlIGlmICh0b29sQ2hvaWNlID09PSBcImFueVwiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImFueVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0b29sQ2hvaWNlID09PSBcImF1dG9cIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJhdXRvXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB0b29sQ2hvaWNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDaG9pY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9vbENob2ljZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/utils/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/index.js":
/*!************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/index.js ***!
  \************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChatAnthropic: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatAnthropic),
/* harmony export */   ChatAnthropicMessages: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatAnthropicMessages),
/* harmony export */   convertPromptToAnthropic: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.convertPromptToAnthropic)
/* harmony export */ });
/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ "(rsc)/./node_modules/.pnpm/@langchain+anthropic@0.3.13_@langchain+core@0.3.40_openai@4.85.2_ws@8.18.0_bufferutil@4.0.9_u_qwbsmo6msqro3nk2qwr4s7jelm/node_modules/@langchain/anthropic/dist/index.js");


/***/ })

};
;